(function($){'use strict';var bootstrapVersion=3;try{bootstrapVersion=parseInt($.fn.dropdown.Constructor.VERSION,10);}catch(e){}
var bs={3:{buttonsClass:'default',iconsPrefix:'glyphicon',icons:{paginationSwitchDown:'glyphicon-collapse-down icon-chevron-down',paginationSwitchUp:'glyphicon-collapse-up icon-chevron-up',refresh:'glyphicon-refresh icon-refresh',toggleOff:'glyphicon-list-alt icon-list-alt',toggleOn:'glyphicon-list-alt icon-list-alt',columns:'glyphicon-th icon-th',detailOpen:'glyphicon-plus icon-plus',detailClose:'glyphicon-minus icon-minus',fullscreen:'glyphicon-fullscreen'},pullClass:'pull',toobarDropdowHtml:['<ul class="dropdown-menu" role="menu">','</ul>'],toobarDropdowItemHtml:'<li role="menuitem"><label>%s</label></li>',pageDropdownHtml:['<ul class="dropdown-menu" role="menu">','</ul>'],pageDropdownItemHtml:'<li role="menuitem" class="%s"><a href="#">%s</a></li>'},4:{buttonsClass:'secondary',iconsPrefix:'fa',icons:{paginationSwitchDown:'fa-toggle-down',paginationSwitchUp:'fa-toggle-up',refresh:'fa-refresh',toggleOff:'fa-toggle-off',toggleOn:'fa-toggle-on',columns:'fa-th-list',detailOpen:'fa-plus',detailClose:'fa-minus',fullscreen:'fa-arrows-alt'},pullClass:'float',toobarDropdowHtml:['<div class="dropdown-menu dropdown-menu-right">','</div>'],toobarDropdowItemHtml:'<label class="dropdown-item">%s</label>',pageDropdownHtml:['<div class="dropdown-menu">','</div>'],pageDropdownItemHtml:'<a class="dropdown-item %s" href="#">%s</a>'}}[bootstrapVersion];var cachedWidth=null;var sprintf=function(str){var args=arguments,flag=true,i=1;str=str.replace(/%s/g,function(){var arg=args[i++];if(typeof arg==='undefined'){flag=false;return'';}
return arg;});return flag?str:'';};var getPropertyFromOther=function(list,from,to,value){var result='';$.each(list,function(i,item){if(item[from]===value){result=item[to];return false;}
return true;});return result;};var setFieldIndex=function(columns){var i,j,k,totalCol=0,flag=[];for(i=0;i<columns[0].length;i++){totalCol+=columns[0][i].colspan||1;}
for(i=0;i<columns.length;i++){flag[i]=[];for(j=0;j<totalCol;j++){flag[i][j]=false;}}
for(i=0;i<columns.length;i++){for(j=0;j<columns[i].length;j++){var r=columns[i][j],rowspan=r.rowspan||1,colspan=r.colspan||1,index=$.inArray(false,flag[i]);if(colspan===1){r.fieldIndex=index;if(typeof r.field==='undefined'){r.field=index;}}
for(k=0;k<rowspan;k++){flag[i+k][index]=true;}
for(k=0;k<colspan;k++){flag[i][index+k]=true;}}}};var getScrollBarWidth=function(){if(cachedWidth===null){var inner=$('<p/>').addClass('fixed-table-scroll-inner'),outer=$('<div/>').addClass('fixed-table-scroll-outer'),w1,w2;outer.append(inner);$('body').append(outer);w1=inner[0].offsetWidth;outer.css('overflow','scroll');w2=inner[0].offsetWidth;if(w1===w2){w2=outer[0].clientWidth;}
outer.remove();cachedWidth=w1-w2;}
return cachedWidth;};var calculateObjectValue=function(self,name,args,defaultValue){var func=name;if(typeof name==='string'){var names=name.split('.');if(names.length>1){func=window;$.each(names,function(i,f){func=func[f];});}else{func=window[name];}}
if(typeof func==='object'){return func;}
if(typeof func==='function'){return func.apply(self,args||[]);}
if(!func&&typeof name==='string'&&sprintf.apply(this,[name].concat(args))){return sprintf.apply(this,[name].concat(args));}
return defaultValue;};var compareObjects=function(objectA,objectB,compareLength){var getOwnPropertyNames=Object.getOwnPropertyNames||function(obj){var arr=[];for(var k in obj){if(obj.hasOwnProperty(k)){arr.push(k);}}
return arr;};var objectAProperties=getOwnPropertyNames(objectA),objectBProperties=getOwnPropertyNames(objectB),propName='';if(compareLength){if(objectAProperties.length!==objectBProperties.length){return false;}}
for(var i=0;i<objectAProperties.length;i++){propName=objectAProperties[i];if($.inArray(propName,objectBProperties)>-1){if(objectA[propName]!==objectB[propName]){return false;}}}
return true;};var escapeHTML=function(text){if(typeof text==='string'){return text.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;').replace(/`/g,'&#x60;');}
return text;};var getRealDataAttr=function(dataAttr){for(var attr in dataAttr){var auxAttr=attr.split(/(?=[A-Z])/).join('-').toLowerCase();if(auxAttr!==attr){dataAttr[auxAttr]=dataAttr[attr];delete dataAttr[attr];}}
return dataAttr;};var getItemField=function(item,field,escape){var value=item;if(typeof field!=='string'||item.hasOwnProperty(field)){return escape?escapeHTML(item[field]):item[field];}
var props=field.split('.');for(var p in props){if(props.hasOwnProperty(p)){value=value&&value[props[p]];}}
return escape?escapeHTML(value):value;};var isIEBrowser=function(){return!!(navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./));};var objectKeys=function(){if(!Object.keys){Object.keys=(function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!({toString:null}).propertyIsEnumerable('toString'),dontEnums=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'],dontEnumsLength=dontEnums.length;return function(obj){if(typeof obj!=='object'&&(typeof obj!=='function'||obj===null)){throw new TypeError('Object.keys called on non-object');}
var result=[],prop,i;for(prop in obj){if(hasOwnProperty.call(obj,prop)){result.push(prop);}}
if(hasDontEnumBug){for(i=0;i<dontEnumsLength;i++){if(hasOwnProperty.call(obj,dontEnums[i])){result.push(dontEnums[i]);}}}
return result;};}());}};var BootstrapTable=function(el,options){this.options=options;this.$el=$(el);this.$el_=this.$el.clone();this.timeoutId_=0;this.timeoutFooter_=0;this.init();};BootstrapTable.DEFAULTS={classes:'table table-hover',sortClass:undefined,locale:undefined,height:undefined,undefinedText:'-',sortName:undefined,sortOrder:'asc',sortStable:false,rememberOrder:false,striped:false,columns:[[]],data:[],totalField:'total',dataField:'rows',method:'get',url:undefined,ajax:undefined,cache:true,contentType:'application/json',dataType:'json',ajaxOptions:{},queryParams:function(params){return params;},queryParamsType:'limit',responseHandler:function(res){return res;},pagination:false,onlyInfoPagination:false,paginationLoop:true,sidePagination:'client',totalRows:0,pageNumber:1,pageSize:10,pageList:[10,25,50,100],paginationHAlign:'right',paginationVAlign:'bottom',paginationDetailHAlign:'left',paginationPreText:'&lsaquo;',paginationNextText:'&rsaquo;',search:false,searchOnEnterKey:false,strictSearch:false,searchAlign:'right',selectItemName:'btSelectItem',showHeader:true,showFooter:false,showColumns:false,showPaginationSwitch:false,showRefresh:false,showToggle:false,showFullscreen:false,smartDisplay:true,escape:false,minimumCountColumns:1,idField:undefined,uniqueId:undefined,cardView:false,detailView:false,detailFormatter:function(index,row){return'';},detailFilter:function(index,row){return true;},trimOnSearch:true,clickToSelect:false,singleSelect:false,toolbar:undefined,toolbarAlign:'left',buttonsToolbar:undefined,buttonsAlign:'right',checkboxHeader:true,sortable:true,silentSort:true,maintainSelected:false,searchTimeOut:500,searchText:'',iconSize:undefined,buttonsClass:bs.buttonsClass,iconsPrefix:bs.iconsPrefix,icons:bs.icons,customSearch:$.noop,customSort:$.noop,ignoreClickToSelectOn:function(element){return $.inArray(element.tagName,['A','BUTTON']);},rowStyle:function(row,index){return{};},rowAttributes:function(row,index){return{};},footerStyle:function(row,index){return{};},onAll:function(name,args){return false;},onClickCell:function(field,value,row,$element){return false;},onDblClickCell:function(field,value,row,$element){return false;},onClickRow:function(item,$element){return false;},onDblClickRow:function(item,$element){return false;},onSort:function(name,order){return false;},onCheck:function(row){return false;},onUncheck:function(row){return false;},onCheckAll:function(rows){return false;},onUncheckAll:function(rows){return false;},onCheckSome:function(rows){return false;},onUncheckSome:function(rows){return false;},onLoadSuccess:function(data){return false;},onLoadError:function(status){return false;},onColumnSwitch:function(field,checked){return false;},onPageChange:function(number,size){return false;},onSearch:function(text){return false;},onToggle:function(cardView){return false;},onPreBody:function(data){return false;},onPostBody:function(){return false;},onPostHeader:function(){return false;},onExpandRow:function(index,row,$detail){return false;},onCollapseRow:function(index,row){return false;},onRefreshOptions:function(options){return false;},onRefresh:function(params){return false;},onResetView:function(){return false;},onScrollBody:function(){return false;}};BootstrapTable.LOCALES={};BootstrapTable.LOCALES['en-US']=BootstrapTable.LOCALES.en={formatLoadingMessage:function(){return'Loading, please wait...';},formatRecordsPerPage:function(pageNumber){return sprintf('%s rows per page',pageNumber);},formatShowingRows:function(pageFrom,pageTo,totalRows){return sprintf('Showing %s to %s of %s rows',pageFrom,pageTo,totalRows);},formatDetailPagination:function(totalRows){return sprintf('Showing %s rows',totalRows);},formatSearch:function(){return'Search';},formatNoMatches:function(){return'No matching records found';},formatPaginationSwitch:function(){return'Hide/Show pagination';},formatRefresh:function(){return'Refresh';},formatToggle:function(){return'Toggle';},formatFullscreen:function(){return'Fullscreen';},formatColumns:function(){return'Columns';},formatAllRows:function(){return'All';}};$.extend(BootstrapTable.DEFAULTS,BootstrapTable.LOCALES['en-US']);BootstrapTable.COLUMN_DEFAULTS={radio:false,checkbox:false,checkboxEnabled:true,field:undefined,title:undefined,titleTooltip:undefined,'class':undefined,align:undefined,halign:undefined,falign:undefined,valign:undefined,width:undefined,sortable:false,order:'asc',visible:true,switchable:true,clickToSelect:true,formatter:undefined,footerFormatter:undefined,events:undefined,sorter:undefined,sortName:undefined,cellStyle:undefined,searchable:true,searchFormatter:true,cardVisible:true,escape:false,showSelectTitle:false};BootstrapTable.EVENTS={'all.bs.table':'onAll','click-cell.bs.table':'onClickCell','dbl-click-cell.bs.table':'onDblClickCell','click-row.bs.table':'onClickRow','dbl-click-row.bs.table':'onDblClickRow','sort.bs.table':'onSort','check.bs.table':'onCheck','uncheck.bs.table':'onUncheck','check-all.bs.table':'onCheckAll','uncheck-all.bs.table':'onUncheckAll','check-some.bs.table':'onCheckSome','uncheck-some.bs.table':'onUncheckSome','load-success.bs.table':'onLoadSuccess','load-error.bs.table':'onLoadError','column-switch.bs.table':'onColumnSwitch','page-change.bs.table':'onPageChange','search.bs.table':'onSearch','toggle.bs.table':'onToggle','pre-body.bs.table':'onPreBody','post-body.bs.table':'onPostBody','post-header.bs.table':'onPostHeader','expand-row.bs.table':'onExpandRow','collapse-row.bs.table':'onCollapseRow','refresh-options.bs.table':'onRefreshOptions','reset-view.bs.table':'onResetView','refresh.bs.table':'onRefresh','scroll-body.bs.table':'onScrollBody'};BootstrapTable.prototype.init=function(){this.initLocale();this.initContainer();this.initTable();this.initHeader();this.initData();this.initHiddenRows();this.initFooter();this.initToolbar();this.initPagination();this.initBody();this.initSearchText();this.initServer();};BootstrapTable.prototype.initLocale=function(){if(this.options.locale){var parts=this.options.locale.split(/-|_/);parts[0].toLowerCase();if(parts[1]){parts[1].toUpperCase();}
if($.fn.bootstrapTable.locales[this.options.locale]){$.extend(this.options,$.fn.bootstrapTable.locales[this.options.locale]);}else if($.fn.bootstrapTable.locales[parts.join('-')]){$.extend(this.options,$.fn.bootstrapTable.locales[parts.join('-')]);}else if($.fn.bootstrapTable.locales[parts[0]]){$.extend(this.options,$.fn.bootstrapTable.locales[parts[0]]);}}};BootstrapTable.prototype.initContainer=function(){this.$container=$(['<div class="bootstrap-table">','<div class="fixed-table-toolbar"></div>',this.options.paginationVAlign==='top'||this.options.paginationVAlign==='both'?'<div class="fixed-table-pagination" style="clear: both;"></div>':'','<div class="fixed-table-container">','<div class="fixed-table-header"><table></table></div>','<div class="fixed-table-body">','<div class="fixed-table-loading">',this.options.formatLoadingMessage(),'</div>','</div>','<div class="fixed-table-footer"><table><tr></tr></table></div>','</div>',this.options.paginationVAlign==='bottom'||this.options.paginationVAlign==='both'?'<div class="fixed-table-pagination"></div>':'','</div>'].join(''));this.$container.insertAfter(this.$el);this.$tableContainer=this.$container.find('.fixed-table-container');this.$tableHeader=this.$container.find('.fixed-table-header');this.$tableBody=this.$container.find('.fixed-table-body');this.$tableLoading=this.$container.find('.fixed-table-loading');this.$tableFooter=this.$container.find('.fixed-table-footer');if(this.options.buttonsToolbar){this.$toolbar=$('body').find(this.options.buttonsToolbar);}else{this.$toolbar=this.$container.find('.fixed-table-toolbar');}
this.$pagination=this.$container.find('.fixed-table-pagination');this.$tableBody.append(this.$el);this.$container.after('<div class="clearfix"></div>');this.$el.addClass(this.options.classes);if(this.options.striped){this.$el.addClass('table-striped');}
if($.inArray('table-no-bordered',this.options.classes.split(' '))!==-1){this.$tableContainer.addClass('table-no-bordered');}};BootstrapTable.prototype.initTable=function(){var that=this,columns=[],data=[];this.$header=this.$el.find('>thead');if(!this.$header.length){this.$header=$('<thead></thead>').appendTo(this.$el);}
this.$header.find('tr').each(function(){var column=[];$(this).find('th').each(function(){if(typeof $(this).data('field')!=='undefined'){$(this).data('field',$(this).data('field')+'');}
column.push($.extend({},{title:$(this).html(),'class':$(this).attr('class'),titleTooltip:$(this).attr('title'),rowspan:$(this).attr('rowspan')?+$(this).attr('rowspan'):undefined,colspan:$(this).attr('colspan')?+$(this).attr('colspan'):undefined},$(this).data()));});columns.push(column);});if(!$.isArray(this.options.columns[0])){this.options.columns=[this.options.columns];}
this.options.columns=$.extend(true,[],columns,this.options.columns);this.columns=[];this.fieldsColumnsIndex=[];setFieldIndex(this.options.columns);$.each(this.options.columns,function(i,columns){$.each(columns,function(j,column){column=$.extend({},BootstrapTable.COLUMN_DEFAULTS,column);if(typeof column.fieldIndex!=='undefined'){that.columns[column.fieldIndex]=column;that.fieldsColumnsIndex[column.field]=column.fieldIndex;}
that.options.columns[i][j]=column;});});if(this.options.data.length){return;}
var m=[];this.$el.find('>tbody>tr').each(function(y){var row={};row._id=$(this).attr('id');row._class=$(this).attr('class');row._data=getRealDataAttr($(this).data());$(this).find('>td').each(function(x){var $this=$(this),cspan=+$this.attr('colspan')||1,rspan=+$this.attr('rowspan')||1,tx,ty;for(;m[y]&&m[y][x];x++);for(tx=x;tx<x+cspan;tx++){for(ty=y;ty<y+rspan;ty++){if(!m[ty]){m[ty]=[];}
m[ty][tx]=true;}}
var field=that.columns[x].field;row[field]=$(this).html();row['_'+field+'_id']=$(this).attr('id');row['_'+field+'_class']=$(this).attr('class');row['_'+field+'_rowspan']=$(this).attr('rowspan');row['_'+field+'_colspan']=$(this).attr('colspan');row['_'+field+'_title']=$(this).attr('title');row['_'+field+'_data']=getRealDataAttr($(this).data());});data.push(row);});this.options.data=data;if(data.length)this.fromHtml=true;};BootstrapTable.prototype.initHeader=function(){var that=this,visibleColumns={},html=[];this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],sortNames:[],cellStyles:[],searchables:[]};$.each(this.options.columns,function(i,columns){html.push('<tr>');if(i===0&&!that.options.cardView&&that.options.detailView){html.push(sprintf('<th class="detail" rowspan="%s"><div class="fht-cell"></div></th>',that.options.columns.length));}
$.each(columns,function(j,column){var text='',halign='',align='',style='',class_=sprintf(' class="%s"',column['class']),order=that.options.sortOrder||column.order,unitWidth='px',width=column.width;if(column.width!==undefined&&(!that.options.cardView)){if(typeof column.width==='string'){if(column.width.indexOf('%')!==-1){unitWidth='%';}}}
if(column.width&&typeof column.width==='string'){width=column.width.replace('%','').replace('px','');}
halign=sprintf('text-align: %s; ',column.halign?column.halign:column.align);align=sprintf('text-align: %s; ',column.align);style=sprintf('vertical-align: %s; ',column.valign);style+=sprintf('width: %s; ',(column.checkbox||column.radio)&&!width?(!column.showSelectTitle?'36px':undefined):(width?width+unitWidth:undefined));if(typeof column.fieldIndex!=='undefined'){that.header.fields[column.fieldIndex]=column.field;that.header.styles[column.fieldIndex]=align+style;that.header.classes[column.fieldIndex]=class_;that.header.formatters[column.fieldIndex]=column.formatter;that.header.events[column.fieldIndex]=column.events;that.header.sorters[column.fieldIndex]=column.sorter;that.header.sortNames[column.fieldIndex]=column.sortName;that.header.cellStyles[column.fieldIndex]=column.cellStyle;that.header.searchables[column.fieldIndex]=column.searchable;if(!column.visible){return;}
if(that.options.cardView&&(!column.cardVisible)){return;}
visibleColumns[column.field]=column;}
html.push('<th'+sprintf(' title="%s"',column.titleTooltip),column.checkbox||column.radio?sprintf(' class="bs-checkbox %s"',column['class']||''):class_,sprintf(' style="%s"',halign+style),sprintf(' rowspan="%s"',column.rowspan),sprintf(' colspan="%s"',column.colspan),sprintf(' data-field="%s"',column.field),j===0&&column.fieldIndex?' data-not-first-th':'','>');html.push(sprintf('<div class="th-inner %s">',that.options.sortable&&column.sortable?'sortable both':''));text=that.options.escape?escapeHTML(column.title):column.title;var title=text;if(column.checkbox){text='';if(!that.options.singleSelect&&that.options.checkboxHeader){text='<input name="btSelectAll" type="checkbox" />';}
that.header.stateField=column.field;}
if(column.radio){text='';that.header.stateField=column.field;that.options.singleSelect=true;}
if(!text&&column.showSelectTitle){text+=title;}
html.push(text);html.push('</div>');html.push('<div class="fht-cell"></div>');html.push('</div>');html.push('</th>');});html.push('</tr>');});this.$header.html(html.join(''));this.$header.find('th[data-field]').each(function(i){$(this).data(visibleColumns[$(this).data('field')]);});this.$container.off('click','.th-inner').on('click','.th-inner',function(event){var $this=$(this);if(that.options.detailView&&!$this.parent().hasClass('bs-checkbox')){if($this.closest('.bootstrap-table')[0]!==that.$container[0]){return false;}}
if(that.options.sortable&&$this.parent().data().sortable){that.onSort(event);}});this.$header.children().children().off('keypress').on('keypress',function(event){if(that.options.sortable&&$(this).data().sortable){var code=event.keyCode||event.which;if(code==13){that.onSort(event);}}});$(window).off('resize.bootstrap-table');if(!this.options.showHeader||this.options.cardView){this.$header.hide();this.$tableHeader.hide();this.$tableLoading.css('top',0);}else{this.$header.show();this.$tableHeader.show();this.$tableLoading.css('top',this.$header.outerHeight()+1);this.getCaret();$(window).on('resize.bootstrap-table',$.proxy(this.resetWidth,this));}
this.$selectAll=this.$header.find('[name="btSelectAll"]');this.$selectAll.off('click').on('click',function(){var checked=$(this).prop('checked');that[checked?'checkAll':'uncheckAll']();that.updateSelected();});};BootstrapTable.prototype.initFooter=function(){if(!this.options.showFooter||this.options.cardView){this.$tableFooter.hide();}else{this.$tableFooter.show();}};BootstrapTable.prototype.initData=function(data,type){if(type==='append'){this.options.data=this.options.data.concat(data);}else if(type==='prepend'){this.options.data=[].concat(data).concat(this.options.data);}else{this.options.data=data||this.options.data;}
this.data=this.options.data;if(this.options.sidePagination==='server'){return;}
this.initSort();};BootstrapTable.prototype.initSort=function(){var that=this,name=this.options.sortName,order=this.options.sortOrder==='desc'?-1:1,index=$.inArray(this.options.sortName,this.header.fields),timeoutId=0;if(this.options.customSort!==$.noop){this.options.customSort.apply(this,[this.options.sortName,this.options.sortOrder]);return;}
if(index!==-1){if(this.options.sortStable){$.each(this.data,function(i,row){row._position=i;});}
this.data.sort(function(a,b){if(that.header.sortNames[index]){name=that.header.sortNames[index];}
var aa=getItemField(a,name,that.options.escape),bb=getItemField(b,name,that.options.escape),value=calculateObjectValue(that.header,that.header.sorters[index],[aa,bb,a,b]);if(value!==undefined){if(that.options.sortStable&&value===0){return a._position-b._position;}
return order*value;}
if(aa===undefined||aa===null){aa='';}
if(bb===undefined||bb===null){bb='';}
if(that.options.sortStable&&aa===bb){aa=a._position;bb=b._position;return a._position-b._position;}
if($.isNumeric(aa)&&$.isNumeric(bb)){aa=parseFloat(aa);bb=parseFloat(bb);if(aa<bb){return order*-1;}
return order;}
if(aa===bb){return 0;}
if(typeof aa!=='string'){aa=aa.toString();}
if(aa.localeCompare(bb)===-1){return order*-1;}
return order;});if(this.options.sortClass!==undefined){clearTimeout(timeoutId);timeoutId=setTimeout(function(){that.$el.removeClass(that.options.sortClass);var index=that.$header.find(sprintf('[data-field="%s"]',that.options.sortName).index()+1);that.$el.find(sprintf('tr td:nth-child(%s)',index)).addClass(that.options.sortClass);},250);}}};BootstrapTable.prototype.onSort=function(event){var $this=event.type==="keypress"?$(event.currentTarget):$(event.currentTarget).parent(),$this_=this.$header.find('th').eq($this.index());this.$header.add(this.$header_).find('span.order').remove();if(this.options.sortName===$this.data('field')){this.options.sortOrder=this.options.sortOrder==='asc'?'desc':'asc';}else{this.options.sortName=$this.data('field');if(this.options.rememberOrder){this.options.sortOrder=$this.data('order')==='asc'?'desc':'asc';}else{this.options.sortOrder=this.columns[this.fieldsColumnsIndex[$this.data('field')]].order;}}
this.trigger('sort',this.options.sortName,this.options.sortOrder);$this.add($this_).data('order',this.options.sortOrder);this.getCaret();if(this.options.sidePagination==='server'){this.initServer(this.options.silentSort);return;}
this.initSort();this.initBody();};BootstrapTable.prototype.initToolbar=function(){var that=this,html=[],timeoutId=0,$keepOpen,$search,switchableCount=0;if(this.$toolbar.find('.bs-bars').children().length){$('body').append($(this.options.toolbar));}
this.$toolbar.html('');if(typeof this.options.toolbar==='string'||typeof this.options.toolbar==='object'){$(sprintf('<div class="bs-bars %s-%s"></div>',bs.pullClass,this.options.toolbarAlign)).appendTo(this.$toolbar).append($(this.options.toolbar));}
html=[sprintf('<div class="columns columns-%s btn-group %s-%s">',this.options.buttonsAlign,bs.pullClass,this.options.buttonsAlign)];if(typeof this.options.icons==='string'){this.options.icons=calculateObjectValue(null,this.options.icons);}
if(this.options.showPaginationSwitch){html.push(sprintf('<button class="btn'+
sprintf(' btn-%s',this.options.buttonsClass)+
sprintf(' btn-%s',this.options.iconSize)+
'" type="button" name="paginationSwitch" aria-label="pagination Switch" title="%s">',this.options.formatPaginationSwitch()),sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),'</button>');}
if(this.options.showFullscreen){this.$toolbar.find('button[name="fullscreen"]').off('click').on('click',$.proxy(this.toggleFullscreen,this));}
if(this.options.showRefresh){html.push(sprintf('<button class="btn'+
sprintf(' btn-%s',this.options.buttonsClass)+
sprintf(' btn-%s',this.options.iconSize)+
'" type="button" name="refresh" aria-label="refresh" title="%s">',this.options.formatRefresh()),sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.refresh),'</button>');}
if(this.options.showToggle){html.push(sprintf('<button class="btn'+
sprintf(' btn-%s',this.options.buttonsClass)+
sprintf(' btn-%s',this.options.iconSize)+
'" type="button" name="toggle" aria-label="toggle" title="%s">',this.options.formatToggle()),sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.toggleOff),'</button>');}
if(this.options.showFullscreen){html.push(sprintf('<button class="btn'+
sprintf(' btn-%s',this.options.buttonsClass)+
sprintf(' btn-%s',this.options.iconSize)+
'" type="button" name="fullscreen" aria-label="fullscreen" title="%s">',this.options.formatFullscreen()),sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.fullscreen),'</button>');}
if(this.options.showColumns){html.push(sprintf('<div class="keep-open btn-group" title="%s">',this.options.formatColumns()),'<button type="button" aria-label="columns" class="btn'+
sprintf(' btn-%s',this.options.buttonsClass)+
sprintf(' btn-%s',this.options.iconSize)+
' dropdown-toggle" data-toggle="dropdown">',sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"></span>','</button>',bs.toobarDropdowHtml[0]);$.each(this.columns,function(i,column){if(column.radio||column.checkbox){return;}
if(that.options.cardView&&!column.cardVisible){return;}
var checked=column.visible?' checked="checked"':'';if(column.switchable){html.push(sprintf(bs.toobarDropdowItemHtml,sprintf('<input type="checkbox" data-field="%s" value="%s"%s> %s',column.field,i,checked,column.title)));switchableCount++;}});html.push(bs.toobarDropdowHtml[1],'</div>');}
html.push('</div>');if(this.showToolbar||html.length>2){this.$toolbar.append(html.join(''));}
if(this.options.showPaginationSwitch){this.$toolbar.find('button[name="paginationSwitch"]').off('click').on('click',$.proxy(this.togglePagination,this));}
if(this.options.showRefresh){this.$toolbar.find('button[name="refresh"]').off('click').on('click',$.proxy(this.refresh,this));}
if(this.options.showToggle){this.$toolbar.find('button[name="toggle"]').off('click').on('click',function(){that.toggleView();});}
if(this.options.showColumns){$keepOpen=this.$toolbar.find('.keep-open');if(switchableCount<=this.options.minimumCountColumns){$keepOpen.find('input').prop('disabled',true);}
$keepOpen.find('li').off('click').on('click',function(event){event.stopImmediatePropagation();});$keepOpen.find('input').off('click').on('click',function(){var $this=$(this);that.toggleColumn($(this).val(),$this.prop('checked'),false);that.trigger('column-switch',$(this).data('field'),$this.prop('checked'));});}
if(this.options.search){html=[];html.push(sprintf('<div class="%s-%s search">',bs.pullClass,this.options.searchAlign),sprintf('<input class="form-control'+
sprintf(' input-%s',this.options.iconSize)+
'" type="text" placeholder="%s">',this.options.formatSearch()),'</div>');this.$toolbar.append(html.join(''));$search=this.$toolbar.find('.search input');$search.off('keyup drop blur').on('keyup drop blur',function(event){if(that.options.searchOnEnterKey&&event.keyCode!==13){return;}
if($.inArray(event.keyCode,[37,38,39,40])>-1){return;}
clearTimeout(timeoutId);timeoutId=setTimeout(function(){that.onSearch(event);},that.options.searchTimeOut);});if(isIEBrowser()){$search.off('mouseup').on('mouseup',function(event){clearTimeout(timeoutId);timeoutId=setTimeout(function(){that.onSearch(event);},that.options.searchTimeOut);});}}};BootstrapTable.prototype.onSearch=function(event){var text=$.trim($(event.currentTarget).val());if(this.options.trimOnSearch&&$(event.currentTarget).val()!==text){$(event.currentTarget).val(text);}
if(text===this.searchText){return;}
this.searchText=text;this.options.searchText=text;this.options.pageNumber=1;this.initSearch();if(event.firedByInitSearchText){if(this.options.sidePagination==='client'){this.updatePagination();}}else{this.updatePagination();}
this.trigger('search',text);};BootstrapTable.prototype.initSearch=function(){var that=this;if(this.options.sidePagination!=='server'){if(this.options.customSearch!==$.noop){window[this.options.customSearch].apply(this,[this.searchText]);return;}
var s=this.searchText&&(this.options.escape?escapeHTML(this.searchText):this.searchText).toLowerCase();var f=$.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=f?$.grep(this.options.data,function(item,i){for(var key in f){if($.isArray(f[key])&&$.inArray(item[key],f[key])===-1||!$.isArray(f[key])&&item[key]!==f[key]){return false;}}
return true;}):this.options.data;this.data=s?$.grep(this.data,function(item,i){for(var j=0;j<that.header.fields.length;j++){if(!that.header.searchables[j]){continue;}
var key=$.isNumeric(that.header.fields[j])?parseInt(that.header.fields[j],10):that.header.fields[j];var column=that.columns[that.fieldsColumnsIndex[key]];var value;if(typeof key==='string'){value=item;var props=key.split('.');for(var prop_index=0;prop_index<props.length;prop_index++){value=value[props[prop_index]].replace(/<(?:.|\n)*?>/gm,'');}
if(column&&column.searchFormatter){value=calculateObjectValue(column,that.header.formatters[j],[value,item,i],value);}}else{value=item[key];}
if(typeof value==='string'||typeof value==='number'){if(that.options.strictSearch){if((value+'').toLowerCase()===s){return true;}}else{if((value+'').toLowerCase().indexOf(s)!==-1){return true;}}}}
return false;}):this.data;}};BootstrapTable.prototype.initPagination=function(){if(!this.options.pagination){this.$pagination.hide();return;}else{this.$pagination.show();}
var that=this,html=[],$allSelected=false,i,from,to,$pageList,$pre,$next,$number,data=this.getData(),pageList=this.options.pageList;if(this.options.sidePagination!=='server'){this.options.totalRows=data.length;}
this.totalPages=0;if(this.options.totalRows){if(this.options.pageSize===this.options.formatAllRows()){this.options.pageSize=this.options.totalRows;$allSelected=true;}else if(this.options.pageSize===this.options.totalRows){var pageLst=typeof this.options.pageList==='string'?this.options.pageList.replace('[','').replace(']','').replace(/ /g,'').toLowerCase().split(','):this.options.pageList;if($.inArray(this.options.formatAllRows().toLowerCase(),pageLst)>-1){$allSelected=true;}}
this.totalPages=~~((this.options.totalRows-1)/this.options.pageSize)+1;this.options.totalPages=this.totalPages;}
if(this.totalPages>0&&this.options.pageNumber>this.totalPages){this.options.pageNumber=this.totalPages;}
this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1;this.pageTo=this.options.pageNumber*this.options.pageSize;if(this.pageTo>this.options.totalRows){this.pageTo=this.options.totalRows;}
html.push(sprintf('<div class="%s-%s pagination-detail">',bs.pullClass,this.options.paginationDetailHAlign),'<span class="pagination-info">',this.options.onlyInfoPagination?this.options.formatDetailPagination(this.options.totalRows):this.options.formatShowingRows(this.pageFrom,this.pageTo,this.options.totalRows),'</span>');if(!this.options.onlyInfoPagination){html.push('<span class="page-list">');var pageNumber=[sprintf('<span class="btn-group %s">',this.options.paginationVAlign==='top'||this.options.paginationVAlign==='both'?'dropdown':'dropup'),'<button type="button" class="btn'+
sprintf(' btn-%s',this.options.buttonsClass)+
sprintf(' btn-%s',this.options.iconSize)+
' dropdown-toggle" data-toggle="dropdown">','<span class="page-size">',$allSelected?this.options.formatAllRows():this.options.pageSize,'</span>',' <span class="caret"></span>','</button>',bs.pageDropdownHtml[0]];if(typeof this.options.pageList==='string'){var list=this.options.pageList.replace('[','').replace(']','').replace(/ /g,'').split(',');pageList=[];$.each(list,function(i,value){pageList.push((value.toUpperCase()===that.options.formatAllRows().toUpperCase()||value.toUpperCase()==="UNLIMITED")?that.options.formatAllRows():+value);});}
$.each(pageList,function(i,page){if(!that.options.smartDisplay||i===0||pageList[i-1]<that.options.totalRows){var active;if($allSelected){active=page===that.options.formatAllRows()?'active':'';}else{active=page===that.options.pageSize?'active':'';}
pageNumber.push(sprintf(bs.pageDropdownItemHtml,active,page));}});pageNumber.push(bs.pageDropdownHtml[1]+'</span>');html.push(this.options.formatRecordsPerPage(pageNumber.join('')));html.push('</span>');html.push('</div>',sprintf('<div class="%s-%s pagination">',bs.pullClass,this.options.paginationHAlign),'<ul class="pagination'+sprintf(' pagination-%s',this.options.iconSize)+'">',sprintf('<li class="page-item page-pre"><a class="page-link" href="#">%s</a></li>',this.options.paginationPreText));if(this.totalPages<5){from=1;to=this.totalPages;}else{from=this.options.pageNumber-2;to=from+4;if(from<1){from=1;to=5;}
if(to>this.totalPages){to=this.totalPages;from=to-4;}}
if(this.totalPages>=6){if(this.options.pageNumber>=3){html.push(sprintf('<li class="page-item page-first%s">',1===this.options.pageNumber?' active':''),'<a class="page-link" href="#">',1,'</a>','</li>');from++;}
if(this.options.pageNumber>=4){if(this.options.pageNumber==4||this.totalPages==6||this.totalPages==7){from--;}else{html.push('<li class="page-item page-first-separator disabled">','<a class="page-link" href="#">...</a>','</li>');}
to--;}}
if(this.totalPages>=7){if(this.options.pageNumber>=(this.totalPages-2)){from--;}}
if(this.totalPages==6){if(this.options.pageNumber>=(this.totalPages-2)){to++;}}else if(this.totalPages>=7){if(this.totalPages==7||this.options.pageNumber>=(this.totalPages-3)){to++;}}
for(i=from;i<=to;i++){html.push(sprintf('<li class="page-item%s">',i===this.options.pageNumber?' active':''),'<a class="page-link" href="#">',i,'</a>','</li>');}
if(this.totalPages>=8){if(this.options.pageNumber<=(this.totalPages-4)){html.push('<li class="page-item page-last-separator disabled">','<a class="page-link" href="#">...</a>','</li>');}}
if(this.totalPages>=6){if(this.options.pageNumber<=(this.totalPages-3)){html.push(sprintf('<li class="page-item page-last%s">',this.totalPages===this.options.pageNumber?' active':''),'<a class="page-link" href="#">',this.totalPages,'</a>','</li>');}}
html.push(sprintf('<li class="page-item page-next"><a class="page-link" href="#">%s</a></li>',this.options.paginationNextText),'</ul>','</div>');}
this.$pagination.html(html.join(''));if(!this.options.onlyInfoPagination){$pageList=this.$pagination.find('.page-list a');$pre=this.$pagination.find('.page-pre');$next=this.$pagination.find('.page-next');$number=this.$pagination.find('.page-item').not('.page-next, .page-pre');if(this.options.smartDisplay){if(this.totalPages<=1){this.$pagination.find('div.pagination').hide();}
if(pageList.length<2||this.options.totalRows<=pageList[0]){this.$pagination.find('span.page-list').hide();}
this.$pagination[this.getData().length?'show':'hide']();}
if(!this.options.paginationLoop){if(this.options.pageNumber===1){$pre.addClass('disabled');}
if(this.options.pageNumber===this.totalPages){$next.addClass('disabled');}}
if($allSelected){this.options.pageSize=this.options.formatAllRows();}
$pageList.off('click').on('click',$.proxy(this.onPageListChange,this));$pre.off('click').on('click',$.proxy(this.onPagePre,this));$next.off('click').on('click',$.proxy(this.onPageNext,this));$number.off('click').on('click',$.proxy(this.onPageNumber,this));}};BootstrapTable.prototype.updatePagination=function(event){if(event&&$(event.currentTarget).hasClass('disabled')){return;}
if(!this.options.maintainSelected){this.resetRows();}
this.initPagination();if(this.options.sidePagination==='server'){this.initServer();}else{this.initBody();}
this.trigger('page-change',this.options.pageNumber,this.options.pageSize);};BootstrapTable.prototype.onPageListChange=function(event){event.preventDefault();var $this=$(event.currentTarget);$this.parent().addClass('active').siblings().removeClass('active');this.options.pageSize=$this.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+$this.text();this.$toolbar.find('.page-size').text(this.options.pageSize);this.updatePagination(event);return false;};BootstrapTable.prototype.onPagePre=function(event){event.preventDefault();if((this.options.pageNumber-1)===0){this.options.pageNumber=this.options.totalPages;}else{this.options.pageNumber--;}
this.updatePagination(event);return false;};BootstrapTable.prototype.onPageNext=function(event){event.preventDefault();if((this.options.pageNumber+1)>this.options.totalPages){this.options.pageNumber=1;}else{this.options.pageNumber++;}
this.updatePagination(event);return false;};BootstrapTable.prototype.onPageNumber=function(event){event.preventDefault();if(this.options.pageNumber===+$(event.currentTarget).text()){return;}
this.options.pageNumber=+$(event.currentTarget).text();this.updatePagination(event);return false;};BootstrapTable.prototype.initRow=function(item,i,data,parentDom){var that=this,key,html=[],style={},csses=[],data_='',attributes={},htmlAttributes=[];if($.inArray(item,this.hiddenRows)>-1){return;}
style=calculateObjectValue(this.options,this.options.rowStyle,[item,i],style);if(style&&style.css){for(key in style.css){csses.push(key+': '+style.css[key]);}}
attributes=calculateObjectValue(this.options,this.options.rowAttributes,[item,i],attributes);if(attributes){for(key in attributes){htmlAttributes.push(sprintf('%s="%s"',key,escapeHTML(attributes[key])));}}
if(item._data&&!$.isEmptyObject(item._data)){$.each(item._data,function(k,v){if(k==='index'){return;}
data_+=sprintf(' data-%s="%s"',k,v);});}
html.push('<tr',sprintf(' %s',htmlAttributes.join(' ')),sprintf(' id="%s"',$.isArray(item)?undefined:item._id),sprintf(' class="%s"',style.classes||($.isArray(item)?undefined:item._class)),sprintf(' data-index="%s"',i),sprintf(' data-uniqueid="%s"',item[this.options.uniqueId]),sprintf('%s',data_),'>');if(this.options.cardView){html.push(sprintf('<td colspan="%s"><div class="card-views">',this.header.fields.length));}
if(!this.options.cardView&&this.options.detailView){html.push('<td>');if(calculateObjectValue(null,this.options.detailFilter,[i,item])){html.push('<a class="detail-icon" href="#">',sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.detailOpen),'</a>');}
html.push('</td>');}
$.each(this.header.fields,function(j,field){var text='',value_=getItemField(item,field,that.options.escape),value='',type='',cellStyle={},id_='',class_=that.header.classes[j],data_='',rowspan_='',colspan_='',title_='',column=that.columns[j];if(that.fromHtml&&typeof value_==='undefined'){if((!column.checkbox)&&(!column.radio)){return;}}
if(!column.visible){return;}
if(that.options.cardView&&(!column.cardVisible)){return;}
if(column.escape){value_=escapeHTML(value_);}
style=sprintf('style="%s"',csses.concat(that.header.styles[j]).join('; '));if(item['_'+field+'_id']){id_=sprintf(' id="%s"',item['_'+field+'_id']);}
if(item['_'+field+'_class']){class_=sprintf(' class="%s"',item['_'+field+'_class']);}
if(item['_'+field+'_rowspan']){rowspan_=sprintf(' rowspan="%s"',item['_'+field+'_rowspan']);}
if(item['_'+field+'_colspan']){colspan_=sprintf(' colspan="%s"',item['_'+field+'_colspan']);}
if(item['_'+field+'_title']){title_=sprintf(' title="%s"',item['_'+field+'_title']);}
cellStyle=calculateObjectValue(that.header,that.header.cellStyles[j],[value_,item,i,field],cellStyle);if(cellStyle.classes){class_=sprintf(' class="%s"',cellStyle.classes);}
if(cellStyle.css){var csses_=[];for(var key in cellStyle.css){csses_.push(key+': '+cellStyle.css[key]);}
style=sprintf('style="%s"',csses_.concat(that.header.styles[j]).join('; '));}
value=calculateObjectValue(column,that.header.formatters[j],[value_,item,i,field],value_);if(item['_'+field+'_data']&&!$.isEmptyObject(item['_'+field+'_data'])){$.each(item['_'+field+'_data'],function(k,v){if(k==='index'){return;}
data_+=sprintf(' data-%s="%s"',k,v);});}
if(column.checkbox||column.radio){type=column.checkbox?'checkbox':type;type=column.radio?'radio':type;text=[sprintf(that.options.cardView?'<div class="card-view %s">':'<td class="bs-checkbox %s">',column['class']||''),'<input'+
sprintf(' data-index="%s"',i)+
sprintf(' name="%s"',that.options.selectItemName)+
sprintf(' type="%s"',type)+
sprintf(' value="%s"',item[that.options.idField])+
sprintf(' checked="%s"',value===true||(value_||value&&value.checked)?'checked':undefined)+
sprintf(' disabled="%s"',!column.checkboxEnabled||(value&&value.disabled)?'disabled':undefined)+
' />',that.header.formatters[j]&&typeof value==='string'?value:'',that.options.cardView?'</div>':'</td>'].join('');item[that.header.stateField]=value===true||(!!value_||value&&value.checked);}else{value=typeof value==='undefined'||value===null?that.options.undefinedText:value;text=that.options.cardView?['<div class="card-view">',that.options.showHeader?sprintf('<span class="title" %s>%s</span>',style,getPropertyFromOther(that.columns,'field','title',field)):'',sprintf('<span class="value">%s</span>',value),'</div>'].join(''):[sprintf('<td%s %s %s %s %s %s %s>',id_,class_,style,data_,rowspan_,colspan_,title_),value,'</td>'].join('');if(that.options.cardView&&that.options.smartDisplay&&value===''){text='<div class="card-view"></div>';}}
html.push(text);});if(this.options.cardView){html.push('</div></td>');}
html.push('</tr>');return html.join(' ');};BootstrapTable.prototype.initBody=function(fixedScroll){var that=this,html=[],data=this.getData();this.trigger('pre-body',data);this.$body=this.$el.find('>tbody');if(!this.$body.length){this.$body=$('<tbody></tbody>').appendTo(this.$el);}
if(!this.options.pagination||this.options.sidePagination==='server'){this.pageFrom=1;this.pageTo=data.length;}
var trFragments=$(document.createDocumentFragment());var hasTr;for(var i=this.pageFrom-1;i<this.pageTo;i++){var item=data[i];var tr=this.initRow(item,i,data,trFragments);hasTr=hasTr||!!tr;if(tr&&tr!==true){trFragments.append(tr);}}
if(!hasTr){trFragments.append('<tr class="no-records-found">'+
sprintf('<td colspan="%s">%s</td>',this.$header.find('th').length,this.options.formatNoMatches())+
'</tr>');}
this.$body.html(trFragments);if(!fixedScroll){this.scrollTo(0);}
this.$body.find('> tr[data-index] > td').off('click dblclick').on('click dblclick',function(e){var $td=$(this),$tr=$td.parent(),item=that.data[$tr.data('index')],index=$td[0].cellIndex,fields=that.getVisibleFields(),field=fields[that.options.detailView&&!that.options.cardView?index-1:index],column=that.columns[that.fieldsColumnsIndex[field]],value=getItemField(item,field,that.options.escape);if($td.find('.detail-icon').length){return;}
that.trigger(e.type==='click'?'click-cell':'dbl-click-cell',field,value,item,$td);that.trigger(e.type==='click'?'click-row':'dbl-click-row',item,$tr,field);if(e.type==='click'&&that.options.clickToSelect&&column.clickToSelect&&that.options.ignoreClickToSelectOn(e.target)){var $selectItem=$tr.find(sprintf('[name="%s"]',that.options.selectItemName));if($selectItem.length){$selectItem[0].click();}}});this.$body.find('> tr[data-index] > td > .detail-icon').off('click').on('click',function(e){e.preventDefault();var $this=$(this),$tr=$this.parent().parent(),index=$tr.data('index'),row=data[index];if($tr.next().is('tr.detail-view')){$this.find('i').attr('class',sprintf('%s %s',that.options.iconsPrefix,that.options.icons.detailOpen));that.trigger('collapse-row',index,row,$tr.next());$tr.next().remove();}else{$this.find('i').attr('class',sprintf('%s %s',that.options.iconsPrefix,that.options.icons.detailClose));$tr.after(sprintf('<tr class="detail-view"><td colspan="%s"></td></tr>',$tr.find('td').length));var $element=$tr.next().find('td');var content=calculateObjectValue(that.options,that.options.detailFormatter,[index,row,$element],'');if($element.length===1){$element.append(content);}
that.trigger('expand-row',index,row,$element);}
that.resetView();return false;});this.$selectItem=this.$body.find(sprintf('[name="%s"]',this.options.selectItemName));this.$selectItem.off('click').on('click',function(event){event.stopImmediatePropagation();var $this=$(this),checked=$this.prop('checked'),row=that.data[$this.data('index')];if($(this).is(':radio')||that.options.singleSelect){$.each(that.options.data,function(i,row){row[that.header.stateField]=false;});}
row[that.header.stateField]=checked;if(that.options.singleSelect){that.$selectItem.not(this).each(function(){that.data[$(this).data('index')][that.header.stateField]=false;});that.$selectItem.filter(':checked').not(this).prop('checked',false);}
that.updateSelected();that.trigger(checked?'check':'uncheck',row,$this);});$.each(this.header.events,function(i,events){if(!events){return;}
if(typeof events==='string'){events=calculateObjectValue(null,events);}
var field=that.header.fields[i],fieldIndex=$.inArray(field,that.getVisibleFields());if(fieldIndex===-1){return;}
if(that.options.detailView&&!that.options.cardView){fieldIndex+=1;}
for(var key in events){that.$body.find('>tr:not(.no-records-found)').each(function(){var $tr=$(this),$td=$tr.find(that.options.cardView?'.card-view':'td').eq(fieldIndex),index=key.indexOf(' '),name=key.substring(0,index),el=key.substring(index+1),func=events[key];$td.find(el).off(name).on(name,function(e){var index=$tr.data('index'),row=that.data[index],value=row[field];func.apply(this,[e,value,row,index]);});});}});this.updateSelected();this.resetView();this.trigger('post-body',data);};BootstrapTable.prototype.initServer=function(silent,query,url){var that=this,data={},index=$.inArray(this.options.sortName,this.header.fields),params={searchText:this.searchText,sortName:this.options.sortName,sortOrder:this.options.sortOrder},request;if(this.header.sortNames[index]){params.sortName=this.header.sortNames[index];}
if(this.options.pagination&&this.options.sidePagination==='server'){params.pageSize=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize;params.pageNumber=this.options.pageNumber;}
if(!(url||this.options.url)&&!this.options.ajax){return;}
if(this.options.queryParamsType==='limit'){params={search:params.searchText,sort:params.sortName,order:params.sortOrder};if(this.options.pagination&&this.options.sidePagination==='server'){params.offset=this.options.pageSize===this.options.formatAllRows()?0:this.options.pageSize*(this.options.pageNumber-1);params.limit=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize;if(params.limit===0){delete params.limit;}}}
if(!($.isEmptyObject(this.filterColumnsPartial))){params.filter=JSON.stringify(this.filterColumnsPartial,null);}
data=calculateObjectValue(this.options,this.options.queryParams,[params],data);$.extend(data,query||{});if(data===false){return;}
if(!silent){this.$tableLoading.show();}
request=$.extend({},calculateObjectValue(null,this.options.ajaxOptions),{type:this.options.method,url:url||this.options.url,data:this.options.contentType==='application/json'&&this.options.method==='post'?JSON.stringify(data):data,cache:this.options.cache,contentType:this.options.contentType,dataType:this.options.dataType,success:function(res){res=calculateObjectValue(that.options,that.options.responseHandler,[res],res);that.load(res);that.trigger('load-success',res);if(!silent)that.$tableLoading.hide();},error:function(res){var data=[];if(that.options.sidePagination==='server'){data={};data[that.options.totalField]=0;data[that.options.dataField]=[];}
that.load(data);that.trigger('load-error',res.status,res);if(!silent)that.$tableLoading.hide();}});if(this.options.ajax){calculateObjectValue(this,this.options.ajax,[request],null);}else{if(this._xhr&&this._xhr.readyState!==4){this._xhr.abort();}
this._xhr=$.ajax(request);}};BootstrapTable.prototype.initSearchText=function(){if(this.options.search){this.searchText='';if(this.options.searchText!==''){var $search=this.$toolbar.find('.search input');$search.val(this.options.searchText);this.onSearch({currentTarget:$search,firedByInitSearchText:true});}}};BootstrapTable.prototype.getCaret=function(){var that=this;$.each(this.$header.find('th'),function(i,th){$(th).find('.sortable').removeClass('desc asc').addClass($(th).data('field')===that.options.sortName?that.options.sortOrder:'both');});};BootstrapTable.prototype.updateSelected=function(){var checkAll=this.$selectItem.filter(':enabled').length&&this.$selectItem.filter(':enabled').length===this.$selectItem.filter(':enabled').filter(':checked').length;this.$selectAll.add(this.$selectAll_).prop('checked',checkAll);this.$selectItem.each(function(){$(this).closest('tr')[$(this).prop('checked')?'addClass':'removeClass']('selected');});};BootstrapTable.prototype.updateRows=function(){var that=this;this.$selectItem.each(function(){that.data[$(this).data('index')][that.header.stateField]=$(this).prop('checked');});};BootstrapTable.prototype.resetRows=function(){var that=this;$.each(this.data,function(i,row){that.$selectAll.prop('checked',false);that.$selectItem.prop('checked',false);if(that.header.stateField){row[that.header.stateField]=false;}});this.initHiddenRows();};BootstrapTable.prototype.trigger=function(name){var args=Array.prototype.slice.call(arguments,1);name+='.bs.table';this.options[BootstrapTable.EVENTS[name]].apply(this.options,args);this.$el.trigger($.Event(name),args);this.options.onAll(name,args);this.$el.trigger($.Event('all.bs.table'),[name,args]);};BootstrapTable.prototype.resetHeader=function(){clearTimeout(this.timeoutId_);this.timeoutId_=setTimeout($.proxy(this.fitHeader,this),this.$el.is(':hidden')?100:0);};BootstrapTable.prototype.fitHeader=function(){var that=this,fixedBody,scrollWidth,focused,focusedTemp;if(that.$el.is(':hidden')){that.timeoutId_=setTimeout($.proxy(that.fitHeader,that),100);return;}
fixedBody=this.$tableBody.get(0);scrollWidth=fixedBody.scrollWidth>fixedBody.clientWidth&&fixedBody.scrollHeight>fixedBody.clientHeight+this.$header.outerHeight()?getScrollBarWidth():0;this.$el.css('margin-top',-this.$header.outerHeight());focused=$(':focus');if(focused.length>0){var $th=focused.parents('th');if($th.length>0){var dataField=$th.attr('data-field');if(dataField!==undefined){var $headerTh=this.$header.find("[data-field='"+dataField+"']");if($headerTh.length>0){$headerTh.find(":input").addClass("focus-temp");}}}}
this.$header_=this.$header.clone(true,true);this.$selectAll_=this.$header_.find('[name="btSelectAll"]');this.$tableHeader.css({'margin-right':scrollWidth}).find('table').css('width',this.$el.outerWidth()).html('').attr('class',this.$el.attr('class')).append(this.$header_);focusedTemp=$('.focus-temp:visible:eq(0)');if(focusedTemp.length>0){focusedTemp.focus();this.$header.find('.focus-temp').removeClass('focus-temp');}
this.$header.find('th[data-field]').each(function(i){that.$header_.find(sprintf('th[data-field="%s"]',$(this).data('field'))).data($(this).data());});var visibleFields=this.getVisibleFields(),$ths=this.$header_.find('th');this.$body.find('>tr:first-child:not(.no-records-found) > *').each(function(i){var $this=$(this),index=i;if(that.options.detailView&&!that.options.cardView){if(i===0){that.$header_.find('th.detail').find('.fht-cell').width($this.innerWidth());}
index=i-1;}
if(index===-1){return;}
var $th=that.$header_.find(sprintf('th[data-field="%s"]',visibleFields[index]));if($th.length>1){$th=$($ths[$this[0].cellIndex]);}
var zoomWidth=$th.width()-$th.find('.fht-cell').width();$th.find('.fht-cell').width($this.innerWidth()-zoomWidth);});this.horizontalScroll();this.trigger('post-header');};BootstrapTable.prototype.resetFooter=function(){var that=this,data=that.getData(),html=[];if(!this.options.showFooter||this.options.cardView){return;}
if(!this.options.cardView&&this.options.detailView){html.push('<td><div class="th-inner">&nbsp;</div><div class="fht-cell"></div></td>');}
$.each(this.columns,function(i,column){var key,falign='',valign='',csses=[],style={},class_=sprintf(' class="%s"',column['class']);if(!column.visible){return;}
if(that.options.cardView&&(!column.cardVisible)){return;}
falign=sprintf('text-align: %s; ',column.falign?column.falign:column.align);valign=sprintf('vertical-align: %s; ',column.valign);style=calculateObjectValue(null,that.options.footerStyle);if(style&&style.css){for(key in style.css){csses.push(key+': '+style.css[key]);}}
html.push('<td',class_,sprintf(' style="%s"',falign+valign+csses.concat().join('; ')),'>');html.push('<div class="th-inner">');html.push(calculateObjectValue(column,column.footerFormatter,[data],'&nbsp;')||'&nbsp;');html.push('</div>');html.push('<div class="fht-cell"></div>');html.push('</div>');html.push('</td>');});this.$tableFooter.find('tr').html(html.join(''));this.$tableFooter.show();clearTimeout(this.timeoutFooter_);this.timeoutFooter_=setTimeout($.proxy(this.fitFooter,this),this.$el.is(':hidden')?100:0);};BootstrapTable.prototype.fitFooter=function(){var that=this,$footerTd,elWidth,scrollWidth;clearTimeout(this.timeoutFooter_);if(this.$el.is(':hidden')){this.timeoutFooter_=setTimeout($.proxy(this.fitFooter,this),100);return;}
elWidth=this.$el.css('width');scrollWidth=elWidth>this.$tableBody.width()?getScrollBarWidth():0;this.$tableFooter.css({'margin-right':scrollWidth}).find('table').css('width',elWidth).attr('class',this.$el.attr('class'));$footerTd=this.$tableFooter.find('td');this.$body.find('>tr:first-child:not(.no-records-found) > *').each(function(i){var $this=$(this);$footerTd.eq(i).find('.fht-cell').width($this.innerWidth());});this.horizontalScroll();};BootstrapTable.prototype.horizontalScroll=function(){var that=this;that.trigger('scroll-body');this.$tableBody.off('scroll').on('scroll',function(){if(that.options.showHeader&&that.options.height){that.$tableHeader.scrollLeft($(this).scrollLeft());}
if(that.options.showFooter&&!that.options.cardView){that.$tableFooter.scrollLeft($(this).scrollLeft());}});};BootstrapTable.prototype.toggleColumn=function(index,checked,needUpdate){if(index===-1){return;}
this.columns[index].visible=checked;this.initHeader();this.initSearch();this.initPagination();this.initBody();if(this.options.showColumns){var $items=this.$toolbar.find('.keep-open input').prop('disabled',false);if(needUpdate){$items.filter(sprintf('[value="%s"]',index)).prop('checked',checked);}
if($items.filter(':checked').length<=this.options.minimumCountColumns){$items.filter(':checked').prop('disabled',true);}}};BootstrapTable.prototype.getVisibleFields=function(){var that=this,visibleFields=[];$.each(this.header.fields,function(j,field){var column=that.columns[that.fieldsColumnsIndex[field]];if(!column.visible){return;}
visibleFields.push(field);});return visibleFields;};BootstrapTable.prototype.resetView=function(params){var padding=0;if(params&&params.height){this.options.height=params.height;}
this.$selectAll.prop('checked',this.$selectItem.length>0&&this.$selectItem.length===this.$selectItem.filter(':checked').length);if(this.options.height){var toolbarHeight=this.$toolbar.outerHeight(true),paginationHeight=this.$pagination.outerHeight(true),height=this.options.height-toolbarHeight-paginationHeight;this.$tableContainer.css('height',height+'px');}
if(this.options.cardView){this.$el.css('margin-top','0');this.$tableContainer.css('padding-bottom','0');this.$tableFooter.hide();return;}
if(this.options.showHeader&&this.options.height){this.$tableHeader.show();this.resetHeader();padding+=this.$header.outerHeight();}else{this.$tableHeader.hide();this.trigger('post-header');}
if(this.options.showFooter){this.resetFooter();if(this.options.height){padding+=this.$tableFooter.outerHeight()+1;}}
this.getCaret();this.$tableContainer.css('padding-bottom',padding+'px');this.trigger('reset-view');};BootstrapTable.prototype.getData=function(useCurrentPage){var data=this.options.data;if(this.searchText||this.options.sortName||!$.isEmptyObject(this.filterColumns)||!$.isEmptyObject(this.filterColumnsPartial)){data=this.data;}
if(useCurrentPage){return data.slice(this.pageFrom-1,this.pageTo);}
return data;};BootstrapTable.prototype.load=function(data){var fixedScroll=false;if(this.options.pagination&&this.options.sidePagination==='server'){this.options.totalRows=data[this.options.totalField];fixedScroll=data.fixedScroll;data=data[this.options.dataField];}else if(!$.isArray(data)){fixedScroll=data.fixedScroll;data=data.data;}
this.initData(data);this.initSearch();this.initPagination();this.initBody(fixedScroll);};BootstrapTable.prototype.append=function(data){this.initData(data,'append');this.initSearch();this.initPagination();this.initSort();this.initBody(true);};BootstrapTable.prototype.prepend=function(data){this.initData(data,'prepend');this.initSearch();this.initPagination();this.initSort();this.initBody(true);};BootstrapTable.prototype.remove=function(params){var len=this.options.data.length,i,row;if(!params.hasOwnProperty('field')||!params.hasOwnProperty('values')){return;}
for(i=len-1;i>=0;i--){row=this.options.data[i];if(!row.hasOwnProperty(params.field)){continue;}
if($.inArray(row[params.field],params.values)!==-1){this.options.data.splice(i,1);if(this.options.sidePagination==='server'){this.options.totalRows-=1;}}}
if(len===this.options.data.length){return;}
this.initSearch();this.initPagination();this.initSort();this.initBody(true);};BootstrapTable.prototype.removeAll=function(){if(this.options.data.length>0){this.options.data.splice(0,this.options.data.length);this.initSearch();this.initPagination();this.initBody(true);}};BootstrapTable.prototype.getRowByUniqueId=function(id){var uniqueId=this.options.uniqueId,len=this.options.data.length,dataRow=null,i,row,rowUniqueId;for(i=len-1;i>=0;i--){row=this.options.data[i];if(row.hasOwnProperty(uniqueId)){rowUniqueId=row[uniqueId];}else if(row._data.hasOwnProperty(uniqueId)){rowUniqueId=row._data[uniqueId];}else{continue;}
if(typeof rowUniqueId==='string'){id=id.toString();}else if(typeof rowUniqueId==='number'){if((Number(rowUniqueId)===rowUniqueId)&&(rowUniqueId%1===0)){id=parseInt(id);}else if((rowUniqueId===Number(rowUniqueId))&&(rowUniqueId!==0)){id=parseFloat(id);}}
if(rowUniqueId===id){dataRow=row;break;}}
return dataRow;};BootstrapTable.prototype.removeByUniqueId=function(id){var len=this.options.data.length,row=this.getRowByUniqueId(id);if(row){this.options.data.splice(this.options.data.indexOf(row),1);}
if(len===this.options.data.length){return;}
this.initSearch();this.initPagination();this.initBody(true);};BootstrapTable.prototype.updateByUniqueId=function(params){var that=this;var allParams=$.isArray(params)?params:[params];$.each(allParams,function(i,params){var rowId;if(!params.hasOwnProperty('id')||!params.hasOwnProperty('row')){return;}
rowId=$.inArray(that.getRowByUniqueId(params.id),that.options.data);if(rowId===-1){return;}
$.extend(that.options.data[rowId],params.row);});this.initSearch();this.initPagination();this.initSort();this.initBody(true);};BootstrapTable.prototype.refreshColumnTitle=function(params){if(!params.hasOwnProperty('field')||!params.hasOwnProperty('title')){return;}
this.columns[this.fieldsColumnsIndex[params.field]].title=this.options.escape?escapeHTML(params.title):params.title;if(this.columns[this.fieldsColumnsIndex[params.field]].visible){var header=this.options.height!==undefined?this.$tableHeader:this.$header;header.find('th[data-field]').each(function(i){if($(this).data('field')===params.field){$($(this).find(".th-inner")[0]).text(params.title);return false;}});}};BootstrapTable.prototype.insertRow=function(params){if(!params.hasOwnProperty('index')||!params.hasOwnProperty('row')){return;}
this.options.data.splice(params.index,0,params.row);this.initSearch();this.initPagination();this.initSort();this.initBody(true);};BootstrapTable.prototype.updateRow=function(params){var that=this;var allParams=$.isArray(params)?params:[params];$.each(allParams,function(i,params){if(!params.hasOwnProperty('index')||!params.hasOwnProperty('row')){return;}
$.extend(that.options.data[params.index],params.row);});this.initSearch();this.initPagination();this.initSort();this.initBody(true);};BootstrapTable.prototype.initHiddenRows=function(){this.hiddenRows=[];};BootstrapTable.prototype.showRow=function(params){this.toggleRow(params,true);};BootstrapTable.prototype.hideRow=function(params){this.toggleRow(params,false);};BootstrapTable.prototype.toggleRow=function(params,visible){var row,index;if(params.hasOwnProperty('index')){row=this.getData()[params.index];}else if(params.hasOwnProperty('uniqueId')){row=this.getRowByUniqueId(params.uniqueId);}
if(!row){return;}
index=$.inArray(row,this.hiddenRows);if(!visible&&index===-1){this.hiddenRows.push(row);}else if(visible&&index>-1){this.hiddenRows.splice(index,1);}
this.initBody(true);};BootstrapTable.prototype.getHiddenRows=function(show){var that=this,data=this.getData(),rows=[];$.each(data,function(i,row){if($.inArray(row,that.hiddenRows)>-1){rows.push(row);}});this.hiddenRows=rows;return rows;};BootstrapTable.prototype.mergeCells=function(options){var row=options.index,col=$.inArray(options.field,this.getVisibleFields()),rowspan=options.rowspan||1,colspan=options.colspan||1,i,j,$tr=this.$body.find('>tr'),$td;if(this.options.detailView&&!this.options.cardView){col+=1;}
$td=$tr.eq(row).find('>td').eq(col);if(row<0||col<0||row>=this.data.length){return;}
for(i=row;i<row+rowspan;i++){for(j=col;j<col+colspan;j++){$tr.eq(i).find('>td').eq(j).hide();}}
$td.attr('rowspan',rowspan).attr('colspan',colspan).show();};BootstrapTable.prototype.updateCell=function(params){if(!params.hasOwnProperty('index')||!params.hasOwnProperty('field')||!params.hasOwnProperty('value')){return;}
this.data[params.index][params.field]=params.value;if(params.reinit===false){return;}
this.initSort();this.initBody(true);};BootstrapTable.prototype.updateCellById=function(params){var that=this;if(!params.hasOwnProperty('id')||!params.hasOwnProperty('field')||!params.hasOwnProperty('value')){return;}
var allParams=$.isArray(params)?params:[params];$.each(allParams,function(i,params){var rowId;rowId=$.inArray(that.getRowByUniqueId(params.id),that.options.data);if(rowId===-1){return;}
that.data[rowId][params.field]=params.value;});if(params.reinit===false){return;}
this.initSort();this.initBody(true);};BootstrapTable.prototype.getOptions=function(){return $.extend(true,{},this.options);};BootstrapTable.prototype.getSelections=function(){var that=this;return $.grep(this.options.data,function(row){return row[that.header.stateField]===true;});};BootstrapTable.prototype.getAllSelections=function(){var that=this;return $.grep(this.options.data,function(row){return row[that.header.stateField];});};BootstrapTable.prototype.checkAll=function(){this.checkAll_(true);};BootstrapTable.prototype.uncheckAll=function(){this.checkAll_(false);};BootstrapTable.prototype.checkInvert=function(){var that=this;var rows=that.$selectItem.filter(':enabled');var checked=rows.filter(':checked');rows.each(function(){$(this).prop('checked',!$(this).prop('checked'));});that.updateRows();that.updateSelected();that.trigger('uncheck-some',checked);checked=that.getSelections();that.trigger('check-some',checked);};BootstrapTable.prototype.checkAll_=function(checked){var rows;if(!checked){rows=this.getSelections();}
this.$selectAll.add(this.$selectAll_).prop('checked',checked);this.$selectItem.filter(':enabled').prop('checked',checked);this.updateRows();if(checked){rows=this.getSelections();}
this.trigger(checked?'check-all':'uncheck-all',rows);};BootstrapTable.prototype.check=function(index){this.check_(true,index);};BootstrapTable.prototype.uncheck=function(index){this.check_(false,index);};BootstrapTable.prototype.check_=function(checked,index){var $el=this.$selectItem.filter(sprintf('[data-index="%s"]',index)).prop('checked',checked);this.data[index][this.header.stateField]=checked;this.updateSelected();this.trigger(checked?'check':'uncheck',this.data[index],$el);};BootstrapTable.prototype.checkBy=function(obj){this.checkBy_(true,obj);};BootstrapTable.prototype.uncheckBy=function(obj){this.checkBy_(false,obj);};BootstrapTable.prototype.checkBy_=function(checked,obj){if(!obj.hasOwnProperty('field')||!obj.hasOwnProperty('values')){return;}
var that=this,rows=[];$.each(this.options.data,function(index,row){if(!row.hasOwnProperty(obj.field)){return false;}
if($.inArray(row[obj.field],obj.values)!==-1){var $el=that.$selectItem.filter(':enabled').filter(sprintf('[data-index="%s"]',index)).prop('checked',checked);row[that.header.stateField]=checked;rows.push(row);that.trigger(checked?'check':'uncheck',row,$el);}});this.updateSelected();this.trigger(checked?'check-some':'uncheck-some',rows);};BootstrapTable.prototype.destroy=function(){this.$el.insertBefore(this.$container);$(this.options.toolbar).insertBefore(this.$el);this.$container.next().remove();this.$container.remove();this.$el.html(this.$el_.html()).css('margin-top','0').attr('class',this.$el_.attr('class')||'');};BootstrapTable.prototype.showLoading=function(){this.$tableLoading.show();};BootstrapTable.prototype.hideLoading=function(){this.$tableLoading.hide();};BootstrapTable.prototype.togglePagination=function(){this.options.pagination=!this.options.pagination;var button=this.$toolbar.find('button[name="paginationSwitch"] i');if(this.options.pagination){button.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchDown);}else{button.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchUp);}
this.updatePagination();};BootstrapTable.prototype.toggleFullscreen=function(){this.$el.closest('.bootstrap-table').toggleClass('fullscreen');};BootstrapTable.prototype.refresh=function(params){if(params&&params.url){this.options.url=params.url;}
if(params&&params.pageNumber){this.options.pageNumber=params.pageNumber;}
if(params&&params.pageSize){this.options.pageSize=params.pageSize;}
this.initServer(params&&params.silent,params&&params.query,params&&params.url);this.trigger('refresh',params);};BootstrapTable.prototype.resetWidth=function(){if(this.options.showHeader&&this.options.height){this.fitHeader();}
if(this.options.showFooter&&!this.options.cardView){this.fitFooter();}};BootstrapTable.prototype.showColumn=function(field){this.toggleColumn(this.fieldsColumnsIndex[field],true,true);};BootstrapTable.prototype.hideColumn=function(field){this.toggleColumn(this.fieldsColumnsIndex[field],false,true);};BootstrapTable.prototype.getHiddenColumns=function(){return $.grep(this.columns,function(column){return!column.visible;});};BootstrapTable.prototype.getVisibleColumns=function(){return $.grep(this.columns,function(column){return column.visible;});};BootstrapTable.prototype.toggleAllColumns=function(visible){var that=this;$.each(this.columns,function(i,column){that.columns[i].visible=visible;});this.initHeader();this.initSearch();this.initPagination();this.initBody();if(this.options.showColumns){var $items=this.$toolbar.find('.keep-open input').prop('disabled',false);if($items.filter(':checked').length<=this.options.minimumCountColumns){$items.filter(':checked').prop('disabled',true);}}};BootstrapTable.prototype.showAllColumns=function(){this.toggleAllColumns(true);};BootstrapTable.prototype.hideAllColumns=function(){this.toggleAllColumns(false);};BootstrapTable.prototype.filterBy=function(columns){this.filterColumns=$.isEmptyObject(columns)?{}:columns;this.options.pageNumber=1;this.initSearch();this.updatePagination();};BootstrapTable.prototype.scrollTo=function(value){if(typeof value==='string'){value=value==='bottom'?this.$tableBody[0].scrollHeight:0;}
if(typeof value==='number'){this.$tableBody.scrollTop(value);}
if(typeof value==='undefined'){return this.$tableBody.scrollTop();}};BootstrapTable.prototype.getScrollPosition=function(){return this.scrollTo();};BootstrapTable.prototype.selectPage=function(page){if(page>0&&page<=this.options.totalPages){this.options.pageNumber=page;this.updatePagination();}};BootstrapTable.prototype.prevPage=function(){if(this.options.pageNumber>1){this.options.pageNumber--;this.updatePagination();}};BootstrapTable.prototype.nextPage=function(){if(this.options.pageNumber<this.options.totalPages){this.options.pageNumber++;this.updatePagination();}};BootstrapTable.prototype.toggleView=function(){this.options.cardView=!this.options.cardView;this.initHeader();var $icon=this.$toolbar.find('button[name="toggle"] i');if(this.options.cardView){$icon.removeClass(this.options.icons.toggleOff);$icon.addClass(this.options.icons.toggleOn);}else{$icon.removeClass(this.options.icons.toggleOn);$icon.addClass(this.options.icons.toggleOff);}
this.initBody();this.trigger('toggle',this.options.cardView);};BootstrapTable.prototype.refreshOptions=function(options){if(compareObjects(this.options,options,true)){return;}
this.options=$.extend(this.options,options);this.trigger('refresh-options',this.options);this.destroy();this.init();};BootstrapTable.prototype.resetSearch=function(text){var $search=this.$toolbar.find('.search input');$search.val(text||'');this.onSearch({currentTarget:$search});};BootstrapTable.prototype.expandRow_=function(expand,index){var $tr=this.$body.find(sprintf('> tr[data-index="%s"]',index));if($tr.next().is('tr.detail-view')===(expand?false:true)){$tr.find('> td > .detail-icon').click();}};BootstrapTable.prototype.expandRow=function(index){this.expandRow_(true,index);};BootstrapTable.prototype.collapseRow=function(index){this.expandRow_(false,index);};BootstrapTable.prototype.expandAllRows=function(isSubTable){if(isSubTable){var $tr=this.$body.find(sprintf('> tr[data-index="%s"]',0)),that=this,detailIcon=null,executeInterval=false,idInterval=-1;if(!$tr.next().is('tr.detail-view')){$tr.find('> td > .detail-icon').click();executeInterval=true;}else if(!$tr.next().next().is('tr.detail-view')){$tr.next().find(".detail-icon").click();executeInterval=true;}
if(executeInterval){try{idInterval=setInterval(function(){detailIcon=that.$body.find("tr.detail-view").last().find(".detail-icon");if(detailIcon.length>0){detailIcon.click();}else{clearInterval(idInterval);}},1);}catch(ex){clearInterval(idInterval);}}}else{var trs=this.$body.children();for(var i=0;i<trs.length;i++){this.expandRow_(true,$(trs[i]).data("index"));}}};BootstrapTable.prototype.collapseAllRows=function(isSubTable){if(isSubTable){this.expandRow_(false,0);}else{var trs=this.$body.children();for(var i=0;i<trs.length;i++){this.expandRow_(false,$(trs[i]).data("index"));}}};BootstrapTable.prototype.updateFormatText=function(name,text){if(this.options[sprintf('format%s',name)]){if(typeof text==='string'){this.options[sprintf('format%s',name)]=function(){return text;};}else if(typeof text==='function'){this.options[sprintf('format%s',name)]=text;}}
this.initToolbar();this.initPagination();this.initBody();};var allowedMethods=['getOptions','getSelections','getAllSelections','getData','load','append','prepend','remove','removeAll','insertRow','updateRow','updateCell','updateByUniqueId','removeByUniqueId','getRowByUniqueId','showRow','hideRow','getHiddenRows','mergeCells','refreshColumnTitle','checkAll','uncheckAll','checkInvert','check','uncheck','checkBy','uncheckBy','refresh','resetView','resetWidth','destroy','showLoading','hideLoading','showColumn','hideColumn','getHiddenColumns','getVisibleColumns','showAllColumns','hideAllColumns','filterBy','scrollTo','getScrollPosition','selectPage','prevPage','nextPage','togglePagination','toggleView','refreshOptions','resetSearch','expandRow','collapseRow','expandAllRows','collapseAllRows','updateFormatText','updateCellById'];$.fn.bootstrapTable=function(option){var value,args=Array.prototype.slice.call(arguments,1);this.each(function(){var $this=$(this),data=$this.data('bootstrap.table'),options=$.extend({},BootstrapTable.DEFAULTS,$this.data(),typeof option==='object'&&option);if(typeof option==='string'){if($.inArray(option,allowedMethods)<0){throw new Error("Unknown method: "+option);}
if(!data){return;}
value=data[option].apply(data,args);if(option==='destroy'){$this.removeData('bootstrap.table');}}
if(!data){$this.data('bootstrap.table',(data=new BootstrapTable(this,options)));}});return typeof value==='undefined'?this:value;};$.fn.bootstrapTable.Constructor=BootstrapTable;$.fn.bootstrapTable.defaults=BootstrapTable.DEFAULTS;$.fn.bootstrapTable.columnDefaults=BootstrapTable.COLUMN_DEFAULTS;$.fn.bootstrapTable.locales=BootstrapTable.LOCALES;$.fn.bootstrapTable.methods=allowedMethods;$.fn.bootstrapTable.utils={bootstrapVersion:bootstrapVersion,sprintf:sprintf,compareObjects:compareObjects,calculateObjectValue:calculateObjectValue,getItemField:getItemField,objectKeys:objectKeys,isIEBrowser:isIEBrowser};$(function(){$('[data-toggle="table"]').bootstrapTable();});})(jQuery);(function($){'use strict';var sprintf=$.fn.bootstrapTable.utils.sprintf,objectKeys=$.fn.bootstrapTable.utils.objectKeys;var getOptionsFromSelectControl=function(selectControl){return selectControl.get(selectControl.length-1).options;};var hideUnusedSelectOptions=function(selectControl,uniqueValues){var options=getOptionsFromSelectControl(selectControl);for(var i=0;i<options.length;i++){if(options[i].value!==""){if(!uniqueValues.hasOwnProperty(options[i].value)){selectControl.find(sprintf("option[value='%s']",options[i].value)).hide();}else{selectControl.find(sprintf("option[value='%s']",options[i].value)).show();}}}};var addOptionToSelectControl=function(selectControl,value,text){value=$.trim(value);selectControl=$(selectControl.get(selectControl.length-1));if(!existOptionInSelectControl(selectControl,value)){selectControl.append($("<option></option>").attr("value",value).text($('<div />').html(text).text()));}};var sortSelectControl=function(selectControl){selectControl=$(selectControl.get(selectControl.length-1));var $opts=selectControl.find('option:gt(0)');$opts.sort(function(a,b){a=$(a).text().toLowerCase();b=$(b).text().toLowerCase();if($.isNumeric(a)&&$.isNumeric(b)){a=parseFloat(a);b=parseFloat(b);}
return a>b?1:a<b?-1:0;});selectControl.find('option:gt(0)').remove();selectControl.append($opts);};var existOptionInSelectControl=function(selectControl,value){var options=getOptionsFromSelectControl(selectControl);for(var i=0;i<options.length;i++){if(options[i].value===value.toString()){return true;}}
return false;};var fixHeaderCSS=function(that){that.$tableHeader.css('height','77px');};var getCurrentHeader=function(that){var header=that.$header;if(that.options.height){header=that.$tableHeader;}
return header;};var getCurrentSearchControls=function(that){var searchControls='select, input';if(that.options.height){searchControls='table select, table input';}
return searchControls;};var getCursorPosition=function(el){if($.fn.bootstrapTable.utils.isIEBrowser()){if($(el).is('input[type=text]')){var pos=0;if('selectionStart'in el){pos=el.selectionStart;}else if('selection'in document){el.focus();var Sel=document.selection.createRange();var SelLength=document.selection.createRange().text.length;Sel.moveStart('character',-el.value.length);pos=Sel.text.length-SelLength;}
return pos;}else{return-1;}}else{return-1;}};var setCursorPosition=function(el){$(el).val(el.value);};var copyValues=function(that){var header=getCurrentHeader(that),searchControls=getCurrentSearchControls(that);that.options.valuesFilterControl=[];header.find(searchControls).each(function(){that.options.valuesFilterControl.push({field:$(this).closest('[data-field]').data('field'),value:$(this).val(),position:getCursorPosition($(this).get(0))});});};var setValues=function(that){var field=null,result=[],header=getCurrentHeader(that),searchControls=getCurrentSearchControls(that);if(that.options.valuesFilterControl.length>0){header.find(searchControls).each(function(index,ele){field=$(this).closest('[data-field]').data('field');result=$.grep(that.options.valuesFilterControl,function(valueObj){return valueObj.field===field;});if(result.length>0){$(this).val(result[0].value);setCursorPosition($(this).get(0),result[0].position);}});}};var collectBootstrapCookies=function cookiesRegex(){var cookies=[],foundCookies=document.cookie.match(/(?:bs.table.)(\w*)/g);if(foundCookies){$.each(foundCookies,function(i,cookie){if(/./.test(cookie)){cookie=cookie.split(".").pop();}
if($.inArray(cookie,cookies)===-1){cookies.push(cookie);}});return cookies;}};var initFilterSelectControls=function(that){var data=that.data,itemsPerPage=that.pageTo<that.options.data.length?that.options.data.length:that.pageTo,isColumnSearchableViaSelect=function(column){return column.filterControl&&column.filterControl.toLowerCase()==='select'&&column.searchable;},isFilterDataNotGiven=function(column){return column.filterData===undefined||column.filterData.toLowerCase()==='column';},hasSelectControlElement=function(selectControl){return selectControl&&selectControl.length>0;};var z=that.options.pagination?(that.options.sidePagination==='server'?that.pageTo:that.options.totalRows):that.pageTo;$.each(that.header.fields,function(j,field){var column=that.columns[that.fieldsColumnsIndex[field]],selectControl=$('.bootstrap-table-filter-control-'+escapeID(column.field));if(isColumnSearchableViaSelect(column)&&isFilterDataNotGiven(column)&&hasSelectControlElement(selectControl)){if(selectControl.get(selectControl.length-1).options.length===0){addOptionToSelectControl(selectControl,'','');}
var uniqueValues={};for(var i=0;i<z;i++){var fieldValue=data[i][field].trim();var $fieldValue=$(fieldValue.replace("!"," "));var fieldValueArray=[];if($fieldValue.length){$fieldValue=$(fieldValue);$fieldValue.find('.hidden').remove();$fieldValue.each(function(index){fieldValueArray.push($(this).text().trim());});}else{var comma=fieldValue.split(',');comma.forEach(function(item){fieldValueArray.push(item.trim());});}
fieldValueArray.forEach(function(item){var formattedValue=$.fn.bootstrapTable.utils.calculateObjectValue(that.header,that.header.formatters[j],[item,data[i],i],item);uniqueValues[formattedValue]=item;});}
for(var key in uniqueValues){addOptionToSelectControl(selectControl,uniqueValues[key],key);}
sortSelectControl(selectControl);if(that.options.hideUnusedSelectOptions){hideUnusedSelectOptions(selectControl,uniqueValues);}}});};var escapeID=function(id){return String(id).replace(/(:|\.|\[|\]|,)/g,"\\$1");};var createControls=function(that,header){var addedFilterControl=false,isVisible,html;$.each(that.columns,function(i,column){isVisible='hidden';html=[];if(!column.visible){return;}
if(!column.filterControl){html.push('<div class="no-filter-control"></div>');}else{html.push('<div class="filter-control">');var nameControl=column.filterControl.toLowerCase();if(column.searchable&&that.options.filterTemplate[nameControl]){addedFilterControl=true;isVisible='visible';html.push(that.options.filterTemplate[nameControl](that,column.field,isVisible,column.filterControlPlaceholder?column.filterControlPlaceholder:"","filter-control-"+i));}}
$.each(header.children().children(),function(i,tr){tr=$(tr);if(tr.data('field')===column.field){tr.find('.fht-cell').append(html.join(''));return false;}});if(column.filterData!==undefined&&column.filterData.toLowerCase()!=='column'){var filterDataType=getFilterDataMethod(filterDataMethods,column.filterData.substring(0,column.filterData.indexOf(':')));var filterDataSource,selectControl;if(filterDataType!==null){filterDataSource=column.filterData.substring(column.filterData.indexOf(':')+1,column.filterData.length);selectControl=$('.bootstrap-table-filter-control-'+escapeID(column.field));addOptionToSelectControl(selectControl,'','');filterDataType(filterDataSource,selectControl);}else{throw new SyntaxError('Error. You should use any of these allowed filter data methods: var, json, url.'+' Use like this: var: {key: "value"}');}
var variableValues,key;switch(filterDataType){case'url':$.ajax({url:filterDataSource,dataType:'json',success:function(data){for(var key in data){addOptionToSelectControl(selectControl,key,data[key]);}
sortSelectControl(selectControl);}});break;case'var':variableValues=window[filterDataSource];for(key in variableValues){addOptionToSelectControl(selectControl,key,variableValues[key]);}
sortSelectControl(selectControl);break;case'jso':variableValues=JSON.parse(filterDataSource);for(key in variableValues){addOptionToSelectControl(selectControl,key,variableValues[key]);}
sortSelectControl(selectControl);break;}}});if(addedFilterControl){header.off('keyup','input').on('keyup','input',function(event){if(that.options.searchOnEnterKey&&event.keyCode!==13){return;}
if($.inArray(event.keyCode,[37,38,39,40])>-1){return;}
clearTimeout(event.currentTarget.timeoutId||0);event.currentTarget.timeoutId=setTimeout(function(){that.onColumnSearch(event);},that.options.searchTimeOut);});header.off('change','select').on('change','select',function(event){if(that.options.searchOnEnterKey&&event.keyCode!==13){return;}
if($.inArray(event.keyCode,[37,38,39,40])>-1){return;}
clearTimeout(event.currentTarget.timeoutId||0);event.currentTarget.timeoutId=setTimeout(function(){that.onColumnSearch(event);},that.options.searchTimeOut);});header.off('mouseup','input').on('mouseup','input',function(event){var $input=$(this),oldValue=$input.val();if(oldValue===""){return;}
setTimeout(function(){var newValue=$input.val();if(newValue===""){clearTimeout(event.currentTarget.timeoutId||0);event.currentTarget.timeoutId=setTimeout(function(){that.onColumnSearch(event);},that.options.searchTimeOut);}},1);});if(header.find('.date-filter-control').length>0){$.each(that.columns,function(i,column){if(column.filterControl!==undefined&&column.filterControl.toLowerCase()==='datepicker'){header.find('.date-filter-control.bootstrap-table-filter-control-'+column.field).datepicker(column.filterDatepickerOptions).on('changeDate',function(e){$(sprintf("#%s",e.currentTarget.id)).val(e.currentTarget.value);$(e.currentTarget).keyup();});}});}}else{header.find('.filterControl').hide();}};var getDirectionOfSelectOptions=function(alignment){alignment=alignment===undefined?'left':alignment.toLowerCase();switch(alignment){case'left':return'ltr';case'right':return'rtl';case'auto':return'auto';default:return'ltr';}};var filterDataMethods={'var':function(filterDataSource,selectControl){var variableValues=window[filterDataSource];for(var key in variableValues){addOptionToSelectControl(selectControl,key,variableValues[key]);}
sortSelectControl(selectControl);},'url':function(filterDataSource,selectControl){$.ajax({url:filterDataSource,dataType:'json',success:function(data){for(var key in data){addOptionToSelectControl(selectControl,key,data[key]);}
sortSelectControl(selectControl);}});},'json':function(filterDataSource,selectControl){var variableValues=JSON.parse(filterDataSource);for(var key in variableValues){addOptionToSelectControl(selectControl,key,variableValues[key]);}
sortSelectControl(selectControl);}};var getFilterDataMethod=function(objFilterDataMethod,searchTerm){var keys=Object.keys(objFilterDataMethod);for(var i=0;i<keys.length;i++){if(keys[i]===searchTerm){return objFilterDataMethod[searchTerm];}}
return null;};$.extend($.fn.bootstrapTable.defaults,{filterControl:false,onColumnSearch:function(field,text){return false;},filterShowClear:false,alignmentSelectControlOptions:undefined,filterTemplate:{input:function(that,field,isVisible,placeholder){return sprintf('<input type="text" class="form-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s" placeholder="%s">',field,isVisible,placeholder);},select:function(that,field,isVisible){return sprintf('<select class="form-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s" dir="%s"></select>',field,isVisible,getDirectionOfSelectOptions(that.options.alignmentSelectControlOptions));},datepicker:function(that,field,isVisible){return sprintf('<input type="text" class="form-control date-filter-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s">',field,isVisible);}},disableControlWhenSearch:false,searchOnEnterKey:false,valuesFilterControl:[]});$.extend($.fn.bootstrapTable.columnDefaults,{filterControl:undefined,filterData:undefined,filterDatepickerOptions:undefined,filterStrictSearch:false,filterStartsWithSearch:false,filterControlPlaceholder:""});$.extend($.fn.bootstrapTable.Constructor.EVENTS,{'column-search.bs.table':'onColumnSearch'});$.extend($.fn.bootstrapTable.defaults.icons,{clear:'glyphicon-trash icon-clear'});$.extend($.fn.bootstrapTable.locales,{formatClearFilters:function(){return'Clear Filters';}});$.extend($.fn.bootstrapTable.defaults,$.fn.bootstrapTable.locales);$.fn.bootstrapTable.methods.push('triggerSearch');var BootstrapTable=$.fn.bootstrapTable.Constructor,_init=BootstrapTable.prototype.init,_initToolbar=BootstrapTable.prototype.initToolbar,_initHeader=BootstrapTable.prototype.initHeader,_initBody=BootstrapTable.prototype.initBody,_initSearch=BootstrapTable.prototype.initSearch;BootstrapTable.prototype.init=function(){if(this.options.filterControl){var that=this;if(!Object.keys){objectKeys();}
this.options.valuesFilterControl=[];this.$el.on('reset-view.bs.table',function(){if(!that.options.height){return;}
if(that.$tableHeader.find('select').length>0||that.$tableHeader.find('input').length>0){return;}
createControls(that,that.$tableHeader);}).on('post-header.bs.table',function(){setValues(that);}).on('post-body.bs.table',function(){if(that.options.height){fixHeaderCSS(that);}}).on('column-switch.bs.table',function(){setValues(that);}).on('load-success.bs.table',function(){that.EnableControls(true);}).on('load-error.bs.table',function(){that.EnableControls(true);});}
_init.apply(this,Array.prototype.slice.apply(arguments));};BootstrapTable.prototype.initToolbar=function(){this.showToolbar=this.showToolbar||this.options.filterControl&&this.options.filterShowClear;_initToolbar.apply(this,Array.prototype.slice.apply(arguments));if(this.options.filterControl&&this.options.filterShowClear){var $btnGroup=this.$toolbar.find('>.btn-group'),$btnClear=$btnGroup.find('.filter-show-clear');if(!$btnClear.length){$btnClear=$([sprintf('<button class="btn btn-%s filter-show-clear" ',this.options.buttonsClass),sprintf('type="button" title="%s">',this.options.formatClearFilters()),sprintf('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.clear),'</button>'].join('')).appendTo($btnGroup);$btnClear.off('click').on('click',$.proxy(this.clearFilterControl,this));}}};BootstrapTable.prototype.initHeader=function(){_initHeader.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.filterControl){return;}
createControls(this,this.$header);};BootstrapTable.prototype.initBody=function(){_initBody.apply(this,Array.prototype.slice.apply(arguments));initFilterSelectControls(this);};BootstrapTable.prototype.initSearch=function(){_initSearch.apply(this,Array.prototype.slice.apply(arguments));if(this.options.sidePagination==='server'){return;}
var that=this;var fp=$.isEmptyObject(that.filterColumnsPartial)?null:that.filterColumnsPartial;that.data=fp?$.grep(that.data,function(item,i){for(var key in fp){var thisColumn=that.columns[that.fieldsColumnsIndex[key]];var fval=fp[key].toLowerCase();var value=item[key].replace(/<(?:.|\n)*?>/gm,'');var fieldValue=$('<output>').append($.parseHTML(item[key].trim()));var fieldValueList=[];fieldValue.find('.label-tag').each(function(){$(this).find('.hidden').remove();fieldValueList.push($(this).text().trim().toLowerCase());});if(thisColumn&&thisColumn.searchFormatter){value=$.fn.bootstrapTable.utils.calculateObjectValue(that.header,that.header.formatters[$.inArray(key,that.header.fields)],[value,item,i],value);}
if(thisColumn.filterStrictSearch){if(fieldValueList){if(!($.inArray(key,that.header.fields)!==-1&&$.inArray(fval.toString().toLowerCase(),fieldValueList)!==-1)){return false;}}else{if(!($.inArray(key,that.header.fields)!==-1&&(typeof value==='string'||typeof value==='number')&&value.toString().toLowerCase()===fval.toString().toLowerCase())){return false;}}}else if(thisColumn.filterStartsWithSearch){if(!($.inArray(key,that.header.fields)!==-1&&(typeof value==='string'||typeof value==='number')&&(value+'').toLowerCase().indexOf(fval)===0)){return false;}}else{if(!($.inArray(key,that.header.fields)!==-1&&(typeof value==='string'||typeof value==='number')&&(value+'').toLowerCase().indexOf(fval)!==-1)){return false;}}}
return true;}):this.data;};BootstrapTable.prototype.initColumnSearch=function(filterColumnsDefaults){copyValues(this);if(filterColumnsDefaults){this.filterColumnsPartial=filterColumnsDefaults;this.updatePagination();for(var filter in filterColumnsDefaults){this.trigger('column-search',filter,filterColumnsDefaults[filter]);}}};BootstrapTable.prototype.onColumnSearch=function(event){if($.inArray(event.keyCode,[37,38,39,40])>-1){return;}
copyValues(this);var text=$.trim($(event.currentTarget).val());var $field=$(event.currentTarget).closest('[data-field]').data('field');if($.isEmptyObject(this.filterColumnsPartial)){this.filterColumnsPartial={};}
if(text){this.filterColumnsPartial[$field]=text;}else{delete this.filterColumnsPartial[$field];}
this.searchText+="randomText";this.options.pageNumber=1;this.EnableControls(false);this.onSearch(event);this.trigger('column-search',$field,text);};BootstrapTable.prototype.clearFilterControl=function(){if(this.options.filterControl&&this.options.filterShowClear){var that=this,cookies=collectBootstrapCookies(),header=getCurrentHeader(that),table=header.closest('table'),controls=header.find(getCurrentSearchControls(that)),search=that.$toolbar.find('.search input'),timeoutId=0;$.each(that.options.valuesFilterControl,function(i,item){item.value='';});setValues(that);if(controls.length>0){this.filterColumnsPartial={};$(controls[0]).trigger(controls[0].tagName==='INPUT'?'keyup':'change');}else{return;}
if(search.length>0){that.resetSearch();}
if(that.options.sortName!==table.data('sortName')||that.options.sortOrder!==table.data('sortOrder')){var sorter=header.find(sprintf('[data-field="%s"]',$(controls[0]).closest('table').data('sortName')));if(sorter.length>0){that.onSort(table.data('sortName'),table.data('sortName'));$(sorter).find('.sortable').trigger('click');}}
clearTimeout(timeoutId);timeoutId=setTimeout(function(){if(cookies&&cookies.length>0){$.each(cookies,function(i,item){if(that.deleteCookie!==undefined){that.deleteCookie(item);}});}},that.options.searchTimeOut);}};BootstrapTable.prototype.triggerSearch=function(){var header=getCurrentHeader(this),searchControls=getCurrentSearchControls(this);header.find(searchControls).each(function(){var el=$(this);if(el.is('select')){el.change();}else{el.keyup();}});};BootstrapTable.prototype.EnableControls=function(enable){if((this.options.disableControlWhenSearch)&&(this.options.sidePagination==='server')){var header=getCurrentHeader(this),searchControls=getCurrentSearchControls(this);if(!enable){header.find(searchControls).prop('disabled','disabled');}else{header.find(searchControls).removeProp('disabled');}}};})(jQuery);/*!
 * Chart.js v2.8.0
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global.Chart=factory());}(this,(function(){'use strict';var conversions={rgb2hsl:rgb2hsl,rgb2hsv:rgb2hsv,rgb2hwb:rgb2hwb,rgb2cmyk:rgb2cmyk,rgb2keyword:rgb2keyword,rgb2xyz:rgb2xyz,rgb2lab:rgb2lab,rgb2lch:rgb2lch,hsl2rgb:hsl2rgb,hsl2hsv:hsl2hsv,hsl2hwb:hsl2hwb,hsl2cmyk:hsl2cmyk,hsl2keyword:hsl2keyword,hsv2rgb:hsv2rgb,hsv2hsl:hsv2hsl,hsv2hwb:hsv2hwb,hsv2cmyk:hsv2cmyk,hsv2keyword:hsv2keyword,hwb2rgb:hwb2rgb,hwb2hsl:hwb2hsl,hwb2hsv:hwb2hsv,hwb2cmyk:hwb2cmyk,hwb2keyword:hwb2keyword,cmyk2rgb:cmyk2rgb,cmyk2hsl:cmyk2hsl,cmyk2hsv:cmyk2hsv,cmyk2hwb:cmyk2hwb,cmyk2keyword:cmyk2keyword,keyword2rgb:keyword2rgb,keyword2hsl:keyword2hsl,keyword2hsv:keyword2hsv,keyword2hwb:keyword2hwb,keyword2cmyk:keyword2cmyk,keyword2lab:keyword2lab,keyword2xyz:keyword2xyz,xyz2rgb:xyz2rgb,xyz2lab:xyz2lab,xyz2lch:xyz2lch,lab2xyz:lab2xyz,lab2rgb:lab2rgb,lab2lch:lab2lch,lch2lab:lch2lab,lch2xyz:lch2xyz,lch2rgb:lch2rgb};function rgb2hsl(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min,h,s,l;if(max==min)
h=0;else if(r==max)
h=(g-b)/delta;else if(g==max)
h=2+(b-r)/delta;else if(b==max)
h=4+(r-g)/delta;h=Math.min(h*60,360);if(h<0)
h+=360;l=(min+max)/2;if(max==min)
s=0;else if(l<=0.5)
s=delta/(max+min);else
s=delta/(2-max-min);return[h,s*100,l*100];}
function rgb2hsv(rgb){var r=rgb[0],g=rgb[1],b=rgb[2],min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min,h,s,v;if(max==0)
s=0;else
s=(delta/max*1000)/10;if(max==min)
h=0;else if(r==max)
h=(g-b)/delta;else if(g==max)
h=2+(b-r)/delta;else if(b==max)
h=4+(r-g)/delta;h=Math.min(h*60,360);if(h<0)
h+=360;v=((max/255)*1000)/10;return[h,s,v];}
function rgb2hwb(rgb){var r=rgb[0],g=rgb[1],b=rgb[2],h=rgb2hsl(rgb)[0],w=1/255*Math.min(r,Math.min(g,b)),b=1-1/255*Math.max(r,Math.max(g,b));return[h,w*100,b*100];}
function rgb2cmyk(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,c,m,y,k;k=Math.min(1-r,1-g,1-b);c=(1-r-k)/(1-k)||0;m=(1-g-k)/(1-k)||0;y=(1-b-k)/(1-k)||0;return[c*100,m*100,y*100,k*100];}
function rgb2keyword(rgb){return reverseKeywords[JSON.stringify(rgb)];}
function rgb2xyz(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;r=r>0.04045?Math.pow(((r+0.055)/1.055),2.4):(r/12.92);g=g>0.04045?Math.pow(((g+0.055)/1.055),2.4):(g/12.92);b=b>0.04045?Math.pow(((b+0.055)/1.055),2.4):(b/12.92);var x=(r*0.4124)+(g*0.3576)+(b*0.1805);var y=(r*0.2126)+(g*0.7152)+(b*0.0722);var z=(r*0.0193)+(g*0.1192)+(b*0.9505);return[x*100,y*100,z*100];}
function rgb2lab(rgb){var xyz=rgb2xyz(rgb),x=xyz[0],y=xyz[1],z=xyz[2],l,a,b;x/=95.047;y/=100;z/=108.883;x=x>0.008856?Math.pow(x,1/3):(7.787*x)+(16/116);y=y>0.008856?Math.pow(y,1/3):(7.787*y)+(16/116);z=z>0.008856?Math.pow(z,1/3):(7.787*z)+(16/116);l=(116*y)-16;a=500*(x-y);b=200*(y-z);return[l,a,b];}
function rgb2lch(args){return lab2lch(rgb2lab(args));}
function hsl2rgb(hsl){var h=hsl[0]/360,s=hsl[1]/100,l=hsl[2]/100,t1,t2,t3,rgb,val;if(s==0){val=l*255;return[val,val,val];}
if(l<0.5)
t2=l*(1+s);else
t2=l+s-l*s;t1=2*l-t2;rgb=[0,0,0];for(var i=0;i<3;i++){t3=h+1/3*-(i-1);t3<0&&t3++;t3>1&&t3--;if(6*t3<1)
val=t1+(t2-t1)*6*t3;else if(2*t3<1)
val=t2;else if(3*t3<2)
val=t1+(t2-t1)*(2/3-t3)*6;else
val=t1;rgb[i]=val*255;}
return rgb;}
function hsl2hsv(hsl){var h=hsl[0],s=hsl[1]/100,l=hsl[2]/100,sv,v;if(l===0){return[0,0,0];}
l*=2;s*=(l<=1)?l:2-l;v=(l+s)/2;sv=(2*s)/(l+s);return[h,sv*100,v*100];}
function hsl2hwb(args){return rgb2hwb(hsl2rgb(args));}
function hsl2cmyk(args){return rgb2cmyk(hsl2rgb(args));}
function hsl2keyword(args){return rgb2keyword(hsl2rgb(args));}
function hsv2rgb(hsv){var h=hsv[0]/60,s=hsv[1]/100,v=hsv[2]/100,hi=Math.floor(h)%6;var f=h-Math.floor(h),p=255*v*(1-s),q=255*v*(1-(s*f)),t=255*v*(1-(s*(1-f))),v=255*v;switch(hi){case 0:return[v,t,p];case 1:return[q,v,p];case 2:return[p,v,t];case 3:return[p,q,v];case 4:return[t,p,v];case 5:return[v,p,q];}}
function hsv2hsl(hsv){var h=hsv[0],s=hsv[1]/100,v=hsv[2]/100,sl,l;l=(2-s)*v;sl=s*v;sl/=(l<=1)?l:2-l;sl=sl||0;l/=2;return[h,sl*100,l*100];}
function hsv2hwb(args){return rgb2hwb(hsv2rgb(args))}
function hsv2cmyk(args){return rgb2cmyk(hsv2rgb(args));}
function hsv2keyword(args){return rgb2keyword(hsv2rgb(args));}
function hwb2rgb(hwb){var h=hwb[0]/360,wh=hwb[1]/100,bl=hwb[2]/100,ratio=wh+bl,i,v,f,n;if(ratio>1){wh/=ratio;bl/=ratio;}
i=Math.floor(6*h);v=1-bl;f=6*h-i;if((i&0x01)!=0){f=1-f;}
n=wh+f*(v-wh);switch(i){default:case 6:case 0:r=v;g=n;b=wh;break;case 1:r=n;g=v;b=wh;break;case 2:r=wh;g=v;b=n;break;case 3:r=wh;g=n;b=v;break;case 4:r=n;g=wh;b=v;break;case 5:r=v;g=wh;b=n;break;}
return[r*255,g*255,b*255];}
function hwb2hsl(args){return rgb2hsl(hwb2rgb(args));}
function hwb2hsv(args){return rgb2hsv(hwb2rgb(args));}
function hwb2cmyk(args){return rgb2cmyk(hwb2rgb(args));}
function hwb2keyword(args){return rgb2keyword(hwb2rgb(args));}
function cmyk2rgb(cmyk){var c=cmyk[0]/100,m=cmyk[1]/100,y=cmyk[2]/100,k=cmyk[3]/100,r,g,b;r=1-Math.min(1,c*(1-k)+k);g=1-Math.min(1,m*(1-k)+k);b=1-Math.min(1,y*(1-k)+k);return[r*255,g*255,b*255];}
function cmyk2hsl(args){return rgb2hsl(cmyk2rgb(args));}
function cmyk2hsv(args){return rgb2hsv(cmyk2rgb(args));}
function cmyk2hwb(args){return rgb2hwb(cmyk2rgb(args));}
function cmyk2keyword(args){return rgb2keyword(cmyk2rgb(args));}
function xyz2rgb(xyz){var x=xyz[0]/100,y=xyz[1]/100,z=xyz[2]/100,r,g,b;r=(x*3.2406)+(y*-1.5372)+(z*-0.4986);g=(x*-0.9689)+(y*1.8758)+(z*0.0415);b=(x*0.0557)+(y*-0.2040)+(z*1.0570);r=r>0.0031308?((1.055*Math.pow(r,1.0/2.4))-0.055):r=(r*12.92);g=g>0.0031308?((1.055*Math.pow(g,1.0/2.4))-0.055):g=(g*12.92);b=b>0.0031308?((1.055*Math.pow(b,1.0/2.4))-0.055):b=(b*12.92);r=Math.min(Math.max(0,r),1);g=Math.min(Math.max(0,g),1);b=Math.min(Math.max(0,b),1);return[r*255,g*255,b*255];}
function xyz2lab(xyz){var x=xyz[0],y=xyz[1],z=xyz[2],l,a,b;x/=95.047;y/=100;z/=108.883;x=x>0.008856?Math.pow(x,1/3):(7.787*x)+(16/116);y=y>0.008856?Math.pow(y,1/3):(7.787*y)+(16/116);z=z>0.008856?Math.pow(z,1/3):(7.787*z)+(16/116);l=(116*y)-16;a=500*(x-y);b=200*(y-z);return[l,a,b];}
function xyz2lch(args){return lab2lch(xyz2lab(args));}
function lab2xyz(lab){var l=lab[0],a=lab[1],b=lab[2],x,y,z,y2;if(l<=8){y=(l*100)/903.3;y2=(7.787*(y/100))+(16/116);}else{y=100*Math.pow((l+16)/116,3);y2=Math.pow(y/100,1/3);}
x=x/95.047<=0.008856?x=(95.047*((a/500)+y2-(16/116)))/7.787:95.047*Math.pow((a/500)+y2,3);z=z/108.883<=0.008859?z=(108.883*(y2-(b/200)-(16/116)))/7.787:108.883*Math.pow(y2-(b/200),3);return[x,y,z];}
function lab2lch(lab){var l=lab[0],a=lab[1],b=lab[2],hr,h,c;hr=Math.atan2(b,a);h=hr*360/2/Math.PI;if(h<0){h+=360;}
c=Math.sqrt(a*a+b*b);return[l,c,h];}
function lab2rgb(args){return xyz2rgb(lab2xyz(args));}
function lch2lab(lch){var l=lch[0],c=lch[1],h=lch[2],a,b,hr;hr=h/360*2*Math.PI;a=c*Math.cos(hr);b=c*Math.sin(hr);return[l,a,b];}
function lch2xyz(args){return lab2xyz(lch2lab(args));}
function lch2rgb(args){return lab2rgb(lch2lab(args));}
function keyword2rgb(keyword){return cssKeywords[keyword];}
function keyword2hsl(args){return rgb2hsl(keyword2rgb(args));}
function keyword2hsv(args){return rgb2hsv(keyword2rgb(args));}
function keyword2hwb(args){return rgb2hwb(keyword2rgb(args));}
function keyword2cmyk(args){return rgb2cmyk(keyword2rgb(args));}
function keyword2lab(args){return rgb2lab(keyword2rgb(args));}
function keyword2xyz(args){return rgb2xyz(keyword2rgb(args));}
var cssKeywords={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var reverseKeywords={};for(var key in cssKeywords){reverseKeywords[JSON.stringify(cssKeywords[key])]=key;}
var convert=function(){return new Converter();};for(var func in conversions){convert[func+"Raw"]=(function(func){return function(arg){if(typeof arg=="number")
arg=Array.prototype.slice.call(arguments);return conversions[func](arg);}})(func);var pair=/(\w+)2(\w+)/.exec(func),from=pair[1],to=pair[2];convert[from]=convert[from]||{};convert[from][to]=convert[func]=(function(func){return function(arg){if(typeof arg=="number")
arg=Array.prototype.slice.call(arguments);var val=conversions[func](arg);if(typeof val=="string"||val===undefined)
return val;for(var i=0;i<val.length;i++)
val[i]=Math.round(val[i]);return val;}})(func);}
var Converter=function(){this.convs={};};Converter.prototype.routeSpace=function(space,args){var values=args[0];if(values===undefined){return this.getValues(space);}
if(typeof values=="number"){values=Array.prototype.slice.call(args);}
return this.setValues(space,values);};Converter.prototype.setValues=function(space,values){this.space=space;this.convs={};this.convs[space]=values;return this;};Converter.prototype.getValues=function(space){var vals=this.convs[space];if(!vals){var fspace=this.space,from=this.convs[fspace];vals=convert[fspace][space](from);this.convs[space]=vals;}
return vals;};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(space){Converter.prototype[space]=function(vals){return this.routeSpace(space,arguments);};});var colorConvert=convert;var colorName={"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aqua":[0,255,255],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"black":[0,0,0],"blanchedalmond":[255,235,205],"blue":[0,0,255],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"fuchsia":[255,0,255],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"gray":[128,128,128],"green":[0,128,0],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"lime":[0,255,0],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"maroon":[128,0,0],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"navy":[0,0,128],"oldlace":[253,245,230],"olive":[128,128,0],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"purple":[128,0,128],"rebeccapurple":[102,51,153],"red":[255,0,0],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"silver":[192,192,192],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"teal":[0,128,128],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"white":[255,255,255],"whitesmoke":[245,245,245],"yellow":[255,255,0],"yellowgreen":[154,205,50]};var colorString={getRgba:getRgba,getHsla:getHsla,getRgb:getRgb,getHsl:getHsl,getHwb:getHwb,getAlpha:getAlpha,hexString:hexString,rgbString:rgbString,rgbaString:rgbaString,percentString:percentString,percentaString:percentaString,hslString:hslString,hslaString:hslaString,hwbString:hwbString,keyword:keyword};function getRgba(string){if(!string){return;}
var abbr=/^#([a-fA-F0-9]{3,4})$/i,hex=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,rgba=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,per=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,keyword=/(\w+)/;var rgb=[0,0,0],a=1,match=string.match(abbr),hexAlpha="";if(match){match=match[1];hexAlpha=match[3];for(var i=0;i<rgb.length;i++){rgb[i]=parseInt(match[i]+match[i],16);}
if(hexAlpha){a=Math.round((parseInt(hexAlpha+hexAlpha,16)/255)*100)/100;}}
else if(match=string.match(hex)){hexAlpha=match[2];match=match[1];for(var i=0;i<rgb.length;i++){rgb[i]=parseInt(match.slice(i*2,i*2+2),16);}
if(hexAlpha){a=Math.round((parseInt(hexAlpha,16)/255)*100)/100;}}
else if(match=string.match(rgba)){for(var i=0;i<rgb.length;i++){rgb[i]=parseInt(match[i+1]);}
a=parseFloat(match[4]);}
else if(match=string.match(per)){for(var i=0;i<rgb.length;i++){rgb[i]=Math.round(parseFloat(match[i+1])*2.55);}
a=parseFloat(match[4]);}
else if(match=string.match(keyword)){if(match[1]=="transparent"){return[0,0,0,0];}
rgb=colorName[match[1]];if(!rgb){return;}}
for(var i=0;i<rgb.length;i++){rgb[i]=scale(rgb[i],0,255);}
if(!a&&a!=0){a=1;}
else{a=scale(a,0,1);}
rgb[3]=a;return rgb;}
function getHsla(string){if(!string){return;}
var hsl=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var match=string.match(hsl);if(match){var alpha=parseFloat(match[4]);var h=scale(parseInt(match[1]),0,360),s=scale(parseFloat(match[2]),0,100),l=scale(parseFloat(match[3]),0,100),a=scale(isNaN(alpha)?1:alpha,0,1);return[h,s,l,a];}}
function getHwb(string){if(!string){return;}
var hwb=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var match=string.match(hwb);if(match){var alpha=parseFloat(match[4]);var h=scale(parseInt(match[1]),0,360),w=scale(parseFloat(match[2]),0,100),b=scale(parseFloat(match[3]),0,100),a=scale(isNaN(alpha)?1:alpha,0,1);return[h,w,b,a];}}
function getRgb(string){var rgba=getRgba(string);return rgba&&rgba.slice(0,3);}
function getHsl(string){var hsla=getHsla(string);return hsla&&hsla.slice(0,3);}
function getAlpha(string){var vals=getRgba(string);if(vals){return vals[3];}
else if(vals=getHsla(string)){return vals[3];}
else if(vals=getHwb(string)){return vals[3];}}
function hexString(rgba,a){var a=(a!==undefined&&rgba.length===3)?a:rgba[3];return"#"+hexDouble(rgba[0])
+hexDouble(rgba[1])
+hexDouble(rgba[2])
+((a>=0&&a<1)?hexDouble(Math.round(a*255)):"");}
function rgbString(rgba,alpha){if(alpha<1||(rgba[3]&&rgba[3]<1)){return rgbaString(rgba,alpha);}
return"rgb("+rgba[0]+", "+rgba[1]+", "+rgba[2]+")";}
function rgbaString(rgba,alpha){if(alpha===undefined){alpha=(rgba[3]!==undefined?rgba[3]:1);}
return"rgba("+rgba[0]+", "+rgba[1]+", "+rgba[2]
+", "+alpha+")";}
function percentString(rgba,alpha){if(alpha<1||(rgba[3]&&rgba[3]<1)){return percentaString(rgba,alpha);}
var r=Math.round(rgba[0]/255*100),g=Math.round(rgba[1]/255*100),b=Math.round(rgba[2]/255*100);return"rgb("+r+"%, "+g+"%, "+b+"%)";}
function percentaString(rgba,alpha){var r=Math.round(rgba[0]/255*100),g=Math.round(rgba[1]/255*100),b=Math.round(rgba[2]/255*100);return"rgba("+r+"%, "+g+"%, "+b+"%, "+(alpha||rgba[3]||1)+")";}
function hslString(hsla,alpha){if(alpha<1||(hsla[3]&&hsla[3]<1)){return hslaString(hsla,alpha);}
return"hsl("+hsla[0]+", "+hsla[1]+"%, "+hsla[2]+"%)";}
function hslaString(hsla,alpha){if(alpha===undefined){alpha=(hsla[3]!==undefined?hsla[3]:1);}
return"hsla("+hsla[0]+", "+hsla[1]+"%, "+hsla[2]+"%, "
+alpha+")";}
function hwbString(hwb,alpha){if(alpha===undefined){alpha=(hwb[3]!==undefined?hwb[3]:1);}
return"hwb("+hwb[0]+", "+hwb[1]+"%, "+hwb[2]+"%"
+(alpha!==undefined&&alpha!==1?", "+alpha:"")+")";}
function keyword(rgb){return reverseNames[rgb.slice(0,3)];}
function scale(num,min,max){return Math.min(Math.max(min,num),max);}
function hexDouble(num){var str=num.toString(16).toUpperCase();return(str.length<2)?"0"+str:str;}
var reverseNames={};for(var name in colorName){reverseNames[colorName[name]]=name;}
var Color=function(obj){if(obj instanceof Color){return obj;}
if(!(this instanceof Color)){return new Color(obj);}
this.valid=false;this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var vals;if(typeof obj==='string'){vals=colorString.getRgba(obj);if(vals){this.setValues('rgb',vals);}else if(vals=colorString.getHsla(obj)){this.setValues('hsl',vals);}else if(vals=colorString.getHwb(obj)){this.setValues('hwb',vals);}}else if(typeof obj==='object'){vals=obj;if(vals.r!==undefined||vals.red!==undefined){this.setValues('rgb',vals);}else if(vals.l!==undefined||vals.lightness!==undefined){this.setValues('hsl',vals);}else if(vals.v!==undefined||vals.value!==undefined){this.setValues('hsv',vals);}else if(vals.w!==undefined||vals.whiteness!==undefined){this.setValues('hwb',vals);}else if(vals.c!==undefined||vals.cyan!==undefined){this.setValues('cmyk',vals);}}};Color.prototype={isValid:function(){return this.valid;},rgb:function(){return this.setSpace('rgb',arguments);},hsl:function(){return this.setSpace('hsl',arguments);},hsv:function(){return this.setSpace('hsv',arguments);},hwb:function(){return this.setSpace('hwb',arguments);},cmyk:function(){return this.setSpace('cmyk',arguments);},rgbArray:function(){return this.values.rgb;},hslArray:function(){return this.values.hsl;},hsvArray:function(){return this.values.hsv;},hwbArray:function(){var values=this.values;if(values.alpha!==1){return values.hwb.concat([values.alpha]);}
return values.hwb;},cmykArray:function(){return this.values.cmyk;},rgbaArray:function(){var values=this.values;return values.rgb.concat([values.alpha]);},hslaArray:function(){var values=this.values;return values.hsl.concat([values.alpha]);},alpha:function(val){if(val===undefined){return this.values.alpha;}
this.setValues('alpha',val);return this;},red:function(val){return this.setChannel('rgb',0,val);},green:function(val){return this.setChannel('rgb',1,val);},blue:function(val){return this.setChannel('rgb',2,val);},hue:function(val){if(val){val%=360;val=val<0?360+val:val;}
return this.setChannel('hsl',0,val);},saturation:function(val){return this.setChannel('hsl',1,val);},lightness:function(val){return this.setChannel('hsl',2,val);},saturationv:function(val){return this.setChannel('hsv',1,val);},whiteness:function(val){return this.setChannel('hwb',1,val);},blackness:function(val){return this.setChannel('hwb',2,val);},value:function(val){return this.setChannel('hsv',2,val);},cyan:function(val){return this.setChannel('cmyk',0,val);},magenta:function(val){return this.setChannel('cmyk',1,val);},yellow:function(val){return this.setChannel('cmyk',2,val);},black:function(val){return this.setChannel('cmyk',3,val);},hexString:function(){return colorString.hexString(this.values.rgb);},rgbString:function(){return colorString.rgbString(this.values.rgb,this.values.alpha);},rgbaString:function(){return colorString.rgbaString(this.values.rgb,this.values.alpha);},percentString:function(){return colorString.percentString(this.values.rgb,this.values.alpha);},hslString:function(){return colorString.hslString(this.values.hsl,this.values.alpha);},hslaString:function(){return colorString.hslaString(this.values.hsl,this.values.alpha);},hwbString:function(){return colorString.hwbString(this.values.hwb,this.values.alpha);},keyword:function(){return colorString.keyword(this.values.rgb,this.values.alpha);},rgbNumber:function(){var rgb=this.values.rgb;return(rgb[0]<<16)|(rgb[1]<<8)|rgb[2];},luminosity:function(){var rgb=this.values.rgb;var lum=[];for(var i=0;i<rgb.length;i++){var chan=rgb[i]/255;lum[i]=(chan<=0.03928)?chan/12.92:Math.pow(((chan+0.055)/1.055),2.4);}
return 0.2126*lum[0]+0.7152*lum[1]+0.0722*lum[2];},contrast:function(color2){var lum1=this.luminosity();var lum2=color2.luminosity();if(lum1>lum2){return(lum1+0.05)/(lum2+0.05);}
return(lum2+0.05)/(lum1+0.05);},level:function(color2){var contrastRatio=this.contrast(color2);if(contrastRatio>=7.1){return'AAA';}
return(contrastRatio>=4.5)?'AA':'';},dark:function(){var rgb=this.values.rgb;var yiq=(rgb[0]*299+rgb[1]*587+rgb[2]*114)/1000;return yiq<128;},light:function(){return!this.dark();},negate:function(){var rgb=[];for(var i=0;i<3;i++){rgb[i]=255-this.values.rgb[i];}
this.setValues('rgb',rgb);return this;},lighten:function(ratio){var hsl=this.values.hsl;hsl[2]+=hsl[2]*ratio;this.setValues('hsl',hsl);return this;},darken:function(ratio){var hsl=this.values.hsl;hsl[2]-=hsl[2]*ratio;this.setValues('hsl',hsl);return this;},saturate:function(ratio){var hsl=this.values.hsl;hsl[1]+=hsl[1]*ratio;this.setValues('hsl',hsl);return this;},desaturate:function(ratio){var hsl=this.values.hsl;hsl[1]-=hsl[1]*ratio;this.setValues('hsl',hsl);return this;},whiten:function(ratio){var hwb=this.values.hwb;hwb[1]+=hwb[1]*ratio;this.setValues('hwb',hwb);return this;},blacken:function(ratio){var hwb=this.values.hwb;hwb[2]+=hwb[2]*ratio;this.setValues('hwb',hwb);return this;},greyscale:function(){var rgb=this.values.rgb;var val=rgb[0]*0.3+rgb[1]*0.59+rgb[2]*0.11;this.setValues('rgb',[val,val,val]);return this;},clearer:function(ratio){var alpha=this.values.alpha;this.setValues('alpha',alpha-(alpha*ratio));return this;},opaquer:function(ratio){var alpha=this.values.alpha;this.setValues('alpha',alpha+(alpha*ratio));return this;},rotate:function(degrees){var hsl=this.values.hsl;var hue=(hsl[0]+degrees)%360;hsl[0]=hue<0?360+hue:hue;this.setValues('hsl',hsl);return this;},mix:function(mixinColor,weight){var color1=this;var color2=mixinColor;var p=weight===undefined?0.5:weight;var w=2*p-1;var a=color1.alpha()-color2.alpha();var w1=(((w*a===-1)?w:(w+a)/(1+w*a))+1)/2.0;var w2=1-w1;return this.rgb(w1*color1.red()+w2*color2.red(),w1*color1.green()+w2*color2.green(),w1*color1.blue()+w2*color2.blue()).alpha(color1.alpha()*p+color2.alpha()*(1-p));},toJSON:function(){return this.rgb();},clone:function(){var result=new Color();var source=this.values;var target=result.values;var value,type;for(var prop in source){if(source.hasOwnProperty(prop)){value=source[prop];type=({}).toString.call(value);if(type==='[object Array]'){target[prop]=value.slice(0);}else if(type==='[object Number]'){target[prop]=value;}else{console.error('unexpected color value:',value);}}}
return result;}};Color.prototype.spaces={rgb:['red','green','blue'],hsl:['hue','saturation','lightness'],hsv:['hue','saturation','value'],hwb:['hue','whiteness','blackness'],cmyk:['cyan','magenta','yellow','black']};Color.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]};Color.prototype.getValues=function(space){var values=this.values;var vals={};for(var i=0;i<space.length;i++){vals[space.charAt(i)]=values[space][i];}
if(values.alpha!==1){vals.a=values.alpha;}
return vals;};Color.prototype.setValues=function(space,vals){var values=this.values;var spaces=this.spaces;var maxes=this.maxes;var alpha=1;var i;this.valid=true;if(space==='alpha'){alpha=vals;}else if(vals.length){values[space]=vals.slice(0,space.length);alpha=vals[space.length];}else if(vals[space.charAt(0)]!==undefined){for(i=0;i<space.length;i++){values[space][i]=vals[space.charAt(i)];}
alpha=vals.a;}else if(vals[spaces[space][0]]!==undefined){var chans=spaces[space];for(i=0;i<space.length;i++){values[space][i]=vals[chans[i]];}
alpha=vals.alpha;}
values.alpha=Math.max(0,Math.min(1,(alpha===undefined?values.alpha:alpha)));if(space==='alpha'){return false;}
var capped;for(i=0;i<space.length;i++){capped=Math.max(0,Math.min(maxes[space][i],values[space][i]));values[space][i]=Math.round(capped);}
for(var sname in spaces){if(sname!==space){values[sname]=colorConvert[space][sname](values[space]);}}
return true;};Color.prototype.setSpace=function(space,args){var vals=args[0];if(vals===undefined){return this.getValues(space);}
if(typeof vals==='number'){vals=Array.prototype.slice.call(args);}
this.setValues(space,vals);return this;};Color.prototype.setChannel=function(space,index,val){var svalues=this.values[space];if(val===undefined){return svalues[index];}else if(val===svalues[index]){return this;}
svalues[index]=val;this.setValues(space,svalues);return this;};if(typeof window!=='undefined'){window.Color=Color;}
var chartjsColor=Color;var helpers={noop:function(){},uid:(function(){var id=0;return function(){return id++;};}()),isNullOrUndef:function(value){return value===null||typeof value==='undefined';},isArray:function(value){if(Array.isArray&&Array.isArray(value)){return true;}
var type=Object.prototype.toString.call(value);if(type.substr(0,7)==='[object'&&type.substr(-6)==='Array]'){return true;}
return false;},isObject:function(value){return value!==null&&Object.prototype.toString.call(value)==='[object Object]';},isFinite:function(value){return(typeof value==='number'||value instanceof Number)&&isFinite(value);},valueOrDefault:function(value,defaultValue){return typeof value==='undefined'?defaultValue:value;},valueAtIndexOrDefault:function(value,index,defaultValue){return helpers.valueOrDefault(helpers.isArray(value)?value[index]:value,defaultValue);},callback:function(fn,args,thisArg){if(fn&&typeof fn.call==='function'){return fn.apply(thisArg,args);}},each:function(loopable,fn,thisArg,reverse){var i,len,keys;if(helpers.isArray(loopable)){len=loopable.length;if(reverse){for(i=len-1;i>=0;i--){fn.call(thisArg,loopable[i],i);}}else{for(i=0;i<len;i++){fn.call(thisArg,loopable[i],i);}}}else if(helpers.isObject(loopable)){keys=Object.keys(loopable);len=keys.length;for(i=0;i<len;i++){fn.call(thisArg,loopable[keys[i]],keys[i]);}}},arrayEquals:function(a0,a1){var i,ilen,v0,v1;if(!a0||!a1||a0.length!==a1.length){return false;}
for(i=0,ilen=a0.length;i<ilen;++i){v0=a0[i];v1=a1[i];if(v0 instanceof Array&&v1 instanceof Array){if(!helpers.arrayEquals(v0,v1)){return false;}}else if(v0!==v1){return false;}}
return true;},clone:function(source){if(helpers.isArray(source)){return source.map(helpers.clone);}
if(helpers.isObject(source)){var target={};var keys=Object.keys(source);var klen=keys.length;var k=0;for(;k<klen;++k){target[keys[k]]=helpers.clone(source[keys[k]]);}
return target;}
return source;},_merger:function(key,target,source,options){var tval=target[key];var sval=source[key];if(helpers.isObject(tval)&&helpers.isObject(sval)){helpers.merge(tval,sval,options);}else{target[key]=helpers.clone(sval);}},_mergerIf:function(key,target,source){var tval=target[key];var sval=source[key];if(helpers.isObject(tval)&&helpers.isObject(sval)){helpers.mergeIf(tval,sval);}else if(!target.hasOwnProperty(key)){target[key]=helpers.clone(sval);}},merge:function(target,source,options){var sources=helpers.isArray(source)?source:[source];var ilen=sources.length;var merge,i,keys,klen,k;if(!helpers.isObject(target)){return target;}
options=options||{};merge=options.merger||helpers._merger;for(i=0;i<ilen;++i){source=sources[i];if(!helpers.isObject(source)){continue;}
keys=Object.keys(source);for(k=0,klen=keys.length;k<klen;++k){merge(keys[k],target,source,options);}}
return target;},mergeIf:function(target,source){return helpers.merge(target,source,{merger:helpers._mergerIf});},extend:function(target){var setFn=function(value,key){target[key]=value;};for(var i=1,ilen=arguments.length;i<ilen;++i){helpers.each(arguments[i],setFn);}
return target;},inherits:function(extensions){var me=this;var ChartElement=(extensions&&extensions.hasOwnProperty('constructor'))?extensions.constructor:function(){return me.apply(this,arguments);};var Surrogate=function(){this.constructor=ChartElement;};Surrogate.prototype=me.prototype;ChartElement.prototype=new Surrogate();ChartElement.extend=helpers.inherits;if(extensions){helpers.extend(ChartElement.prototype,extensions);}
ChartElement.__super__=me.prototype;return ChartElement;}};var helpers_core=helpers;helpers.callCallback=helpers.callback;helpers.indexOf=function(array,item,fromIndex){return Array.prototype.indexOf.call(array,item,fromIndex);};helpers.getValueOrDefault=helpers.valueOrDefault;helpers.getValueAtIndexOrDefault=helpers.valueAtIndexOrDefault;var effects={linear:function(t){return t;},easeInQuad:function(t){return t*t;},easeOutQuad:function(t){return-t*(t-2);},easeInOutQuad:function(t){if((t/=0.5)<1){return 0.5*t*t;}
return-0.5*((--t)*(t-2)-1);},easeInCubic:function(t){return t*t*t;},easeOutCubic:function(t){return(t=t-1)*t*t+1;},easeInOutCubic:function(t){if((t/=0.5)<1){return 0.5*t*t*t;}
return 0.5*((t-=2)*t*t+2);},easeInQuart:function(t){return t*t*t*t;},easeOutQuart:function(t){return-((t=t-1)*t*t*t-1);},easeInOutQuart:function(t){if((t/=0.5)<1){return 0.5*t*t*t*t;}
return-0.5*((t-=2)*t*t*t-2);},easeInQuint:function(t){return t*t*t*t*t;},easeOutQuint:function(t){return(t=t-1)*t*t*t*t+1;},easeInOutQuint:function(t){if((t/=0.5)<1){return 0.5*t*t*t*t*t;}
return 0.5*((t-=2)*t*t*t*t+2);},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1;},easeOutSine:function(t){return Math.sin(t*(Math.PI/2));},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t)-1);},easeInExpo:function(t){return(t===0)?0:Math.pow(2,10*(t-1));},easeOutExpo:function(t){return(t===1)?1:-Math.pow(2,-10*t)+1;},easeInOutExpo:function(t){if(t===0){return 0;}
if(t===1){return 1;}
if((t/=0.5)<1){return 0.5*Math.pow(2,10*(t-1));}
return 0.5*(-Math.pow(2,-10*--t)+2);},easeInCirc:function(t){if(t>=1){return t;}
return-(Math.sqrt(1-t*t)-1);},easeOutCirc:function(t){return Math.sqrt(1-(t=t-1)*t);},easeInOutCirc:function(t){if((t/=0.5)<1){return-0.5*(Math.sqrt(1-t*t)-1);}
return 0.5*(Math.sqrt(1-(t-=2)*t)+1);},easeInElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0){return 0;}
if(t===1){return 1;}
if(!p){p=0.3;}
if(a<1){a=1;s=p/4;}else{s=p/(2*Math.PI)*Math.asin(1/a);}
return-(a*Math.pow(2,10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/p));},easeOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0){return 0;}
if(t===1){return 1;}
if(!p){p=0.3;}
if(a<1){a=1;s=p/4;}else{s=p/(2*Math.PI)*Math.asin(1/a);}
return a*Math.pow(2,-10*t)*Math.sin((t-s)*(2*Math.PI)/p)+1;},easeInOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0){return 0;}
if((t/=0.5)===2){return 1;}
if(!p){p=0.45;}
if(a<1){a=1;s=p/4;}else{s=p/(2*Math.PI)*Math.asin(1/a);}
if(t<1){return-0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/p));}
return a*Math.pow(2,-10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/p)*0.5+1;},easeInBack:function(t){var s=1.70158;return t*t*((s+1)*t-s);},easeOutBack:function(t){var s=1.70158;return(t=t-1)*t*((s+1)*t+s)+1;},easeInOutBack:function(t){var s=1.70158;if((t/=0.5)<1){return 0.5*(t*t*(((s*=(1.525))+1)*t-s));}
return 0.5*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2);},easeInBounce:function(t){return 1-effects.easeOutBounce(1-t);},easeOutBounce:function(t){if(t<(1/2.75)){return 7.5625*t*t;}
if(t<(2/2.75)){return 7.5625*(t-=(1.5/2.75))*t+0.75;}
if(t<(2.5/2.75)){return 7.5625*(t-=(2.25/2.75))*t+0.9375;}
return 7.5625*(t-=(2.625/2.75))*t+0.984375;},easeInOutBounce:function(t){if(t<0.5){return effects.easeInBounce(t*2)*0.5;}
return effects.easeOutBounce(t*2-1)*0.5+0.5;}};var helpers_easing={effects:effects};helpers_core.easingEffects=effects;var PI=Math.PI;var RAD_PER_DEG=PI/180;var DOUBLE_PI=PI*2;var HALF_PI=PI/2;var QUARTER_PI=PI/4;var TWO_THIRDS_PI=PI*2/3;var exports$1={clear:function(chart){chart.ctx.clearRect(0,0,chart.width,chart.height);},roundedRect:function(ctx,x,y,width,height,radius){if(radius){var r=Math.min(radius,height/2,width/2);var left=x+r;var top=y+r;var right=x+width-r;var bottom=y+height-r;ctx.moveTo(x,top);if(left<right&&top<bottom){ctx.arc(left,top,r,-PI,-HALF_PI);ctx.arc(right,top,r,-HALF_PI,0);ctx.arc(right,bottom,r,0,HALF_PI);ctx.arc(left,bottom,r,HALF_PI,PI);}else if(left<right){ctx.moveTo(left,y);ctx.arc(right,top,r,-HALF_PI,HALF_PI);ctx.arc(left,top,r,HALF_PI,PI+HALF_PI);}else if(top<bottom){ctx.arc(left,top,r,-PI,0);ctx.arc(left,bottom,r,0,PI);}else{ctx.arc(left,top,r,-PI,PI);}
ctx.closePath();ctx.moveTo(x,y);}else{ctx.rect(x,y,width,height);}},drawPoint:function(ctx,style,radius,x,y,rotation){var type,xOffset,yOffset,size,cornerRadius;var rad=(rotation||0)*RAD_PER_DEG;if(style&&typeof style==='object'){type=style.toString();if(type==='[object HTMLImageElement]'||type==='[object HTMLCanvasElement]'){ctx.drawImage(style,x-style.width/2,y-style.height/2,style.width,style.height);return;}}
if(isNaN(radius)||radius<=0){return;}
ctx.beginPath();switch(style){default:ctx.arc(x,y,radius,0,DOUBLE_PI);ctx.closePath();break;case'triangle':ctx.moveTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius);rad+=TWO_THIRDS_PI;ctx.lineTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius);rad+=TWO_THIRDS_PI;ctx.lineTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius);ctx.closePath();break;case'rectRounded':cornerRadius=radius*0.516;size=radius-cornerRadius;xOffset=Math.cos(rad+QUARTER_PI)*size;yOffset=Math.sin(rad+QUARTER_PI)*size;ctx.arc(x-xOffset,y-yOffset,cornerRadius,rad-PI,rad-HALF_PI);ctx.arc(x+yOffset,y-xOffset,cornerRadius,rad-HALF_PI,rad);ctx.arc(x+xOffset,y+yOffset,cornerRadius,rad,rad+HALF_PI);ctx.arc(x-yOffset,y+xOffset,cornerRadius,rad+HALF_PI,rad+PI);ctx.closePath();break;case'rect':if(!rotation){size=Math.SQRT1_2*radius;ctx.rect(x-size,y-size,2*size,2*size);break;}
rad+=QUARTER_PI;case'rectRot':xOffset=Math.cos(rad)*radius;yOffset=Math.sin(rad)*radius;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+yOffset,y-xOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.lineTo(x-yOffset,y+xOffset);ctx.closePath();break;case'crossRot':rad+=QUARTER_PI;case'cross':xOffset=Math.cos(rad)*radius;yOffset=Math.sin(rad)*radius;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.moveTo(x+yOffset,y-xOffset);ctx.lineTo(x-yOffset,y+xOffset);break;case'star':xOffset=Math.cos(rad)*radius;yOffset=Math.sin(rad)*radius;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.moveTo(x+yOffset,y-xOffset);ctx.lineTo(x-yOffset,y+xOffset);rad+=QUARTER_PI;xOffset=Math.cos(rad)*radius;yOffset=Math.sin(rad)*radius;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);ctx.moveTo(x+yOffset,y-xOffset);ctx.lineTo(x-yOffset,y+xOffset);break;case'line':xOffset=Math.cos(rad)*radius;yOffset=Math.sin(rad)*radius;ctx.moveTo(x-xOffset,y-yOffset);ctx.lineTo(x+xOffset,y+yOffset);break;case'dash':ctx.moveTo(x,y);ctx.lineTo(x+Math.cos(rad)*radius,y+Math.sin(rad)*radius);break;}
ctx.fill();ctx.stroke();},_isPointInArea:function(point,area){var epsilon=1e-6;return point.x>area.left-epsilon&&point.x<area.right+epsilon&&point.y>area.top-epsilon&&point.y<area.bottom+epsilon;},clipArea:function(ctx,area){ctx.save();ctx.beginPath();ctx.rect(area.left,area.top,area.right-area.left,area.bottom-area.top);ctx.clip();},unclipArea:function(ctx){ctx.restore();},lineTo:function(ctx,previous,target,flip){var stepped=target.steppedLine;if(stepped){if(stepped==='middle'){var midpoint=(previous.x+target.x)/2.0;ctx.lineTo(midpoint,flip?target.y:previous.y);ctx.lineTo(midpoint,flip?previous.y:target.y);}else if((stepped==='after'&&!flip)||(stepped!=='after'&&flip)){ctx.lineTo(previous.x,target.y);}else{ctx.lineTo(target.x,previous.y);}
ctx.lineTo(target.x,target.y);return;}
if(!target.tension){ctx.lineTo(target.x,target.y);return;}
ctx.bezierCurveTo(flip?previous.controlPointPreviousX:previous.controlPointNextX,flip?previous.controlPointPreviousY:previous.controlPointNextY,flip?target.controlPointNextX:target.controlPointPreviousX,flip?target.controlPointNextY:target.controlPointPreviousY,target.x,target.y);}};var helpers_canvas=exports$1;helpers_core.clear=exports$1.clear;helpers_core.drawRoundedRectangle=function(ctx){ctx.beginPath();exports$1.roundedRect.apply(exports$1,arguments);};var defaults={_set:function(scope,values){return helpers_core.merge(this[scope]||(this[scope]={}),values);}};defaults._set('global',{defaultColor:'rgba(0,0,0,0.1)',defaultFontColor:'#666',defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:'normal',defaultLineHeight:1.2,showLines:true});var core_defaults=defaults;var valueOrDefault=helpers_core.valueOrDefault;function toFontString(font){if(!font||helpers_core.isNullOrUndef(font.size)||helpers_core.isNullOrUndef(font.family)){return null;}
return(font.style?font.style+' ':'')
+(font.weight?font.weight+' ':'')
+font.size+'px '
+font.family;}
var helpers_options={toLineHeight:function(value,size){var matches=(''+value).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!matches||matches[1]==='normal'){return size*1.2;}
value=+matches[2];switch(matches[3]){case'px':return value;case'%':value/=100;break;default:break;}
return size*value;},toPadding:function(value){var t,r,b,l;if(helpers_core.isObject(value)){t=+value.top||0;r=+value.right||0;b=+value.bottom||0;l=+value.left||0;}else{t=r=b=l=+value||0;}
return{top:t,right:r,bottom:b,left:l,height:t+b,width:l+r};},_parseFont:function(options){var globalDefaults=core_defaults.global;var size=valueOrDefault(options.fontSize,globalDefaults.defaultFontSize);var font={family:valueOrDefault(options.fontFamily,globalDefaults.defaultFontFamily),lineHeight:helpers_core.options.toLineHeight(valueOrDefault(options.lineHeight,globalDefaults.defaultLineHeight),size),size:size,style:valueOrDefault(options.fontStyle,globalDefaults.defaultFontStyle),weight:null,string:''};font.string=toFontString(font);return font;},resolve:function(inputs,context,index){var i,ilen,value;for(i=0,ilen=inputs.length;i<ilen;++i){value=inputs[i];if(value===undefined){continue;}
if(context!==undefined&&typeof value==='function'){value=value(context);}
if(index!==undefined&&helpers_core.isArray(value)){value=value[index];}
if(value!==undefined){return value;}}}};var helpers$1=helpers_core;var easing=helpers_easing;var canvas=helpers_canvas;var options=helpers_options;helpers$1.easing=easing;helpers$1.canvas=canvas;helpers$1.options=options;function interpolate(start,view,model,ease){var keys=Object.keys(model);var i,ilen,key,actual,origin,target,type,c0,c1;for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];target=model[key];if(!view.hasOwnProperty(key)){view[key]=target;}
actual=view[key];if(actual===target||key[0]==='_'){continue;}
if(!start.hasOwnProperty(key)){start[key]=actual;}
origin=start[key];type=typeof target;if(type===typeof origin){if(type==='string'){c0=chartjsColor(origin);if(c0.valid){c1=chartjsColor(target);if(c1.valid){view[key]=c1.mix(c0,ease).rgbString();continue;}}}else if(helpers$1.isFinite(origin)&&helpers$1.isFinite(target)){view[key]=origin+(target-origin)*ease;continue;}}
view[key]=target;}}
var Element=function(configuration){helpers$1.extend(this,configuration);this.initialize.apply(this,arguments);};helpers$1.extend(Element.prototype,{initialize:function(){this.hidden=false;},pivot:function(){var me=this;if(!me._view){me._view=helpers$1.clone(me._model);}
me._start={};return me;},transition:function(ease){var me=this;var model=me._model;var start=me._start;var view=me._view;if(!model||ease===1){me._view=model;me._start=null;return me;}
if(!view){view=me._view={};}
if(!start){start=me._start={};}
interpolate(start,view,model,ease);return me;},tooltipPosition:function(){return{x:this._model.x,y:this._model.y};},hasValue:function(){return helpers$1.isNumber(this._model.x)&&helpers$1.isNumber(this._model.y);}});Element.extend=helpers$1.inherits;var core_element=Element;var exports$2=core_element.extend({chart:null,currentStep:0,numSteps:60,easing:'',render:null,onAnimationProgress:null,onAnimationComplete:null,});var core_animation=exports$2;Object.defineProperty(exports$2.prototype,'animationObject',{get:function(){return this;}});Object.defineProperty(exports$2.prototype,'chartInstance',{get:function(){return this.chart;},set:function(value){this.chart=value;}});core_defaults._set('global',{animation:{duration:1000,easing:'easeOutQuart',onProgress:helpers$1.noop,onComplete:helpers$1.noop}});var core_animations={animations:[],request:null,addAnimation:function(chart,animation,duration,lazy){var animations=this.animations;var i,ilen;animation.chart=chart;animation.startTime=Date.now();animation.duration=duration;if(!lazy){chart.animating=true;}
for(i=0,ilen=animations.length;i<ilen;++i){if(animations[i].chart===chart){animations[i]=animation;return;}}
animations.push(animation);if(animations.length===1){this.requestAnimationFrame();}},cancelAnimation:function(chart){var index=helpers$1.findIndex(this.animations,function(animation){return animation.chart===chart;});if(index!==-1){this.animations.splice(index,1);chart.animating=false;}},requestAnimationFrame:function(){var me=this;if(me.request===null){me.request=helpers$1.requestAnimFrame.call(window,function(){me.request=null;me.startDigest();});}},startDigest:function(){var me=this;me.advance();if(me.animations.length>0){me.requestAnimationFrame();}},advance:function(){var animations=this.animations;var animation,chart,numSteps,nextStep;var i=0;while(i<animations.length){animation=animations[i];chart=animation.chart;numSteps=animation.numSteps;nextStep=Math.floor((Date.now()-animation.startTime)/animation.duration*numSteps)+1;animation.currentStep=Math.min(nextStep,numSteps);helpers$1.callback(animation.render,[chart,animation],chart);helpers$1.callback(animation.onAnimationProgress,[animation],chart);if(animation.currentStep>=numSteps){helpers$1.callback(animation.onAnimationComplete,[animation],chart);chart.animating=false;animations.splice(i,1);}else{++i;}}}};var resolve=helpers$1.options.resolve;var arrayEvents=['push','pop','shift','splice','unshift'];function listenArrayEvents(array,listener){if(array._chartjs){array._chartjs.listeners.push(listener);return;}
Object.defineProperty(array,'_chartjs',{configurable:true,enumerable:false,value:{listeners:[listener]}});arrayEvents.forEach(function(key){var method='onData'+key.charAt(0).toUpperCase()+key.slice(1);var base=array[key];Object.defineProperty(array,key,{configurable:true,enumerable:false,value:function(){var args=Array.prototype.slice.call(arguments);var res=base.apply(this,args);helpers$1.each(array._chartjs.listeners,function(object){if(typeof object[method]==='function'){object[method].apply(object,args);}});return res;}});});}
function unlistenArrayEvents(array,listener){var stub=array._chartjs;if(!stub){return;}
var listeners=stub.listeners;var index=listeners.indexOf(listener);if(index!==-1){listeners.splice(index,1);}
if(listeners.length>0){return;}
arrayEvents.forEach(function(key){delete array[key];});delete array._chartjs;}
var DatasetController=function(chart,datasetIndex){this.initialize(chart,datasetIndex);};helpers$1.extend(DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(chart,datasetIndex){var me=this;me.chart=chart;me.index=datasetIndex;me.linkScales();me.addElements();},updateIndex:function(datasetIndex){this.index=datasetIndex;},linkScales:function(){var me=this;var meta=me.getMeta();var dataset=me.getDataset();if(meta.xAxisID===null||!(meta.xAxisID in me.chart.scales)){meta.xAxisID=dataset.xAxisID||me.chart.options.scales.xAxes[0].id;}
if(meta.yAxisID===null||!(meta.yAxisID in me.chart.scales)){meta.yAxisID=dataset.yAxisID||me.chart.options.scales.yAxes[0].id;}},getDataset:function(){return this.chart.data.datasets[this.index];},getMeta:function(){return this.chart.getDatasetMeta(this.index);},getScaleForId:function(scaleID){return this.chart.scales[scaleID];},_getValueScaleId:function(){return this.getMeta().yAxisID;},_getIndexScaleId:function(){return this.getMeta().xAxisID;},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId());},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId());},reset:function(){this.update(true);},destroy:function(){if(this._data){unlistenArrayEvents(this._data,this);}},createMetaDataset:function(){var me=this;var type=me.datasetElementType;return type&&new type({_chart:me.chart,_datasetIndex:me.index});},createMetaData:function(index){var me=this;var type=me.dataElementType;return type&&new type({_chart:me.chart,_datasetIndex:me.index,_index:index});},addElements:function(){var me=this;var meta=me.getMeta();var data=me.getDataset().data||[];var metaData=meta.data;var i,ilen;for(i=0,ilen=data.length;i<ilen;++i){metaData[i]=metaData[i]||me.createMetaData(i);}
meta.dataset=meta.dataset||me.createMetaDataset();},addElementAndReset:function(index){var element=this.createMetaData(index);this.getMeta().data.splice(index,0,element);this.updateElement(element,index,true);},buildOrUpdateElements:function(){var me=this;var dataset=me.getDataset();var data=dataset.data||(dataset.data=[]);if(me._data!==data){if(me._data){unlistenArrayEvents(me._data,me);}
if(data&&Object.isExtensible(data)){listenArrayEvents(data,me);}
me._data=data;}
me.resyncElements();},update:helpers$1.noop,transition:function(easingValue){var meta=this.getMeta();var elements=meta.data||[];var ilen=elements.length;var i=0;for(;i<ilen;++i){elements[i].transition(easingValue);}
if(meta.dataset){meta.dataset.transition(easingValue);}},draw:function(){var meta=this.getMeta();var elements=meta.data||[];var ilen=elements.length;var i=0;if(meta.dataset){meta.dataset.draw();}
for(;i<ilen;++i){elements[i].draw();}},removeHoverStyle:function(element){helpers$1.merge(element._model,element.$previousStyle||{});delete element.$previousStyle;},setHoverStyle:function(element){var dataset=this.chart.data.datasets[element._datasetIndex];var index=element._index;var custom=element.custom||{};var model=element._model;var getHoverColor=helpers$1.getHoverColor;element.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth};model.backgroundColor=resolve([custom.hoverBackgroundColor,dataset.hoverBackgroundColor,getHoverColor(model.backgroundColor)],undefined,index);model.borderColor=resolve([custom.hoverBorderColor,dataset.hoverBorderColor,getHoverColor(model.borderColor)],undefined,index);model.borderWidth=resolve([custom.hoverBorderWidth,dataset.hoverBorderWidth,model.borderWidth],undefined,index);},resyncElements:function(){var me=this;var meta=me.getMeta();var data=me.getDataset().data;var numMeta=meta.data.length;var numData=data.length;if(numData<numMeta){meta.data.splice(numData,numMeta-numData);}else if(numData>numMeta){me.insertElements(numMeta,numData-numMeta);}},insertElements:function(start,count){for(var i=0;i<count;++i){this.addElementAndReset(start+i);}},onDataPush:function(){var count=arguments.length;this.insertElements(this.getDataset().data.length-count,count);},onDataPop:function(){this.getMeta().data.pop();},onDataShift:function(){this.getMeta().data.shift();},onDataSplice:function(start,count){this.getMeta().data.splice(start,count);this.insertElements(start,arguments.length-2);},onDataUnshift:function(){this.insertElements(0,arguments.length);}});DatasetController.extend=helpers$1.inherits;var core_datasetController=DatasetController;core_defaults._set('global',{elements:{arc:{backgroundColor:core_defaults.global.defaultColor,borderColor:'#fff',borderWidth:2,borderAlign:'center'}}});var element_arc=core_element.extend({inLabelRange:function(mouseX){var vm=this._view;if(vm){return(Math.pow(mouseX-vm.x,2)<Math.pow(vm.radius+vm.hoverRadius,2));}
return false;},inRange:function(chartX,chartY){var vm=this._view;if(vm){var pointRelativePosition=helpers$1.getAngleFromPoint(vm,{x:chartX,y:chartY});var angle=pointRelativePosition.angle;var distance=pointRelativePosition.distance;var startAngle=vm.startAngle;var endAngle=vm.endAngle;while(endAngle<startAngle){endAngle+=2.0*Math.PI;}
while(angle>endAngle){angle-=2.0*Math.PI;}
while(angle<startAngle){angle+=2.0*Math.PI;}
var betweenAngles=(angle>=startAngle&&angle<=endAngle);var withinRadius=(distance>=vm.innerRadius&&distance<=vm.outerRadius);return(betweenAngles&&withinRadius);}
return false;},getCenterPoint:function(){var vm=this._view;var halfAngle=(vm.startAngle+vm.endAngle)/2;var halfRadius=(vm.innerRadius+vm.outerRadius)/2;return{x:vm.x+Math.cos(halfAngle)*halfRadius,y:vm.y+Math.sin(halfAngle)*halfRadius};},getArea:function(){var vm=this._view;return Math.PI*((vm.endAngle-vm.startAngle)/(2*Math.PI))*(Math.pow(vm.outerRadius,2)-Math.pow(vm.innerRadius,2));},tooltipPosition:function(){var vm=this._view;var centreAngle=vm.startAngle+((vm.endAngle-vm.startAngle)/2);var rangeFromCentre=(vm.outerRadius-vm.innerRadius)/2+vm.innerRadius;return{x:vm.x+(Math.cos(centreAngle)*rangeFromCentre),y:vm.y+(Math.sin(centreAngle)*rangeFromCentre)};},draw:function(){var ctx=this._chart.ctx;var vm=this._view;var sA=vm.startAngle;var eA=vm.endAngle;var pixelMargin=(vm.borderAlign==='inner')?0.33:0;var angleMargin;ctx.save();ctx.beginPath();ctx.arc(vm.x,vm.y,Math.max(vm.outerRadius-pixelMargin,0),sA,eA);ctx.arc(vm.x,vm.y,vm.innerRadius,eA,sA,true);ctx.closePath();ctx.fillStyle=vm.backgroundColor;ctx.fill();if(vm.borderWidth){if(vm.borderAlign==='inner'){ctx.beginPath();angleMargin=pixelMargin/vm.outerRadius;ctx.arc(vm.x,vm.y,vm.outerRadius,sA-angleMargin,eA+angleMargin);if(vm.innerRadius>pixelMargin){angleMargin=pixelMargin/vm.innerRadius;ctx.arc(vm.x,vm.y,vm.innerRadius-pixelMargin,eA+angleMargin,sA-angleMargin,true);}else{ctx.arc(vm.x,vm.y,pixelMargin,eA+Math.PI/2,sA-Math.PI/2);}
ctx.closePath();ctx.clip();ctx.beginPath();ctx.arc(vm.x,vm.y,vm.outerRadius,sA,eA);ctx.arc(vm.x,vm.y,vm.innerRadius,eA,sA,true);ctx.closePath();ctx.lineWidth=vm.borderWidth*2;ctx.lineJoin='round';}else{ctx.lineWidth=vm.borderWidth;ctx.lineJoin='bevel';}
ctx.strokeStyle=vm.borderColor;ctx.stroke();}
ctx.restore();}});var valueOrDefault$1=helpers$1.valueOrDefault;var defaultColor=core_defaults.global.defaultColor;core_defaults._set('global',{elements:{line:{tension:0.4,backgroundColor:defaultColor,borderWidth:3,borderColor:defaultColor,borderCapStyle:'butt',borderDash:[],borderDashOffset:0.0,borderJoinStyle:'miter',capBezierPoints:true,fill:true,}}});var element_line=core_element.extend({draw:function(){var me=this;var vm=me._view;var ctx=me._chart.ctx;var spanGaps=vm.spanGaps;var points=me._children.slice();var globalDefaults=core_defaults.global;var globalOptionLineElements=globalDefaults.elements.line;var lastDrawnIndex=-1;var index,current,previous,currentVM;if(me._loop&&points.length){points.push(points[0]);}
ctx.save();ctx.lineCap=vm.borderCapStyle||globalOptionLineElements.borderCapStyle;if(ctx.setLineDash){ctx.setLineDash(vm.borderDash||globalOptionLineElements.borderDash);}
ctx.lineDashOffset=valueOrDefault$1(vm.borderDashOffset,globalOptionLineElements.borderDashOffset);ctx.lineJoin=vm.borderJoinStyle||globalOptionLineElements.borderJoinStyle;ctx.lineWidth=valueOrDefault$1(vm.borderWidth,globalOptionLineElements.borderWidth);ctx.strokeStyle=vm.borderColor||globalDefaults.defaultColor;ctx.beginPath();lastDrawnIndex=-1;for(index=0;index<points.length;++index){current=points[index];previous=helpers$1.previousItem(points,index);currentVM=current._view;if(index===0){if(!currentVM.skip){ctx.moveTo(currentVM.x,currentVM.y);lastDrawnIndex=index;}}else{previous=lastDrawnIndex===-1?previous:points[lastDrawnIndex];if(!currentVM.skip){if((lastDrawnIndex!==(index-1)&&!spanGaps)||lastDrawnIndex===-1){ctx.moveTo(currentVM.x,currentVM.y);}else{helpers$1.canvas.lineTo(ctx,previous._view,current._view);}
lastDrawnIndex=index;}}}
ctx.stroke();ctx.restore();}});var valueOrDefault$2=helpers$1.valueOrDefault;var defaultColor$1=core_defaults.global.defaultColor;core_defaults._set('global',{elements:{point:{radius:3,pointStyle:'circle',backgroundColor:defaultColor$1,borderColor:defaultColor$1,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});function xRange(mouseX){var vm=this._view;return vm?(Math.abs(mouseX-vm.x)<vm.radius+vm.hitRadius):false;}
function yRange(mouseY){var vm=this._view;return vm?(Math.abs(mouseY-vm.y)<vm.radius+vm.hitRadius):false;}
var element_point=core_element.extend({inRange:function(mouseX,mouseY){var vm=this._view;return vm?((Math.pow(mouseX-vm.x,2)+Math.pow(mouseY-vm.y,2))<Math.pow(vm.hitRadius+vm.radius,2)):false;},inLabelRange:xRange,inXRange:xRange,inYRange:yRange,getCenterPoint:function(){var vm=this._view;return{x:vm.x,y:vm.y};},getArea:function(){return Math.PI*Math.pow(this._view.radius,2);},tooltipPosition:function(){var vm=this._view;return{x:vm.x,y:vm.y,padding:vm.radius+vm.borderWidth};},draw:function(chartArea){var vm=this._view;var ctx=this._chart.ctx;var pointStyle=vm.pointStyle;var rotation=vm.rotation;var radius=vm.radius;var x=vm.x;var y=vm.y;var globalDefaults=core_defaults.global;var defaultColor=globalDefaults.defaultColor;if(vm.skip){return;}
if(chartArea===undefined||helpers$1.canvas._isPointInArea(vm,chartArea)){ctx.strokeStyle=vm.borderColor||defaultColor;ctx.lineWidth=valueOrDefault$2(vm.borderWidth,globalDefaults.elements.point.borderWidth);ctx.fillStyle=vm.backgroundColor||defaultColor;helpers$1.canvas.drawPoint(ctx,pointStyle,radius,x,y,rotation);}}});var defaultColor$2=core_defaults.global.defaultColor;core_defaults._set('global',{elements:{rectangle:{backgroundColor:defaultColor$2,borderColor:defaultColor$2,borderSkipped:'bottom',borderWidth:0}}});function isVertical(vm){return vm&&vm.width!==undefined;}
function getBarBounds(vm){var x1,x2,y1,y2,half;if(isVertical(vm)){half=vm.width/2;x1=vm.x-half;x2=vm.x+half;y1=Math.min(vm.y,vm.base);y2=Math.max(vm.y,vm.base);}else{half=vm.height/2;x1=Math.min(vm.x,vm.base);x2=Math.max(vm.x,vm.base);y1=vm.y-half;y2=vm.y+half;}
return{left:x1,top:y1,right:x2,bottom:y2};}
function swap(orig,v1,v2){return orig===v1?v2:orig===v2?v1:orig;}
function parseBorderSkipped(vm){var edge=vm.borderSkipped;var res={};if(!edge){return res;}
if(vm.horizontal){if(vm.base>vm.x){edge=swap(edge,'left','right');}}else if(vm.base<vm.y){edge=swap(edge,'bottom','top');}
res[edge]=true;return res;}
function parseBorderWidth(vm,maxW,maxH){var value=vm.borderWidth;var skip=parseBorderSkipped(vm);var t,r,b,l;if(helpers$1.isObject(value)){t=+value.top||0;r=+value.right||0;b=+value.bottom||0;l=+value.left||0;}else{t=r=b=l=+value||0;}
return{t:skip.top||(t<0)?0:t>maxH?maxH:t,r:skip.right||(r<0)?0:r>maxW?maxW:r,b:skip.bottom||(b<0)?0:b>maxH?maxH:b,l:skip.left||(l<0)?0:l>maxW?maxW:l};}
function boundingRects(vm){var bounds=getBarBounds(vm);var width=bounds.right-bounds.left;var height=bounds.bottom-bounds.top;var border=parseBorderWidth(vm,width/2,height/2);return{outer:{x:bounds.left,y:bounds.top,w:width,h:height},inner:{x:bounds.left+border.l,y:bounds.top+border.t,w:width-border.l-border.r,h:height-border.t-border.b}};}
function inRange(vm,x,y){var skipX=x===null;var skipY=y===null;var bounds=!vm||(skipX&&skipY)?false:getBarBounds(vm);return bounds&&(skipX||x>=bounds.left&&x<=bounds.right)&&(skipY||y>=bounds.top&&y<=bounds.bottom);}
var element_rectangle=core_element.extend({draw:function(){var ctx=this._chart.ctx;var vm=this._view;var rects=boundingRects(vm);var outer=rects.outer;var inner=rects.inner;ctx.fillStyle=vm.backgroundColor;ctx.fillRect(outer.x,outer.y,outer.w,outer.h);if(outer.w===inner.w&&outer.h===inner.h){return;}
ctx.save();ctx.beginPath();ctx.rect(outer.x,outer.y,outer.w,outer.h);ctx.clip();ctx.fillStyle=vm.borderColor;ctx.rect(inner.x,inner.y,inner.w,inner.h);ctx.fill('evenodd');ctx.restore();},height:function(){var vm=this._view;return vm.base-vm.y;},inRange:function(mouseX,mouseY){return inRange(this._view,mouseX,mouseY);},inLabelRange:function(mouseX,mouseY){var vm=this._view;return isVertical(vm)?inRange(vm,mouseX,null):inRange(vm,null,mouseY);},inXRange:function(mouseX){return inRange(this._view,mouseX,null);},inYRange:function(mouseY){return inRange(this._view,null,mouseY);},getCenterPoint:function(){var vm=this._view;var x,y;if(isVertical(vm)){x=vm.x;y=(vm.y+vm.base)/2;}else{x=(vm.x+vm.base)/2;y=vm.y;}
return{x:x,y:y};},getArea:function(){var vm=this._view;return isVertical(vm)?vm.width*Math.abs(vm.y-vm.base):vm.height*Math.abs(vm.x-vm.base);},tooltipPosition:function(){var vm=this._view;return{x:vm.x,y:vm.y};}});var elements={};var Arc=element_arc;var Line=element_line;var Point=element_point;var Rectangle=element_rectangle;elements.Arc=Arc;elements.Line=Line;elements.Point=Point;elements.Rectangle=Rectangle;var resolve$1=helpers$1.options.resolve;core_defaults._set('bar',{hover:{mode:'label'},scales:{xAxes:[{type:'category',categoryPercentage:0.8,barPercentage:0.9,offset:true,gridLines:{offsetGridLines:true}}],yAxes:[{type:'linear'}]}});function computeMinSampleSize(scale,pixels){var min=scale.isHorizontal()?scale.width:scale.height;var ticks=scale.getTicks();var prev,curr,i,ilen;for(i=1,ilen=pixels.length;i<ilen;++i){min=Math.min(min,Math.abs(pixels[i]-pixels[i-1]));}
for(i=0,ilen=ticks.length;i<ilen;++i){curr=scale.getPixelForTick(i);min=i>0?Math.min(min,curr-prev):min;prev=curr;}
return min;}
function computeFitCategoryTraits(index,ruler,options){var thickness=options.barThickness;var count=ruler.stackCount;var curr=ruler.pixels[index];var size,ratio;if(helpers$1.isNullOrUndef(thickness)){size=ruler.min*options.categoryPercentage;ratio=options.barPercentage;}else{size=thickness*count;ratio=1;}
return{chunk:size/count,ratio:ratio,start:curr-(size/2)};}
function computeFlexCategoryTraits(index,ruler,options){var pixels=ruler.pixels;var curr=pixels[index];var prev=index>0?pixels[index-1]:null;var next=index<pixels.length-1?pixels[index+1]:null;var percent=options.categoryPercentage;var start,size;if(prev===null){prev=curr-(next===null?ruler.end-ruler.start:next-curr);}
if(next===null){next=curr+curr-prev;}
start=curr-(curr-Math.min(prev,next))/2*percent;size=Math.abs(next-prev)/2*percent;return{chunk:size/ruler.stackCount,ratio:options.barPercentage,start:start};}
var controller_bar=core_datasetController.extend({dataElementType:elements.Rectangle,initialize:function(){var me=this;var meta;core_datasetController.prototype.initialize.apply(me,arguments);meta=me.getMeta();meta.stack=me.getDataset().stack;meta.bar=true;},update:function(reset){var me=this;var rects=me.getMeta().data;var i,ilen;me._ruler=me.getRuler();for(i=0,ilen=rects.length;i<ilen;++i){me.updateElement(rects[i],i,reset);}},updateElement:function(rectangle,index,reset){var me=this;var meta=me.getMeta();var dataset=me.getDataset();var options=me._resolveElementOptions(rectangle,index);rectangle._xScale=me.getScaleForId(meta.xAxisID);rectangle._yScale=me.getScaleForId(meta.yAxisID);rectangle._datasetIndex=me.index;rectangle._index=index;rectangle._model={backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderSkipped:options.borderSkipped,borderWidth:options.borderWidth,datasetLabel:dataset.label,label:me.chart.data.labels[index]};me._updateElementGeometry(rectangle,index,reset);rectangle.pivot();},_updateElementGeometry:function(rectangle,index,reset){var me=this;var model=rectangle._model;var vscale=me._getValueScale();var base=vscale.getBasePixel();var horizontal=vscale.isHorizontal();var ruler=me._ruler||me.getRuler();var vpixels=me.calculateBarValuePixels(me.index,index);var ipixels=me.calculateBarIndexPixels(me.index,index,ruler);model.horizontal=horizontal;model.base=reset?base:vpixels.base;model.x=horizontal?reset?base:vpixels.head:ipixels.center;model.y=horizontal?ipixels.center:reset?base:vpixels.head;model.height=horizontal?ipixels.size:undefined;model.width=horizontal?undefined:ipixels.size;},_getStacks:function(last){var me=this;var chart=me.chart;var scale=me._getIndexScale();var stacked=scale.options.stacked;var ilen=last===undefined?chart.data.datasets.length:last+1;var stacks=[];var i,meta;for(i=0;i<ilen;++i){meta=chart.getDatasetMeta(i);if(meta.bar&&chart.isDatasetVisible(i)&&(stacked===false||(stacked===true&&stacks.indexOf(meta.stack)===-1)||(stacked===undefined&&(meta.stack===undefined||stacks.indexOf(meta.stack)===-1)))){stacks.push(meta.stack);}}
return stacks;},getStackCount:function(){return this._getStacks().length;},getStackIndex:function(datasetIndex,name){var stacks=this._getStacks(datasetIndex);var index=(name!==undefined)?stacks.indexOf(name):-1;return(index===-1)?stacks.length-1:index;},getRuler:function(){var me=this;var scale=me._getIndexScale();var stackCount=me.getStackCount();var datasetIndex=me.index;var isHorizontal=scale.isHorizontal();var start=isHorizontal?scale.left:scale.top;var end=start+(isHorizontal?scale.width:scale.height);var pixels=[];var i,ilen,min;for(i=0,ilen=me.getMeta().data.length;i<ilen;++i){pixels.push(scale.getPixelForValue(null,i,datasetIndex));}
min=helpers$1.isNullOrUndef(scale.options.barThickness)?computeMinSampleSize(scale,pixels):-1;return{min:min,pixels:pixels,start:start,end:end,stackCount:stackCount,scale:scale};},calculateBarValuePixels:function(datasetIndex,index){var me=this;var chart=me.chart;var meta=me.getMeta();var scale=me._getValueScale();var isHorizontal=scale.isHorizontal();var datasets=chart.data.datasets;var value=+scale.getRightValue(datasets[datasetIndex].data[index]);var minBarLength=scale.options.minBarLength;var stacked=scale.options.stacked;var stack=meta.stack;var start=0;var i,imeta,ivalue,base,head,size;if(stacked||(stacked===undefined&&stack!==undefined)){for(i=0;i<datasetIndex;++i){imeta=chart.getDatasetMeta(i);if(imeta.bar&&imeta.stack===stack&&imeta.controller._getValueScaleId()===scale.id&&chart.isDatasetVisible(i)){ivalue=+scale.getRightValue(datasets[i].data[index]);if((value<0&&ivalue<0)||(value>=0&&ivalue>0)){start+=ivalue;}}}}
base=scale.getPixelForValue(start);head=scale.getPixelForValue(start+value);size=head-base;if(minBarLength!==undefined&&Math.abs(size)<minBarLength){size=minBarLength;if(value>=0&&!isHorizontal||value<0&&isHorizontal){head=base-minBarLength;}else{head=base+minBarLength;}}
return{size:size,base:base,head:head,center:head+size/2};},calculateBarIndexPixels:function(datasetIndex,index,ruler){var me=this;var options=ruler.scale.options;var range=options.barThickness==='flex'?computeFlexCategoryTraits(index,ruler,options):computeFitCategoryTraits(index,ruler,options);var stackIndex=me.getStackIndex(datasetIndex,me.getMeta().stack);var center=range.start+(range.chunk*stackIndex)+(range.chunk/2);var size=Math.min(helpers$1.valueOrDefault(options.maxBarThickness,Infinity),range.chunk*range.ratio);return{base:center-size/2,head:center+size/2,center:center,size:size};},draw:function(){var me=this;var chart=me.chart;var scale=me._getValueScale();var rects=me.getMeta().data;var dataset=me.getDataset();var ilen=rects.length;var i=0;helpers$1.canvas.clipArea(chart.ctx,chart.chartArea);for(;i<ilen;++i){if(!isNaN(scale.getRightValue(dataset.data[i]))){rects[i].draw();}}
helpers$1.canvas.unclipArea(chart.ctx);},_resolveElementOptions:function(rectangle,index){var me=this;var chart=me.chart;var datasets=chart.data.datasets;var dataset=datasets[me.index];var custom=rectangle.custom||{};var options=chart.options.elements.rectangle;var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var keys=['backgroundColor','borderColor','borderSkipped','borderWidth'];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$1([custom[key],dataset[key],options[key]],context,index);}
return values;}});var valueOrDefault$3=helpers$1.valueOrDefault;var resolve$2=helpers$1.options.resolve;core_defaults._set('bubble',{hover:{mode:'single'},scales:{xAxes:[{type:'linear',position:'bottom',id:'x-axis-0'}],yAxes:[{type:'linear',position:'left',id:'y-axis-0'}]},tooltips:{callbacks:{title:function(){return'';},label:function(item,data){var datasetLabel=data.datasets[item.datasetIndex].label||'';var dataPoint=data.datasets[item.datasetIndex].data[item.index];return datasetLabel+': ('+item.xLabel+', '+item.yLabel+', '+dataPoint.r+')';}}}});var controller_bubble=core_datasetController.extend({dataElementType:elements.Point,update:function(reset){var me=this;var meta=me.getMeta();var points=meta.data;helpers$1.each(points,function(point,index){me.updateElement(point,index,reset);});},updateElement:function(point,index,reset){var me=this;var meta=me.getMeta();var custom=point.custom||{};var xScale=me.getScaleForId(meta.xAxisID);var yScale=me.getScaleForId(meta.yAxisID);var options=me._resolveElementOptions(point,index);var data=me.getDataset().data[index];var dsIndex=me.index;var x=reset?xScale.getPixelForDecimal(0.5):xScale.getPixelForValue(typeof data==='object'?data:NaN,index,dsIndex);var y=reset?yScale.getBasePixel():yScale.getPixelForValue(data,index,dsIndex);point._xScale=xScale;point._yScale=yScale;point._options=options;point._datasetIndex=dsIndex;point._index=index;point._model={backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderWidth:options.borderWidth,hitRadius:options.hitRadius,pointStyle:options.pointStyle,rotation:options.rotation,radius:reset?0:options.radius,skip:custom.skip||isNaN(x)||isNaN(y),x:x,y:y,};point.pivot();},setHoverStyle:function(point){var model=point._model;var options=point._options;var getHoverColor=helpers$1.getHoverColor;point.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth,radius:model.radius};model.backgroundColor=valueOrDefault$3(options.hoverBackgroundColor,getHoverColor(options.backgroundColor));model.borderColor=valueOrDefault$3(options.hoverBorderColor,getHoverColor(options.borderColor));model.borderWidth=valueOrDefault$3(options.hoverBorderWidth,options.borderWidth);model.radius=options.radius+options.hoverRadius;},_resolveElementOptions:function(point,index){var me=this;var chart=me.chart;var datasets=chart.data.datasets;var dataset=datasets[me.index];var custom=point.custom||{};var options=chart.options.elements.point;var data=dataset.data[index];var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var keys=['backgroundColor','borderColor','borderWidth','hoverBackgroundColor','hoverBorderColor','hoverBorderWidth','hoverRadius','hitRadius','pointStyle','rotation'];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$2([custom[key],dataset[key],options[key]],context,index);}
values.radius=resolve$2([custom.radius,data?data.r:undefined,dataset.radius,options.radius],context,index);return values;}});var resolve$3=helpers$1.options.resolve;var valueOrDefault$4=helpers$1.valueOrDefault;core_defaults._set('doughnut',{animation:{animateRotate:true,animateScale:false},hover:{mode:'single'},legendCallback:function(chart){var text=[];text.push('<ul class="'+chart.id+'-legend">');var data=chart.data;var datasets=data.datasets;var labels=data.labels;if(datasets.length){for(var i=0;i<datasets[0].data.length;++i){text.push('<li><span style="background-color:'+datasets[0].backgroundColor[i]+'"></span>');if(labels[i]){text.push(labels[i]);}
text.push('</li>');}}
text.push('</ul>');return text.join('');},legend:{labels:{generateLabels:function(chart){var data=chart.data;if(data.labels.length&&data.datasets.length){return data.labels.map(function(label,i){var meta=chart.getDatasetMeta(0);var ds=data.datasets[0];var arc=meta.data[i];var custom=arc&&arc.custom||{};var arcOpts=chart.options.elements.arc;var fill=resolve$3([custom.backgroundColor,ds.backgroundColor,arcOpts.backgroundColor],undefined,i);var stroke=resolve$3([custom.borderColor,ds.borderColor,arcOpts.borderColor],undefined,i);var bw=resolve$3([custom.borderWidth,ds.borderWidth,arcOpts.borderWidth],undefined,i);return{text:label,fillStyle:fill,strokeStyle:stroke,lineWidth:bw,hidden:isNaN(ds.data[i])||meta.data[i].hidden,index:i};});}
return[];}},onClick:function(e,legendItem){var index=legendItem.index;var chart=this.chart;var i,ilen,meta;for(i=0,ilen=(chart.data.datasets||[]).length;i<ilen;++i){meta=chart.getDatasetMeta(i);if(meta.data[index]){meta.data[index].hidden=!meta.data[index].hidden;}}
chart.update();}},cutoutPercentage:50,rotation:Math.PI*-0.5,circumference:Math.PI*2.0,tooltips:{callbacks:{title:function(){return'';},label:function(tooltipItem,data){var dataLabel=data.labels[tooltipItem.index];var value=': '+data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];if(helpers$1.isArray(dataLabel)){dataLabel=dataLabel.slice();dataLabel[0]+=value;}else{dataLabel+=value;}
return dataLabel;}}}});var controller_doughnut=core_datasetController.extend({dataElementType:elements.Arc,linkScales:helpers$1.noop,getRingIndex:function(datasetIndex){var ringIndex=0;for(var j=0;j<datasetIndex;++j){if(this.chart.isDatasetVisible(j)){++ringIndex;}}
return ringIndex;},update:function(reset){var me=this;var chart=me.chart;var chartArea=chart.chartArea;var opts=chart.options;var availableWidth=chartArea.right-chartArea.left;var availableHeight=chartArea.bottom-chartArea.top;var minSize=Math.min(availableWidth,availableHeight);var offset={x:0,y:0};var meta=me.getMeta();var arcs=meta.data;var cutoutPercentage=opts.cutoutPercentage;var circumference=opts.circumference;var chartWeight=me._getRingWeight(me.index);var i,ilen;if(circumference<Math.PI*2.0){var startAngle=opts.rotation%(Math.PI*2.0);startAngle+=Math.PI*2.0*(startAngle>=Math.PI?-1:startAngle<-Math.PI?1:0);var endAngle=startAngle+circumference;var start={x:Math.cos(startAngle),y:Math.sin(startAngle)};var end={x:Math.cos(endAngle),y:Math.sin(endAngle)};var contains0=(startAngle<=0&&endAngle>=0)||(startAngle<=Math.PI*2.0&&Math.PI*2.0<=endAngle);var contains90=(startAngle<=Math.PI*0.5&&Math.PI*0.5<=endAngle)||(startAngle<=Math.PI*2.5&&Math.PI*2.5<=endAngle);var contains180=(startAngle<=-Math.PI&&-Math.PI<=endAngle)||(startAngle<=Math.PI&&Math.PI<=endAngle);var contains270=(startAngle<=-Math.PI*0.5&&-Math.PI*0.5<=endAngle)||(startAngle<=Math.PI*1.5&&Math.PI*1.5<=endAngle);var cutout=cutoutPercentage/100.0;var min={x:contains180?-1:Math.min(start.x*(start.x<0?1:cutout),end.x*(end.x<0?1:cutout)),y:contains270?-1:Math.min(start.y*(start.y<0?1:cutout),end.y*(end.y<0?1:cutout))};var max={x:contains0?1:Math.max(start.x*(start.x>0?1:cutout),end.x*(end.x>0?1:cutout)),y:contains90?1:Math.max(start.y*(start.y>0?1:cutout),end.y*(end.y>0?1:cutout))};var size={width:(max.x-min.x)*0.5,height:(max.y-min.y)*0.5};minSize=Math.min(availableWidth/size.width,availableHeight/size.height);offset={x:(max.x+min.x)*-0.5,y:(max.y+min.y)*-0.5};}
for(i=0,ilen=arcs.length;i<ilen;++i){arcs[i]._options=me._resolveElementOptions(arcs[i],i);}
chart.borderWidth=me.getMaxBorderWidth();chart.outerRadius=Math.max((minSize-chart.borderWidth)/2,0);chart.innerRadius=Math.max(cutoutPercentage?(chart.outerRadius/100)*(cutoutPercentage):0,0);chart.radiusLength=(chart.outerRadius-chart.innerRadius)/(me._getVisibleDatasetWeightTotal()||1);chart.offsetX=offset.x*chart.outerRadius;chart.offsetY=offset.y*chart.outerRadius;meta.total=me.calculateTotal();me.outerRadius=chart.outerRadius-chart.radiusLength*me._getRingWeightOffset(me.index);me.innerRadius=Math.max(me.outerRadius-chart.radiusLength*chartWeight,0);for(i=0,ilen=arcs.length;i<ilen;++i){me.updateElement(arcs[i],i,reset);}},updateElement:function(arc,index,reset){var me=this;var chart=me.chart;var chartArea=chart.chartArea;var opts=chart.options;var animationOpts=opts.animation;var centerX=(chartArea.left+chartArea.right)/2;var centerY=(chartArea.top+chartArea.bottom)/2;var startAngle=opts.rotation;var endAngle=opts.rotation;var dataset=me.getDataset();var circumference=reset&&animationOpts.animateRotate?0:arc.hidden?0:me.calculateCircumference(dataset.data[index])*(opts.circumference/(2.0*Math.PI));var innerRadius=reset&&animationOpts.animateScale?0:me.innerRadius;var outerRadius=reset&&animationOpts.animateScale?0:me.outerRadius;var options=arc._options||{};helpers$1.extend(arc,{_datasetIndex:me.index,_index:index,_model:{backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderWidth:options.borderWidth,borderAlign:options.borderAlign,x:centerX+chart.offsetX,y:centerY+chart.offsetY,startAngle:startAngle,endAngle:endAngle,circumference:circumference,outerRadius:outerRadius,innerRadius:innerRadius,label:helpers$1.valueAtIndexOrDefault(dataset.label,index,chart.data.labels[index])}});var model=arc._model;if(!reset||!animationOpts.animateRotate){if(index===0){model.startAngle=opts.rotation;}else{model.startAngle=me.getMeta().data[index-1]._model.endAngle;}
model.endAngle=model.startAngle+model.circumference;}
arc.pivot();},calculateTotal:function(){var dataset=this.getDataset();var meta=this.getMeta();var total=0;var value;helpers$1.each(meta.data,function(element,index){value=dataset.data[index];if(!isNaN(value)&&!element.hidden){total+=Math.abs(value);}});return total;},calculateCircumference:function(value){var total=this.getMeta().total;if(total>0&&!isNaN(value)){return(Math.PI*2.0)*(Math.abs(value)/total);}
return 0;},getMaxBorderWidth:function(arcs){var me=this;var max=0;var chart=me.chart;var i,ilen,meta,arc,controller,options,borderWidth,hoverWidth;if(!arcs){for(i=0,ilen=chart.data.datasets.length;i<ilen;++i){if(chart.isDatasetVisible(i)){meta=chart.getDatasetMeta(i);arcs=meta.data;if(i!==me.index){controller=meta.controller;}
break;}}}
if(!arcs){return 0;}
for(i=0,ilen=arcs.length;i<ilen;++i){arc=arcs[i];options=controller?controller._resolveElementOptions(arc,i):arc._options;if(options.borderAlign!=='inner'){borderWidth=options.borderWidth;hoverWidth=options.hoverBorderWidth;max=borderWidth>max?borderWidth:max;max=hoverWidth>max?hoverWidth:max;}}
return max;},setHoverStyle:function(arc){var model=arc._model;var options=arc._options;var getHoverColor=helpers$1.getHoverColor;arc.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth,};model.backgroundColor=valueOrDefault$4(options.hoverBackgroundColor,getHoverColor(options.backgroundColor));model.borderColor=valueOrDefault$4(options.hoverBorderColor,getHoverColor(options.borderColor));model.borderWidth=valueOrDefault$4(options.hoverBorderWidth,options.borderWidth);},_resolveElementOptions:function(arc,index){var me=this;var chart=me.chart;var dataset=me.getDataset();var custom=arc.custom||{};var options=chart.options.elements.arc;var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var keys=['backgroundColor','borderColor','borderWidth','borderAlign','hoverBackgroundColor','hoverBorderColor','hoverBorderWidth',];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$3([custom[key],dataset[key],options[key]],context,index);}
return values;},_getRingWeightOffset:function(datasetIndex){var ringWeightOffset=0;for(var i=0;i<datasetIndex;++i){if(this.chart.isDatasetVisible(i)){ringWeightOffset+=this._getRingWeight(i);}}
return ringWeightOffset;},_getRingWeight:function(dataSetIndex){return Math.max(valueOrDefault$4(this.chart.data.datasets[dataSetIndex].weight,1),0);},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length);}});core_defaults._set('horizontalBar',{hover:{mode:'index',axis:'y'},scales:{xAxes:[{type:'linear',position:'bottom'}],yAxes:[{type:'category',position:'left',categoryPercentage:0.8,barPercentage:0.9,offset:true,gridLines:{offsetGridLines:true}}]},elements:{rectangle:{borderSkipped:'left'}},tooltips:{mode:'index',axis:'y'}});var controller_horizontalBar=controller_bar.extend({_getValueScaleId:function(){return this.getMeta().xAxisID;},_getIndexScaleId:function(){return this.getMeta().yAxisID;}});var valueOrDefault$5=helpers$1.valueOrDefault;var resolve$4=helpers$1.options.resolve;var isPointInArea=helpers$1.canvas._isPointInArea;core_defaults._set('line',{showLines:true,spanGaps:false,hover:{mode:'label'},scales:{xAxes:[{type:'category',id:'x-axis-0'}],yAxes:[{type:'linear',id:'y-axis-0'}]}});function lineEnabled(dataset,options){return valueOrDefault$5(dataset.showLine,options.showLines);}
var controller_line=core_datasetController.extend({datasetElementType:elements.Line,dataElementType:elements.Point,update:function(reset){var me=this;var meta=me.getMeta();var line=meta.dataset;var points=meta.data||[];var scale=me.getScaleForId(meta.yAxisID);var dataset=me.getDataset();var showLine=lineEnabled(dataset,me.chart.options);var i,ilen;if(showLine){if((dataset.tension!==undefined)&&(dataset.lineTension===undefined)){dataset.lineTension=dataset.tension;}
line._scale=scale;line._datasetIndex=me.index;line._children=points;line._model=me._resolveLineOptions(line);line.pivot();}
for(i=0,ilen=points.length;i<ilen;++i){me.updateElement(points[i],i,reset);}
if(showLine&&line._model.tension!==0){me.updateBezierControlPoints();}
for(i=0,ilen=points.length;i<ilen;++i){points[i].pivot();}},updateElement:function(point,index,reset){var me=this;var meta=me.getMeta();var custom=point.custom||{};var dataset=me.getDataset();var datasetIndex=me.index;var value=dataset.data[index];var yScale=me.getScaleForId(meta.yAxisID);var xScale=me.getScaleForId(meta.xAxisID);var lineModel=meta.dataset._model;var x,y;var options=me._resolvePointOptions(point,index);x=xScale.getPixelForValue(typeof value==='object'?value:NaN,index,datasetIndex);y=reset?yScale.getBasePixel():me.calculatePointY(value,index,datasetIndex);point._xScale=xScale;point._yScale=yScale;point._options=options;point._datasetIndex=datasetIndex;point._index=index;point._model={x:x,y:y,skip:custom.skip||isNaN(x)||isNaN(y),radius:options.radius,pointStyle:options.pointStyle,rotation:options.rotation,backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderWidth:options.borderWidth,tension:valueOrDefault$5(custom.tension,lineModel?lineModel.tension:0),steppedLine:lineModel?lineModel.steppedLine:false,hitRadius:options.hitRadius};},_resolvePointOptions:function(element,index){var me=this;var chart=me.chart;var dataset=chart.data.datasets[me.index];var custom=element.custom||{};var options=chart.options.elements.point;var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var ELEMENT_OPTIONS={backgroundColor:'pointBackgroundColor',borderColor:'pointBorderColor',borderWidth:'pointBorderWidth',hitRadius:'pointHitRadius',hoverBackgroundColor:'pointHoverBackgroundColor',hoverBorderColor:'pointHoverBorderColor',hoverBorderWidth:'pointHoverBorderWidth',hoverRadius:'pointHoverRadius',pointStyle:'pointStyle',radius:'pointRadius',rotation:'pointRotation'};var keys=Object.keys(ELEMENT_OPTIONS);for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$4([custom[key],dataset[ELEMENT_OPTIONS[key]],dataset[key],options[key]],context,index);}
return values;},_resolveLineOptions:function(element){var me=this;var chart=me.chart;var dataset=chart.data.datasets[me.index];var custom=element.custom||{};var options=chart.options;var elementOptions=options.elements.line;var values={};var i,ilen,key;var keys=['backgroundColor','borderWidth','borderColor','borderCapStyle','borderDash','borderDashOffset','borderJoinStyle','fill','cubicInterpolationMode'];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$4([custom[key],dataset[key],elementOptions[key]]);}
values.spanGaps=valueOrDefault$5(dataset.spanGaps,options.spanGaps);values.tension=valueOrDefault$5(dataset.lineTension,elementOptions.tension);values.steppedLine=resolve$4([custom.steppedLine,dataset.steppedLine,elementOptions.stepped]);return values;},calculatePointY:function(value,index,datasetIndex){var me=this;var chart=me.chart;var meta=me.getMeta();var yScale=me.getScaleForId(meta.yAxisID);var sumPos=0;var sumNeg=0;var i,ds,dsMeta;if(yScale.options.stacked){for(i=0;i<datasetIndex;i++){ds=chart.data.datasets[i];dsMeta=chart.getDatasetMeta(i);if(dsMeta.type==='line'&&dsMeta.yAxisID===yScale.id&&chart.isDatasetVisible(i)){var stackedRightValue=Number(yScale.getRightValue(ds.data[index]));if(stackedRightValue<0){sumNeg+=stackedRightValue||0;}else{sumPos+=stackedRightValue||0;}}}
var rightValue=Number(yScale.getRightValue(value));if(rightValue<0){return yScale.getPixelForValue(sumNeg+rightValue);}
return yScale.getPixelForValue(sumPos+rightValue);}
return yScale.getPixelForValue(value);},updateBezierControlPoints:function(){var me=this;var chart=me.chart;var meta=me.getMeta();var lineModel=meta.dataset._model;var area=chart.chartArea;var points=meta.data||[];var i,ilen,model,controlPoints;if(lineModel.spanGaps){points=points.filter(function(pt){return!pt._model.skip;});}
function capControlPoint(pt,min,max){return Math.max(Math.min(pt,max),min);}
if(lineModel.cubicInterpolationMode==='monotone'){helpers$1.splineCurveMonotone(points);}else{for(i=0,ilen=points.length;i<ilen;++i){model=points[i]._model;controlPoints=helpers$1.splineCurve(helpers$1.previousItem(points,i)._model,model,helpers$1.nextItem(points,i)._model,lineModel.tension);model.controlPointPreviousX=controlPoints.previous.x;model.controlPointPreviousY=controlPoints.previous.y;model.controlPointNextX=controlPoints.next.x;model.controlPointNextY=controlPoints.next.y;}}
if(chart.options.elements.line.capBezierPoints){for(i=0,ilen=points.length;i<ilen;++i){model=points[i]._model;if(isPointInArea(model,area)){if(i>0&&isPointInArea(points[i-1]._model,area)){model.controlPointPreviousX=capControlPoint(model.controlPointPreviousX,area.left,area.right);model.controlPointPreviousY=capControlPoint(model.controlPointPreviousY,area.top,area.bottom);}
if(i<points.length-1&&isPointInArea(points[i+1]._model,area)){model.controlPointNextX=capControlPoint(model.controlPointNextX,area.left,area.right);model.controlPointNextY=capControlPoint(model.controlPointNextY,area.top,area.bottom);}}}}},draw:function(){var me=this;var chart=me.chart;var meta=me.getMeta();var points=meta.data||[];var area=chart.chartArea;var ilen=points.length;var halfBorderWidth;var i=0;if(lineEnabled(me.getDataset(),chart.options)){halfBorderWidth=(meta.dataset._model.borderWidth||0)/2;helpers$1.canvas.clipArea(chart.ctx,{left:area.left,right:area.right,top:area.top-halfBorderWidth,bottom:area.bottom+halfBorderWidth});meta.dataset.draw();helpers$1.canvas.unclipArea(chart.ctx);}
for(;i<ilen;++i){points[i].draw(area);}},setHoverStyle:function(point){var model=point._model;var options=point._options;var getHoverColor=helpers$1.getHoverColor;point.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth,radius:model.radius};model.backgroundColor=valueOrDefault$5(options.hoverBackgroundColor,getHoverColor(options.backgroundColor));model.borderColor=valueOrDefault$5(options.hoverBorderColor,getHoverColor(options.borderColor));model.borderWidth=valueOrDefault$5(options.hoverBorderWidth,options.borderWidth);model.radius=valueOrDefault$5(options.hoverRadius,options.radius);},});var resolve$5=helpers$1.options.resolve;core_defaults._set('polarArea',{scale:{type:'radialLinear',angleLines:{display:false},gridLines:{circular:true},pointLabels:{display:false},ticks:{beginAtZero:true}},animation:{animateRotate:true,animateScale:true},startAngle:-0.5*Math.PI,legendCallback:function(chart){var text=[];text.push('<ul class="'+chart.id+'-legend">');var data=chart.data;var datasets=data.datasets;var labels=data.labels;if(datasets.length){for(var i=0;i<datasets[0].data.length;++i){text.push('<li><span style="background-color:'+datasets[0].backgroundColor[i]+'"></span>');if(labels[i]){text.push(labels[i]);}
text.push('</li>');}}
text.push('</ul>');return text.join('');},legend:{labels:{generateLabels:function(chart){var data=chart.data;if(data.labels.length&&data.datasets.length){return data.labels.map(function(label,i){var meta=chart.getDatasetMeta(0);var ds=data.datasets[0];var arc=meta.data[i];var custom=arc.custom||{};var arcOpts=chart.options.elements.arc;var fill=resolve$5([custom.backgroundColor,ds.backgroundColor,arcOpts.backgroundColor],undefined,i);var stroke=resolve$5([custom.borderColor,ds.borderColor,arcOpts.borderColor],undefined,i);var bw=resolve$5([custom.borderWidth,ds.borderWidth,arcOpts.borderWidth],undefined,i);return{text:label,fillStyle:fill,strokeStyle:stroke,lineWidth:bw,hidden:isNaN(ds.data[i])||meta.data[i].hidden,index:i};});}
return[];}},onClick:function(e,legendItem){var index=legendItem.index;var chart=this.chart;var i,ilen,meta;for(i=0,ilen=(chart.data.datasets||[]).length;i<ilen;++i){meta=chart.getDatasetMeta(i);meta.data[index].hidden=!meta.data[index].hidden;}
chart.update();}},tooltips:{callbacks:{title:function(){return'';},label:function(item,data){return data.labels[item.index]+': '+item.yLabel;}}}});var controller_polarArea=core_datasetController.extend({dataElementType:elements.Arc,linkScales:helpers$1.noop,update:function(reset){var me=this;var dataset=me.getDataset();var meta=me.getMeta();var start=me.chart.options.startAngle||0;var starts=me._starts=[];var angles=me._angles=[];var arcs=meta.data;var i,ilen,angle;me._updateRadius();meta.count=me.countVisibleElements();for(i=0,ilen=dataset.data.length;i<ilen;i++){starts[i]=start;angle=me._computeAngle(i);angles[i]=angle;start+=angle;}
for(i=0,ilen=arcs.length;i<ilen;++i){arcs[i]._options=me._resolveElementOptions(arcs[i],i);me.updateElement(arcs[i],i,reset);}},_updateRadius:function(){var me=this;var chart=me.chart;var chartArea=chart.chartArea;var opts=chart.options;var minSize=Math.min(chartArea.right-chartArea.left,chartArea.bottom-chartArea.top);chart.outerRadius=Math.max(minSize/2,0);chart.innerRadius=Math.max(opts.cutoutPercentage?(chart.outerRadius/100)*(opts.cutoutPercentage):1,0);chart.radiusLength=(chart.outerRadius-chart.innerRadius)/chart.getVisibleDatasetCount();me.outerRadius=chart.outerRadius-(chart.radiusLength*me.index);me.innerRadius=me.outerRadius-chart.radiusLength;},updateElement:function(arc,index,reset){var me=this;var chart=me.chart;var dataset=me.getDataset();var opts=chart.options;var animationOpts=opts.animation;var scale=chart.scale;var labels=chart.data.labels;var centerX=scale.xCenter;var centerY=scale.yCenter;var datasetStartAngle=opts.startAngle;var distance=arc.hidden?0:scale.getDistanceFromCenterForValue(dataset.data[index]);var startAngle=me._starts[index];var endAngle=startAngle+(arc.hidden?0:me._angles[index]);var resetRadius=animationOpts.animateScale?0:scale.getDistanceFromCenterForValue(dataset.data[index]);var options=arc._options||{};helpers$1.extend(arc,{_datasetIndex:me.index,_index:index,_scale:scale,_model:{backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderWidth:options.borderWidth,borderAlign:options.borderAlign,x:centerX,y:centerY,innerRadius:0,outerRadius:reset?resetRadius:distance,startAngle:reset&&animationOpts.animateRotate?datasetStartAngle:startAngle,endAngle:reset&&animationOpts.animateRotate?datasetStartAngle:endAngle,label:helpers$1.valueAtIndexOrDefault(labels,index,labels[index])}});arc.pivot();},countVisibleElements:function(){var dataset=this.getDataset();var meta=this.getMeta();var count=0;helpers$1.each(meta.data,function(element,index){if(!isNaN(dataset.data[index])&&!element.hidden){count++;}});return count;},setHoverStyle:function(arc){var model=arc._model;var options=arc._options;var getHoverColor=helpers$1.getHoverColor;var valueOrDefault=helpers$1.valueOrDefault;arc.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth,};model.backgroundColor=valueOrDefault(options.hoverBackgroundColor,getHoverColor(options.backgroundColor));model.borderColor=valueOrDefault(options.hoverBorderColor,getHoverColor(options.borderColor));model.borderWidth=valueOrDefault(options.hoverBorderWidth,options.borderWidth);},_resolveElementOptions:function(arc,index){var me=this;var chart=me.chart;var dataset=me.getDataset();var custom=arc.custom||{};var options=chart.options.elements.arc;var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var keys=['backgroundColor','borderColor','borderWidth','borderAlign','hoverBackgroundColor','hoverBorderColor','hoverBorderWidth',];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$5([custom[key],dataset[key],options[key]],context,index);}
return values;},_computeAngle:function(index){var me=this;var count=this.getMeta().count;var dataset=me.getDataset();var meta=me.getMeta();if(isNaN(dataset.data[index])||meta.data[index].hidden){return 0;}
var context={chart:me.chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};return resolve$5([me.chart.options.elements.arc.angle,(2*Math.PI)/count],context,index);}});core_defaults._set('pie',helpers$1.clone(core_defaults.doughnut));core_defaults._set('pie',{cutoutPercentage:0});var controller_pie=controller_doughnut;var valueOrDefault$6=helpers$1.valueOrDefault;var resolve$6=helpers$1.options.resolve;core_defaults._set('radar',{scale:{type:'radialLinear'},elements:{line:{tension:0}}});var controller_radar=core_datasetController.extend({datasetElementType:elements.Line,dataElementType:elements.Point,linkScales:helpers$1.noop,update:function(reset){var me=this;var meta=me.getMeta();var line=meta.dataset;var points=meta.data||[];var scale=me.chart.scale;var dataset=me.getDataset();var i,ilen;if((dataset.tension!==undefined)&&(dataset.lineTension===undefined)){dataset.lineTension=dataset.tension;}
line._scale=scale;line._datasetIndex=me.index;line._children=points;line._loop=true;line._model=me._resolveLineOptions(line);line.pivot();for(i=0,ilen=points.length;i<ilen;++i){me.updateElement(points[i],i,reset);}
me.updateBezierControlPoints();for(i=0,ilen=points.length;i<ilen;++i){points[i].pivot();}},updateElement:function(point,index,reset){var me=this;var custom=point.custom||{};var dataset=me.getDataset();var scale=me.chart.scale;var pointPosition=scale.getPointPositionForValue(index,dataset.data[index]);var options=me._resolvePointOptions(point,index);var lineModel=me.getMeta().dataset._model;var x=reset?scale.xCenter:pointPosition.x;var y=reset?scale.yCenter:pointPosition.y;point._scale=scale;point._options=options;point._datasetIndex=me.index;point._index=index;point._model={x:x,y:y,skip:custom.skip||isNaN(x)||isNaN(y),radius:options.radius,pointStyle:options.pointStyle,rotation:options.rotation,backgroundColor:options.backgroundColor,borderColor:options.borderColor,borderWidth:options.borderWidth,tension:valueOrDefault$6(custom.tension,lineModel?lineModel.tension:0),hitRadius:options.hitRadius};},_resolvePointOptions:function(element,index){var me=this;var chart=me.chart;var dataset=chart.data.datasets[me.index];var custom=element.custom||{};var options=chart.options.elements.point;var values={};var i,ilen,key;var context={chart:chart,dataIndex:index,dataset:dataset,datasetIndex:me.index};var ELEMENT_OPTIONS={backgroundColor:'pointBackgroundColor',borderColor:'pointBorderColor',borderWidth:'pointBorderWidth',hitRadius:'pointHitRadius',hoverBackgroundColor:'pointHoverBackgroundColor',hoverBorderColor:'pointHoverBorderColor',hoverBorderWidth:'pointHoverBorderWidth',hoverRadius:'pointHoverRadius',pointStyle:'pointStyle',radius:'pointRadius',rotation:'pointRotation'};var keys=Object.keys(ELEMENT_OPTIONS);for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$6([custom[key],dataset[ELEMENT_OPTIONS[key]],dataset[key],options[key]],context,index);}
return values;},_resolveLineOptions:function(element){var me=this;var chart=me.chart;var dataset=chart.data.datasets[me.index];var custom=element.custom||{};var options=chart.options.elements.line;var values={};var i,ilen,key;var keys=['backgroundColor','borderWidth','borderColor','borderCapStyle','borderDash','borderDashOffset','borderJoinStyle','fill'];for(i=0,ilen=keys.length;i<ilen;++i){key=keys[i];values[key]=resolve$6([custom[key],dataset[key],options[key]]);}
values.tension=valueOrDefault$6(dataset.lineTension,options.tension);return values;},updateBezierControlPoints:function(){var me=this;var meta=me.getMeta();var area=me.chart.chartArea;var points=meta.data||[];var i,ilen,model,controlPoints;function capControlPoint(pt,min,max){return Math.max(Math.min(pt,max),min);}
for(i=0,ilen=points.length;i<ilen;++i){model=points[i]._model;controlPoints=helpers$1.splineCurve(helpers$1.previousItem(points,i,true)._model,model,helpers$1.nextItem(points,i,true)._model,model.tension);model.controlPointPreviousX=capControlPoint(controlPoints.previous.x,area.left,area.right);model.controlPointPreviousY=capControlPoint(controlPoints.previous.y,area.top,area.bottom);model.controlPointNextX=capControlPoint(controlPoints.next.x,area.left,area.right);model.controlPointNextY=capControlPoint(controlPoints.next.y,area.top,area.bottom);}},setHoverStyle:function(point){var model=point._model;var options=point._options;var getHoverColor=helpers$1.getHoverColor;point.$previousStyle={backgroundColor:model.backgroundColor,borderColor:model.borderColor,borderWidth:model.borderWidth,radius:model.radius};model.backgroundColor=valueOrDefault$6(options.hoverBackgroundColor,getHoverColor(options.backgroundColor));model.borderColor=valueOrDefault$6(options.hoverBorderColor,getHoverColor(options.borderColor));model.borderWidth=valueOrDefault$6(options.hoverBorderWidth,options.borderWidth);model.radius=valueOrDefault$6(options.hoverRadius,options.radius);}});core_defaults._set('scatter',{hover:{mode:'single'},scales:{xAxes:[{id:'x-axis-1',type:'linear',position:'bottom'}],yAxes:[{id:'y-axis-1',type:'linear',position:'left'}]},showLines:false,tooltips:{callbacks:{title:function(){return'';},label:function(item){return'('+item.xLabel+', '+item.yLabel+')';}}}});var controller_scatter=controller_line;var controllers={bar:controller_bar,bubble:controller_bubble,doughnut:controller_doughnut,horizontalBar:controller_horizontalBar,line:controller_line,polarArea:controller_polarArea,pie:controller_pie,radar:controller_radar,scatter:controller_scatter};function getRelativePosition(e,chart){if(e.native){return{x:e.x,y:e.y};}
return helpers$1.getRelativePosition(e,chart);}
function parseVisibleItems(chart,handler){var datasets=chart.data.datasets;var meta,i,j,ilen,jlen;for(i=0,ilen=datasets.length;i<ilen;++i){if(!chart.isDatasetVisible(i)){continue;}
meta=chart.getDatasetMeta(i);for(j=0,jlen=meta.data.length;j<jlen;++j){var element=meta.data[j];if(!element._view.skip){handler(element);}}}}
function getIntersectItems(chart,position){var elements=[];parseVisibleItems(chart,function(element){if(element.inRange(position.x,position.y)){elements.push(element);}});return elements;}
function getNearestItems(chart,position,intersect,distanceMetric){var minDistance=Number.POSITIVE_INFINITY;var nearestItems=[];parseVisibleItems(chart,function(element){if(intersect&&!element.inRange(position.x,position.y)){return;}
var center=element.getCenterPoint();var distance=distanceMetric(position,center);if(distance<minDistance){nearestItems=[element];minDistance=distance;}else if(distance===minDistance){nearestItems.push(element);}});return nearestItems;}
function getDistanceMetricForAxis(axis){var useX=axis.indexOf('x')!==-1;var useY=axis.indexOf('y')!==-1;return function(pt1,pt2){var deltaX=useX?Math.abs(pt1.x-pt2.x):0;var deltaY=useY?Math.abs(pt1.y-pt2.y):0;return Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2));};}
function indexMode(chart,e,options){var position=getRelativePosition(e,chart);options.axis=options.axis||'x';var distanceMetric=getDistanceMetricForAxis(options.axis);var items=options.intersect?getIntersectItems(chart,position):getNearestItems(chart,position,false,distanceMetric);var elements=[];if(!items.length){return[];}
chart.data.datasets.forEach(function(dataset,datasetIndex){if(chart.isDatasetVisible(datasetIndex)){var meta=chart.getDatasetMeta(datasetIndex);var element=meta.data[items[0]._index];if(element&&!element._view.skip){elements.push(element);}}});return elements;}
var core_interaction={modes:{single:function(chart,e){var position=getRelativePosition(e,chart);var elements=[];parseVisibleItems(chart,function(element){if(element.inRange(position.x,position.y)){elements.push(element);return elements;}});return elements.slice(0,1);},label:indexMode,index:indexMode,dataset:function(chart,e,options){var position=getRelativePosition(e,chart);options.axis=options.axis||'xy';var distanceMetric=getDistanceMetricForAxis(options.axis);var items=options.intersect?getIntersectItems(chart,position):getNearestItems(chart,position,false,distanceMetric);if(items.length>0){items=chart.getDatasetMeta(items[0]._datasetIndex).data;}
return items;},'x-axis':function(chart,e){return indexMode(chart,e,{intersect:false});},point:function(chart,e){var position=getRelativePosition(e,chart);return getIntersectItems(chart,position);},nearest:function(chart,e,options){var position=getRelativePosition(e,chart);options.axis=options.axis||'xy';var distanceMetric=getDistanceMetricForAxis(options.axis);return getNearestItems(chart,position,options.intersect,distanceMetric);},x:function(chart,e,options){var position=getRelativePosition(e,chart);var items=[];var intersectsItem=false;parseVisibleItems(chart,function(element){if(element.inXRange(position.x)){items.push(element);}
if(element.inRange(position.x,position.y)){intersectsItem=true;}});if(options.intersect&&!intersectsItem){items=[];}
return items;},y:function(chart,e,options){var position=getRelativePosition(e,chart);var items=[];var intersectsItem=false;parseVisibleItems(chart,function(element){if(element.inYRange(position.y)){items.push(element);}
if(element.inRange(position.x,position.y)){intersectsItem=true;}});if(options.intersect&&!intersectsItem){items=[];}
return items;}}};function filterByPosition(array,position){return helpers$1.where(array,function(v){return v.position===position;});}
function sortByWeight(array,reverse){array.forEach(function(v,i){v._tmpIndex_=i;return v;});array.sort(function(a,b){var v0=reverse?b:a;var v1=reverse?a:b;return v0.weight===v1.weight?v0._tmpIndex_-v1._tmpIndex_:v0.weight-v1.weight;});array.forEach(function(v){delete v._tmpIndex_;});}
function findMaxPadding(boxes){var top=0;var left=0;var bottom=0;var right=0;helpers$1.each(boxes,function(box){if(box.getPadding){var boxPadding=box.getPadding();top=Math.max(top,boxPadding.top);left=Math.max(left,boxPadding.left);bottom=Math.max(bottom,boxPadding.bottom);right=Math.max(right,boxPadding.right);}});return{top:top,left:left,bottom:bottom,right:right};}
function addSizeByPosition(boxes,size){helpers$1.each(boxes,function(box){size[box.position]+=box.isHorizontal()?box.height:box.width;});}
core_defaults._set('global',{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var core_layouts={defaults:{},addBox:function(chart,item){if(!chart.boxes){chart.boxes=[];}
item.fullWidth=item.fullWidth||false;item.position=item.position||'top';item.weight=item.weight||0;chart.boxes.push(item);},removeBox:function(chart,layoutItem){var index=chart.boxes?chart.boxes.indexOf(layoutItem):-1;if(index!==-1){chart.boxes.splice(index,1);}},configure:function(chart,item,options){var props=['fullWidth','position','weight'];var ilen=props.length;var i=0;var prop;for(;i<ilen;++i){prop=props[i];if(options.hasOwnProperty(prop)){item[prop]=options[prop];}}},update:function(chart,width,height){if(!chart){return;}
var layoutOptions=chart.options.layout||{};var padding=helpers$1.options.toPadding(layoutOptions.padding);var leftPadding=padding.left;var rightPadding=padding.right;var topPadding=padding.top;var bottomPadding=padding.bottom;var leftBoxes=filterByPosition(chart.boxes,'left');var rightBoxes=filterByPosition(chart.boxes,'right');var topBoxes=filterByPosition(chart.boxes,'top');var bottomBoxes=filterByPosition(chart.boxes,'bottom');var chartAreaBoxes=filterByPosition(chart.boxes,'chartArea');sortByWeight(leftBoxes,true);sortByWeight(rightBoxes,false);sortByWeight(topBoxes,true);sortByWeight(bottomBoxes,false);var verticalBoxes=leftBoxes.concat(rightBoxes);var horizontalBoxes=topBoxes.concat(bottomBoxes);var outerBoxes=verticalBoxes.concat(horizontalBoxes);var chartWidth=width-leftPadding-rightPadding;var chartHeight=height-topPadding-bottomPadding;var chartAreaWidth=chartWidth/2;var verticalBoxWidth=(width-chartAreaWidth)/verticalBoxes.length;var maxChartAreaWidth=chartWidth;var maxChartAreaHeight=chartHeight;var outerBoxSizes={top:topPadding,left:leftPadding,bottom:bottomPadding,right:rightPadding};var minBoxSizes=[];var maxPadding;function getMinimumBoxSize(box){var minSize;var isHorizontal=box.isHorizontal();if(isHorizontal){minSize=box.update(box.fullWidth?chartWidth:maxChartAreaWidth,chartHeight/2);maxChartAreaHeight-=minSize.height;}else{minSize=box.update(verticalBoxWidth,maxChartAreaHeight);maxChartAreaWidth-=minSize.width;}
minBoxSizes.push({horizontal:isHorizontal,width:minSize.width,box:box,});}
helpers$1.each(outerBoxes,getMinimumBoxSize);maxPadding=findMaxPadding(outerBoxes);function fitBox(box){var minBoxSize=helpers$1.findNextWhere(minBoxSizes,function(minBox){return minBox.box===box;});if(minBoxSize){if(minBoxSize.horizontal){var scaleMargin={left:Math.max(outerBoxSizes.left,maxPadding.left),right:Math.max(outerBoxSizes.right,maxPadding.right),top:0,bottom:0};box.update(box.fullWidth?chartWidth:maxChartAreaWidth,chartHeight/2,scaleMargin);}else{box.update(minBoxSize.width,maxChartAreaHeight);}}}
helpers$1.each(verticalBoxes,fitBox);addSizeByPosition(verticalBoxes,outerBoxSizes);helpers$1.each(horizontalBoxes,fitBox);addSizeByPosition(horizontalBoxes,outerBoxSizes);function finalFitVerticalBox(box){var minBoxSize=helpers$1.findNextWhere(minBoxSizes,function(minSize){return minSize.box===box;});var scaleMargin={left:0,right:0,top:outerBoxSizes.top,bottom:outerBoxSizes.bottom};if(minBoxSize){box.update(minBoxSize.width,maxChartAreaHeight,scaleMargin);}}
helpers$1.each(verticalBoxes,finalFitVerticalBox);outerBoxSizes={top:topPadding,left:leftPadding,bottom:bottomPadding,right:rightPadding};addSizeByPosition(outerBoxes,outerBoxSizes);var leftPaddingAddition=Math.max(maxPadding.left-outerBoxSizes.left,0);outerBoxSizes.left+=leftPaddingAddition;outerBoxSizes.right+=Math.max(maxPadding.right-outerBoxSizes.right,0);var topPaddingAddition=Math.max(maxPadding.top-outerBoxSizes.top,0);outerBoxSizes.top+=topPaddingAddition;outerBoxSizes.bottom+=Math.max(maxPadding.bottom-outerBoxSizes.bottom,0);var newMaxChartAreaHeight=height-outerBoxSizes.top-outerBoxSizes.bottom;var newMaxChartAreaWidth=width-outerBoxSizes.left-outerBoxSizes.right;if(newMaxChartAreaWidth!==maxChartAreaWidth||newMaxChartAreaHeight!==maxChartAreaHeight){helpers$1.each(verticalBoxes,function(box){box.height=newMaxChartAreaHeight;});helpers$1.each(horizontalBoxes,function(box){if(!box.fullWidth){box.width=newMaxChartAreaWidth;}});maxChartAreaHeight=newMaxChartAreaHeight;maxChartAreaWidth=newMaxChartAreaWidth;}
var left=leftPadding+leftPaddingAddition;var top=topPadding+topPaddingAddition;function placeBox(box){if(box.isHorizontal()){box.left=box.fullWidth?leftPadding:outerBoxSizes.left;box.right=box.fullWidth?width-rightPadding:outerBoxSizes.left+maxChartAreaWidth;box.top=top;box.bottom=top+box.height;top=box.bottom;}else{box.left=left;box.right=left+box.width;box.top=outerBoxSizes.top;box.bottom=outerBoxSizes.top+maxChartAreaHeight;left=box.right;}}
helpers$1.each(leftBoxes.concat(topBoxes),placeBox);left+=maxChartAreaWidth;top+=maxChartAreaHeight;helpers$1.each(rightBoxes,placeBox);helpers$1.each(bottomBoxes,placeBox);chart.chartArea={left:outerBoxSizes.left,top:outerBoxSizes.top,right:outerBoxSizes.left+maxChartAreaWidth,bottom:outerBoxSizes.top+maxChartAreaHeight};helpers$1.each(chartAreaBoxes,function(box){box.left=chart.chartArea.left;box.top=chart.chartArea.top;box.right=chart.chartArea.right;box.bottom=chart.chartArea.bottom;box.update(maxChartAreaWidth,maxChartAreaHeight);});}};var platform_basic={acquireContext:function(item){if(item&&item.canvas){item=item.canvas;}
return item&&item.getContext('2d')||null;}};var platform_dom="/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n";var platform_dom$1=Object.freeze({default:platform_dom});var commonjsGlobal=typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};function commonjsRequire(){throw new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');}
function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports;}
function getCjsExportFromNamespace(n){return n&&n.default||n;}
var stylesheet=getCjsExportFromNamespace(platform_dom$1);var EXPANDO_KEY='$chartjs';var CSS_PREFIX='chartjs-';var CSS_SIZE_MONITOR=CSS_PREFIX+'size-monitor';var CSS_RENDER_MONITOR=CSS_PREFIX+'render-monitor';var CSS_RENDER_ANIMATION=CSS_PREFIX+'render-animation';var ANIMATION_START_EVENTS=['animationstart','webkitAnimationStart'];var EVENT_TYPES={touchstart:'mousedown',touchmove:'mousemove',touchend:'mouseup',pointerenter:'mouseenter',pointerdown:'mousedown',pointermove:'mousemove',pointerup:'mouseup',pointerleave:'mouseout',pointerout:'mouseout'};function readUsedSize(element,property){var value=helpers$1.getStyle(element,property);var matches=value&&value.match(/^(\d+)(\.\d+)?px$/);return matches?Number(matches[1]):undefined;}
function initCanvas(canvas,config){var style=canvas.style;var renderHeight=canvas.getAttribute('height');var renderWidth=canvas.getAttribute('width');canvas[EXPANDO_KEY]={initial:{height:renderHeight,width:renderWidth,style:{display:style.display,height:style.height,width:style.width}}};style.display=style.display||'block';if(renderWidth===null||renderWidth===''){var displayWidth=readUsedSize(canvas,'width');if(displayWidth!==undefined){canvas.width=displayWidth;}}
if(renderHeight===null||renderHeight===''){if(canvas.style.height===''){canvas.height=canvas.width/(config.options.aspectRatio||2);}else{var displayHeight=readUsedSize(canvas,'height');if(displayWidth!==undefined){canvas.height=displayHeight;}}}
return canvas;}
var supportsEventListenerOptions=(function(){var supports=false;try{var options=Object.defineProperty({},'passive',{get:function(){supports=true;}});window.addEventListener('e',null,options);}catch(e){}
return supports;}());var eventListenerOptions=supportsEventListenerOptions?{passive:true}:false;function addListener(node,type,listener){node.addEventListener(type,listener,eventListenerOptions);}
function removeListener(node,type,listener){node.removeEventListener(type,listener,eventListenerOptions);}
function createEvent(type,chart,x,y,nativeEvent){return{type:type,chart:chart,native:nativeEvent||null,x:x!==undefined?x:null,y:y!==undefined?y:null,};}
function fromNativeEvent(event,chart){var type=EVENT_TYPES[event.type]||event.type;var pos=helpers$1.getRelativePosition(event,chart);return createEvent(type,chart,pos.x,pos.y,event);}
function throttled(fn,thisArg){var ticking=false;var args=[];return function(){args=Array.prototype.slice.call(arguments);thisArg=thisArg||this;if(!ticking){ticking=true;helpers$1.requestAnimFrame.call(window,function(){ticking=false;fn.apply(thisArg,args);});}};}
function createDiv(cls){var el=document.createElement('div');el.className=cls||'';return el;}
function createResizer(handler){var maxSize=1000000;var resizer=createDiv(CSS_SIZE_MONITOR);var expand=createDiv(CSS_SIZE_MONITOR+'-expand');var shrink=createDiv(CSS_SIZE_MONITOR+'-shrink');expand.appendChild(createDiv());shrink.appendChild(createDiv());resizer.appendChild(expand);resizer.appendChild(shrink);resizer._reset=function(){expand.scrollLeft=maxSize;expand.scrollTop=maxSize;shrink.scrollLeft=maxSize;shrink.scrollTop=maxSize;};var onScroll=function(){resizer._reset();handler();};addListener(expand,'scroll',onScroll.bind(expand,'expand'));addListener(shrink,'scroll',onScroll.bind(shrink,'shrink'));return resizer;}
function watchForRender(node,handler){var expando=node[EXPANDO_KEY]||(node[EXPANDO_KEY]={});var proxy=expando.renderProxy=function(e){if(e.animationName===CSS_RENDER_ANIMATION){handler();}};helpers$1.each(ANIMATION_START_EVENTS,function(type){addListener(node,type,proxy);});expando.reflow=!!node.offsetParent;node.classList.add(CSS_RENDER_MONITOR);}
function unwatchForRender(node){var expando=node[EXPANDO_KEY]||{};var proxy=expando.renderProxy;if(proxy){helpers$1.each(ANIMATION_START_EVENTS,function(type){removeListener(node,type,proxy);});delete expando.renderProxy;}
node.classList.remove(CSS_RENDER_MONITOR);}
function addResizeListener(node,listener,chart){var expando=node[EXPANDO_KEY]||(node[EXPANDO_KEY]={});var resizer=expando.resizer=createResizer(throttled(function(){if(expando.resizer){var container=chart.options.maintainAspectRatio&&node.parentNode;var w=container?container.clientWidth:0;listener(createEvent('resize',chart));if(container&&container.clientWidth<w&&chart.canvas){listener(createEvent('resize',chart));}}}));watchForRender(node,function(){if(expando.resizer){var container=node.parentNode;if(container&&container!==resizer.parentNode){container.insertBefore(resizer,container.firstChild);}
resizer._reset();}});}
function removeResizeListener(node){var expando=node[EXPANDO_KEY]||{};var resizer=expando.resizer;delete expando.resizer;unwatchForRender(node);if(resizer&&resizer.parentNode){resizer.parentNode.removeChild(resizer);}}
function injectCSS(platform,css){var style=platform._style||document.createElement('style');if(!platform._style){platform._style=style;css='/* Chart.js */\n'+css;style.setAttribute('type','text/css');document.getElementsByTagName('head')[0].appendChild(style);}
style.appendChild(document.createTextNode(css));}
var platform_dom$2={disableCSSInjection:false,_enabled:typeof window!=='undefined'&&typeof document!=='undefined',_ensureLoaded:function(){if(this._loaded){return;}
this._loaded=true;if(!this.disableCSSInjection){injectCSS(this,stylesheet);}},acquireContext:function(item,config){if(typeof item==='string'){item=document.getElementById(item);}else if(item.length){item=item[0];}
if(item&&item.canvas){item=item.canvas;}
var context=item&&item.getContext&&item.getContext('2d');this._ensureLoaded();if(context&&context.canvas===item){initCanvas(item,config);return context;}
return null;},releaseContext:function(context){var canvas=context.canvas;if(!canvas[EXPANDO_KEY]){return;}
var initial=canvas[EXPANDO_KEY].initial;['height','width'].forEach(function(prop){var value=initial[prop];if(helpers$1.isNullOrUndef(value)){canvas.removeAttribute(prop);}else{canvas.setAttribute(prop,value);}});helpers$1.each(initial.style||{},function(value,key){canvas.style[key]=value;});canvas.width=canvas.width;delete canvas[EXPANDO_KEY];},addEventListener:function(chart,type,listener){var canvas=chart.canvas;if(type==='resize'){addResizeListener(canvas,listener,chart);return;}
var expando=listener[EXPANDO_KEY]||(listener[EXPANDO_KEY]={});var proxies=expando.proxies||(expando.proxies={});var proxy=proxies[chart.id+'_'+type]=function(event){listener(fromNativeEvent(event,chart));};addListener(canvas,type,proxy);},removeEventListener:function(chart,type,listener){var canvas=chart.canvas;if(type==='resize'){removeResizeListener(canvas);return;}
var expando=listener[EXPANDO_KEY]||{};var proxies=expando.proxies||{};var proxy=proxies[chart.id+'_'+type];if(!proxy){return;}
removeListener(canvas,type,proxy);}};helpers$1.addEvent=addListener;helpers$1.removeEvent=removeListener;var implementation=platform_dom$2._enabled?platform_dom$2:platform_basic;var platform=helpers$1.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},implementation);core_defaults._set('global',{plugins:{}});var core_plugins={_plugins:[],_cacheId:0,register:function(plugins){var p=this._plugins;([]).concat(plugins).forEach(function(plugin){if(p.indexOf(plugin)===-1){p.push(plugin);}});this._cacheId++;},unregister:function(plugins){var p=this._plugins;([]).concat(plugins).forEach(function(plugin){var idx=p.indexOf(plugin);if(idx!==-1){p.splice(idx,1);}});this._cacheId++;},clear:function(){this._plugins=[];this._cacheId++;},count:function(){return this._plugins.length;},getAll:function(){return this._plugins;},notify:function(chart,hook,args){var descriptors=this.descriptors(chart);var ilen=descriptors.length;var i,descriptor,plugin,params,method;for(i=0;i<ilen;++i){descriptor=descriptors[i];plugin=descriptor.plugin;method=plugin[hook];if(typeof method==='function'){params=[chart].concat(args||[]);params.push(descriptor.options);if(method.apply(plugin,params)===false){return false;}}}
return true;},descriptors:function(chart){var cache=chart.$plugins||(chart.$plugins={});if(cache.id===this._cacheId){return cache.descriptors;}
var plugins=[];var descriptors=[];var config=(chart&&chart.config)||{};var options=(config.options&&config.options.plugins)||{};this._plugins.concat(config.plugins||[]).forEach(function(plugin){var idx=plugins.indexOf(plugin);if(idx!==-1){return;}
var id=plugin.id;var opts=options[id];if(opts===false){return;}
if(opts===true){opts=helpers$1.clone(core_defaults.global.plugins[id]);}
plugins.push(plugin);descriptors.push({plugin:plugin,options:opts||{}});});cache.descriptors=descriptors;cache.id=this._cacheId;return descriptors;},_invalidate:function(chart){delete chart.$plugins;}};var core_scaleService={constructors:{},defaults:{},registerScaleType:function(type,scaleConstructor,scaleDefaults){this.constructors[type]=scaleConstructor;this.defaults[type]=helpers$1.clone(scaleDefaults);},getScaleConstructor:function(type){return this.constructors.hasOwnProperty(type)?this.constructors[type]:undefined;},getScaleDefaults:function(type){return this.defaults.hasOwnProperty(type)?helpers$1.merge({},[core_defaults.scale,this.defaults[type]]):{};},updateScaleDefaults:function(type,additions){var me=this;if(me.defaults.hasOwnProperty(type)){me.defaults[type]=helpers$1.extend(me.defaults[type],additions);}},addScalesToLayout:function(chart){helpers$1.each(chart.scales,function(scale){scale.fullWidth=scale.options.fullWidth;scale.position=scale.options.position;scale.weight=scale.options.weight;core_layouts.addBox(chart,scale);});}};var valueOrDefault$7=helpers$1.valueOrDefault;core_defaults._set('global',{tooltips:{enabled:true,custom:null,mode:'nearest',position:'average',intersect:true,backgroundColor:'rgba(0,0,0,0.8)',titleFontStyle:'bold',titleSpacing:2,titleMarginBottom:6,titleFontColor:'#fff',titleAlign:'left',bodySpacing:2,bodyFontColor:'#fff',bodyAlign:'left',footerFontStyle:'bold',footerSpacing:2,footerMarginTop:6,footerFontColor:'#fff',footerAlign:'left',yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:'#fff',displayColors:true,borderColor:'rgba(0,0,0,0)',borderWidth:0,callbacks:{beforeTitle:helpers$1.noop,title:function(tooltipItems,data){var title='';var labels=data.labels;var labelCount=labels?labels.length:0;if(tooltipItems.length>0){var item=tooltipItems[0];if(item.label){title=item.label;}else if(item.xLabel){title=item.xLabel;}else if(labelCount>0&&item.index<labelCount){title=labels[item.index];}}
return title;},afterTitle:helpers$1.noop,beforeBody:helpers$1.noop,beforeLabel:helpers$1.noop,label:function(tooltipItem,data){var label=data.datasets[tooltipItem.datasetIndex].label||'';if(label){label+=': ';}
if(!helpers$1.isNullOrUndef(tooltipItem.value)){label+=tooltipItem.value;}else{label+=tooltipItem.yLabel;}
return label;},labelColor:function(tooltipItem,chart){var meta=chart.getDatasetMeta(tooltipItem.datasetIndex);var activeElement=meta.data[tooltipItem.index];var view=activeElement._view;return{borderColor:view.borderColor,backgroundColor:view.backgroundColor};},labelTextColor:function(){return this._options.bodyFontColor;},afterLabel:helpers$1.noop,afterBody:helpers$1.noop,beforeFooter:helpers$1.noop,footer:helpers$1.noop,afterFooter:helpers$1.noop}}});var positioners={average:function(elements){if(!elements.length){return false;}
var i,len;var x=0;var y=0;var count=0;for(i=0,len=elements.length;i<len;++i){var el=elements[i];if(el&&el.hasValue()){var pos=el.tooltipPosition();x+=pos.x;y+=pos.y;++count;}}
return{x:x/count,y:y/count};},nearest:function(elements,eventPosition){var x=eventPosition.x;var y=eventPosition.y;var minDistance=Number.POSITIVE_INFINITY;var i,len,nearestElement;for(i=0,len=elements.length;i<len;++i){var el=elements[i];if(el&&el.hasValue()){var center=el.getCenterPoint();var d=helpers$1.distanceBetweenPoints(eventPosition,center);if(d<minDistance){minDistance=d;nearestElement=el;}}}
if(nearestElement){var tp=nearestElement.tooltipPosition();x=tp.x;y=tp.y;}
return{x:x,y:y};}};function pushOrConcat(base,toPush){if(toPush){if(helpers$1.isArray(toPush)){Array.prototype.push.apply(base,toPush);}else{base.push(toPush);}}
return base;}
function splitNewlines(str){if((typeof str==='string'||str instanceof String)&&str.indexOf('\n')>-1){return str.split('\n');}
return str;}
function createTooltipItem(element){var xScale=element._xScale;var yScale=element._yScale||element._scale;var index=element._index;var datasetIndex=element._datasetIndex;var controller=element._chart.getDatasetMeta(datasetIndex).controller;var indexScale=controller._getIndexScale();var valueScale=controller._getValueScale();return{xLabel:xScale?xScale.getLabelForIndex(index,datasetIndex):'',yLabel:yScale?yScale.getLabelForIndex(index,datasetIndex):'',label:indexScale?''+indexScale.getLabelForIndex(index,datasetIndex):'',value:valueScale?''+valueScale.getLabelForIndex(index,datasetIndex):'',index:index,datasetIndex:datasetIndex,x:element._model.x,y:element._model.y};}
function getBaseModel(tooltipOpts){var globalDefaults=core_defaults.global;return{xPadding:tooltipOpts.xPadding,yPadding:tooltipOpts.yPadding,xAlign:tooltipOpts.xAlign,yAlign:tooltipOpts.yAlign,bodyFontColor:tooltipOpts.bodyFontColor,_bodyFontFamily:valueOrDefault$7(tooltipOpts.bodyFontFamily,globalDefaults.defaultFontFamily),_bodyFontStyle:valueOrDefault$7(tooltipOpts.bodyFontStyle,globalDefaults.defaultFontStyle),_bodyAlign:tooltipOpts.bodyAlign,bodyFontSize:valueOrDefault$7(tooltipOpts.bodyFontSize,globalDefaults.defaultFontSize),bodySpacing:tooltipOpts.bodySpacing,titleFontColor:tooltipOpts.titleFontColor,_titleFontFamily:valueOrDefault$7(tooltipOpts.titleFontFamily,globalDefaults.defaultFontFamily),_titleFontStyle:valueOrDefault$7(tooltipOpts.titleFontStyle,globalDefaults.defaultFontStyle),titleFontSize:valueOrDefault$7(tooltipOpts.titleFontSize,globalDefaults.defaultFontSize),_titleAlign:tooltipOpts.titleAlign,titleSpacing:tooltipOpts.titleSpacing,titleMarginBottom:tooltipOpts.titleMarginBottom,footerFontColor:tooltipOpts.footerFontColor,_footerFontFamily:valueOrDefault$7(tooltipOpts.footerFontFamily,globalDefaults.defaultFontFamily),_footerFontStyle:valueOrDefault$7(tooltipOpts.footerFontStyle,globalDefaults.defaultFontStyle),footerFontSize:valueOrDefault$7(tooltipOpts.footerFontSize,globalDefaults.defaultFontSize),_footerAlign:tooltipOpts.footerAlign,footerSpacing:tooltipOpts.footerSpacing,footerMarginTop:tooltipOpts.footerMarginTop,caretSize:tooltipOpts.caretSize,cornerRadius:tooltipOpts.cornerRadius,backgroundColor:tooltipOpts.backgroundColor,opacity:0,legendColorBackground:tooltipOpts.multiKeyBackground,displayColors:tooltipOpts.displayColors,borderColor:tooltipOpts.borderColor,borderWidth:tooltipOpts.borderWidth};}
function getTooltipSize(tooltip,model){var ctx=tooltip._chart.ctx;var height=model.yPadding*2;var width=0;var body=model.body;var combinedBodyLength=body.reduce(function(count,bodyItem){return count+bodyItem.before.length+bodyItem.lines.length+bodyItem.after.length;},0);combinedBodyLength+=model.beforeBody.length+model.afterBody.length;var titleLineCount=model.title.length;var footerLineCount=model.footer.length;var titleFontSize=model.titleFontSize;var bodyFontSize=model.bodyFontSize;var footerFontSize=model.footerFontSize;height+=titleLineCount*titleFontSize;height+=titleLineCount?(titleLineCount-1)*model.titleSpacing:0;height+=titleLineCount?model.titleMarginBottom:0;height+=combinedBodyLength*bodyFontSize;height+=combinedBodyLength?(combinedBodyLength-1)*model.bodySpacing:0;height+=footerLineCount?model.footerMarginTop:0;height+=footerLineCount*(footerFontSize);height+=footerLineCount?(footerLineCount-1)*model.footerSpacing:0;var widthPadding=0;var maxLineWidth=function(line){width=Math.max(width,ctx.measureText(line).width+widthPadding);};ctx.font=helpers$1.fontString(titleFontSize,model._titleFontStyle,model._titleFontFamily);helpers$1.each(model.title,maxLineWidth);ctx.font=helpers$1.fontString(bodyFontSize,model._bodyFontStyle,model._bodyFontFamily);helpers$1.each(model.beforeBody.concat(model.afterBody),maxLineWidth);widthPadding=model.displayColors?(bodyFontSize+2):0;helpers$1.each(body,function(bodyItem){helpers$1.each(bodyItem.before,maxLineWidth);helpers$1.each(bodyItem.lines,maxLineWidth);helpers$1.each(bodyItem.after,maxLineWidth);});widthPadding=0;ctx.font=helpers$1.fontString(footerFontSize,model._footerFontStyle,model._footerFontFamily);helpers$1.each(model.footer,maxLineWidth);width+=2*model.xPadding;return{width:width,height:height};}
function determineAlignment(tooltip,size){var model=tooltip._model;var chart=tooltip._chart;var chartArea=tooltip._chart.chartArea;var xAlign='center';var yAlign='center';if(model.y<size.height){yAlign='top';}else if(model.y>(chart.height-size.height)){yAlign='bottom';}
var lf,rf;var olf,orf;var yf;var midX=(chartArea.left+chartArea.right)/2;var midY=(chartArea.top+chartArea.bottom)/2;if(yAlign==='center'){lf=function(x){return x<=midX;};rf=function(x){return x>midX;};}else{lf=function(x){return x<=(size.width/2);};rf=function(x){return x>=(chart.width-(size.width/2));};}
olf=function(x){return x+size.width+model.caretSize+model.caretPadding>chart.width;};orf=function(x){return x-size.width-model.caretSize-model.caretPadding<0;};yf=function(y){return y<=midY?'top':'bottom';};if(lf(model.x)){xAlign='left';if(olf(model.x)){xAlign='center';yAlign=yf(model.y);}}else if(rf(model.x)){xAlign='right';if(orf(model.x)){xAlign='center';yAlign=yf(model.y);}}
var opts=tooltip._options;return{xAlign:opts.xAlign?opts.xAlign:xAlign,yAlign:opts.yAlign?opts.yAlign:yAlign};}
function getBackgroundPoint(vm,size,alignment,chart){var x=vm.x;var y=vm.y;var caretSize=vm.caretSize;var caretPadding=vm.caretPadding;var cornerRadius=vm.cornerRadius;var xAlign=alignment.xAlign;var yAlign=alignment.yAlign;var paddingAndSize=caretSize+caretPadding;var radiusAndPadding=cornerRadius+caretPadding;if(xAlign==='right'){x-=size.width;}else if(xAlign==='center'){x-=(size.width/2);if(x+size.width>chart.width){x=chart.width-size.width;}
if(x<0){x=0;}}
if(yAlign==='top'){y+=paddingAndSize;}else if(yAlign==='bottom'){y-=size.height+paddingAndSize;}else{y-=(size.height/2);}
if(yAlign==='center'){if(xAlign==='left'){x+=paddingAndSize;}else if(xAlign==='right'){x-=paddingAndSize;}}else if(xAlign==='left'){x-=radiusAndPadding;}else if(xAlign==='right'){x+=radiusAndPadding;}
return{x:x,y:y};}
function getAlignedX(vm,align){return align==='center'?vm.x+vm.width/2:align==='right'?vm.x+vm.width-vm.xPadding:vm.x+vm.xPadding;}
function getBeforeAfterBodyLines(callback){return pushOrConcat([],splitNewlines(callback));}
var exports$3=core_element.extend({initialize:function(){this._model=getBaseModel(this._options);this._lastActive=[];},getTitle:function(){var me=this;var opts=me._options;var callbacks=opts.callbacks;var beforeTitle=callbacks.beforeTitle.apply(me,arguments);var title=callbacks.title.apply(me,arguments);var afterTitle=callbacks.afterTitle.apply(me,arguments);var lines=[];lines=pushOrConcat(lines,splitNewlines(beforeTitle));lines=pushOrConcat(lines,splitNewlines(title));lines=pushOrConcat(lines,splitNewlines(afterTitle));return lines;},getBeforeBody:function(){return getBeforeAfterBodyLines(this._options.callbacks.beforeBody.apply(this,arguments));},getBody:function(tooltipItems,data){var me=this;var callbacks=me._options.callbacks;var bodyItems=[];helpers$1.each(tooltipItems,function(tooltipItem){var bodyItem={before:[],lines:[],after:[]};pushOrConcat(bodyItem.before,splitNewlines(callbacks.beforeLabel.call(me,tooltipItem,data)));pushOrConcat(bodyItem.lines,callbacks.label.call(me,tooltipItem,data));pushOrConcat(bodyItem.after,splitNewlines(callbacks.afterLabel.call(me,tooltipItem,data)));bodyItems.push(bodyItem);});return bodyItems;},getAfterBody:function(){return getBeforeAfterBodyLines(this._options.callbacks.afterBody.apply(this,arguments));},getFooter:function(){var me=this;var callbacks=me._options.callbacks;var beforeFooter=callbacks.beforeFooter.apply(me,arguments);var footer=callbacks.footer.apply(me,arguments);var afterFooter=callbacks.afterFooter.apply(me,arguments);var lines=[];lines=pushOrConcat(lines,splitNewlines(beforeFooter));lines=pushOrConcat(lines,splitNewlines(footer));lines=pushOrConcat(lines,splitNewlines(afterFooter));return lines;},update:function(changed){var me=this;var opts=me._options;var existingModel=me._model;var model=me._model=getBaseModel(opts);var active=me._active;var data=me._data;var alignment={xAlign:existingModel.xAlign,yAlign:existingModel.yAlign};var backgroundPoint={x:existingModel.x,y:existingModel.y};var tooltipSize={width:existingModel.width,height:existingModel.height};var tooltipPosition={x:existingModel.caretX,y:existingModel.caretY};var i,len;if(active.length){model.opacity=1;var labelColors=[];var labelTextColors=[];tooltipPosition=positioners[opts.position].call(me,active,me._eventPosition);var tooltipItems=[];for(i=0,len=active.length;i<len;++i){tooltipItems.push(createTooltipItem(active[i]));}
if(opts.filter){tooltipItems=tooltipItems.filter(function(a){return opts.filter(a,data);});}
if(opts.itemSort){tooltipItems=tooltipItems.sort(function(a,b){return opts.itemSort(a,b,data);});}
helpers$1.each(tooltipItems,function(tooltipItem){labelColors.push(opts.callbacks.labelColor.call(me,tooltipItem,me._chart));labelTextColors.push(opts.callbacks.labelTextColor.call(me,tooltipItem,me._chart));});model.title=me.getTitle(tooltipItems,data);model.beforeBody=me.getBeforeBody(tooltipItems,data);model.body=me.getBody(tooltipItems,data);model.afterBody=me.getAfterBody(tooltipItems,data);model.footer=me.getFooter(tooltipItems,data);model.x=tooltipPosition.x;model.y=tooltipPosition.y;model.caretPadding=opts.caretPadding;model.labelColors=labelColors;model.labelTextColors=labelTextColors;model.dataPoints=tooltipItems;tooltipSize=getTooltipSize(this,model);alignment=determineAlignment(this,tooltipSize);backgroundPoint=getBackgroundPoint(model,tooltipSize,alignment,me._chart);}else{model.opacity=0;}
model.xAlign=alignment.xAlign;model.yAlign=alignment.yAlign;model.x=backgroundPoint.x;model.y=backgroundPoint.y;model.width=tooltipSize.width;model.height=tooltipSize.height;model.caretX=tooltipPosition.x;model.caretY=tooltipPosition.y;me._model=model;if(changed&&opts.custom){opts.custom.call(me,model);}
return me;},drawCaret:function(tooltipPoint,size){var ctx=this._chart.ctx;var vm=this._view;var caretPosition=this.getCaretPosition(tooltipPoint,size,vm);ctx.lineTo(caretPosition.x1,caretPosition.y1);ctx.lineTo(caretPosition.x2,caretPosition.y2);ctx.lineTo(caretPosition.x3,caretPosition.y3);},getCaretPosition:function(tooltipPoint,size,vm){var x1,x2,x3,y1,y2,y3;var caretSize=vm.caretSize;var cornerRadius=vm.cornerRadius;var xAlign=vm.xAlign;var yAlign=vm.yAlign;var ptX=tooltipPoint.x;var ptY=tooltipPoint.y;var width=size.width;var height=size.height;if(yAlign==='center'){y2=ptY+(height/2);if(xAlign==='left'){x1=ptX;x2=x1-caretSize;x3=x1;y1=y2+caretSize;y3=y2-caretSize;}else{x1=ptX+width;x2=x1+caretSize;x3=x1;y1=y2-caretSize;y3=y2+caretSize;}}else{if(xAlign==='left'){x2=ptX+cornerRadius+(caretSize);x1=x2-caretSize;x3=x2+caretSize;}else if(xAlign==='right'){x2=ptX+width-cornerRadius-caretSize;x1=x2-caretSize;x3=x2+caretSize;}else{x2=vm.caretX;x1=x2-caretSize;x3=x2+caretSize;}
if(yAlign==='top'){y1=ptY;y2=y1-caretSize;y3=y1;}else{y1=ptY+height;y2=y1+caretSize;y3=y1;var tmp=x3;x3=x1;x1=tmp;}}
return{x1:x1,x2:x2,x3:x3,y1:y1,y2:y2,y3:y3};},drawTitle:function(pt,vm,ctx){var title=vm.title;if(title.length){pt.x=getAlignedX(vm,vm._titleAlign);ctx.textAlign=vm._titleAlign;ctx.textBaseline='top';var titleFontSize=vm.titleFontSize;var titleSpacing=vm.titleSpacing;ctx.fillStyle=vm.titleFontColor;ctx.font=helpers$1.fontString(titleFontSize,vm._titleFontStyle,vm._titleFontFamily);var i,len;for(i=0,len=title.length;i<len;++i){ctx.fillText(title[i],pt.x,pt.y);pt.y+=titleFontSize+titleSpacing;if(i+1===title.length){pt.y+=vm.titleMarginBottom-titleSpacing;}}}},drawBody:function(pt,vm,ctx){var bodyFontSize=vm.bodyFontSize;var bodySpacing=vm.bodySpacing;var bodyAlign=vm._bodyAlign;var body=vm.body;var drawColorBoxes=vm.displayColors;var labelColors=vm.labelColors;var xLinePadding=0;var colorX=drawColorBoxes?getAlignedX(vm,'left'):0;var textColor;ctx.textAlign=bodyAlign;ctx.textBaseline='top';ctx.font=helpers$1.fontString(bodyFontSize,vm._bodyFontStyle,vm._bodyFontFamily);pt.x=getAlignedX(vm,bodyAlign);var fillLineOfText=function(line){ctx.fillText(line,pt.x+xLinePadding,pt.y);pt.y+=bodyFontSize+bodySpacing;};ctx.fillStyle=vm.bodyFontColor;helpers$1.each(vm.beforeBody,fillLineOfText);xLinePadding=drawColorBoxes&&bodyAlign!=='right'?bodyAlign==='center'?(bodyFontSize/2+1):(bodyFontSize+2):0;helpers$1.each(body,function(bodyItem,i){textColor=vm.labelTextColors[i];ctx.fillStyle=textColor;helpers$1.each(bodyItem.before,fillLineOfText);helpers$1.each(bodyItem.lines,function(line){if(drawColorBoxes){ctx.fillStyle=vm.legendColorBackground;ctx.fillRect(colorX,pt.y,bodyFontSize,bodyFontSize);ctx.lineWidth=1;ctx.strokeStyle=labelColors[i].borderColor;ctx.strokeRect(colorX,pt.y,bodyFontSize,bodyFontSize);ctx.fillStyle=labelColors[i].backgroundColor;ctx.fillRect(colorX+1,pt.y+1,bodyFontSize-2,bodyFontSize-2);ctx.fillStyle=textColor;}
fillLineOfText(line);});helpers$1.each(bodyItem.after,fillLineOfText);});xLinePadding=0;helpers$1.each(vm.afterBody,fillLineOfText);pt.y-=bodySpacing;},drawFooter:function(pt,vm,ctx){var footer=vm.footer;if(footer.length){pt.x=getAlignedX(vm,vm._footerAlign);pt.y+=vm.footerMarginTop;ctx.textAlign=vm._footerAlign;ctx.textBaseline='top';ctx.fillStyle=vm.footerFontColor;ctx.font=helpers$1.fontString(vm.footerFontSize,vm._footerFontStyle,vm._footerFontFamily);helpers$1.each(footer,function(line){ctx.fillText(line,pt.x,pt.y);pt.y+=vm.footerFontSize+vm.footerSpacing;});}},drawBackground:function(pt,vm,ctx,tooltipSize){ctx.fillStyle=vm.backgroundColor;ctx.strokeStyle=vm.borderColor;ctx.lineWidth=vm.borderWidth;var xAlign=vm.xAlign;var yAlign=vm.yAlign;var x=pt.x;var y=pt.y;var width=tooltipSize.width;var height=tooltipSize.height;var radius=vm.cornerRadius;ctx.beginPath();ctx.moveTo(x+radius,y);if(yAlign==='top'){this.drawCaret(pt,tooltipSize);}
ctx.lineTo(x+width-radius,y);ctx.quadraticCurveTo(x+width,y,x+width,y+radius);if(yAlign==='center'&&xAlign==='right'){this.drawCaret(pt,tooltipSize);}
ctx.lineTo(x+width,y+height-radius);ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);if(yAlign==='bottom'){this.drawCaret(pt,tooltipSize);}
ctx.lineTo(x+radius,y+height);ctx.quadraticCurveTo(x,y+height,x,y+height-radius);if(yAlign==='center'&&xAlign==='left'){this.drawCaret(pt,tooltipSize);}
ctx.lineTo(x,y+radius);ctx.quadraticCurveTo(x,y,x+radius,y);ctx.closePath();ctx.fill();if(vm.borderWidth>0){ctx.stroke();}},draw:function(){var ctx=this._chart.ctx;var vm=this._view;if(vm.opacity===0){return;}
var tooltipSize={width:vm.width,height:vm.height};var pt={x:vm.x,y:vm.y};var opacity=Math.abs(vm.opacity<1e-3)?0:vm.opacity;var hasTooltipContent=vm.title.length||vm.beforeBody.length||vm.body.length||vm.afterBody.length||vm.footer.length;if(this._options.enabled&&hasTooltipContent){ctx.save();ctx.globalAlpha=opacity;this.drawBackground(pt,vm,ctx,tooltipSize);pt.y+=vm.yPadding;this.drawTitle(pt,vm,ctx);this.drawBody(pt,vm,ctx);this.drawFooter(pt,vm,ctx);ctx.restore();}},handleEvent:function(e){var me=this;var options=me._options;var changed=false;me._lastActive=me._lastActive||[];if(e.type==='mouseout'){me._active=[];}else{me._active=me._chart.getElementsAtEventForMode(e,options.mode,options);}
changed=!helpers$1.arrayEquals(me._active,me._lastActive);if(changed){me._lastActive=me._active;if(options.enabled||options.custom){me._eventPosition={x:e.x,y:e.y};me.update(true);me.pivot();}}
return changed;}});var positioners_1=positioners;var core_tooltip=exports$3;core_tooltip.positioners=positioners_1;var valueOrDefault$8=helpers$1.valueOrDefault;core_defaults._set('global',{elements:{},events:['mousemove','mouseout','click','touchstart','touchmove'],hover:{onHover:null,mode:'nearest',intersect:true,animationDuration:400},onClick:null,maintainAspectRatio:true,responsive:true,responsiveAnimationDuration:0});function mergeScaleConfig(){return helpers$1.merge({},[].slice.call(arguments),{merger:function(key,target,source,options){if(key==='xAxes'||key==='yAxes'){var slen=source[key].length;var i,type,scale;if(!target[key]){target[key]=[];}
for(i=0;i<slen;++i){scale=source[key][i];type=valueOrDefault$8(scale.type,key==='xAxes'?'category':'linear');if(i>=target[key].length){target[key].push({});}
if(!target[key][i].type||(scale.type&&scale.type!==target[key][i].type)){helpers$1.merge(target[key][i],[core_scaleService.getScaleDefaults(type),scale]);}else{helpers$1.merge(target[key][i],scale);}}}else{helpers$1._merger(key,target,source,options);}}});}
function mergeConfig(){return helpers$1.merge({},[].slice.call(arguments),{merger:function(key,target,source,options){var tval=target[key]||{};var sval=source[key];if(key==='scales'){target[key]=mergeScaleConfig(tval,sval);}else if(key==='scale'){target[key]=helpers$1.merge(tval,[core_scaleService.getScaleDefaults(sval.type),sval]);}else{helpers$1._merger(key,target,source,options);}}});}
function initConfig(config){config=config||{};var data=config.data=config.data||{};data.datasets=data.datasets||[];data.labels=data.labels||[];config.options=mergeConfig(core_defaults.global,core_defaults[config.type],config.options||{});return config;}
function updateConfig(chart){var newOptions=chart.options;helpers$1.each(chart.scales,function(scale){core_layouts.removeBox(chart,scale);});newOptions=mergeConfig(core_defaults.global,core_defaults[chart.config.type],newOptions);chart.options=chart.config.options=newOptions;chart.ensureScalesHaveIDs();chart.buildOrUpdateScales();chart.tooltip._options=newOptions.tooltips;chart.tooltip.initialize();}
function positionIsHorizontal(position){return position==='top'||position==='bottom';}
var Chart=function(item,config){this.construct(item,config);return this;};helpers$1.extend(Chart.prototype,{construct:function(item,config){var me=this;config=initConfig(config);var context=platform.acquireContext(item,config);var canvas=context&&context.canvas;var height=canvas&&canvas.height;var width=canvas&&canvas.width;me.id=helpers$1.uid();me.ctx=context;me.canvas=canvas;me.config=config;me.width=width;me.height=height;me.aspectRatio=height?width/height:null;me.options=config.options;me._bufferedRender=false;me.chart=me;me.controller=me;Chart.instances[me.id]=me;Object.defineProperty(me,'data',{get:function(){return me.config.data;},set:function(value){me.config.data=value;}});if(!context||!canvas){console.error("Failed to create chart: can't acquire context from the given item");return;}
me.initialize();me.update();},initialize:function(){var me=this;core_plugins.notify(me,'beforeInit');helpers$1.retinaScale(me,me.options.devicePixelRatio);me.bindEvents();if(me.options.responsive){me.resize(true);}
me.ensureScalesHaveIDs();me.buildOrUpdateScales();me.initToolTip();core_plugins.notify(me,'afterInit');return me;},clear:function(){helpers$1.canvas.clear(this);return this;},stop:function(){core_animations.cancelAnimation(this);return this;},resize:function(silent){var me=this;var options=me.options;var canvas=me.canvas;var aspectRatio=(options.maintainAspectRatio&&me.aspectRatio)||null;var newWidth=Math.max(0,Math.floor(helpers$1.getMaximumWidth(canvas)));var newHeight=Math.max(0,Math.floor(aspectRatio?newWidth/aspectRatio:helpers$1.getMaximumHeight(canvas)));if(me.width===newWidth&&me.height===newHeight){return;}
canvas.width=me.width=newWidth;canvas.height=me.height=newHeight;canvas.style.width=newWidth+'px';canvas.style.height=newHeight+'px';helpers$1.retinaScale(me,options.devicePixelRatio);if(!silent){var newSize={width:newWidth,height:newHeight};core_plugins.notify(me,'resize',[newSize]);if(options.onResize){options.onResize(me,newSize);}
me.stop();me.update({duration:options.responsiveAnimationDuration});}},ensureScalesHaveIDs:function(){var options=this.options;var scalesOptions=options.scales||{};var scaleOptions=options.scale;helpers$1.each(scalesOptions.xAxes,function(xAxisOptions,index){xAxisOptions.id=xAxisOptions.id||('x-axis-'+index);});helpers$1.each(scalesOptions.yAxes,function(yAxisOptions,index){yAxisOptions.id=yAxisOptions.id||('y-axis-'+index);});if(scaleOptions){scaleOptions.id=scaleOptions.id||'scale';}},buildOrUpdateScales:function(){var me=this;var options=me.options;var scales=me.scales||{};var items=[];var updated=Object.keys(scales).reduce(function(obj,id){obj[id]=false;return obj;},{});if(options.scales){items=items.concat((options.scales.xAxes||[]).map(function(xAxisOptions){return{options:xAxisOptions,dtype:'category',dposition:'bottom'};}),(options.scales.yAxes||[]).map(function(yAxisOptions){return{options:yAxisOptions,dtype:'linear',dposition:'left'};}));}
if(options.scale){items.push({options:options.scale,dtype:'radialLinear',isDefault:true,dposition:'chartArea'});}
helpers$1.each(items,function(item){var scaleOptions=item.options;var id=scaleOptions.id;var scaleType=valueOrDefault$8(scaleOptions.type,item.dtype);if(positionIsHorizontal(scaleOptions.position)!==positionIsHorizontal(item.dposition)){scaleOptions.position=item.dposition;}
updated[id]=true;var scale=null;if(id in scales&&scales[id].type===scaleType){scale=scales[id];scale.options=scaleOptions;scale.ctx=me.ctx;scale.chart=me;}else{var scaleClass=core_scaleService.getScaleConstructor(scaleType);if(!scaleClass){return;}
scale=new scaleClass({id:id,type:scaleType,options:scaleOptions,ctx:me.ctx,chart:me});scales[scale.id]=scale;}
scale.mergeTicksOptions();if(item.isDefault){me.scale=scale;}});helpers$1.each(updated,function(hasUpdated,id){if(!hasUpdated){delete scales[id];}});me.scales=scales;core_scaleService.addScalesToLayout(this);},buildOrUpdateControllers:function(){var me=this;var newControllers=[];helpers$1.each(me.data.datasets,function(dataset,datasetIndex){var meta=me.getDatasetMeta(datasetIndex);var type=dataset.type||me.config.type;if(meta.type&&meta.type!==type){me.destroyDatasetMeta(datasetIndex);meta=me.getDatasetMeta(datasetIndex);}
meta.type=type;if(meta.controller){meta.controller.updateIndex(datasetIndex);meta.controller.linkScales();}else{var ControllerClass=controllers[meta.type];if(ControllerClass===undefined){throw new Error('"'+meta.type+'" is not a chart type.');}
meta.controller=new ControllerClass(me,datasetIndex);newControllers.push(meta.controller);}},me);return newControllers;},resetElements:function(){var me=this;helpers$1.each(me.data.datasets,function(dataset,datasetIndex){me.getDatasetMeta(datasetIndex).controller.reset();},me);},reset:function(){this.resetElements();this.tooltip.initialize();},update:function(config){var me=this;if(!config||typeof config!=='object'){config={duration:config,lazy:arguments[1]};}
updateConfig(me);core_plugins._invalidate(me);if(core_plugins.notify(me,'beforeUpdate')===false){return;}
me.tooltip._data=me.data;var newControllers=me.buildOrUpdateControllers();helpers$1.each(me.data.datasets,function(dataset,datasetIndex){me.getDatasetMeta(datasetIndex).controller.buildOrUpdateElements();},me);me.updateLayout();if(me.options.animation&&me.options.animation.duration){helpers$1.each(newControllers,function(controller){controller.reset();});}
me.updateDatasets();me.tooltip.initialize();me.lastActive=[];core_plugins.notify(me,'afterUpdate');if(me._bufferedRender){me._bufferedRequest={duration:config.duration,easing:config.easing,lazy:config.lazy};}else{me.render(config);}},updateLayout:function(){var me=this;if(core_plugins.notify(me,'beforeLayout')===false){return;}
core_layouts.update(this,this.width,this.height);core_plugins.notify(me,'afterScaleUpdate');core_plugins.notify(me,'afterLayout');},updateDatasets:function(){var me=this;if(core_plugins.notify(me,'beforeDatasetsUpdate')===false){return;}
for(var i=0,ilen=me.data.datasets.length;i<ilen;++i){me.updateDataset(i);}
core_plugins.notify(me,'afterDatasetsUpdate');},updateDataset:function(index){var me=this;var meta=me.getDatasetMeta(index);var args={meta:meta,index:index};if(core_plugins.notify(me,'beforeDatasetUpdate',[args])===false){return;}
meta.controller.update();core_plugins.notify(me,'afterDatasetUpdate',[args]);},render:function(config){var me=this;if(!config||typeof config!=='object'){config={duration:config,lazy:arguments[1]};}
var animationOptions=me.options.animation;var duration=valueOrDefault$8(config.duration,animationOptions&&animationOptions.duration);var lazy=config.lazy;if(core_plugins.notify(me,'beforeRender')===false){return;}
var onComplete=function(animation){core_plugins.notify(me,'afterRender');helpers$1.callback(animationOptions&&animationOptions.onComplete,[animation],me);};if(animationOptions&&duration){var animation=new core_animation({numSteps:duration/16.66,easing:config.easing||animationOptions.easing,render:function(chart,animationObject){var easingFunction=helpers$1.easing.effects[animationObject.easing];var currentStep=animationObject.currentStep;var stepDecimal=currentStep/animationObject.numSteps;chart.draw(easingFunction(stepDecimal),stepDecimal,currentStep);},onAnimationProgress:animationOptions.onProgress,onAnimationComplete:onComplete});core_animations.addAnimation(me,animation,duration,lazy);}else{me.draw();onComplete(new core_animation({numSteps:0,chart:me}));}
return me;},draw:function(easingValue){var me=this;me.clear();if(helpers$1.isNullOrUndef(easingValue)){easingValue=1;}
me.transition(easingValue);if(me.width<=0||me.height<=0){return;}
if(core_plugins.notify(me,'beforeDraw',[easingValue])===false){return;}
helpers$1.each(me.boxes,function(box){box.draw(me.chartArea);},me);me.drawDatasets(easingValue);me._drawTooltip(easingValue);core_plugins.notify(me,'afterDraw',[easingValue]);},transition:function(easingValue){var me=this;for(var i=0,ilen=(me.data.datasets||[]).length;i<ilen;++i){if(me.isDatasetVisible(i)){me.getDatasetMeta(i).controller.transition(easingValue);}}
me.tooltip.transition(easingValue);},drawDatasets:function(easingValue){var me=this;if(core_plugins.notify(me,'beforeDatasetsDraw',[easingValue])===false){return;}
for(var i=(me.data.datasets||[]).length-1;i>=0;--i){if(me.isDatasetVisible(i)){me.drawDataset(i,easingValue);}}
core_plugins.notify(me,'afterDatasetsDraw',[easingValue]);},drawDataset:function(index,easingValue){var me=this;var meta=me.getDatasetMeta(index);var args={meta:meta,index:index,easingValue:easingValue};if(core_plugins.notify(me,'beforeDatasetDraw',[args])===false){return;}
meta.controller.draw(easingValue);core_plugins.notify(me,'afterDatasetDraw',[args]);},_drawTooltip:function(easingValue){var me=this;var tooltip=me.tooltip;var args={tooltip:tooltip,easingValue:easingValue};if(core_plugins.notify(me,'beforeTooltipDraw',[args])===false){return;}
tooltip.draw();core_plugins.notify(me,'afterTooltipDraw',[args]);},getElementAtEvent:function(e){return core_interaction.modes.single(this,e);},getElementsAtEvent:function(e){return core_interaction.modes.label(this,e,{intersect:true});},getElementsAtXAxis:function(e){return core_interaction.modes['x-axis'](this,e,{intersect:true});},getElementsAtEventForMode:function(e,mode,options){var method=core_interaction.modes[mode];if(typeof method==='function'){return method(this,e,options);}
return[];},getDatasetAtEvent:function(e){return core_interaction.modes.dataset(this,e,{intersect:true});},getDatasetMeta:function(datasetIndex){var me=this;var dataset=me.data.datasets[datasetIndex];if(!dataset._meta){dataset._meta={};}
var meta=dataset._meta[me.id];if(!meta){meta=dataset._meta[me.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null};}
return meta;},getVisibleDatasetCount:function(){var count=0;for(var i=0,ilen=this.data.datasets.length;i<ilen;++i){if(this.isDatasetVisible(i)){count++;}}
return count;},isDatasetVisible:function(datasetIndex){var meta=this.getDatasetMeta(datasetIndex);return typeof meta.hidden==='boolean'?!meta.hidden:!this.data.datasets[datasetIndex].hidden;},generateLegend:function(){return this.options.legendCallback(this);},destroyDatasetMeta:function(datasetIndex){var id=this.id;var dataset=this.data.datasets[datasetIndex];var meta=dataset._meta&&dataset._meta[id];if(meta){meta.controller.destroy();delete dataset._meta[id];}},destroy:function(){var me=this;var canvas=me.canvas;var i,ilen;me.stop();for(i=0,ilen=me.data.datasets.length;i<ilen;++i){me.destroyDatasetMeta(i);}
if(canvas){me.unbindEvents();helpers$1.canvas.clear(me);platform.releaseContext(me.ctx);me.canvas=null;me.ctx=null;}
core_plugins.notify(me,'destroy');delete Chart.instances[me.id];},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments);},initToolTip:function(){var me=this;me.tooltip=new core_tooltip({_chart:me,_chartInstance:me,_data:me.data,_options:me.options.tooltips},me);},bindEvents:function(){var me=this;var listeners=me._listeners={};var listener=function(){me.eventHandler.apply(me,arguments);};helpers$1.each(me.options.events,function(type){platform.addEventListener(me,type,listener);listeners[type]=listener;});if(me.options.responsive){listener=function(){me.resize();};platform.addEventListener(me,'resize',listener);listeners.resize=listener;}},unbindEvents:function(){var me=this;var listeners=me._listeners;if(!listeners){return;}
delete me._listeners;helpers$1.each(listeners,function(listener,type){platform.removeEventListener(me,type,listener);});},updateHoverStyle:function(elements,mode,enabled){var method=enabled?'setHoverStyle':'removeHoverStyle';var element,i,ilen;for(i=0,ilen=elements.length;i<ilen;++i){element=elements[i];if(element){this.getDatasetMeta(element._datasetIndex).controller[method](element);}}},eventHandler:function(e){var me=this;var tooltip=me.tooltip;if(core_plugins.notify(me,'beforeEvent',[e])===false){return;}
me._bufferedRender=true;me._bufferedRequest=null;var changed=me.handleEvent(e);if(tooltip){changed=tooltip._start?tooltip.handleEvent(e):changed|tooltip.handleEvent(e);}
core_plugins.notify(me,'afterEvent',[e]);var bufferedRequest=me._bufferedRequest;if(bufferedRequest){me.render(bufferedRequest);}else if(changed&&!me.animating){me.stop();me.render({duration:me.options.hover.animationDuration,lazy:true});}
me._bufferedRender=false;me._bufferedRequest=null;return me;},handleEvent:function(e){var me=this;var options=me.options||{};var hoverOptions=options.hover;var changed=false;me.lastActive=me.lastActive||[];if(e.type==='mouseout'){me.active=[];}else{me.active=me.getElementsAtEventForMode(e,hoverOptions.mode,hoverOptions);}
helpers$1.callback(options.onHover||options.hover.onHover,[e.native,me.active],me);if(e.type==='mouseup'||e.type==='click'){if(options.onClick){options.onClick.call(me,e.native,me.active);}}
if(me.lastActive.length){me.updateHoverStyle(me.lastActive,hoverOptions.mode,false);}
if(me.active.length&&hoverOptions.mode){me.updateHoverStyle(me.active,hoverOptions.mode,true);}
changed=!helpers$1.arrayEquals(me.active,me.lastActive);me.lastActive=me.active;return changed;}});Chart.instances={};var core_controller=Chart;Chart.Controller=Chart;Chart.types={};helpers$1.configMerge=mergeConfig;helpers$1.scaleMerge=mergeScaleConfig;var core_helpers=function(){helpers$1.where=function(collection,filterCallback){if(helpers$1.isArray(collection)&&Array.prototype.filter){return collection.filter(filterCallback);}
var filtered=[];helpers$1.each(collection,function(item){if(filterCallback(item)){filtered.push(item);}});return filtered;};helpers$1.findIndex=Array.prototype.findIndex?function(array,callback,scope){return array.findIndex(callback,scope);}:function(array,callback,scope){scope=scope===undefined?array:scope;for(var i=0,ilen=array.length;i<ilen;++i){if(callback.call(scope,array[i],i,array)){return i;}}
return-1;};helpers$1.findNextWhere=function(arrayToSearch,filterCallback,startIndex){if(helpers$1.isNullOrUndef(startIndex)){startIndex=-1;}
for(var i=startIndex+1;i<arrayToSearch.length;i++){var currentItem=arrayToSearch[i];if(filterCallback(currentItem)){return currentItem;}}};helpers$1.findPreviousWhere=function(arrayToSearch,filterCallback,startIndex){if(helpers$1.isNullOrUndef(startIndex)){startIndex=arrayToSearch.length;}
for(var i=startIndex-1;i>=0;i--){var currentItem=arrayToSearch[i];if(filterCallback(currentItem)){return currentItem;}}};helpers$1.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n);};helpers$1.almostEquals=function(x,y,epsilon){return Math.abs(x-y)<epsilon;};helpers$1.almostWhole=function(x,epsilon){var rounded=Math.round(x);return(((rounded-epsilon)<x)&&((rounded+epsilon)>x));};helpers$1.max=function(array){return array.reduce(function(max,value){if(!isNaN(value)){return Math.max(max,value);}
return max;},Number.NEGATIVE_INFINITY);};helpers$1.min=function(array){return array.reduce(function(min,value){if(!isNaN(value)){return Math.min(min,value);}
return min;},Number.POSITIVE_INFINITY);};helpers$1.sign=Math.sign?function(x){return Math.sign(x);}:function(x){x=+x;if(x===0||isNaN(x)){return x;}
return x>0?1:-1;};helpers$1.log10=Math.log10?function(x){return Math.log10(x);}:function(x){var exponent=Math.log(x)*Math.LOG10E;var powerOf10=Math.round(exponent);var isPowerOf10=x===Math.pow(10,powerOf10);return isPowerOf10?powerOf10:exponent;};helpers$1.toRadians=function(degrees){return degrees*(Math.PI/180);};helpers$1.toDegrees=function(radians){return radians*(180/Math.PI);};helpers$1._decimalPlaces=function(x){if(!helpers$1.isFinite(x)){return;}
var e=1;var p=0;while(Math.round(x*e)/e!==x){e*=10;p++;}
return p;};helpers$1.getAngleFromPoint=function(centrePoint,anglePoint){var distanceFromXCenter=anglePoint.x-centrePoint.x;var distanceFromYCenter=anglePoint.y-centrePoint.y;var radialDistanceFromCenter=Math.sqrt(distanceFromXCenter*distanceFromXCenter+distanceFromYCenter*distanceFromYCenter);var angle=Math.atan2(distanceFromYCenter,distanceFromXCenter);if(angle<(-0.5*Math.PI)){angle+=2.0*Math.PI;}
return{angle:angle,distance:radialDistanceFromCenter};};helpers$1.distanceBetweenPoints=function(pt1,pt2){return Math.sqrt(Math.pow(pt2.x-pt1.x,2)+Math.pow(pt2.y-pt1.y,2));};helpers$1.aliasPixel=function(pixelWidth){return(pixelWidth%2===0)?0:0.5;};helpers$1._alignPixel=function(chart,pixel,width){var devicePixelRatio=chart.currentDevicePixelRatio;var halfWidth=width/2;return Math.round((pixel-halfWidth)*devicePixelRatio)/devicePixelRatio+halfWidth;};helpers$1.splineCurve=function(firstPoint,middlePoint,afterPoint,t){var previous=firstPoint.skip?middlePoint:firstPoint;var current=middlePoint;var next=afterPoint.skip?middlePoint:afterPoint;var d01=Math.sqrt(Math.pow(current.x-previous.x,2)+Math.pow(current.y-previous.y,2));var d12=Math.sqrt(Math.pow(next.x-current.x,2)+Math.pow(next.y-current.y,2));var s01=d01/(d01+d12);var s12=d12/(d01+d12);s01=isNaN(s01)?0:s01;s12=isNaN(s12)?0:s12;var fa=t*s01;var fb=t*s12;return{previous:{x:current.x-fa*(next.x-previous.x),y:current.y-fa*(next.y-previous.y)},next:{x:current.x+fb*(next.x-previous.x),y:current.y+fb*(next.y-previous.y)}};};helpers$1.EPSILON=Number.EPSILON||1e-14;helpers$1.splineCurveMonotone=function(points){var pointsWithTangents=(points||[]).map(function(point){return{model:point._model,deltaK:0,mK:0};});var pointsLen=pointsWithTangents.length;var i,pointBefore,pointCurrent,pointAfter;for(i=0;i<pointsLen;++i){pointCurrent=pointsWithTangents[i];if(pointCurrent.model.skip){continue;}
pointBefore=i>0?pointsWithTangents[i-1]:null;pointAfter=i<pointsLen-1?pointsWithTangents[i+1]:null;if(pointAfter&&!pointAfter.model.skip){var slopeDeltaX=(pointAfter.model.x-pointCurrent.model.x);pointCurrent.deltaK=slopeDeltaX!==0?(pointAfter.model.y-pointCurrent.model.y)/slopeDeltaX:0;}
if(!pointBefore||pointBefore.model.skip){pointCurrent.mK=pointCurrent.deltaK;}else if(!pointAfter||pointAfter.model.skip){pointCurrent.mK=pointBefore.deltaK;}else if(this.sign(pointBefore.deltaK)!==this.sign(pointCurrent.deltaK)){pointCurrent.mK=0;}else{pointCurrent.mK=(pointBefore.deltaK+pointCurrent.deltaK)/2;}}
var alphaK,betaK,tauK,squaredMagnitude;for(i=0;i<pointsLen-1;++i){pointCurrent=pointsWithTangents[i];pointAfter=pointsWithTangents[i+1];if(pointCurrent.model.skip||pointAfter.model.skip){continue;}
if(helpers$1.almostEquals(pointCurrent.deltaK,0,this.EPSILON)){pointCurrent.mK=pointAfter.mK=0;continue;}
alphaK=pointCurrent.mK/pointCurrent.deltaK;betaK=pointAfter.mK/pointCurrent.deltaK;squaredMagnitude=Math.pow(alphaK,2)+Math.pow(betaK,2);if(squaredMagnitude<=9){continue;}
tauK=3/Math.sqrt(squaredMagnitude);pointCurrent.mK=alphaK*tauK*pointCurrent.deltaK;pointAfter.mK=betaK*tauK*pointCurrent.deltaK;}
var deltaX;for(i=0;i<pointsLen;++i){pointCurrent=pointsWithTangents[i];if(pointCurrent.model.skip){continue;}
pointBefore=i>0?pointsWithTangents[i-1]:null;pointAfter=i<pointsLen-1?pointsWithTangents[i+1]:null;if(pointBefore&&!pointBefore.model.skip){deltaX=(pointCurrent.model.x-pointBefore.model.x)/3;pointCurrent.model.controlPointPreviousX=pointCurrent.model.x-deltaX;pointCurrent.model.controlPointPreviousY=pointCurrent.model.y-deltaX*pointCurrent.mK;}
if(pointAfter&&!pointAfter.model.skip){deltaX=(pointAfter.model.x-pointCurrent.model.x)/3;pointCurrent.model.controlPointNextX=pointCurrent.model.x+deltaX;pointCurrent.model.controlPointNextY=pointCurrent.model.y+deltaX*pointCurrent.mK;}}};helpers$1.nextItem=function(collection,index,loop){if(loop){return index>=collection.length-1?collection[0]:collection[index+1];}
return index>=collection.length-1?collection[collection.length-1]:collection[index+1];};helpers$1.previousItem=function(collection,index,loop){if(loop){return index<=0?collection[collection.length-1]:collection[index-1];}
return index<=0?collection[0]:collection[index-1];};helpers$1.niceNum=function(range,round){var exponent=Math.floor(helpers$1.log10(range));var fraction=range/Math.pow(10,exponent);var niceFraction;if(round){if(fraction<1.5){niceFraction=1;}else if(fraction<3){niceFraction=2;}else if(fraction<7){niceFraction=5;}else{niceFraction=10;}}else if(fraction<=1.0){niceFraction=1;}else if(fraction<=2){niceFraction=2;}else if(fraction<=5){niceFraction=5;}else{niceFraction=10;}
return niceFraction*Math.pow(10,exponent);};helpers$1.requestAnimFrame=(function(){if(typeof window==='undefined'){return function(callback){callback();};}
return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(callback,1000/60);};}());helpers$1.getRelativePosition=function(evt,chart){var mouseX,mouseY;var e=evt.originalEvent||evt;var canvas=evt.target||evt.srcElement;var boundingRect=canvas.getBoundingClientRect();var touches=e.touches;if(touches&&touches.length>0){mouseX=touches[0].clientX;mouseY=touches[0].clientY;}else{mouseX=e.clientX;mouseY=e.clientY;}
var paddingLeft=parseFloat(helpers$1.getStyle(canvas,'padding-left'));var paddingTop=parseFloat(helpers$1.getStyle(canvas,'padding-top'));var paddingRight=parseFloat(helpers$1.getStyle(canvas,'padding-right'));var paddingBottom=parseFloat(helpers$1.getStyle(canvas,'padding-bottom'));var width=boundingRect.right-boundingRect.left-paddingLeft-paddingRight;var height=boundingRect.bottom-boundingRect.top-paddingTop-paddingBottom;mouseX=Math.round((mouseX-boundingRect.left-paddingLeft)/(width)*canvas.width/chart.currentDevicePixelRatio);mouseY=Math.round((mouseY-boundingRect.top-paddingTop)/(height)*canvas.height/chart.currentDevicePixelRatio);return{x:mouseX,y:mouseY};};function parseMaxStyle(styleValue,node,parentProperty){var valueInPixels;if(typeof styleValue==='string'){valueInPixels=parseInt(styleValue,10);if(styleValue.indexOf('%')!==-1){valueInPixels=valueInPixels/100*node.parentNode[parentProperty];}}else{valueInPixels=styleValue;}
return valueInPixels;}
function isConstrainedValue(value){return value!==undefined&&value!==null&&value!=='none';}
function getConstraintDimension(domNode,maxStyle,percentageProperty){var view=document.defaultView;var parentNode=helpers$1._getParentNode(domNode);var constrainedNode=view.getComputedStyle(domNode)[maxStyle];var constrainedContainer=view.getComputedStyle(parentNode)[maxStyle];var hasCNode=isConstrainedValue(constrainedNode);var hasCContainer=isConstrainedValue(constrainedContainer);var infinity=Number.POSITIVE_INFINITY;if(hasCNode||hasCContainer){return Math.min(hasCNode?parseMaxStyle(constrainedNode,domNode,percentageProperty):infinity,hasCContainer?parseMaxStyle(constrainedContainer,parentNode,percentageProperty):infinity);}
return'none';}
helpers$1.getConstraintWidth=function(domNode){return getConstraintDimension(domNode,'max-width','clientWidth');};helpers$1.getConstraintHeight=function(domNode){return getConstraintDimension(domNode,'max-height','clientHeight');};helpers$1._calculatePadding=function(container,padding,parentDimension){padding=helpers$1.getStyle(container,padding);return padding.indexOf('%')>-1?parentDimension*parseInt(padding,10)/100:parseInt(padding,10);};helpers$1._getParentNode=function(domNode){var parent=domNode.parentNode;if(parent&&parent.toString()==='[object ShadowRoot]'){parent=parent.host;}
return parent;};helpers$1.getMaximumWidth=function(domNode){var container=helpers$1._getParentNode(domNode);if(!container){return domNode.clientWidth;}
var clientWidth=container.clientWidth;var paddingLeft=helpers$1._calculatePadding(container,'padding-left',clientWidth);var paddingRight=helpers$1._calculatePadding(container,'padding-right',clientWidth);var w=clientWidth-paddingLeft-paddingRight;var cw=helpers$1.getConstraintWidth(domNode);return isNaN(cw)?w:Math.min(w,cw);};helpers$1.getMaximumHeight=function(domNode){var container=helpers$1._getParentNode(domNode);if(!container){return domNode.clientHeight;}
var clientHeight=container.clientHeight;var paddingTop=helpers$1._calculatePadding(container,'padding-top',clientHeight);var paddingBottom=helpers$1._calculatePadding(container,'padding-bottom',clientHeight);var h=clientHeight-paddingTop-paddingBottom;var ch=helpers$1.getConstraintHeight(domNode);return isNaN(ch)?h:Math.min(h,ch);};helpers$1.getStyle=function(el,property){return el.currentStyle?el.currentStyle[property]:document.defaultView.getComputedStyle(el,null).getPropertyValue(property);};helpers$1.retinaScale=function(chart,forceRatio){var pixelRatio=chart.currentDevicePixelRatio=forceRatio||(typeof window!=='undefined'&&window.devicePixelRatio)||1;if(pixelRatio===1){return;}
var canvas=chart.canvas;var height=chart.height;var width=chart.width;canvas.height=height*pixelRatio;canvas.width=width*pixelRatio;chart.ctx.scale(pixelRatio,pixelRatio);if(!canvas.style.height&&!canvas.style.width){canvas.style.height=height+'px';canvas.style.width=width+'px';}};helpers$1.fontString=function(pixelSize,fontStyle,fontFamily){return fontStyle+' '+pixelSize+'px '+fontFamily;};helpers$1.longestText=function(ctx,font,arrayOfThings,cache){cache=cache||{};var data=cache.data=cache.data||{};var gc=cache.garbageCollect=cache.garbageCollect||[];if(cache.font!==font){data=cache.data={};gc=cache.garbageCollect=[];cache.font=font;}
ctx.font=font;var longest=0;helpers$1.each(arrayOfThings,function(thing){if(thing!==undefined&&thing!==null&&helpers$1.isArray(thing)!==true){longest=helpers$1.measureText(ctx,data,gc,longest,thing);}else if(helpers$1.isArray(thing)){helpers$1.each(thing,function(nestedThing){if(nestedThing!==undefined&&nestedThing!==null&&!helpers$1.isArray(nestedThing)){longest=helpers$1.measureText(ctx,data,gc,longest,nestedThing);}});}});var gcLen=gc.length/2;if(gcLen>arrayOfThings.length){for(var i=0;i<gcLen;i++){delete data[gc[i]];}
gc.splice(0,gcLen);}
return longest;};helpers$1.measureText=function(ctx,data,gc,longest,string){var textWidth=data[string];if(!textWidth){textWidth=data[string]=ctx.measureText(string).width;gc.push(string);}
if(textWidth>longest){longest=textWidth;}
return longest;};helpers$1.numberOfLabelLines=function(arrayOfThings){var numberOfLines=1;helpers$1.each(arrayOfThings,function(thing){if(helpers$1.isArray(thing)){if(thing.length>numberOfLines){numberOfLines=thing.length;}}});return numberOfLines;};helpers$1.color=!chartjsColor?function(value){console.error('Color.js not found!');return value;}:function(value){if(value instanceof CanvasGradient){value=core_defaults.global.defaultColor;}
return chartjsColor(value);};helpers$1.getHoverColor=function(colorValue){return(colorValue instanceof CanvasPattern||colorValue instanceof CanvasGradient)?colorValue:helpers$1.color(colorValue).saturate(0.5).darken(0.1).rgbString();};};function abstract(){throw new Error('This method is not implemented: either no adapter can '+
'be found or an incomplete integration was provided.');}
function DateAdapter(options){this.options=options||{};}
helpers$1.extend(DateAdapter.prototype,{formats:abstract,parse:abstract,format:abstract,add:abstract,diff:abstract,startOf:abstract,endOf:abstract,_create:function(value){return value;}});DateAdapter.override=function(members){helpers$1.extend(DateAdapter.prototype,members);};var _date=DateAdapter;var core_adapters={_date:_date};var core_ticks={formatters:{values:function(value){return helpers$1.isArray(value)?value:''+value;},linear:function(tickValue,index,ticks){var delta=ticks.length>3?ticks[2]-ticks[1]:ticks[1]-ticks[0];if(Math.abs(delta)>1){if(tickValue!==Math.floor(tickValue)){delta=tickValue-Math.floor(tickValue);}}
var logDelta=helpers$1.log10(Math.abs(delta));var tickString='';if(tickValue!==0){var maxTick=Math.max(Math.abs(ticks[0]),Math.abs(ticks[ticks.length-1]));if(maxTick<1e-4){var logTick=helpers$1.log10(Math.abs(tickValue));tickString=tickValue.toExponential(Math.floor(logTick)-Math.floor(logDelta));}else{var numDecimal=-1*Math.floor(logDelta);numDecimal=Math.max(Math.min(numDecimal,20),0);tickString=tickValue.toFixed(numDecimal);}}else{tickString='0';}
return tickString;},logarithmic:function(tickValue,index,ticks){var remain=tickValue/(Math.pow(10,Math.floor(helpers$1.log10(tickValue))));if(tickValue===0){return'0';}else if(remain===1||remain===2||remain===5||index===0||index===ticks.length-1){return tickValue.toExponential();}
return'';}}};var valueOrDefault$9=helpers$1.valueOrDefault;var valueAtIndexOrDefault=helpers$1.valueAtIndexOrDefault;core_defaults._set('scale',{display:true,position:'left',offset:false,gridLines:{display:true,color:'rgba(0, 0, 0, 0.1)',lineWidth:1,drawBorder:true,drawOnChartArea:true,drawTicks:true,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:'rgba(0,0,0,0.25)',zeroLineBorderDash:[],zeroLineBorderDashOffset:0.0,offsetGridLines:false,borderDash:[],borderDashOffset:0.0},scaleLabel:{display:false,labelString:'',padding:{top:4,bottom:4}},ticks:{beginAtZero:false,minRotation:0,maxRotation:50,mirror:false,padding:0,reverse:false,display:true,autoSkip:true,autoSkipPadding:0,labelOffset:0,callback:core_ticks.formatters.values,minor:{},major:{}}});function labelsFromTicks(ticks){var labels=[];var i,ilen;for(i=0,ilen=ticks.length;i<ilen;++i){labels.push(ticks[i].label);}
return labels;}
function getPixelForGridLine(scale,index,offsetGridLines){var lineValue=scale.getPixelForTick(index);if(offsetGridLines){if(scale.getTicks().length===1){lineValue-=scale.isHorizontal()?Math.max(lineValue-scale.left,scale.right-lineValue):Math.max(lineValue-scale.top,scale.bottom-lineValue);}else if(index===0){lineValue-=(scale.getPixelForTick(1)-lineValue)/2;}else{lineValue-=(lineValue-scale.getPixelForTick(index-1))/2;}}
return lineValue;}
function computeTextSize(context,tick,font){return helpers$1.isArray(tick)?helpers$1.longestText(context,font,tick):context.measureText(tick).width;}
var core_scale=core_element.extend({getPadding:function(){var me=this;return{left:me.paddingLeft||0,top:me.paddingTop||0,right:me.paddingRight||0,bottom:me.paddingBottom||0};},getTicks:function(){return this._ticks;},mergeTicksOptions:function(){var ticks=this.options.ticks;if(ticks.minor===false){ticks.minor={display:false};}
if(ticks.major===false){ticks.major={display:false};}
for(var key in ticks){if(key!=='major'&&key!=='minor'){if(typeof ticks.minor[key]==='undefined'){ticks.minor[key]=ticks[key];}
if(typeof ticks.major[key]==='undefined'){ticks.major[key]=ticks[key];}}}},beforeUpdate:function(){helpers$1.callback(this.options.beforeUpdate,[this]);},update:function(maxWidth,maxHeight,margins){var me=this;var i,ilen,labels,label,ticks,tick;me.beforeUpdate();me.maxWidth=maxWidth;me.maxHeight=maxHeight;me.margins=helpers$1.extend({left:0,right:0,top:0,bottom:0},margins);me._maxLabelLines=0;me.longestLabelWidth=0;me.longestTextCache=me.longestTextCache||{};me.beforeSetDimensions();me.setDimensions();me.afterSetDimensions();me.beforeDataLimits();me.determineDataLimits();me.afterDataLimits();me.beforeBuildTicks();ticks=me.buildTicks()||[];ticks=me.afterBuildTicks(ticks)||ticks;me.beforeTickToLabelConversion();labels=me.convertTicksToLabels(ticks)||me.ticks;me.afterTickToLabelConversion();me.ticks=labels;for(i=0,ilen=labels.length;i<ilen;++i){label=labels[i];tick=ticks[i];if(!tick){ticks.push(tick={label:label,major:false});}else{tick.label=label;}}
me._ticks=ticks;me.beforeCalculateTickRotation();me.calculateTickRotation();me.afterCalculateTickRotation();me.beforeFit();me.fit();me.afterFit();me.afterUpdate();return me.minSize;},afterUpdate:function(){helpers$1.callback(this.options.afterUpdate,[this]);},beforeSetDimensions:function(){helpers$1.callback(this.options.beforeSetDimensions,[this]);},setDimensions:function(){var me=this;if(me.isHorizontal()){me.width=me.maxWidth;me.left=0;me.right=me.width;}else{me.height=me.maxHeight;me.top=0;me.bottom=me.height;}
me.paddingLeft=0;me.paddingTop=0;me.paddingRight=0;me.paddingBottom=0;},afterSetDimensions:function(){helpers$1.callback(this.options.afterSetDimensions,[this]);},beforeDataLimits:function(){helpers$1.callback(this.options.beforeDataLimits,[this]);},determineDataLimits:helpers$1.noop,afterDataLimits:function(){helpers$1.callback(this.options.afterDataLimits,[this]);},beforeBuildTicks:function(){helpers$1.callback(this.options.beforeBuildTicks,[this]);},buildTicks:helpers$1.noop,afterBuildTicks:function(ticks){var me=this;if(helpers$1.isArray(ticks)&&ticks.length){return helpers$1.callback(me.options.afterBuildTicks,[me,ticks]);}
me.ticks=helpers$1.callback(me.options.afterBuildTicks,[me,me.ticks])||me.ticks;return ticks;},beforeTickToLabelConversion:function(){helpers$1.callback(this.options.beforeTickToLabelConversion,[this]);},convertTicksToLabels:function(){var me=this;var tickOpts=me.options.ticks;me.ticks=me.ticks.map(tickOpts.userCallback||tickOpts.callback,this);},afterTickToLabelConversion:function(){helpers$1.callback(this.options.afterTickToLabelConversion,[this]);},beforeCalculateTickRotation:function(){helpers$1.callback(this.options.beforeCalculateTickRotation,[this]);},calculateTickRotation:function(){var me=this;var context=me.ctx;var tickOpts=me.options.ticks;var labels=labelsFromTicks(me._ticks);var tickFont=helpers$1.options._parseFont(tickOpts);context.font=tickFont.string;var labelRotation=tickOpts.minRotation||0;if(labels.length&&me.options.display&&me.isHorizontal()){var originalLabelWidth=helpers$1.longestText(context,tickFont.string,labels,me.longestTextCache);var labelWidth=originalLabelWidth;var cosRotation,sinRotation;var tickWidth=me.getPixelForTick(1)-me.getPixelForTick(0)-6;while(labelWidth>tickWidth&&labelRotation<tickOpts.maxRotation){var angleRadians=helpers$1.toRadians(labelRotation);cosRotation=Math.cos(angleRadians);sinRotation=Math.sin(angleRadians);if(sinRotation*originalLabelWidth>me.maxHeight){labelRotation--;break;}
labelRotation++;labelWidth=cosRotation*originalLabelWidth;}}
me.labelRotation=labelRotation;},afterCalculateTickRotation:function(){helpers$1.callback(this.options.afterCalculateTickRotation,[this]);},beforeFit:function(){helpers$1.callback(this.options.beforeFit,[this]);},fit:function(){var me=this;var minSize=me.minSize={width:0,height:0};var labels=labelsFromTicks(me._ticks);var opts=me.options;var tickOpts=opts.ticks;var scaleLabelOpts=opts.scaleLabel;var gridLineOpts=opts.gridLines;var display=me._isVisible();var position=opts.position;var isHorizontal=me.isHorizontal();var parseFont=helpers$1.options._parseFont;var tickFont=parseFont(tickOpts);var tickMarkLength=opts.gridLines.tickMarkLength;if(isHorizontal){minSize.width=me.isFullWidth()?me.maxWidth-me.margins.left-me.margins.right:me.maxWidth;}else{minSize.width=display&&gridLineOpts.drawTicks?tickMarkLength:0;}
if(isHorizontal){minSize.height=display&&gridLineOpts.drawTicks?tickMarkLength:0;}else{minSize.height=me.maxHeight;}
if(scaleLabelOpts.display&&display){var scaleLabelFont=parseFont(scaleLabelOpts);var scaleLabelPadding=helpers$1.options.toPadding(scaleLabelOpts.padding);var deltaHeight=scaleLabelFont.lineHeight+scaleLabelPadding.height;if(isHorizontal){minSize.height+=deltaHeight;}else{minSize.width+=deltaHeight;}}
if(tickOpts.display&&display){var largestTextWidth=helpers$1.longestText(me.ctx,tickFont.string,labels,me.longestTextCache);var tallestLabelHeightInLines=helpers$1.numberOfLabelLines(labels);var lineSpace=tickFont.size*0.5;var tickPadding=me.options.ticks.padding;me._maxLabelLines=tallestLabelHeightInLines;me.longestLabelWidth=largestTextWidth;if(isHorizontal){var angleRadians=helpers$1.toRadians(me.labelRotation);var cosRotation=Math.cos(angleRadians);var sinRotation=Math.sin(angleRadians);var labelHeight=(sinRotation*largestTextWidth)
+(tickFont.lineHeight*tallestLabelHeightInLines)
+lineSpace;minSize.height=Math.min(me.maxHeight,minSize.height+labelHeight+tickPadding);me.ctx.font=tickFont.string;var firstLabelWidth=computeTextSize(me.ctx,labels[0],tickFont.string);var lastLabelWidth=computeTextSize(me.ctx,labels[labels.length-1],tickFont.string);var offsetLeft=me.getPixelForTick(0)-me.left;var offsetRight=me.right-me.getPixelForTick(labels.length-1);var paddingLeft,paddingRight;if(me.labelRotation!==0){paddingLeft=position==='bottom'?(cosRotation*firstLabelWidth):(cosRotation*lineSpace);paddingRight=position==='bottom'?(cosRotation*lineSpace):(cosRotation*lastLabelWidth);}else{paddingLeft=firstLabelWidth/2;paddingRight=lastLabelWidth/2;}
me.paddingLeft=Math.max(paddingLeft-offsetLeft,0)+3;me.paddingRight=Math.max(paddingRight-offsetRight,0)+3;}else{if(tickOpts.mirror){largestTextWidth=0;}else{largestTextWidth+=tickPadding+lineSpace;}
minSize.width=Math.min(me.maxWidth,minSize.width+largestTextWidth);me.paddingTop=tickFont.size/2;me.paddingBottom=tickFont.size/2;}}
me.handleMargins();me.width=minSize.width;me.height=minSize.height;},handleMargins:function(){var me=this;if(me.margins){me.paddingLeft=Math.max(me.paddingLeft-me.margins.left,0);me.paddingTop=Math.max(me.paddingTop-me.margins.top,0);me.paddingRight=Math.max(me.paddingRight-me.margins.right,0);me.paddingBottom=Math.max(me.paddingBottom-me.margins.bottom,0);}},afterFit:function(){helpers$1.callback(this.options.afterFit,[this]);},isHorizontal:function(){return this.options.position==='top'||this.options.position==='bottom';},isFullWidth:function(){return(this.options.fullWidth);},getRightValue:function(rawValue){if(helpers$1.isNullOrUndef(rawValue)){return NaN;}
if((typeof rawValue==='number'||rawValue instanceof Number)&&!isFinite(rawValue)){return NaN;}
if(rawValue){if(this.isHorizontal()){if(rawValue.x!==undefined){return this.getRightValue(rawValue.x);}}else if(rawValue.y!==undefined){return this.getRightValue(rawValue.y);}}
return rawValue;},getLabelForIndex:helpers$1.noop,getPixelForValue:helpers$1.noop,getValueForPixel:helpers$1.noop,getPixelForTick:function(index){var me=this;var offset=me.options.offset;if(me.isHorizontal()){var innerWidth=me.width-(me.paddingLeft+me.paddingRight);var tickWidth=innerWidth/Math.max((me._ticks.length-(offset?0:1)),1);var pixel=(tickWidth*index)+me.paddingLeft;if(offset){pixel+=tickWidth/2;}
var finalVal=me.left+pixel;finalVal+=me.isFullWidth()?me.margins.left:0;return finalVal;}
var innerHeight=me.height-(me.paddingTop+me.paddingBottom);return me.top+(index*(innerHeight/(me._ticks.length-1)));},getPixelForDecimal:function(decimal){var me=this;if(me.isHorizontal()){var innerWidth=me.width-(me.paddingLeft+me.paddingRight);var valueOffset=(innerWidth*decimal)+me.paddingLeft;var finalVal=me.left+valueOffset;finalVal+=me.isFullWidth()?me.margins.left:0;return finalVal;}
return me.top+(decimal*me.height);},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue());},getBaseValue:function(){var me=this;var min=me.min;var max=me.max;return me.beginAtZero?0:min<0&&max<0?max:min>0&&max>0?min:0;},_autoSkip:function(ticks){var me=this;var isHorizontal=me.isHorizontal();var optionTicks=me.options.ticks.minor;var tickCount=ticks.length;var skipRatio=false;var maxTicks=optionTicks.maxTicksLimit;var ticksLength=me._tickSize()*(tickCount-1);var axisLength=isHorizontal?me.width-(me.paddingLeft+me.paddingRight):me.height-(me.paddingTop+me.PaddingBottom);var result=[];var i,tick;if(ticksLength>axisLength){skipRatio=1+Math.floor(ticksLength/axisLength);}
if(tickCount>maxTicks){skipRatio=Math.max(skipRatio,1+Math.floor(tickCount/maxTicks));}
for(i=0;i<tickCount;i++){tick=ticks[i];if(skipRatio>1&&i%skipRatio>0){delete tick.label;}
result.push(tick);}
return result;},_tickSize:function(){var me=this;var isHorizontal=me.isHorizontal();var optionTicks=me.options.ticks.minor;var rot=helpers$1.toRadians(me.labelRotation);var cos=Math.abs(Math.cos(rot));var sin=Math.abs(Math.sin(rot));var padding=optionTicks.autoSkipPadding||0;var w=(me.longestLabelWidth+padding)||0;var tickFont=helpers$1.options._parseFont(optionTicks);var h=(me._maxLabelLines*tickFont.lineHeight+padding)||0;return isHorizontal?h*cos>w*sin?w/cos:h/sin:h*sin<w*cos?h/cos:w/sin;},_isVisible:function(){var me=this;var chart=me.chart;var display=me.options.display;var i,ilen,meta;if(display!=='auto'){return!!display;}
for(i=0,ilen=chart.data.datasets.length;i<ilen;++i){if(chart.isDatasetVisible(i)){meta=chart.getDatasetMeta(i);if(meta.xAxisID===me.id||meta.yAxisID===me.id){return true;}}}
return false;},draw:function(chartArea){var me=this;var options=me.options;if(!me._isVisible()){return;}
var chart=me.chart;var context=me.ctx;var globalDefaults=core_defaults.global;var defaultFontColor=globalDefaults.defaultFontColor;var optionTicks=options.ticks.minor;var optionMajorTicks=options.ticks.major||optionTicks;var gridLines=options.gridLines;var scaleLabel=options.scaleLabel;var position=options.position;var isRotated=me.labelRotation!==0;var isMirrored=optionTicks.mirror;var isHorizontal=me.isHorizontal();var parseFont=helpers$1.options._parseFont;var ticks=optionTicks.display&&optionTicks.autoSkip?me._autoSkip(me.getTicks()):me.getTicks();var tickFontColor=valueOrDefault$9(optionTicks.fontColor,defaultFontColor);var tickFont=parseFont(optionTicks);var lineHeight=tickFont.lineHeight;var majorTickFontColor=valueOrDefault$9(optionMajorTicks.fontColor,defaultFontColor);var majorTickFont=parseFont(optionMajorTicks);var tickPadding=optionTicks.padding;var labelOffset=optionTicks.labelOffset;var tl=gridLines.drawTicks?gridLines.tickMarkLength:0;var scaleLabelFontColor=valueOrDefault$9(scaleLabel.fontColor,defaultFontColor);var scaleLabelFont=parseFont(scaleLabel);var scaleLabelPadding=helpers$1.options.toPadding(scaleLabel.padding);var labelRotationRadians=helpers$1.toRadians(me.labelRotation);var itemsToDraw=[];var axisWidth=gridLines.drawBorder?valueAtIndexOrDefault(gridLines.lineWidth,0,0):0;var alignPixel=helpers$1._alignPixel;var borderValue,tickStart,tickEnd;if(position==='top'){borderValue=alignPixel(chart,me.bottom,axisWidth);tickStart=me.bottom-tl;tickEnd=borderValue-axisWidth/2;}else if(position==='bottom'){borderValue=alignPixel(chart,me.top,axisWidth);tickStart=borderValue+axisWidth/2;tickEnd=me.top+tl;}else if(position==='left'){borderValue=alignPixel(chart,me.right,axisWidth);tickStart=me.right-tl;tickEnd=borderValue-axisWidth/2;}else{borderValue=alignPixel(chart,me.left,axisWidth);tickStart=borderValue+axisWidth/2;tickEnd=me.left+tl;}
var epsilon=0.0000001;helpers$1.each(ticks,function(tick,index){if(helpers$1.isNullOrUndef(tick.label)){return;}
var label=tick.label;var lineWidth,lineColor,borderDash,borderDashOffset;if(index===me.zeroLineIndex&&options.offset===gridLines.offsetGridLines){lineWidth=gridLines.zeroLineWidth;lineColor=gridLines.zeroLineColor;borderDash=gridLines.zeroLineBorderDash||[];borderDashOffset=gridLines.zeroLineBorderDashOffset||0.0;}else{lineWidth=valueAtIndexOrDefault(gridLines.lineWidth,index);lineColor=valueAtIndexOrDefault(gridLines.color,index);borderDash=gridLines.borderDash||[];borderDashOffset=gridLines.borderDashOffset||0.0;}
var tx1,ty1,tx2,ty2,x1,y1,x2,y2,labelX,labelY,textOffset,textAlign;var labelCount=helpers$1.isArray(label)?label.length:1;var lineValue=getPixelForGridLine(me,index,gridLines.offsetGridLines);if(isHorizontal){var labelYOffset=tl+tickPadding;if(lineValue<me.left-epsilon){lineColor='rgba(0,0,0,0)';}
tx1=tx2=x1=x2=alignPixel(chart,lineValue,lineWidth);ty1=tickStart;ty2=tickEnd;labelX=me.getPixelForTick(index)+labelOffset;if(position==='top'){y1=alignPixel(chart,chartArea.top,axisWidth)+axisWidth/2;y2=chartArea.bottom;textOffset=((!isRotated?0.5:1)-labelCount)*lineHeight;textAlign=!isRotated?'center':'left';labelY=me.bottom-labelYOffset;}else{y1=chartArea.top;y2=alignPixel(chart,chartArea.bottom,axisWidth)-axisWidth/2;textOffset=(!isRotated?0.5:0)*lineHeight;textAlign=!isRotated?'center':'right';labelY=me.top+labelYOffset;}}else{var labelXOffset=(isMirrored?0:tl)+tickPadding;if(lineValue<me.top-epsilon){lineColor='rgba(0,0,0,0)';}
tx1=tickStart;tx2=tickEnd;ty1=ty2=y1=y2=alignPixel(chart,lineValue,lineWidth);labelY=me.getPixelForTick(index)+labelOffset;textOffset=(1-labelCount)*lineHeight/2;if(position==='left'){x1=alignPixel(chart,chartArea.left,axisWidth)+axisWidth/2;x2=chartArea.right;textAlign=isMirrored?'left':'right';labelX=me.right-labelXOffset;}else{x1=chartArea.left;x2=alignPixel(chart,chartArea.right,axisWidth)-axisWidth/2;textAlign=isMirrored?'right':'left';labelX=me.left+labelXOffset;}}
itemsToDraw.push({tx1:tx1,ty1:ty1,tx2:tx2,ty2:ty2,x1:x1,y1:y1,x2:x2,y2:y2,labelX:labelX,labelY:labelY,glWidth:lineWidth,glColor:lineColor,glBorderDash:borderDash,glBorderDashOffset:borderDashOffset,rotation:-1*labelRotationRadians,label:label,major:tick.major,textOffset:textOffset,textAlign:textAlign});});helpers$1.each(itemsToDraw,function(itemToDraw){var glWidth=itemToDraw.glWidth;var glColor=itemToDraw.glColor;if(gridLines.display&&glWidth&&glColor){context.save();context.lineWidth=glWidth;context.strokeStyle=glColor;if(context.setLineDash){context.setLineDash(itemToDraw.glBorderDash);context.lineDashOffset=itemToDraw.glBorderDashOffset;}
context.beginPath();if(gridLines.drawTicks){context.moveTo(itemToDraw.tx1,itemToDraw.ty1);context.lineTo(itemToDraw.tx2,itemToDraw.ty2);}
if(gridLines.drawOnChartArea){context.moveTo(itemToDraw.x1,itemToDraw.y1);context.lineTo(itemToDraw.x2,itemToDraw.y2);}
context.stroke();context.restore();}
if(optionTicks.display){context.save();context.translate(itemToDraw.labelX,itemToDraw.labelY);context.rotate(itemToDraw.rotation);context.font=itemToDraw.major?majorTickFont.string:tickFont.string;context.fillStyle=itemToDraw.major?majorTickFontColor:tickFontColor;context.textBaseline='middle';context.textAlign=itemToDraw.textAlign;var label=itemToDraw.label;var y=itemToDraw.textOffset;if(helpers$1.isArray(label)){for(var i=0;i<label.length;++i){context.fillText(''+label[i],0,y);y+=lineHeight;}}else{context.fillText(label,0,y);}
context.restore();}});if(scaleLabel.display){var scaleLabelX;var scaleLabelY;var rotation=0;var halfLineHeight=scaleLabelFont.lineHeight/2;if(isHorizontal){scaleLabelX=me.left+((me.right-me.left)/2);scaleLabelY=position==='bottom'?me.bottom-halfLineHeight-scaleLabelPadding.bottom:me.top+halfLineHeight+scaleLabelPadding.top;}else{var isLeft=position==='left';scaleLabelX=isLeft?me.left+halfLineHeight+scaleLabelPadding.top:me.right-halfLineHeight-scaleLabelPadding.top;scaleLabelY=me.top+((me.bottom-me.top)/2);rotation=isLeft?-0.5*Math.PI:0.5*Math.PI;}
context.save();context.translate(scaleLabelX,scaleLabelY);context.rotate(rotation);context.textAlign='center';context.textBaseline='middle';context.fillStyle=scaleLabelFontColor;context.font=scaleLabelFont.string;context.fillText(scaleLabel.labelString,0,0);context.restore();}
if(axisWidth){var firstLineWidth=axisWidth;var lastLineWidth=valueAtIndexOrDefault(gridLines.lineWidth,ticks.length-1,0);var x1,x2,y1,y2;if(isHorizontal){x1=alignPixel(chart,me.left,firstLineWidth)-firstLineWidth/2;x2=alignPixel(chart,me.right,lastLineWidth)+lastLineWidth/2;y1=y2=borderValue;}else{y1=alignPixel(chart,me.top,firstLineWidth)-firstLineWidth/2;y2=alignPixel(chart,me.bottom,lastLineWidth)+lastLineWidth/2;x1=x2=borderValue;}
context.lineWidth=axisWidth;context.strokeStyle=valueAtIndexOrDefault(gridLines.color,0);context.beginPath();context.moveTo(x1,y1);context.lineTo(x2,y2);context.stroke();}}});var defaultConfig={position:'bottom'};var scale_category=core_scale.extend({getLabels:function(){var data=this.chart.data;return this.options.labels||(this.isHorizontal()?data.xLabels:data.yLabels)||data.labels;},determineDataLimits:function(){var me=this;var labels=me.getLabels();me.minIndex=0;me.maxIndex=labels.length-1;var findIndex;if(me.options.ticks.min!==undefined){findIndex=labels.indexOf(me.options.ticks.min);me.minIndex=findIndex!==-1?findIndex:me.minIndex;}
if(me.options.ticks.max!==undefined){findIndex=labels.indexOf(me.options.ticks.max);me.maxIndex=findIndex!==-1?findIndex:me.maxIndex;}
me.min=labels[me.minIndex];me.max=labels[me.maxIndex];},buildTicks:function(){var me=this;var labels=me.getLabels();me.ticks=(me.minIndex===0&&me.maxIndex===labels.length-1)?labels:labels.slice(me.minIndex,me.maxIndex+1);},getLabelForIndex:function(index,datasetIndex){var me=this;var chart=me.chart;if(chart.getDatasetMeta(datasetIndex).controller._getValueScaleId()===me.id){return me.getRightValue(chart.data.datasets[datasetIndex].data[index]);}
return me.ticks[index-me.minIndex];},getPixelForValue:function(value,index){var me=this;var offset=me.options.offset;var offsetAmt=Math.max((me.maxIndex+1-me.minIndex-(offset?0:1)),1);var valueCategory;if(value!==undefined&&value!==null){valueCategory=me.isHorizontal()?value.x:value.y;}
if(valueCategory!==undefined||(value!==undefined&&isNaN(index))){var labels=me.getLabels();value=valueCategory||value;var idx=labels.indexOf(value);index=idx!==-1?idx:index;}
if(me.isHorizontal()){var valueWidth=me.width/offsetAmt;var widthOffset=(valueWidth*(index-me.minIndex));if(offset){widthOffset+=(valueWidth/2);}
return me.left+widthOffset;}
var valueHeight=me.height/offsetAmt;var heightOffset=(valueHeight*(index-me.minIndex));if(offset){heightOffset+=(valueHeight/2);}
return me.top+heightOffset;},getPixelForTick:function(index){return this.getPixelForValue(this.ticks[index],index+this.minIndex,null);},getValueForPixel:function(pixel){var me=this;var offset=me.options.offset;var value;var offsetAmt=Math.max((me._ticks.length-(offset?0:1)),1);var horz=me.isHorizontal();var valueDimension=(horz?me.width:me.height)/offsetAmt;pixel-=horz?me.left:me.top;if(offset){pixel-=(valueDimension/2);}
if(pixel<=0){value=0;}else{value=Math.round(pixel/valueDimension);}
return value+me.minIndex;},getBasePixel:function(){return this.bottom;}});var _defaults=defaultConfig;scale_category._defaults=_defaults;var noop=helpers$1.noop;var isNullOrUndef=helpers$1.isNullOrUndef;function generateTicks(generationOptions,dataRange){var ticks=[];var MIN_SPACING=1e-14;var stepSize=generationOptions.stepSize;var unit=stepSize||1;var maxNumSpaces=generationOptions.maxTicks-1;var min=generationOptions.min;var max=generationOptions.max;var precision=generationOptions.precision;var rmin=dataRange.min;var rmax=dataRange.max;var spacing=helpers$1.niceNum((rmax-rmin)/maxNumSpaces/unit)*unit;var factor,niceMin,niceMax,numSpaces;if(spacing<MIN_SPACING&&isNullOrUndef(min)&&isNullOrUndef(max)){return[rmin,rmax];}
numSpaces=Math.ceil(rmax/spacing)-Math.floor(rmin/spacing);if(numSpaces>maxNumSpaces){spacing=helpers$1.niceNum(numSpaces*spacing/maxNumSpaces/unit)*unit;}
if(stepSize||isNullOrUndef(precision)){factor=Math.pow(10,helpers$1._decimalPlaces(spacing));}else{factor=Math.pow(10,precision);spacing=Math.ceil(spacing*factor)/factor;}
niceMin=Math.floor(rmin/spacing)*spacing;niceMax=Math.ceil(rmax/spacing)*spacing;if(stepSize){if(!isNullOrUndef(min)&&helpers$1.almostWhole(min/spacing,spacing/1000)){niceMin=min;}
if(!isNullOrUndef(max)&&helpers$1.almostWhole(max/spacing,spacing/1000)){niceMax=max;}}
numSpaces=(niceMax-niceMin)/spacing;if(helpers$1.almostEquals(numSpaces,Math.round(numSpaces),spacing/1000)){numSpaces=Math.round(numSpaces);}else{numSpaces=Math.ceil(numSpaces);}
niceMin=Math.round(niceMin*factor)/factor;niceMax=Math.round(niceMax*factor)/factor;ticks.push(isNullOrUndef(min)?niceMin:min);for(var j=1;j<numSpaces;++j){ticks.push(Math.round((niceMin+j*spacing)*factor)/factor);}
ticks.push(isNullOrUndef(max)?niceMax:max);return ticks;}
var scale_linearbase=core_scale.extend({getRightValue:function(value){if(typeof value==='string'){return+value;}
return core_scale.prototype.getRightValue.call(this,value);},handleTickRangeOptions:function(){var me=this;var opts=me.options;var tickOpts=opts.ticks;if(tickOpts.beginAtZero){var minSign=helpers$1.sign(me.min);var maxSign=helpers$1.sign(me.max);if(minSign<0&&maxSign<0){me.max=0;}else if(minSign>0&&maxSign>0){me.min=0;}}
var setMin=tickOpts.min!==undefined||tickOpts.suggestedMin!==undefined;var setMax=tickOpts.max!==undefined||tickOpts.suggestedMax!==undefined;if(tickOpts.min!==undefined){me.min=tickOpts.min;}else if(tickOpts.suggestedMin!==undefined){if(me.min===null){me.min=tickOpts.suggestedMin;}else{me.min=Math.min(me.min,tickOpts.suggestedMin);}}
if(tickOpts.max!==undefined){me.max=tickOpts.max;}else if(tickOpts.suggestedMax!==undefined){if(me.max===null){me.max=tickOpts.suggestedMax;}else{me.max=Math.max(me.max,tickOpts.suggestedMax);}}
if(setMin!==setMax){if(me.min>=me.max){if(setMin){me.max=me.min+1;}else{me.min=me.max-1;}}}
if(me.min===me.max){me.max++;if(!tickOpts.beginAtZero){me.min--;}}},getTickLimit:function(){var me=this;var tickOpts=me.options.ticks;var stepSize=tickOpts.stepSize;var maxTicksLimit=tickOpts.maxTicksLimit;var maxTicks;if(stepSize){maxTicks=Math.ceil(me.max/stepSize)-Math.floor(me.min/stepSize)+1;}else{maxTicks=me._computeTickLimit();maxTicksLimit=maxTicksLimit||11;}
if(maxTicksLimit){maxTicks=Math.min(maxTicksLimit,maxTicks);}
return maxTicks;},_computeTickLimit:function(){return Number.POSITIVE_INFINITY;},handleDirectionalChanges:noop,buildTicks:function(){var me=this;var opts=me.options;var tickOpts=opts.ticks;var maxTicks=me.getTickLimit();maxTicks=Math.max(2,maxTicks);var numericGeneratorOptions={maxTicks:maxTicks,min:tickOpts.min,max:tickOpts.max,precision:tickOpts.precision,stepSize:helpers$1.valueOrDefault(tickOpts.fixedStepSize,tickOpts.stepSize)};var ticks=me.ticks=generateTicks(numericGeneratorOptions,me);me.handleDirectionalChanges();me.max=helpers$1.max(ticks);me.min=helpers$1.min(ticks);if(tickOpts.reverse){ticks.reverse();me.start=me.max;me.end=me.min;}else{me.start=me.min;me.end=me.max;}},convertTicksToLabels:function(){var me=this;me.ticksAsNumbers=me.ticks.slice();me.zeroLineIndex=me.ticks.indexOf(0);core_scale.prototype.convertTicksToLabels.call(me);}});var defaultConfig$1={position:'left',ticks:{callback:core_ticks.formatters.linear}};var scale_linear=scale_linearbase.extend({determineDataLimits:function(){var me=this;var opts=me.options;var chart=me.chart;var data=chart.data;var datasets=data.datasets;var isHorizontal=me.isHorizontal();var DEFAULT_MIN=0;var DEFAULT_MAX=1;function IDMatches(meta){return isHorizontal?meta.xAxisID===me.id:meta.yAxisID===me.id;}
me.min=null;me.max=null;var hasStacks=opts.stacked;if(hasStacks===undefined){helpers$1.each(datasets,function(dataset,datasetIndex){if(hasStacks){return;}
var meta=chart.getDatasetMeta(datasetIndex);if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&meta.stack!==undefined){hasStacks=true;}});}
if(opts.stacked||hasStacks){var valuesPerStack={};helpers$1.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);var key=[meta.type,((opts.stacked===undefined&&meta.stack===undefined)?datasetIndex:''),meta.stack].join('.');if(valuesPerStack[key]===undefined){valuesPerStack[key]={positiveValues:[],negativeValues:[]};}
var positiveValues=valuesPerStack[key].positiveValues;var negativeValues=valuesPerStack[key].negativeValues;if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)){helpers$1.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);if(isNaN(value)||meta.data[index].hidden){return;}
positiveValues[index]=positiveValues[index]||0;negativeValues[index]=negativeValues[index]||0;if(opts.relativePoints){positiveValues[index]=100;}else if(value<0){negativeValues[index]+=value;}else{positiveValues[index]+=value;}});}});helpers$1.each(valuesPerStack,function(valuesForType){var values=valuesForType.positiveValues.concat(valuesForType.negativeValues);var minVal=helpers$1.min(values);var maxVal=helpers$1.max(values);me.min=me.min===null?minVal:Math.min(me.min,minVal);me.max=me.max===null?maxVal:Math.max(me.max,maxVal);});}else{helpers$1.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)){helpers$1.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);if(isNaN(value)||meta.data[index].hidden){return;}
if(me.min===null){me.min=value;}else if(value<me.min){me.min=value;}
if(me.max===null){me.max=value;}else if(value>me.max){me.max=value;}});}});}
me.min=isFinite(me.min)&&!isNaN(me.min)?me.min:DEFAULT_MIN;me.max=isFinite(me.max)&&!isNaN(me.max)?me.max:DEFAULT_MAX;this.handleTickRangeOptions();},_computeTickLimit:function(){var me=this;var tickFont;if(me.isHorizontal()){return Math.ceil(me.width/40);}
tickFont=helpers$1.options._parseFont(me.options.ticks);return Math.ceil(me.height/tickFont.lineHeight);},handleDirectionalChanges:function(){if(!this.isHorizontal()){this.ticks.reverse();}},getLabelForIndex:function(index,datasetIndex){return+this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);},getPixelForValue:function(value){var me=this;var start=me.start;var rightValue=+me.getRightValue(value);var pixel;var range=me.end-start;if(me.isHorizontal()){pixel=me.left+(me.width/range*(rightValue-start));}else{pixel=me.bottom-(me.height/range*(rightValue-start));}
return pixel;},getValueForPixel:function(pixel){var me=this;var isHorizontal=me.isHorizontal();var innerDimension=isHorizontal?me.width:me.height;var offset=(isHorizontal?pixel-me.left:me.bottom-pixel)/innerDimension;return me.start+((me.end-me.start)*offset);},getPixelForTick:function(index){return this.getPixelForValue(this.ticksAsNumbers[index]);}});var _defaults$1=defaultConfig$1;scale_linear._defaults=_defaults$1;var valueOrDefault$a=helpers$1.valueOrDefault;function generateTicks$1(generationOptions,dataRange){var ticks=[];var tickVal=valueOrDefault$a(generationOptions.min,Math.pow(10,Math.floor(helpers$1.log10(dataRange.min))));var endExp=Math.floor(helpers$1.log10(dataRange.max));var endSignificand=Math.ceil(dataRange.max/Math.pow(10,endExp));var exp,significand;if(tickVal===0){exp=Math.floor(helpers$1.log10(dataRange.minNotZero));significand=Math.floor(dataRange.minNotZero/Math.pow(10,exp));ticks.push(tickVal);tickVal=significand*Math.pow(10,exp);}else{exp=Math.floor(helpers$1.log10(tickVal));significand=Math.floor(tickVal/Math.pow(10,exp));}
var precision=exp<0?Math.pow(10,Math.abs(exp)):1;do{ticks.push(tickVal);++significand;if(significand===10){significand=1;++exp;precision=exp>=0?1:precision;}
tickVal=Math.round(significand*Math.pow(10,exp)*precision)/precision;}while(exp<endExp||(exp===endExp&&significand<endSignificand));var lastTick=valueOrDefault$a(generationOptions.max,tickVal);ticks.push(lastTick);return ticks;}
var defaultConfig$2={position:'left',ticks:{callback:core_ticks.formatters.logarithmic}};function nonNegativeOrDefault(value,defaultValue){return helpers$1.isFinite(value)&&value>=0?value:defaultValue;}
var scale_logarithmic=core_scale.extend({determineDataLimits:function(){var me=this;var opts=me.options;var chart=me.chart;var data=chart.data;var datasets=data.datasets;var isHorizontal=me.isHorizontal();function IDMatches(meta){return isHorizontal?meta.xAxisID===me.id:meta.yAxisID===me.id;}
me.min=null;me.max=null;me.minNotZero=null;var hasStacks=opts.stacked;if(hasStacks===undefined){helpers$1.each(datasets,function(dataset,datasetIndex){if(hasStacks){return;}
var meta=chart.getDatasetMeta(datasetIndex);if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&meta.stack!==undefined){hasStacks=true;}});}
if(opts.stacked||hasStacks){var valuesPerStack={};helpers$1.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);var key=[meta.type,((opts.stacked===undefined&&meta.stack===undefined)?datasetIndex:''),meta.stack].join('.');if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)){if(valuesPerStack[key]===undefined){valuesPerStack[key]=[];}
helpers$1.each(dataset.data,function(rawValue,index){var values=valuesPerStack[key];var value=+me.getRightValue(rawValue);if(isNaN(value)||meta.data[index].hidden||value<0){return;}
values[index]=values[index]||0;values[index]+=value;});}});helpers$1.each(valuesPerStack,function(valuesForType){if(valuesForType.length>0){var minVal=helpers$1.min(valuesForType);var maxVal=helpers$1.max(valuesForType);me.min=me.min===null?minVal:Math.min(me.min,minVal);me.max=me.max===null?maxVal:Math.max(me.max,maxVal);}});}else{helpers$1.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);if(chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)){helpers$1.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);if(isNaN(value)||meta.data[index].hidden||value<0){return;}
if(me.min===null){me.min=value;}else if(value<me.min){me.min=value;}
if(me.max===null){me.max=value;}else if(value>me.max){me.max=value;}
if(value!==0&&(me.minNotZero===null||value<me.minNotZero)){me.minNotZero=value;}});}});}
this.handleTickRangeOptions();},handleTickRangeOptions:function(){var me=this;var tickOpts=me.options.ticks;var DEFAULT_MIN=1;var DEFAULT_MAX=10;me.min=nonNegativeOrDefault(tickOpts.min,me.min);me.max=nonNegativeOrDefault(tickOpts.max,me.max);if(me.min===me.max){if(me.min!==0&&me.min!==null){me.min=Math.pow(10,Math.floor(helpers$1.log10(me.min))-1);me.max=Math.pow(10,Math.floor(helpers$1.log10(me.max))+1);}else{me.min=DEFAULT_MIN;me.max=DEFAULT_MAX;}}
if(me.min===null){me.min=Math.pow(10,Math.floor(helpers$1.log10(me.max))-1);}
if(me.max===null){me.max=me.min!==0?Math.pow(10,Math.floor(helpers$1.log10(me.min))+1):DEFAULT_MAX;}
if(me.minNotZero===null){if(me.min>0){me.minNotZero=me.min;}else if(me.max<1){me.minNotZero=Math.pow(10,Math.floor(helpers$1.log10(me.max)));}else{me.minNotZero=DEFAULT_MIN;}}},buildTicks:function(){var me=this;var tickOpts=me.options.ticks;var reverse=!me.isHorizontal();var generationOptions={min:nonNegativeOrDefault(tickOpts.min),max:nonNegativeOrDefault(tickOpts.max)};var ticks=me.ticks=generateTicks$1(generationOptions,me);me.max=helpers$1.max(ticks);me.min=helpers$1.min(ticks);if(tickOpts.reverse){reverse=!reverse;me.start=me.max;me.end=me.min;}else{me.start=me.min;me.end=me.max;}
if(reverse){ticks.reverse();}},convertTicksToLabels:function(){this.tickValues=this.ticks.slice();core_scale.prototype.convertTicksToLabels.call(this);},getLabelForIndex:function(index,datasetIndex){return+this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);},getPixelForTick:function(index){return this.getPixelForValue(this.tickValues[index]);},_getFirstTickValue:function(value){var exp=Math.floor(helpers$1.log10(value));var significand=Math.floor(value/Math.pow(10,exp));return significand*Math.pow(10,exp);},getPixelForValue:function(value){var me=this;var tickOpts=me.options.ticks;var reverse=tickOpts.reverse;var log10=helpers$1.log10;var firstTickValue=me._getFirstTickValue(me.minNotZero);var offset=0;var innerDimension,pixel,start,end,sign;value=+me.getRightValue(value);if(reverse){start=me.end;end=me.start;sign=-1;}else{start=me.start;end=me.end;sign=1;}
if(me.isHorizontal()){innerDimension=me.width;pixel=reverse?me.right:me.left;}else{innerDimension=me.height;sign*=-1;pixel=reverse?me.top:me.bottom;}
if(value!==start){if(start===0){offset=valueOrDefault$a(tickOpts.fontSize,core_defaults.global.defaultFontSize);innerDimension-=offset;start=firstTickValue;}
if(value!==0){offset+=innerDimension/(log10(end)-log10(start))*(log10(value)-log10(start));}
pixel+=sign*offset;}
return pixel;},getValueForPixel:function(pixel){var me=this;var tickOpts=me.options.ticks;var reverse=tickOpts.reverse;var log10=helpers$1.log10;var firstTickValue=me._getFirstTickValue(me.minNotZero);var innerDimension,start,end,value;if(reverse){start=me.end;end=me.start;}else{start=me.start;end=me.end;}
if(me.isHorizontal()){innerDimension=me.width;value=reverse?me.right-pixel:pixel-me.left;}else{innerDimension=me.height;value=reverse?pixel-me.top:me.bottom-pixel;}
if(value!==start){if(start===0){var offset=valueOrDefault$a(tickOpts.fontSize,core_defaults.global.defaultFontSize);value-=offset;innerDimension-=offset;start=firstTickValue;}
value*=log10(end)-log10(start);value/=innerDimension;value=Math.pow(10,log10(start)+value);}
return value;}});var _defaults$2=defaultConfig$2;scale_logarithmic._defaults=_defaults$2;var valueOrDefault$b=helpers$1.valueOrDefault;var valueAtIndexOrDefault$1=helpers$1.valueAtIndexOrDefault;var resolve$7=helpers$1.options.resolve;var defaultConfig$3={display:true,animate:true,position:'chartArea',angleLines:{display:true,color:'rgba(0, 0, 0, 0.1)',lineWidth:1,borderDash:[],borderDashOffset:0.0},gridLines:{circular:false},ticks:{showLabelBackdrop:true,backdropColor:'rgba(255,255,255,0.75)',backdropPaddingY:2,backdropPaddingX:2,callback:core_ticks.formatters.linear},pointLabels:{display:true,fontSize:10,callback:function(label){return label;}}};function getValueCount(scale){var opts=scale.options;return opts.angleLines.display||opts.pointLabels.display?scale.chart.data.labels.length:0;}
function getTickBackdropHeight(opts){var tickOpts=opts.ticks;if(tickOpts.display&&opts.display){return valueOrDefault$b(tickOpts.fontSize,core_defaults.global.defaultFontSize)+tickOpts.backdropPaddingY*2;}
return 0;}
function measureLabelSize(ctx,lineHeight,label){if(helpers$1.isArray(label)){return{w:helpers$1.longestText(ctx,ctx.font,label),h:label.length*lineHeight};}
return{w:ctx.measureText(label).width,h:lineHeight};}
function determineLimits(angle,pos,size,min,max){if(angle===min||angle===max){return{start:pos-(size/2),end:pos+(size/2)};}else if(angle<min||angle>max){return{start:pos-size,end:pos};}
return{start:pos,end:pos+size};}
function fitWithPointLabels(scale){var plFont=helpers$1.options._parseFont(scale.options.pointLabels);var furthestLimits={l:0,r:scale.width,t:0,b:scale.height-scale.paddingTop};var furthestAngles={};var i,textSize,pointPosition;scale.ctx.font=plFont.string;scale._pointLabelSizes=[];var valueCount=getValueCount(scale);for(i=0;i<valueCount;i++){pointPosition=scale.getPointPosition(i,scale.drawingArea+5);textSize=measureLabelSize(scale.ctx,plFont.lineHeight,scale.pointLabels[i]||'');scale._pointLabelSizes[i]=textSize;var angleRadians=scale.getIndexAngle(i);var angle=helpers$1.toDegrees(angleRadians)%360;var hLimits=determineLimits(angle,pointPosition.x,textSize.w,0,180);var vLimits=determineLimits(angle,pointPosition.y,textSize.h,90,270);if(hLimits.start<furthestLimits.l){furthestLimits.l=hLimits.start;furthestAngles.l=angleRadians;}
if(hLimits.end>furthestLimits.r){furthestLimits.r=hLimits.end;furthestAngles.r=angleRadians;}
if(vLimits.start<furthestLimits.t){furthestLimits.t=vLimits.start;furthestAngles.t=angleRadians;}
if(vLimits.end>furthestLimits.b){furthestLimits.b=vLimits.end;furthestAngles.b=angleRadians;}}
scale.setReductions(scale.drawingArea,furthestLimits,furthestAngles);}
function getTextAlignForAngle(angle){if(angle===0||angle===180){return'center';}else if(angle<180){return'left';}
return'right';}
function fillText(ctx,text,position,lineHeight){var y=position.y+lineHeight/2;var i,ilen;if(helpers$1.isArray(text)){for(i=0,ilen=text.length;i<ilen;++i){ctx.fillText(text[i],position.x,y);y+=lineHeight;}}else{ctx.fillText(text,position.x,y);}}
function adjustPointPositionForLabelHeight(angle,textSize,position){if(angle===90||angle===270){position.y-=(textSize.h/2);}else if(angle>270||angle<90){position.y-=textSize.h;}}
function drawPointLabels(scale){var ctx=scale.ctx;var opts=scale.options;var angleLineOpts=opts.angleLines;var gridLineOpts=opts.gridLines;var pointLabelOpts=opts.pointLabels;var lineWidth=valueOrDefault$b(angleLineOpts.lineWidth,gridLineOpts.lineWidth);var lineColor=valueOrDefault$b(angleLineOpts.color,gridLineOpts.color);var tickBackdropHeight=getTickBackdropHeight(opts);ctx.save();ctx.lineWidth=lineWidth;ctx.strokeStyle=lineColor;if(ctx.setLineDash){ctx.setLineDash(resolve$7([angleLineOpts.borderDash,gridLineOpts.borderDash,[]]));ctx.lineDashOffset=resolve$7([angleLineOpts.borderDashOffset,gridLineOpts.borderDashOffset,0.0]);}
var outerDistance=scale.getDistanceFromCenterForValue(opts.ticks.reverse?scale.min:scale.max);var plFont=helpers$1.options._parseFont(pointLabelOpts);ctx.font=plFont.string;ctx.textBaseline='middle';for(var i=getValueCount(scale)-1;i>=0;i--){if(angleLineOpts.display&&lineWidth&&lineColor){var outerPosition=scale.getPointPosition(i,outerDistance);ctx.beginPath();ctx.moveTo(scale.xCenter,scale.yCenter);ctx.lineTo(outerPosition.x,outerPosition.y);ctx.stroke();}
if(pointLabelOpts.display){var extra=(i===0?tickBackdropHeight/2:0);var pointLabelPosition=scale.getPointPosition(i,outerDistance+extra+5);var pointLabelFontColor=valueAtIndexOrDefault$1(pointLabelOpts.fontColor,i,core_defaults.global.defaultFontColor);ctx.fillStyle=pointLabelFontColor;var angleRadians=scale.getIndexAngle(i);var angle=helpers$1.toDegrees(angleRadians);ctx.textAlign=getTextAlignForAngle(angle);adjustPointPositionForLabelHeight(angle,scale._pointLabelSizes[i],pointLabelPosition);fillText(ctx,scale.pointLabels[i]||'',pointLabelPosition,plFont.lineHeight);}}
ctx.restore();}
function drawRadiusLine(scale,gridLineOpts,radius,index){var ctx=scale.ctx;var circular=gridLineOpts.circular;var valueCount=getValueCount(scale);var lineColor=valueAtIndexOrDefault$1(gridLineOpts.color,index-1);var lineWidth=valueAtIndexOrDefault$1(gridLineOpts.lineWidth,index-1);var pointPosition;if((!circular&&!valueCount)||!lineColor||!lineWidth){return;}
ctx.save();ctx.strokeStyle=lineColor;ctx.lineWidth=lineWidth;if(ctx.setLineDash){ctx.setLineDash(gridLineOpts.borderDash||[]);ctx.lineDashOffset=gridLineOpts.borderDashOffset||0.0;}
ctx.beginPath();if(circular){ctx.arc(scale.xCenter,scale.yCenter,radius,0,Math.PI*2);}else{pointPosition=scale.getPointPosition(0,radius);ctx.moveTo(pointPosition.x,pointPosition.y);for(var i=1;i<valueCount;i++){pointPosition=scale.getPointPosition(i,radius);ctx.lineTo(pointPosition.x,pointPosition.y);}}
ctx.closePath();ctx.stroke();ctx.restore();}
function numberOrZero(param){return helpers$1.isNumber(param)?param:0;}
var scale_radialLinear=scale_linearbase.extend({setDimensions:function(){var me=this;me.width=me.maxWidth;me.height=me.maxHeight;me.paddingTop=getTickBackdropHeight(me.options)/2;me.xCenter=Math.floor(me.width/2);me.yCenter=Math.floor((me.height-me.paddingTop)/2);me.drawingArea=Math.min(me.height-me.paddingTop,me.width)/2;},determineDataLimits:function(){var me=this;var chart=me.chart;var min=Number.POSITIVE_INFINITY;var max=Number.NEGATIVE_INFINITY;helpers$1.each(chart.data.datasets,function(dataset,datasetIndex){if(chart.isDatasetVisible(datasetIndex)){var meta=chart.getDatasetMeta(datasetIndex);helpers$1.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);if(isNaN(value)||meta.data[index].hidden){return;}
min=Math.min(value,min);max=Math.max(value,max);});}});me.min=(min===Number.POSITIVE_INFINITY?0:min);me.max=(max===Number.NEGATIVE_INFINITY?0:max);me.handleTickRangeOptions();},_computeTickLimit:function(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options));},convertTicksToLabels:function(){var me=this;scale_linearbase.prototype.convertTicksToLabels.call(me);me.pointLabels=me.chart.data.labels.map(me.options.pointLabels.callback,me);},getLabelForIndex:function(index,datasetIndex){return+this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);},fit:function(){var me=this;var opts=me.options;if(opts.display&&opts.pointLabels.display){fitWithPointLabels(me);}else{me.setCenterPoint(0,0,0,0);}},setReductions:function(largestPossibleRadius,furthestLimits,furthestAngles){var me=this;var radiusReductionLeft=furthestLimits.l/Math.sin(furthestAngles.l);var radiusReductionRight=Math.max(furthestLimits.r-me.width,0)/Math.sin(furthestAngles.r);var radiusReductionTop=-furthestLimits.t/Math.cos(furthestAngles.t);var radiusReductionBottom=-Math.max(furthestLimits.b-(me.height-me.paddingTop),0)/Math.cos(furthestAngles.b);radiusReductionLeft=numberOrZero(radiusReductionLeft);radiusReductionRight=numberOrZero(radiusReductionRight);radiusReductionTop=numberOrZero(radiusReductionTop);radiusReductionBottom=numberOrZero(radiusReductionBottom);me.drawingArea=Math.min(Math.floor(largestPossibleRadius-(radiusReductionLeft+radiusReductionRight)/2),Math.floor(largestPossibleRadius-(radiusReductionTop+radiusReductionBottom)/2));me.setCenterPoint(radiusReductionLeft,radiusReductionRight,radiusReductionTop,radiusReductionBottom);},setCenterPoint:function(leftMovement,rightMovement,topMovement,bottomMovement){var me=this;var maxRight=me.width-rightMovement-me.drawingArea;var maxLeft=leftMovement+me.drawingArea;var maxTop=topMovement+me.drawingArea;var maxBottom=(me.height-me.paddingTop)-bottomMovement-me.drawingArea;me.xCenter=Math.floor(((maxLeft+maxRight)/2)+me.left);me.yCenter=Math.floor(((maxTop+maxBottom)/2)+me.top+me.paddingTop);},getIndexAngle:function(index){var angleMultiplier=(Math.PI*2)/getValueCount(this);var startAngle=this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0;var startAngleRadians=startAngle*Math.PI*2/360;return index*angleMultiplier+startAngleRadians;},getDistanceFromCenterForValue:function(value){var me=this;if(value===null){return 0;}
var scalingFactor=me.drawingArea/(me.max-me.min);if(me.options.ticks.reverse){return(me.max-value)*scalingFactor;}
return(value-me.min)*scalingFactor;},getPointPosition:function(index,distanceFromCenter){var me=this;var thisAngle=me.getIndexAngle(index)-(Math.PI/2);return{x:Math.cos(thisAngle)*distanceFromCenter+me.xCenter,y:Math.sin(thisAngle)*distanceFromCenter+me.yCenter};},getPointPositionForValue:function(index,value){return this.getPointPosition(index,this.getDistanceFromCenterForValue(value));},getBasePosition:function(){var me=this;var min=me.min;var max=me.max;return me.getPointPositionForValue(0,me.beginAtZero?0:min<0&&max<0?max:min>0&&max>0?min:0);},draw:function(){var me=this;var opts=me.options;var gridLineOpts=opts.gridLines;var tickOpts=opts.ticks;if(opts.display){var ctx=me.ctx;var startAngle=this.getIndexAngle(0);var tickFont=helpers$1.options._parseFont(tickOpts);if(opts.angleLines.display||opts.pointLabels.display){drawPointLabels(me);}
helpers$1.each(me.ticks,function(label,index){if(index>0||tickOpts.reverse){var yCenterOffset=me.getDistanceFromCenterForValue(me.ticksAsNumbers[index]);if(gridLineOpts.display&&index!==0){drawRadiusLine(me,gridLineOpts,yCenterOffset,index);}
if(tickOpts.display){var tickFontColor=valueOrDefault$b(tickOpts.fontColor,core_defaults.global.defaultFontColor);ctx.font=tickFont.string;ctx.save();ctx.translate(me.xCenter,me.yCenter);ctx.rotate(startAngle);if(tickOpts.showLabelBackdrop){var labelWidth=ctx.measureText(label).width;ctx.fillStyle=tickOpts.backdropColor;ctx.fillRect(-labelWidth/2-tickOpts.backdropPaddingX,-yCenterOffset-tickFont.size/2-tickOpts.backdropPaddingY,labelWidth+tickOpts.backdropPaddingX*2,tickFont.size+tickOpts.backdropPaddingY*2);}
ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillStyle=tickFontColor;ctx.fillText(label,0,-yCenterOffset);ctx.restore();}}});}}});var _defaults$3=defaultConfig$3;scale_radialLinear._defaults=_defaults$3;var valueOrDefault$c=helpers$1.valueOrDefault;var MIN_INTEGER=Number.MIN_SAFE_INTEGER||-9007199254740991;var MAX_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var INTERVALS={millisecond:{common:true,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:true,size:1000,steps:[1,2,5,10,15,30]},minute:{common:true,size:60000,steps:[1,2,5,10,15,30]},hour:{common:true,size:3600000,steps:[1,2,3,6,12]},day:{common:true,size:86400000,steps:[1,2,5]},week:{common:false,size:604800000,steps:[1,2,3,4]},month:{common:true,size:2.628e9,steps:[1,2,3]},quarter:{common:false,size:7.884e9,steps:[1,2,3,4]},year:{common:true,size:3.154e10}};var UNITS=Object.keys(INTERVALS);function sorter(a,b){return a-b;}
function arrayUnique(items){var hash={};var out=[];var i,ilen,item;for(i=0,ilen=items.length;i<ilen;++i){item=items[i];if(!hash[item]){hash[item]=true;out.push(item);}}
return out;}
function buildLookupTable(timestamps,min,max,distribution){if(distribution==='linear'||!timestamps.length){return[{time:min,pos:0},{time:max,pos:1}];}
var table=[];var items=[min];var i,ilen,prev,curr,next;for(i=0,ilen=timestamps.length;i<ilen;++i){curr=timestamps[i];if(curr>min&&curr<max){items.push(curr);}}
items.push(max);for(i=0,ilen=items.length;i<ilen;++i){next=items[i+1];prev=items[i-1];curr=items[i];if(prev===undefined||next===undefined||Math.round((next+prev)/2)!==curr){table.push({time:curr,pos:i/(ilen-1)});}}
return table;}
function lookup(table,key,value){var lo=0;var hi=table.length-1;var mid,i0,i1;while(lo>=0&&lo<=hi){mid=(lo+hi)>>1;i0=table[mid-1]||null;i1=table[mid];if(!i0){return{lo:null,hi:i1};}else if(i1[key]<value){lo=mid+1;}else if(i0[key]>value){hi=mid-1;}else{return{lo:i0,hi:i1};}}
return{lo:i1,hi:null};}
function interpolate$1(table,skey,sval,tkey){var range=lookup(table,skey,sval);var prev=!range.lo?table[0]:!range.hi?table[table.length-2]:range.lo;var next=!range.lo?table[1]:!range.hi?table[table.length-1]:range.hi;var span=next[skey]-prev[skey];var ratio=span?(sval-prev[skey])/span:0;var offset=(next[tkey]-prev[tkey])*ratio;return prev[tkey]+offset;}
function toTimestamp(scale,input){var adapter=scale._adapter;var options=scale.options.time;var parser=options.parser;var format=parser||options.format;var value=input;if(typeof parser==='function'){value=parser(value);}
if(!helpers$1.isFinite(value)){value=typeof format==='string'?adapter.parse(value,format):adapter.parse(value);}
if(value!==null){return+value;}
if(!parser&&typeof format==='function'){value=format(input);if(!helpers$1.isFinite(value)){value=adapter.parse(value);}}
return value;}
function parse(scale,input){if(helpers$1.isNullOrUndef(input)){return null;}
var options=scale.options.time;var value=toTimestamp(scale,scale.getRightValue(input));if(value===null){return value;}
if(options.round){value=+scale._adapter.startOf(value,options.round);}
return value;}
function determineStepSize(min,max,unit,capacity){var range=max-min;var interval=INTERVALS[unit];var milliseconds=interval.size;var steps=interval.steps;var i,ilen,factor;if(!steps){return Math.ceil(range/(capacity*milliseconds));}
for(i=0,ilen=steps.length;i<ilen;++i){factor=steps[i];if(Math.ceil(range/(milliseconds*factor))<=capacity){break;}}
return factor;}
function determineUnitForAutoTicks(minUnit,min,max,capacity){var ilen=UNITS.length;var i,interval,factor;for(i=UNITS.indexOf(minUnit);i<ilen-1;++i){interval=INTERVALS[UNITS[i]];factor=interval.steps?interval.steps[interval.steps.length-1]:MAX_INTEGER;if(interval.common&&Math.ceil((max-min)/(factor*interval.size))<=capacity){return UNITS[i];}}
return UNITS[ilen-1];}
function determineUnitForFormatting(scale,ticks,minUnit,min,max){var ilen=UNITS.length;var i,unit;for(i=ilen-1;i>=UNITS.indexOf(minUnit);i--){unit=UNITS[i];if(INTERVALS[unit].common&&scale._adapter.diff(max,min,unit)>=ticks.length){return unit;}}
return UNITS[minUnit?UNITS.indexOf(minUnit):0];}
function determineMajorUnit(unit){for(var i=UNITS.indexOf(unit)+1,ilen=UNITS.length;i<ilen;++i){if(INTERVALS[UNITS[i]].common){return UNITS[i];}}}
function generate(scale,min,max,capacity){var adapter=scale._adapter;var options=scale.options;var timeOpts=options.time;var minor=timeOpts.unit||determineUnitForAutoTicks(timeOpts.minUnit,min,max,capacity);var major=determineMajorUnit(minor);var stepSize=valueOrDefault$c(timeOpts.stepSize,timeOpts.unitStepSize);var weekday=minor==='week'?timeOpts.isoWeekday:false;var majorTicksEnabled=options.ticks.major.enabled;var interval=INTERVALS[minor];var first=min;var last=max;var ticks=[];var time;if(!stepSize){stepSize=determineStepSize(min,max,minor,capacity);}
if(weekday){first=+adapter.startOf(first,'isoWeek',weekday);last=+adapter.startOf(last,'isoWeek',weekday);}
first=+adapter.startOf(first,weekday?'day':minor);last=+adapter.startOf(last,weekday?'day':minor);if(last<max){last=+adapter.add(last,1,minor);}
time=first;if(majorTicksEnabled&&major&&!weekday&&!timeOpts.round){time=+adapter.startOf(time,major);time=+adapter.add(time,~~((first-time)/(interval.size*stepSize))*stepSize,minor);}
for(;time<last;time=+adapter.add(time,stepSize,minor)){ticks.push(+time);}
ticks.push(+time);return ticks;}
function computeOffsets(table,ticks,min,max,options){var start=0;var end=0;var first,last;if(options.offset&&ticks.length){if(!options.time.min){first=interpolate$1(table,'time',ticks[0],'pos');if(ticks.length===1){start=1-first;}else{start=(interpolate$1(table,'time',ticks[1],'pos')-first)/2;}}
if(!options.time.max){last=interpolate$1(table,'time',ticks[ticks.length-1],'pos');if(ticks.length===1){end=last;}else{end=(last-interpolate$1(table,'time',ticks[ticks.length-2],'pos'))/2;}}}
return{start:start,end:end};}
function ticksFromTimestamps(scale,values,majorUnit){var ticks=[];var i,ilen,value,major;for(i=0,ilen=values.length;i<ilen;++i){value=values[i];major=majorUnit?value===+scale._adapter.startOf(value,majorUnit):false;ticks.push({value:value,major:major});}
return ticks;}
var defaultConfig$4={position:'bottom',distribution:'linear',bounds:'data',adapters:{},time:{parser:false,format:false,unit:false,round:false,displayFormat:false,isoWeekday:false,minUnit:'millisecond',displayFormats:{}},ticks:{autoSkip:false,source:'auto',major:{enabled:false}}};var scale_time=core_scale.extend({initialize:function(){this.mergeTicksOptions();core_scale.prototype.initialize.call(this);},update:function(){var me=this;var options=me.options;var time=options.time||(options.time={});var adapter=me._adapter=new core_adapters._date(options.adapters.date);if(time.format){console.warn('options.time.format is deprecated and replaced by options.time.parser.');}
helpers$1.mergeIf(time.displayFormats,adapter.formats());return core_scale.prototype.update.apply(me,arguments);},getRightValue:function(rawValue){if(rawValue&&rawValue.t!==undefined){rawValue=rawValue.t;}
return core_scale.prototype.getRightValue.call(this,rawValue);},determineDataLimits:function(){var me=this;var chart=me.chart;var adapter=me._adapter;var timeOpts=me.options.time;var unit=timeOpts.unit||'day';var min=MAX_INTEGER;var max=MIN_INTEGER;var timestamps=[];var datasets=[];var labels=[];var i,j,ilen,jlen,data,timestamp;var dataLabels=chart.data.labels||[];for(i=0,ilen=dataLabels.length;i<ilen;++i){labels.push(parse(me,dataLabels[i]));}
for(i=0,ilen=(chart.data.datasets||[]).length;i<ilen;++i){if(chart.isDatasetVisible(i)){data=chart.data.datasets[i].data;if(helpers$1.isObject(data[0])){datasets[i]=[];for(j=0,jlen=data.length;j<jlen;++j){timestamp=parse(me,data[j]);timestamps.push(timestamp);datasets[i][j]=timestamp;}}else{for(j=0,jlen=labels.length;j<jlen;++j){timestamps.push(labels[j]);}
datasets[i]=labels.slice(0);}}else{datasets[i]=[];}}
if(labels.length){labels=arrayUnique(labels).sort(sorter);min=Math.min(min,labels[0]);max=Math.max(max,labels[labels.length-1]);}
if(timestamps.length){timestamps=arrayUnique(timestamps).sort(sorter);min=Math.min(min,timestamps[0]);max=Math.max(max,timestamps[timestamps.length-1]);}
min=parse(me,timeOpts.min)||min;max=parse(me,timeOpts.max)||max;min=min===MAX_INTEGER?+adapter.startOf(Date.now(),unit):min;max=max===MIN_INTEGER?+adapter.endOf(Date.now(),unit)+1:max;me.min=Math.min(min,max);me.max=Math.max(min+1,max);me._horizontal=me.isHorizontal();me._table=[];me._timestamps={data:timestamps,datasets:datasets,labels:labels};},buildTicks:function(){var me=this;var min=me.min;var max=me.max;var options=me.options;var timeOpts=options.time;var timestamps=[];var ticks=[];var i,ilen,timestamp;switch(options.ticks.source){case'data':timestamps=me._timestamps.data;break;case'labels':timestamps=me._timestamps.labels;break;case'auto':default:timestamps=generate(me,min,max,me.getLabelCapacity(min),options);}
if(options.bounds==='ticks'&&timestamps.length){min=timestamps[0];max=timestamps[timestamps.length-1];}
min=parse(me,timeOpts.min)||min;max=parse(me,timeOpts.max)||max;for(i=0,ilen=timestamps.length;i<ilen;++i){timestamp=timestamps[i];if(timestamp>=min&&timestamp<=max){ticks.push(timestamp);}}
me.min=min;me.max=max;me._unit=timeOpts.unit||determineUnitForFormatting(me,ticks,timeOpts.minUnit,me.min,me.max);me._majorUnit=determineMajorUnit(me._unit);me._table=buildLookupTable(me._timestamps.data,min,max,options.distribution);me._offsets=computeOffsets(me._table,ticks,min,max,options);if(options.ticks.reverse){ticks.reverse();}
return ticksFromTimestamps(me,ticks,me._majorUnit);},getLabelForIndex:function(index,datasetIndex){var me=this;var adapter=me._adapter;var data=me.chart.data;var timeOpts=me.options.time;var label=data.labels&&index<data.labels.length?data.labels[index]:'';var value=data.datasets[datasetIndex].data[index];if(helpers$1.isObject(value)){label=me.getRightValue(value);}
if(timeOpts.tooltipFormat){return adapter.format(toTimestamp(me,label),timeOpts.tooltipFormat);}
if(typeof label==='string'){return label;}
return adapter.format(toTimestamp(me,label),timeOpts.displayFormats.datetime);},tickFormatFunction:function(time,index,ticks,format){var me=this;var adapter=me._adapter;var options=me.options;var formats=options.time.displayFormats;var minorFormat=formats[me._unit];var majorUnit=me._majorUnit;var majorFormat=formats[majorUnit];var majorTime=+adapter.startOf(time,majorUnit);var majorTickOpts=options.ticks.major;var major=majorTickOpts.enabled&&majorUnit&&majorFormat&&time===majorTime;var label=adapter.format(time,format?format:major?majorFormat:minorFormat);var tickOpts=major?majorTickOpts:options.ticks.minor;var formatter=valueOrDefault$c(tickOpts.callback,tickOpts.userCallback);return formatter?formatter(label,index,ticks):label;},convertTicksToLabels:function(ticks){var labels=[];var i,ilen;for(i=0,ilen=ticks.length;i<ilen;++i){labels.push(this.tickFormatFunction(ticks[i].value,i,ticks));}
return labels;},getPixelForOffset:function(time){var me=this;var isReverse=me.options.ticks.reverse;var size=me._horizontal?me.width:me.height;var start=me._horizontal?isReverse?me.right:me.left:isReverse?me.bottom:me.top;var pos=interpolate$1(me._table,'time',time,'pos');var offset=size*(me._offsets.start+pos)/(me._offsets.start+1+me._offsets.end);return isReverse?start-offset:start+offset;},getPixelForValue:function(value,index,datasetIndex){var me=this;var time=null;if(index!==undefined&&datasetIndex!==undefined){time=me._timestamps.datasets[datasetIndex][index];}
if(time===null){time=parse(me,value);}
if(time!==null){return me.getPixelForOffset(time);}},getPixelForTick:function(index){var ticks=this.getTicks();return index>=0&&index<ticks.length?this.getPixelForOffset(ticks[index].value):null;},getValueForPixel:function(pixel){var me=this;var size=me._horizontal?me.width:me.height;var start=me._horizontal?me.left:me.top;var pos=(size?(pixel-start)/size:0)*(me._offsets.start+1+me._offsets.start)-me._offsets.end;var time=interpolate$1(me._table,'pos',pos,'time');return me._adapter._create(time);},getLabelWidth:function(label){var me=this;var ticksOpts=me.options.ticks;var tickLabelWidth=me.ctx.measureText(label).width;var angle=helpers$1.toRadians(ticksOpts.maxRotation);var cosRotation=Math.cos(angle);var sinRotation=Math.sin(angle);var tickFontSize=valueOrDefault$c(ticksOpts.fontSize,core_defaults.global.defaultFontSize);return(tickLabelWidth*cosRotation)+(tickFontSize*sinRotation);},getLabelCapacity:function(exampleTime){var me=this;var format=me.options.time.displayFormats.millisecond;var exampleLabel=me.tickFormatFunction(exampleTime,0,[],format);var tickLabelWidth=me.getLabelWidth(exampleLabel);var innerWidth=me.isHorizontal()?me.width:me.height;var capacity=Math.floor(innerWidth/tickLabelWidth);return capacity>0?capacity:1;}});var _defaults$4=defaultConfig$4;scale_time._defaults=_defaults$4;var scales={category:scale_category,linear:scale_linear,logarithmic:scale_logarithmic,radialLinear:scale_radialLinear,time:scale_time};var moment=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory();}(commonjsGlobal,(function(){var hookCallback;function hooks(){return hookCallback.apply(null,arguments);}
function setHookCallback(callback){hookCallback=callback;}
function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==='[object Array]';}
function isObject(input){return input!=null&&Object.prototype.toString.call(input)==='[object Object]';}
function isObjectEmpty(obj){if(Object.getOwnPropertyNames){return(Object.getOwnPropertyNames(obj).length===0);}else{var k;for(k in obj){if(obj.hasOwnProperty(k)){return false;}}
return true;}}
function isUndefined(input){return input===void 0;}
function isNumber(input){return typeof input==='number'||Object.prototype.toString.call(input)==='[object Number]';}
function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==='[object Date]';}
function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i));}
return res;}
function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b);}
function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i];}}
if(hasOwnProp(b,'toString')){a.toString=b.toString;}
if(hasOwnProp(b,'valueOf')){a.valueOf=b.valueOf;}
return a;}
function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc();}
function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false};}
function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags();}
return m._pf;}
var some;if(Array.prototype.some){some=Array.prototype.some;}else{some=function(fun){var t=Object(this);var len=t.length>>>0;for(var i=0;i<len;i++){if(i in t&&fun.call(this,t[i],i,t)){return true;}}
return false;};}
function isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);var parsedParts=some.call(flags.parsedDateParts,function(i){return i!=null;});var isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.weekdayMismatch&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||(flags.meridiem&&parsedParts));if(m._strict){isNowValid=isNowValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined;}
if(Object.isFrozen==null||!Object.isFrozen(m)){m._isValid=isNowValid;}
else{return isNowValid;}}
return m._isValid;}
function createInvalid(flags){var m=createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags);}
else{getParsingFlags(m).userInvalidated=true;}
return m;}
var momentProperties=hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject;}
if(!isUndefined(from._i)){to._i=from._i;}
if(!isUndefined(from._f)){to._f=from._f;}
if(!isUndefined(from._l)){to._l=from._l;}
if(!isUndefined(from._strict)){to._strict=from._strict;}
if(!isUndefined(from._tzm)){to._tzm=from._tzm;}
if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC;}
if(!isUndefined(from._offset)){to._offset=from._offset;}
if(!isUndefined(from._pf)){to._pf=getParsingFlags(from);}
if(!isUndefined(from._locale)){to._locale=from._locale;}
if(momentProperties.length>0){for(i=0;i<momentProperties.length;i++){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val;}}}
return to;}
var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN);}
if(updateInProgress===false){updateInProgress=true;hooks.updateOffset(this);updateInProgress=false;}}
function isMoment(obj){return obj instanceof Moment||(obj!=null&&obj._isAMomentObject!=null);}
function absFloor(number){if(number<0){return Math.ceil(number)||0;}else{return Math.floor(number);}}
function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber);}
return value;}
function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if((dontConvert&&array1[i]!==array2[i])||(!dontConvert&&toInt(array1[i])!==toInt(array2[i]))){diffs++;}}
return diffs+lengthDiff;}
function warn(msg){if(hooks.suppressDeprecationWarnings===false&&(typeof console!=='undefined')&&console.warn){console.warn('Deprecation warning: '+msg);}}
function deprecate(msg,fn){var firstTime=true;return extend(function(){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(null,msg);}
if(firstTime){var args=[];var arg;for(var i=0;i<arguments.length;i++){arg='';if(typeof arguments[i]==='object'){arg+='\n['+i+'] ';for(var key in arguments[0]){arg+=key+': '+arguments[0][key]+', ';}
arg=arg.slice(0,-2);}else{arg=arguments[i];}
args.push(arg);}
warn(msg+'\nArguments: '+Array.prototype.slice.call(args).join('')+'\n'+(new Error()).stack);firstTime=false;}
return fn.apply(this,arguments);},fn);}
var deprecations={};function deprecateSimple(name,msg){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(name,msg);}
if(!deprecations[name]){warn(msg);deprecations[name]=true;}}
hooks.suppressDeprecationWarnings=false;hooks.deprecationHandler=null;function isFunction(input){return input instanceof Function||Object.prototype.toString.call(input)==='[object Function]';}
function set(config){var prop,i;for(i in config){prop=config[i];if(isFunction(prop)){this[i]=prop;}else{this['_'+i]=prop;}}
this._config=config;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+
'|'+(/\d{1,2}/).source);}
function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop]);}else if(childConfig[prop]!=null){res[prop]=childConfig[prop];}else{delete res[prop];}}}
for(prop in parentConfig){if(hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])){res[prop]=extend({},res[prop]);}}
return res;}
function Locale(config){if(config!=null){this.set(config);}}
var keys;if(Object.keys){keys=Object.keys;}else{keys=function(obj){var i,res=[];for(i in obj){if(hasOwnProp(obj,i)){res.push(i);}}
return res;};}
var defaultCalendar={sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'};function calendar(key,mom,now){var output=this._calendar[key]||this._calendar['sameElse'];return isFunction(output)?output.call(mom,now):output;}
var defaultLongDateFormat={LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format;}
this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1);});return this._longDateFormat[key];}
var defaultInvalidDate='Invalid date';function invalidDate(){return this._invalidDate;}
var defaultOrdinal='%d';var defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace('%d',number);}
var defaultRelativeTime={future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return(isFunction(output))?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number);}
function pastFuture(diff,output){var format=this._relativeTime[diff>0?'future':'past'];return isFunction(format)?format(output):format.replace(/%s/i,output);}
var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+'s']=aliases[shorthand]=unit;}
function normalizeUnits(units){return typeof units==='string'?aliases[units]||aliases[units.toLowerCase()]:undefined;}
function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop];}}}
return normalizedInput;}
var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority;}
function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj){units.push({unit:u,priority:priorities[u]});}
units.sort(function(a,b){return a.priority-b.priority;});return units;}
function zeroFill(number,targetLength,forceSign){var absNumber=''+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?(forceSign?'+':''):'-')+
Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber;}
var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==='string'){func=function(){return this[callback]();};}
if(token){formatTokenFunctions[token]=func;}
if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2]);};}
if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token);};}}
function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,'');}
return input.replace(/\\/g,'');}
function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]];}else{array[i]=removeFormattingTokens(array[i]);}}
return function(mom){var output='',i;for(i=0;i<length;i++){output+=isFunction(array[i])?array[i].call(mom,format):array[i];}
return output;};}
function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate();}
format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m);}
function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input;}
localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1;}
return format;}
var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match3to4=/\d\d\d\d?/;var match5to6=/\d\d\d\d\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return(isStrict&&strictRegex)?strictRegex:regex;};}
function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token));}
return regexes[token](config._strict,config._locale);}
function unescapeFormat(s){return regexEscape(s.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4;}));}
function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');}
var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==='string'){token=[token];}
if(isNumber(callback)){func=function(input,array){array[callback]=toInt(input);};}
for(i=0;i<token.length;i++){tokens[token[i]]=func;}}
function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token);});}
function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token);}}
var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;var WEEK=7;var WEEKDAY=8;addFormatToken('Y',0,0,function(){var y=this.year();return y<=9999?''+y:'+'+y;});addFormatToken(0,['YY',2],0,function(){return this.year()%100;});addFormatToken(0,['YYYY',4],0,'year');addFormatToken(0,['YYYYY',5],0,'year');addFormatToken(0,['YYYYYY',6,true],0,'year');addUnitAlias('year','y');addUnitPriority('year',1);addRegexToken('Y',matchSigned);addRegexToken('YY',match1to2,match2);addRegexToken('YYYY',match1to4,match4);addRegexToken('YYYYY',match1to6,match6);addRegexToken('YYYYYY',match1to6,match6);addParseToken(['YYYYY','YYYYYY'],YEAR);addParseToken('YYYY',function(input,array){array[YEAR]=input.length===2?hooks.parseTwoDigitYear(input):toInt(input);});addParseToken('YY',function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input);});addParseToken('Y',function(input,array){array[YEAR]=parseInt(input,10);});function daysInYear(year){return isLeapYear(year)?366:365;}
function isLeapYear(year){return(year%4===0&&year%100!==0)||year%400===0;}
hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};var getSetYear=makeGetSet('FullYear',true);function getIsLeapYear(){return isLeapYear(this.year());}
function makeGetSet(unit,keepTime){return function(value){if(value!=null){set$1(this,unit,value);hooks.updateOffset(this,keepTime);return this;}else{return get(this,unit);}};}
function get(mom,unit){return mom.isValid()?mom._d['get'+(mom._isUTC?'UTC':'')+unit]():NaN;}
function set$1(mom,unit,value){if(mom.isValid()&&!isNaN(value)){if(unit==='FullYear'&&isLeapYear(mom.year())&&mom.month()===1&&mom.date()===29){mom._d['set'+(mom._isUTC?'UTC':'')+unit](value,mom.month(),daysInMonth(value,mom.month()));}
else{mom._d['set'+(mom._isUTC?'UTC':'')+unit](value);}}}
function stringGet(units){units=normalizeUnits(units);if(isFunction(this[units])){return this[units]();}
return this;}
function stringSet(units,value){if(typeof units==='object'){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units);for(var i=0;i<prioritized.length;i++){this[prioritized[i].unit](units[prioritized[i].unit]);}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value);}}
return this;}
function mod(n,x){return((n%x)+x)%x;}
var indexOf;if(Array.prototype.indexOf){indexOf=Array.prototype.indexOf;}else{indexOf=function(o){var i;for(i=0;i<this.length;++i){if(this[i]===o){return i;}}
return-1;};}
function daysInMonth(year,month){if(isNaN(year)||isNaN(month)){return NaN;}
var modMonth=mod(month,12);year+=(month-modMonth)/12;return modMonth===1?(isLeapYear(year)?29:28):(31-modMonth%7%2);}
addFormatToken('M',['MM',2],'Mo',function(){return this.month()+1;});addFormatToken('MMM',0,0,function(format){return this.localeData().monthsShort(this,format);});addFormatToken('MMMM',0,0,function(format){return this.localeData().months(this,format);});addUnitAlias('month','M');addUnitPriority('month',8);addRegexToken('M',match1to2);addRegexToken('MM',match1to2,match2);addRegexToken('MMM',function(isStrict,locale){return locale.monthsShortRegex(isStrict);});addRegexToken('MMMM',function(isStrict,locale){return locale.monthsRegex(isStrict);});addParseToken(['M','MM'],function(input,array){array[MONTH]=toInt(input)-1;});addParseToken(['MMM','MMMM'],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month;}else{getParsingFlags(config).invalidMonth=input;}});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var defaultLocaleMonths='January_February_March_April_May_June_July_August_September_October_November_December'.split('_');function localeMonths(m,format){if(!m){return isArray(this._months)?this._months:this._months['standalone'];}
return isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?'format':'standalone'][m.month()];}
var defaultLocaleMonthsShort='Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');function localeMonthsShort(m,format){if(!m){return isArray(this._monthsShort)?this._monthsShort:this._monthsShort['standalone'];}
return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?'format':'standalone'][m.month()];}
function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){mom=createUTC([2000,i]);this._shortMonthsParse[i]=this.monthsShort(mom,'').toLocaleLowerCase();this._longMonthsParse[i]=this.months(mom,'').toLocaleLowerCase();}}
if(strict){if(format==='MMM'){ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null;}}else{if(format==='MMM'){ii=indexOf.call(this._shortMonthsParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._longMonthsParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null;}}}
function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact){return handleStrictParse.call(this,monthName,format,strict);}
if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}
for(i=0;i<12;i++){mom=createUTC([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp('^'+this.months(mom,'').replace('.','')+'$','i');this._shortMonthsParse[i]=new RegExp('^'+this.monthsShort(mom,'').replace('.','')+'$','i');}
if(!strict&&!this._monthsParse[i]){regex='^'+this.months(mom,'')+'|^'+this.monthsShort(mom,'');this._monthsParse[i]=new RegExp(regex.replace('.',''),'i');}
if(strict&&format==='MMMM'&&this._longMonthsParse[i].test(monthName)){return i;}else if(strict&&format==='MMM'&&this._shortMonthsParse[i].test(monthName)){return i;}else if(!strict&&this._monthsParse[i].test(monthName)){return i;}}}
function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom;}
if(typeof value==='string'){if(/^\d+$/.test(value)){value=toInt(value);}else{value=mom.localeData().monthsParse(value);if(!isNumber(value)){return mom;}}}
dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d['set'+(mom._isUTC?'UTC':'')+'Month'](value,dayOfMonth);return mom;}
function getSetMonth(value){if(value!=null){setMonth(this,value);hooks.updateOffset(this,true);return this;}else{return get(this,'Month');}}
function getDaysInMonth(){return daysInMonth(this.year(),this.month());}
var defaultMonthsShortRegex=matchWord;function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,'_monthsRegex')){computeMonthsParse.call(this);}
if(isStrict){return this._monthsShortStrictRegex;}else{return this._monthsShortRegex;}}else{if(!hasOwnProp(this,'_monthsShortRegex')){this._monthsShortRegex=defaultMonthsShortRegex;}
return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex;}}
var defaultMonthsRegex=matchWord;function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,'_monthsRegex')){computeMonthsParse.call(this);}
if(isStrict){return this._monthsStrictRegex;}else{return this._monthsRegex;}}else{if(!hasOwnProp(this,'_monthsRegex')){this._monthsRegex=defaultMonthsRegex;}
return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex;}}
function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length;}
var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=createUTC([2000,i]);shortPieces.push(this.monthsShort(mom,''));longPieces.push(this.months(mom,''));mixedPieces.push(this.months(mom,''));mixedPieces.push(this.monthsShort(mom,''));}
shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);}
for(i=0;i<24;i++){mixedPieces[i]=regexEscape(mixedPieces[i]);}
this._monthsRegex=new RegExp('^('+mixedPieces.join('|')+')','i');this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp('^('+longPieces.join('|')+')','i');this._monthsShortStrictRegex=new RegExp('^('+shortPieces.join('|')+')','i');}
function createDate(y,m,d,h,M,s,ms){var date;if(y<100&&y>=0){date=new Date(y+400,m,d,h,M,s,ms);if(isFinite(date.getFullYear())){date.setFullYear(y);}}else{date=new Date(y,m,d,h,M,s,ms);}
return date;}
function createUTCDate(y){var date;if(y<100&&y>=0){var args=Array.prototype.slice.call(arguments);args[0]=y+400;date=new Date(Date.UTC.apply(null,args));if(isFinite(date.getUTCFullYear())){date.setUTCFullYear(y);}}else{date=new Date(Date.UTC.apply(null,arguments));}
return date;}
function firstWeekOffset(year,dow,doy){var
fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1;}
function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear;}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year);}else{resYear=year;resDayOfYear=dayOfYear;}
return{year:resYear,dayOfYear:resDayOfYear};}
function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy);}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1;}else{resYear=mom.year();resWeek=week;}
return{week:resWeek,year:resYear};}
function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7;}
addFormatToken('w',['ww',2],'wo','week');addFormatToken('W',['WW',2],'Wo','isoWeek');addUnitAlias('week','w');addUnitAlias('isoWeek','W');addUnitPriority('week',5);addUnitPriority('isoWeek',5);addRegexToken('w',match1to2);addRegexToken('ww',match1to2,match2);addRegexToken('W',match1to2);addRegexToken('WW',match1to2,match2);addWeekParseToken(['w','ww','W','WW'],function(input,week,config,token){week[token.substr(0,1)]=toInt(input);});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week;}
var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow;}
function localeFirstDayOfYear(){return this._week.doy;}
function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,'d');}
function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,'d');}
addFormatToken('d',0,'do','day');addFormatToken('dd',0,0,function(format){return this.localeData().weekdaysMin(this,format);});addFormatToken('ddd',0,0,function(format){return this.localeData().weekdaysShort(this,format);});addFormatToken('dddd',0,0,function(format){return this.localeData().weekdays(this,format);});addFormatToken('e',0,0,'weekday');addFormatToken('E',0,0,'isoWeekday');addUnitAlias('day','d');addUnitAlias('weekday','e');addUnitAlias('isoWeekday','E');addUnitPriority('day',11);addUnitPriority('weekday',11);addUnitPriority('isoWeekday',11);addRegexToken('d',match1to2);addRegexToken('e',match1to2);addRegexToken('E',match1to2);addRegexToken('dd',function(isStrict,locale){return locale.weekdaysMinRegex(isStrict);});addRegexToken('ddd',function(isStrict,locale){return locale.weekdaysShortRegex(isStrict);});addRegexToken('dddd',function(isStrict,locale){return locale.weekdaysRegex(isStrict);});addWeekParseToken(['dd','ddd','dddd'],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday;}else{getParsingFlags(config).invalidWeekday=input;}});addWeekParseToken(['d','e','E'],function(input,week,config,token){week[token]=toInt(input);});function parseWeekday(input,locale){if(typeof input!=='string'){return input;}
if(!isNaN(input)){return parseInt(input,10);}
input=locale.weekdaysParse(input);if(typeof input==='number'){return input;}
return null;}
function parseIsoWeekday(input,locale){if(typeof input==='string'){return locale.weekdaysParse(input)%7||7;}
return isNaN(input)?null:input;}
function shiftWeekdays(ws,n){return ws.slice(n,7).concat(ws.slice(0,n));}
var defaultLocaleWeekdays='Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');function localeWeekdays(m,format){var weekdays=isArray(this._weekdays)?this._weekdays:this._weekdays[(m&&m!==true&&this._weekdays.isFormat.test(format))?'format':'standalone'];return(m===true)?shiftWeekdays(weekdays,this._week.dow):(m)?weekdays[m.day()]:weekdays;}
var defaultLocaleWeekdaysShort='Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');function localeWeekdaysShort(m){return(m===true)?shiftWeekdays(this._weekdaysShort,this._week.dow):(m)?this._weekdaysShort[m.day()]:this._weekdaysShort;}
var defaultLocaleWeekdaysMin='Su_Mo_Tu_We_Th_Fr_Sa'.split('_');function localeWeekdaysMin(m){return(m===true)?shiftWeekdays(this._weekdaysMin,this._week.dow):(m)?this._weekdaysMin[m.day()]:this._weekdaysMin;}
function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){mom=createUTC([2000,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(mom,'').toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(mom,'').toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(mom,'').toLocaleLowerCase();}}
if(strict){if(format==='dddd'){ii=indexOf.call(this._weekdaysParse,llc);return ii!==-1?ii:null;}else if(format==='ddd'){ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}}else{if(format==='dddd'){ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}else if(format==='ddd'){ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._minWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null;}}}
function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact){return handleStrictParse$1.call(this,weekdayName,format,strict);}
if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[];}
for(i=0;i<7;i++){mom=createUTC([2000,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp('^'+this.weekdays(mom,'').replace('.','\\.?')+'$','i');this._shortWeekdaysParse[i]=new RegExp('^'+this.weekdaysShort(mom,'').replace('.','\\.?')+'$','i');this._minWeekdaysParse[i]=new RegExp('^'+this.weekdaysMin(mom,'').replace('.','\\.?')+'$','i');}
if(!this._weekdaysParse[i]){regex='^'+this.weekdays(mom,'')+'|^'+this.weekdaysShort(mom,'')+'|^'+this.weekdaysMin(mom,'');this._weekdaysParse[i]=new RegExp(regex.replace('.',''),'i');}
if(strict&&format==='dddd'&&this._fullWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==='ddd'&&this._shortWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==='dd'&&this._minWeekdaysParse[i].test(weekdayName)){return i;}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i;}}}
function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,'d');}else{return day;}}
function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,'d');}
function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7);}else{return this.day()||7;}}
var defaultWeekdaysRegex=matchWord;function weekdaysRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysStrictRegex;}else{return this._weekdaysRegex;}}else{if(!hasOwnProp(this,'_weekdaysRegex')){this._weekdaysRegex=defaultWeekdaysRegex;}
return this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex;}}
var defaultWeekdaysShortRegex=matchWord;function weekdaysShortRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysShortStrictRegex;}else{return this._weekdaysShortRegex;}}else{if(!hasOwnProp(this,'_weekdaysShortRegex')){this._weekdaysShortRegex=defaultWeekdaysShortRegex;}
return this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;}}
var defaultWeekdaysMinRegex=matchWord;function weekdaysMinRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysMinStrictRegex;}else{return this._weekdaysMinRegex;}}else{if(!hasOwnProp(this,'_weekdaysMinRegex')){this._weekdaysMinRegex=defaultWeekdaysMinRegex;}
return this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;}}
function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length;}
var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++){mom=createUTC([2000,1]).day(i);minp=this.weekdaysMin(mom,'');shortp=this.weekdaysShort(mom,'');longp=this.weekdays(mom,'');minPieces.push(minp);shortPieces.push(shortp);longPieces.push(longp);mixedPieces.push(minp);mixedPieces.push(shortp);mixedPieces.push(longp);}
minPieces.sort(cmpLenRev);shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<7;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);mixedPieces[i]=regexEscape(mixedPieces[i]);}
this._weekdaysRegex=new RegExp('^('+mixedPieces.join('|')+')','i');this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp('^('+longPieces.join('|')+')','i');this._weekdaysShortStrictRegex=new RegExp('^('+shortPieces.join('|')+')','i');this._weekdaysMinStrictRegex=new RegExp('^('+minPieces.join('|')+')','i');}
function hFormat(){return this.hours()%12||12;}
function kFormat(){return this.hours()||24;}
addFormatToken('H',['HH',2],0,'hour');addFormatToken('h',['hh',2],0,hFormat);addFormatToken('k',['kk',2],0,kFormat);addFormatToken('hmm',0,0,function(){return''+hFormat.apply(this)+zeroFill(this.minutes(),2);});addFormatToken('hmmss',0,0,function(){return''+hFormat.apply(this)+zeroFill(this.minutes(),2)+
zeroFill(this.seconds(),2);});addFormatToken('Hmm',0,0,function(){return''+this.hours()+zeroFill(this.minutes(),2);});addFormatToken('Hmmss',0,0,function(){return''+this.hours()+zeroFill(this.minutes(),2)+
zeroFill(this.seconds(),2);});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase);});}
meridiem('a',true);meridiem('A',false);addUnitAlias('hour','h');addUnitPriority('hour',13);function matchMeridiem(isStrict,locale){return locale._meridiemParse;}
addRegexToken('a',matchMeridiem);addRegexToken('A',matchMeridiem);addRegexToken('H',match1to2);addRegexToken('h',match1to2);addRegexToken('k',match1to2);addRegexToken('HH',match1to2,match2);addRegexToken('hh',match1to2,match2);addRegexToken('kk',match1to2,match2);addRegexToken('hmm',match3to4);addRegexToken('hmmss',match5to6);addRegexToken('Hmm',match3to4);addRegexToken('Hmmss',match5to6);addParseToken(['H','HH'],HOUR);addParseToken(['k','kk'],function(input,array,config){var kInput=toInt(input);array[HOUR]=kInput===24?0:kInput;});addParseToken(['a','A'],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input;});addParseToken(['h','hh'],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true;});addParseToken('hmm',function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true;});addParseToken('hmmss',function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true;});addParseToken('Hmm',function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));});addParseToken('Hmmss',function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));});function localeIsPM(input){return((input+'').toLowerCase().charAt(0)==='p');}
var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?'pm':'PM';}else{return isLower?'am':'AM';}}
var getSetHour=makeGetSet('Hours',true);var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse};var locales={};var localeFamilies={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace('_','-'):key;}
function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split('-');j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split('-'):null;while(j>0){locale=loadLocale(split.slice(0,j).join('-'));if(locale){return locale;}
if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break;}
j--;}
i++;}
return globalLocale;}
function loadLocale(name){var oldLocale=null;if(!locales[name]&&('object'!=='undefined')&&module&&module.exports){try{oldLocale=globalLocale._abbr;var aliasedRequire=commonjsRequire;aliasedRequire('./locale/'+name);getSetGlobalLocale(oldLocale);}catch(e){}}
return locales[name];}
function getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=getLocale(key);}
else{data=defineLocale(key,values);}
if(data){globalLocale=data;}
else{if((typeof console!=='undefined')&&console.warn){console.warn('Locale '+key+' not found. Did you forget to load it?');}}}
return globalLocale._abbr;}
function defineLocale(name,config){if(config!==null){var locale,parentConfig=baseConfig;config.abbr=name;if(locales[name]!=null){deprecateSimple('defineLocaleOverride','use moment.updateLocale(localeName, config) to change '+
'an existing locale. moment.defineLocale(localeName, '+
'config) should only be used for creating a new locale '+
'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');parentConfig=locales[name]._config;}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){parentConfig=locales[config.parentLocale]._config;}else{locale=loadLocale(config.parentLocale);if(locale!=null){parentConfig=locale._config;}else{if(!localeFamilies[config.parentLocale]){localeFamilies[config.parentLocale]=[];}
localeFamilies[config.parentLocale].push({name:name,config:config});return null;}}}
locales[name]=new Locale(mergeConfigs(parentConfig,config));if(localeFamilies[name]){localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config);});}
getSetGlobalLocale(name);return locales[name];}else{delete locales[name];return null;}}
function updateLocale(name,config){if(config!=null){var locale,tmpLocale,parentConfig=baseConfig;tmpLocale=loadLocale(name);if(tmpLocale!=null){parentConfig=tmpLocale._config;}
config=mergeConfigs(parentConfig,config);locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale;getSetGlobalLocale(name);}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale;}else if(locales[name]!=null){delete locales[name];}}}
return locales[name];}
function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr;}
if(!key){return globalLocale;}
if(!isArray(key)){locale=loadLocale(key);if(locale){return locale;}
key=[key];}
return chooseLocale(key);}
function listLocales(){return keys(locales);}
function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||(a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0))?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE;}
if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK;}
if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY;}
getParsingFlags(m).overflow=overflow;}
return m;}
function defaults(a,b,c){if(a!=null){return a;}
if(b!=null){return b;}
return c;}
function currentDateArray(config){var nowValue=new Date(hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()];}
return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()];}
function configFromArray(config){var i,date,input=[],currentDate,expectedWeekday,yearToUse;if(config._d){return;}
currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config);}
if(config._dayOfYear!=null){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)||config._dayOfYear===0){getParsingFlags(config)._overflowDayOfYear=true;}
date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate();}
for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i];}
for(;i<7;i++){config._a[i]=input[i]=(config._a[i]==null)?(i===2?1:0):config._a[i];}
if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0;}
config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);expectedWeekday=config._useUTC?config._d.getUTCDay():config._d.getDay();if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);}
if(config._nextDay){config._a[HOUR]=24;}
if(config._w&&typeof config._w.d!=='undefined'&&config._w.d!==expectedWeekday){getParsingFlags(config).weekdayMismatch=true;}}
function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true;}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;var curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[YEAR],curWeek.year);week=defaults(w.w,curWeek.week);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true;}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true;}}else{weekday=dow;}}
if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true;}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true;}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear;}}
var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var tzRegex=/Z|[+-]\d\d(?::?\d\d)?/;var isoDates=[['YYYYYY-MM-DD',/[+-]\d{6}-\d\d-\d\d/],['YYYY-MM-DD',/\d{4}-\d\d-\d\d/],['GGGG-[W]WW-E',/\d{4}-W\d\d-\d/],['GGGG-[W]WW',/\d{4}-W\d\d/,false],['YYYY-DDD',/\d{4}-\d{3}/],['YYYY-MM',/\d{4}-\d\d/,false],['YYYYYYMMDD',/[+-]\d{10}/],['YYYYMMDD',/\d{8}/],['GGGG[W]WWE',/\d{4}W\d{3}/],['GGGG[W]WW',/\d{4}W\d{2}/,false],['YYYYDDD',/\d{7}/]];var isoTimes=[['HH:mm:ss.SSSS',/\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss,SSSS',/\d\d:\d\d:\d\d,\d+/],['HH:mm:ss',/\d\d:\d\d:\d\d/],['HH:mm',/\d\d:\d\d/],['HHmmss.SSSS',/\d\d\d\d\d\d\.\d+/],['HHmmss,SSSS',/\d\d\d\d\d\d,\d+/],['HHmmss',/\d\d\d\d\d\d/],['HHmm',/\d\d\d\d/],['HH',/\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break;}}
if(dateFormat==null){config._isValid=false;return;}
if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||' ')+isoTimes[i][0];break;}}
if(timeFormat==null){config._isValid=false;return;}}
if(!allowTime&&timeFormat!=null){config._isValid=false;return;}
if(match[4]){if(tzRegex.exec(match[4])){tzFormat='Z';}else{config._isValid=false;return;}}
config._f=dateFormat+(timeFormat||'')+(tzFormat||'');configFromStringAndFormat(config);}else{config._isValid=false;}}
var rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function extractFromRFC2822Strings(yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){var result=[untruncateYear(yearStr),defaultLocaleMonthsShort.indexOf(monthStr),parseInt(dayStr,10),parseInt(hourStr,10),parseInt(minuteStr,10)];if(secondStr){result.push(parseInt(secondStr,10));}
return result;}
function untruncateYear(yearStr){var year=parseInt(yearStr,10);if(year<=49){return 2000+year;}else if(year<=999){return 1900+year;}
return year;}
function preprocessRFC2822(s){return s.replace(/\([^)]*\)|[\n\t]/g,' ').replace(/(\s\s+)/g,' ').replace(/^\s\s*/,'').replace(/\s\s*$/,'');}
function checkWeekday(weekdayStr,parsedInput,config){if(weekdayStr){var weekdayProvided=defaultLocaleWeekdaysShort.indexOf(weekdayStr),weekdayActual=new Date(parsedInput[0],parsedInput[1],parsedInput[2]).getDay();if(weekdayProvided!==weekdayActual){getParsingFlags(config).weekdayMismatch=true;config._isValid=false;return false;}}
return true;}
var obsOffsets={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function calculateOffset(obsOffset,militaryOffset,numOffset){if(obsOffset){return obsOffsets[obsOffset];}else if(militaryOffset){return 0;}else{var hm=parseInt(numOffset,10);var m=hm%100,h=(hm-m)/100;return h*60+m;}}
function configFromRFC2822(config){var match=rfc2822.exec(preprocessRFC2822(config._i));if(match){var parsedArray=extractFromRFC2822Strings(match[4],match[3],match[2],match[5],match[6],match[7]);if(!checkWeekday(match[1],parsedArray,config)){return;}
config._a=parsedArray;config._tzm=calculateOffset(match[8],match[9],match[10]);config._d=createUTCDate.apply(null,config._a);config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);getParsingFlags(config).rfc2822=true;}else{config._isValid=false;}}
function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return;}
configFromISO(config);if(config._isValid===false){delete config._isValid;}else{return;}
configFromRFC2822(config);if(config._isValid===false){delete config._isValid;}else{return;}
hooks.createFromInputFallback(config);}
hooks.createFromInputFallback=deprecate('value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), '+
'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are '+
'discouraged and will be removed in an upcoming major release. Please refer to '+
'http://momentjs.com/guides/#/warnings/js-date/ for more info.',function(config){config._d=new Date(config._i+(config._useUTC?' UTC':''));});hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601){configFromISO(config);return;}
if(config._f===hooks.RFC_2822){configFromRFC2822(config);return;}
config._a=[];getParsingFlags(config).empty=true;var string=''+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped);}
string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length;}
if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false;}
else{getParsingFlags(config).unusedTokens.push(token);}
addTimeToArrayFromToken(token,parsedInput,config);}
else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token);}}
getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string);}
if(config._a[HOUR]<=12&&getParsingFlags(config).bigHour===true&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined;}
getParsingFlags(config).parsedDateParts=config._a.slice(0);getParsingFlags(config).meridiem=config._meridiem;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config);}
function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour;}
if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem);}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12;}
if(!isPm&&hour===12){hour=0;}
return hour;}else{return hour;}}
function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return;}
for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC;}
tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!isValid(tempConfig)){continue;}
currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig;}}
extend(config,bestMoment||tempConfig);}
function configFromObject(config){if(config._d){return;}
var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10);});configFromArray(config);}
function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,'d');res._nextDay=undefined;}
return res;}
function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||getLocale(config._l);if(input===null||(format===undefined&&input==='')){return createInvalid({nullInput:true});}
if(typeof input==='string'){config._i=input=config._locale.preparse(input);}
if(isMoment(input)){return new Moment(checkOverflow(input));}else if(isDate(input)){config._d=input;}else if(isArray(format)){configFromStringAndArray(config);}else if(format){configFromStringAndFormat(config);}else{configFromInput(config);}
if(!isValid(config)){config._d=null;}
return config;}
function configFromInput(config){var input=config._i;if(isUndefined(input)){config._d=new Date(hooks.now());}else if(isDate(input)){config._d=new Date(input.valueOf());}else if(typeof input==='string'){configFromString(config);}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10);});configFromArray(config);}else if(isObject(input)){configFromObject(config);}else if(isNumber(input)){config._d=new Date(input);}else{hooks.createFromInputFallback(config);}}
function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(locale===true||locale===false){strict=locale;locale=undefined;}
if((isObject(input)&&isObjectEmpty(input))||(isArray(input)&&input.length===0)){input=undefined;}
c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c);}
function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false);}
var prototypeMin=deprecate('moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other;}else{return createInvalid();}});var prototypeMax=deprecate('moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other;}else{return createInvalid();}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0];}
if(!moments.length){return createLocal();}
res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i];}}
return res;}
function min(){var args=[].slice.call(arguments,0);return pickBy('isBefore',args);}
function max(){var args=[].slice.call(arguments,0);return pickBy('isAfter',args);}
var now=function(){return Date.now?Date.now():+(new Date());};var ordering=['year','quarter','month','week','day','hour','minute','second','millisecond'];function isDurationValid(m){for(var key in m){if(!(indexOf.call(ordering,key)!==-1&&(m[key]==null||!isNaN(m[key])))){return false;}}
var unitHasDecimal=false;for(var i=0;i<ordering.length;++i){if(m[ordering[i]]){if(unitHasDecimal){return false;}
if(parseFloat(m[ordering[i]])!==toInt(m[ordering[i]])){unitHasDecimal=true;}}}
return true;}
function isValid$1(){return this._isValid;}
function createInvalid$1(){return createDuration(NaN);}
function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||normalizedInput.isoWeek||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._isValid=isDurationValid(normalizedInput);this._milliseconds=+milliseconds+
seconds*1e3+
minutes*6e4+
hours*1000*60*60;this._days=+days+
weeks*7;this._months=+months+
quarters*3+
years*12;this._data={};this._locale=getLocale();this._bubble();}
function isDuration(obj){return obj instanceof Duration;}
function absRound(number){if(number<0){return Math.round(-1*number)*-1;}else{return Math.round(number);}}
function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign='+';if(offset<0){offset=-offset;sign='-';}
return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~(offset)%60,2);});}
offset('Z',':');offset('ZZ','');addRegexToken('Z',matchShortOffset);addRegexToken('ZZ',matchShortOffset);addParseToken(['Z','ZZ'],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input);});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||'').match(matcher);if(matches===null){return null;}
var chunk=matches[matches.length-1]||[];var parts=(chunk+'').match(chunkOffset)||['-',0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return minutes===0?0:parts[0]==='+'?minutes:-minutes;}
function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf();res._d.setTime(res._d.valueOf()+diff);hooks.updateOffset(res,false);return res;}else{return createLocal(input).local();}}
function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15;}
hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime,keepMinutes){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN;}
if(input!=null){if(typeof input==='string'){input=offsetFromString(matchShortOffset,input);if(input===null){return this;}}else if(Math.abs(input)<16&&!keepMinutes){input=input*60;}
if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this);}
this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,'m');}
if(offset!==input){if(!keepLocalTime||this._changeInProgress){addSubtract(this,createDuration(input-offset,'m'),1,false);}else if(!this._changeInProgress){this._changeInProgress=true;hooks.updateOffset(this,true);this._changeInProgress=null;}}
return this;}else{return this._isUTC?offset:getDateOffset(this);}}
function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=='string'){input=-input;}
this.utcOffset(input,keepLocalTime);return this;}else{return-this.utcOffset();}}
function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime);}
function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),'m');}}
return this;}
function setOffsetToParsedOffset(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true);}else if(typeof this._i==='string'){var tZone=offsetFromString(matchOffset,this._i);if(tZone!=null){this.utcOffset(tZone);}
else{this.utcOffset(0,true);}}
return this;}
function hasAlignedHourOffset(input){if(!this.isValid()){return false;}
input=input?createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0;}
function isDaylightSavingTime(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());}
function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted;}
var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0;}else{this._isDSTShifted=false;}
return this._isDSTShifted;}
function isLocal(){return this.isValid()?!this._isUTC:false;}
function isUtcOffset(){return this.isValid()?this._isUTC:false;}
function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false;}
var aspNetRegex=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months};}else if(isNumber(input)){duration={};if(key){duration[key]=input;}else{duration.milliseconds=input;}}else if(!!(match=aspNetRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(match[MILLISECOND]*1000))*sign};}else if(!!(match=isoRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)};}else if(duration==null){duration={};}else if(typeof duration==='object'&&('from'in duration||'to'in duration)){diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months;}
ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,'_locale')){ret._locale=input._locale;}
return ret;}
createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(',','.'));return(isNaN(res)?0:res)*sign;}
function positiveMomentsDifference(base,other){var res={};res.months=other.month()-base.month()+
(other.year()-base.year())*12;if(base.clone().add(res.months,'M').isAfter(other)){--res.months;}
res.milliseconds=+other-+(base.clone().add(res.months,'M'));return res;}
function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0};}
other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other);}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}
return res;}
function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,'moment().'+name+'(period, number) is deprecated. Please use moment().'+name+'(number, period). '+
'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');tmp=val;val=period;period=tmp;}
val=typeof val==='string'?+val:val;dur=createDuration(val,period);addSubtract(this,dur,direction);return this;};}
function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return;}
updateOffset=updateOffset==null?true:updateOffset;if(months){setMonth(mom,get(mom,'Month')+months*isAdding);}
if(days){set$1(mom,'Date',get(mom,'Date')+days*isAdding);}
if(milliseconds){mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding);}
if(updateOffset){hooks.updateOffset(mom,days||months);}}
var add=createAdder(1,'add');var subtract=createAdder(-1,'subtract');function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,'days',true);return diff<-6?'sameElse':diff<-1?'lastWeek':diff<0?'lastDay':diff<1?'sameDay':diff<2?'nextDay':diff<7?'nextWeek':'sameElse';}
function calendar$1(time,formats){var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf('day'),format=hooks.calendarFormat(this,sod)||'sameElse';var output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)));}
function clone(){return new Moment(this);}
function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(units)||'millisecond';if(units==='millisecond'){return this.valueOf()>localInput.valueOf();}else{return localInput.valueOf()<this.clone().startOf(units).valueOf();}}
function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(units)||'millisecond';if(units==='millisecond'){return this.valueOf()<localInput.valueOf();}else{return this.clone().endOf(units).valueOf()<localInput.valueOf();}}
function isBetween(from,to,units,inclusivity){var localFrom=isMoment(from)?from:createLocal(from),localTo=isMoment(to)?to:createLocal(to);if(!(this.isValid()&&localFrom.isValid()&&localTo.isValid())){return false;}
inclusivity=inclusivity||'()';return(inclusivity[0]==='('?this.isAfter(localFrom,units):!this.isBefore(localFrom,units))&&(inclusivity[1]===')'?this.isBefore(localTo,units):!this.isAfter(localTo,units));}
function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(units)||'millisecond';if(units==='millisecond'){return this.valueOf()===localInput.valueOf();}else{inputMs=localInput.valueOf();return this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf();}}
function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units);}
function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units);}
function diff(input,units,asFloat){var that,zoneDelta,output;if(!this.isValid()){return NaN;}
that=cloneWithOffset(input,this);if(!that.isValid()){return NaN;}
zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);switch(units){case'year':output=monthDiff(this,that)/12;break;case'month':output=monthDiff(this,that);break;case'quarter':output=monthDiff(this,that)/3;break;case'second':output=(this-that)/1e3;break;case'minute':output=(this-that)/6e4;break;case'hour':output=(this-that)/36e5;break;case'day':output=(this-that-zoneDelta)/864e5;break;case'week':output=(this-that-zoneDelta)/6048e5;break;default:output=this-that;}
return asFloat?output:absFloor(output);}
function monthDiff(a,b){var wholeMonthDiff=((b.year()-a.year())*12)+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,'months'),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,'months');adjust=(b-anchor)/(anchor-anchor2);}else{anchor2=a.clone().add(wholeMonthDiff+1,'months');adjust=(b-anchor)/(anchor2-anchor);}
return-(wholeMonthDiff+adjust)||0;}
hooks.defaultFormat='YYYY-MM-DDTHH:mm:ssZ';hooks.defaultFormatUtc='YYYY-MM-DDTHH:mm:ss[Z]';function toString(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');}
function toISOString(keepOffset){if(!this.isValid()){return null;}
var utc=keepOffset!==true;var m=utc?this.clone().utc():this;if(m.year()<0||m.year()>9999){return formatMoment(m,utc?'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]':'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ');}
if(isFunction(Date.prototype.toISOString)){if(utc){return this.toDate().toISOString();}else{return new Date(this.valueOf()+this.utcOffset()*60*1000).toISOString().replace('Z',formatMoment(m,'Z'));}}
return formatMoment(m,utc?'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]':'YYYY-MM-DD[T]HH:mm:ss.SSSZ');}
function inspect(){if(!this.isValid()){return'moment.invalid(/* '+this._i+' */)';}
var func='moment';var zone='';if(!this.isLocal()){func=this.utcOffset()===0?'moment.utc':'moment.parseZone';zone='Z';}
var prefix='['+func+'("]';var year=(0<=this.year()&&this.year()<=9999)?'YYYY':'YYYYYY';var datetime='-MM-DD[T]HH:mm:ss.SSS';var suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix);}
function format(inputString){if(!inputString){inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat;}
var output=formatMoment(this,inputString);return this.localeData().postformat(output);}
function from(time,withoutSuffix){if(this.isValid()&&((isMoment(time)&&time.isValid())||createLocal(time).isValid())){return createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}
function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix);}
function to(time,withoutSuffix){if(this.isValid()&&((isMoment(time)&&time.isValid())||createLocal(time).isValid())){return createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}
function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix);}
function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr;}else{newLocaleData=getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData;}
return this;}}
var lang=deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(key){if(key===undefined){return this.localeData();}else{return this.locale(key);}});function localeData(){return this._locale;}
var MS_PER_SECOND=1000;var MS_PER_MINUTE=60*MS_PER_SECOND;var MS_PER_HOUR=60*MS_PER_MINUTE;var MS_PER_400_YEARS=(365*400+97)*24*MS_PER_HOUR;function mod$1(dividend,divisor){return(dividend%divisor+divisor)%divisor;}
function localStartOfDate(y,m,d){if(y<100&&y>=0){return new Date(y+400,m,d)-MS_PER_400_YEARS;}else{return new Date(y,m,d).valueOf();}}
function utcStartOfDate(y,m,d){if(y<100&&y>=0){return Date.UTC(y+400,m,d)-MS_PER_400_YEARS;}else{return Date.UTC(y,m,d);}}
function startOf(units){var time;units=normalizeUnits(units);if(units===undefined||units==='millisecond'||!this.isValid()){return this;}
var startOfDate=this._isUTC?utcStartOfDate:localStartOfDate;switch(units){case'year':time=startOfDate(this.year(),0,1);break;case'quarter':time=startOfDate(this.year(),this.month()-this.month()%3,1);break;case'month':time=startOfDate(this.year(),this.month(),1);break;case'week':time=startOfDate(this.year(),this.month(),this.date()-this.weekday());break;case'isoWeek':time=startOfDate(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case'day':case'date':time=startOfDate(this.year(),this.month(),this.date());break;case'hour':time=this._d.valueOf();time-=mod$1(time+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case'minute':time=this._d.valueOf();time-=mod$1(time,MS_PER_MINUTE);break;case'second':time=this._d.valueOf();time-=mod$1(time,MS_PER_SECOND);break;}
this._d.setTime(time);hooks.updateOffset(this,true);return this;}
function endOf(units){var time;units=normalizeUnits(units);if(units===undefined||units==='millisecond'||!this.isValid()){return this;}
var startOfDate=this._isUTC?utcStartOfDate:localStartOfDate;switch(units){case'year':time=startOfDate(this.year()+1,0,1)-1;break;case'quarter':time=startOfDate(this.year(),this.month()-this.month()%3+3,1)-1;break;case'month':time=startOfDate(this.year(),this.month()+1,1)-1;break;case'week':time=startOfDate(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case'isoWeek':time=startOfDate(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case'day':case'date':time=startOfDate(this.year(),this.month(),this.date()+1)-1;break;case'hour':time=this._d.valueOf();time+=MS_PER_HOUR-mod$1(time+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-1;break;case'minute':time=this._d.valueOf();time+=MS_PER_MINUTE-mod$1(time,MS_PER_MINUTE)-1;break;case'second':time=this._d.valueOf();time+=MS_PER_SECOND-mod$1(time,MS_PER_SECOND)-1;break;}
this._d.setTime(time);hooks.updateOffset(this,true);return this;}
function valueOf(){return this._d.valueOf()-((this._offset||0)*60000);}
function unix(){return Math.floor(this.valueOf()/1000);}
function toDate(){return new Date(this.valueOf());}
function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()];}
function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()};}
function toJSON(){return this.isValid()?this.toISOString():null;}
function isValid$2(){return isValid(this);}
function parsingFlags(){return extend({},getParsingFlags(this));}
function invalidAt(){return getParsingFlags(this).overflow;}
function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict};}
addFormatToken(0,['gg',2],0,function(){return this.weekYear()%100;});addFormatToken(0,['GG',2],0,function(){return this.isoWeekYear()%100;});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter);}
addWeekYearFormatToken('gggg','weekYear');addWeekYearFormatToken('ggggg','weekYear');addWeekYearFormatToken('GGGG','isoWeekYear');addWeekYearFormatToken('GGGGG','isoWeekYear');addUnitAlias('weekYear','gg');addUnitAlias('isoWeekYear','GG');addUnitPriority('weekYear',1);addUnitPriority('isoWeekYear',1);addRegexToken('G',matchSigned);addRegexToken('g',matchSigned);addRegexToken('GG',match1to2,match2);addRegexToken('gg',match1to2,match2);addRegexToken('GGGG',match1to4,match4);addRegexToken('gggg',match1to4,match4);addRegexToken('GGGGG',match1to6,match6);addRegexToken('ggggg',match1to6,match6);addWeekParseToken(['gggg','ggggg','GGGG','GGGGG'],function(input,week,config,token){week[token.substr(0,2)]=toInt(input);});addWeekParseToken(['gg','GG'],function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input);});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy);}
function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4);}
function getISOWeeksInYear(){return weeksInYear(this.year(),1,4);}
function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy);}
function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year;}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget;}
return setWeekAll.call(this,input,week,weekday,dow,doy);}}
function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this;}
addFormatToken('Q',0,'Qo','quarter');addUnitAlias('quarter','Q');addUnitPriority('quarter',7);addRegexToken('Q',match1);addParseToken('Q',function(input,array){array[MONTH]=(toInt(input)-1)*3;});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);}
addFormatToken('D',['DD',2],'Do','date');addUnitAlias('date','D');addUnitPriority('date',9);addRegexToken('D',match1to2);addRegexToken('DD',match1to2,match2);addRegexToken('Do',function(isStrict,locale){return isStrict?(locale._dayOfMonthOrdinalParse||locale._ordinalParse):locale._dayOfMonthOrdinalParseLenient;});addParseToken(['D','DD'],DATE);addParseToken('Do',function(input,array){array[DATE]=toInt(input.match(match1to2)[0]);});var getSetDayOfMonth=makeGetSet('Date',true);addFormatToken('DDD',['DDDD',3],'DDDo','dayOfYear');addUnitAlias('dayOfYear','DDD');addUnitPriority('dayOfYear',4);addRegexToken('DDD',match1to3);addRegexToken('DDDD',match3);addParseToken(['DDD','DDDD'],function(input,array,config){config._dayOfYear=toInt(input);});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return input==null?dayOfYear:this.add((input-dayOfYear),'d');}
addFormatToken('m',['mm',2],0,'minute');addUnitAlias('minute','m');addUnitPriority('minute',14);addRegexToken('m',match1to2);addRegexToken('mm',match1to2,match2);addParseToken(['m','mm'],MINUTE);var getSetMinute=makeGetSet('Minutes',false);addFormatToken('s',['ss',2],0,'second');addUnitAlias('second','s');addUnitPriority('second',15);addRegexToken('s',match1to2);addRegexToken('ss',match1to2,match2);addParseToken(['s','ss'],SECOND);var getSetSecond=makeGetSet('Seconds',false);addFormatToken('S',0,0,function(){return~~(this.millisecond()/100);});addFormatToken(0,['SS',2],0,function(){return~~(this.millisecond()/10);});addFormatToken(0,['SSS',3],0,'millisecond');addFormatToken(0,['SSSS',4],0,function(){return this.millisecond()*10;});addFormatToken(0,['SSSSS',5],0,function(){return this.millisecond()*100;});addFormatToken(0,['SSSSSS',6],0,function(){return this.millisecond()*1000;});addFormatToken(0,['SSSSSSS',7],0,function(){return this.millisecond()*10000;});addFormatToken(0,['SSSSSSSS',8],0,function(){return this.millisecond()*100000;});addFormatToken(0,['SSSSSSSSS',9],0,function(){return this.millisecond()*1000000;});addUnitAlias('millisecond','ms');addUnitPriority('millisecond',16);addRegexToken('S',match1to3,match1);addRegexToken('SS',match1to3,match2);addRegexToken('SSS',match1to3,match3);var token;for(token='SSSS';token.length<=9;token+='S'){addRegexToken(token,matchUnsigned);}
function parseMs(input,array){array[MILLISECOND]=toInt(('0.'+input)*1000);}
for(token='S';token.length<=9;token+='S'){addParseToken(token,parseMs);}
var getSetMillisecond=makeGetSet('Milliseconds',false);addFormatToken('z',0,0,'zoneAbbr');addFormatToken('zz',0,0,'zoneName');function getZoneAbbr(){return this._isUTC?'UTC':'';}
function getZoneName(){return this._isUTC?'Coordinated Universal Time':'';}
var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate('dates accessor is deprecated. Use date instead.',getSetDayOfMonth);proto.months=deprecate('months accessor is deprecated. Use month instead',getSetMonth);proto.years=deprecate('years accessor is deprecated. Use year instead',getSetYear);proto.zone=deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',getSetZone);proto.isDSTShifted=deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',isDaylightSavingTimeShifted);function createUnix(input){return createLocal(input*1000);}
function createInZone(){return createLocal.apply(null,arguments).parseZone();}
function preParsePostFormat(string){return string;}
var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(format,index,field,setter){var locale=getLocale();var utc=createUTC().set(setter,index);return locale[field](utc,format);}
function listMonthsImpl(format,index,field){if(isNumber(format)){index=format;format=undefined;}
format=format||'';if(index!=null){return get$1(format,index,field,'month');}
var i;var out=[];for(i=0;i<12;i++){out[i]=get$1(format,i,field,'month');}
return out;}
function listWeekdaysImpl(localeSorted,format,index,field){if(typeof localeSorted==='boolean'){if(isNumber(format)){index=format;format=undefined;}
format=format||'';}else{format=localeSorted;index=format;localeSorted=false;if(isNumber(format)){index=format;format=undefined;}
format=format||'';}
var locale=getLocale(),shift=localeSorted?locale._week.dow:0;if(index!=null){return get$1(format,(index+shift)%7,field,'day');}
var i;var out=[];for(i=0;i<7;i++){out[i]=get$1(format,(i+shift)%7,field,'day');}
return out;}
function listMonths(format,index){return listMonthsImpl(format,index,'months');}
function listMonthsShort(format,index){return listMonthsImpl(format,index,'monthsShort');}
function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdays');}
function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdaysShort');}
function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdaysMin');}
getSetGlobalLocale('en',{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=(toInt(number%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';return number+output;}});hooks.lang=deprecate('moment.lang is deprecated. Use moment.locale instead.',getSetGlobalLocale);hooks.langData=deprecate('moment.langData is deprecated. Use moment.localeData instead.',getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this;}
function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble();}
function add$1(input,value){return addSubtract$1(this,input,value,1);}
function subtract$1(input,value){return addSubtract$1(this,input,value,-1);}
function absCeil(number){if(number<0){return Math.floor(number);}else{return Math.ceil(number);}}
function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!((milliseconds>=0&&days>=0&&months>=0)||(milliseconds<=0&&days<=0&&months<=0))){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0;}
data.milliseconds=milliseconds%1000;seconds=absFloor(milliseconds/1000);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this;}
function daysToMonths(days){return days*4800/146097;}
function monthsToDays(months){return months*146097/4800;}
function as(units){if(!this.isValid()){return NaN;}
var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==='month'||units==='quarter'||units==='year'){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);switch(units){case'month':return months;case'quarter':return months/3;case'year':return months/12;}}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case'week':return days/7+milliseconds/6048e5;case'day':return days+milliseconds/864e5;case'hour':return days*24+milliseconds/36e5;case'minute':return days*1440+milliseconds/6e4;case'second':return days*86400+milliseconds/1000;case'millisecond':return Math.floor(days*864e5)+milliseconds;default:throw new Error('Unknown unit '+units);}}}
function valueOf$1(){if(!this.isValid()){return NaN;}
return(this._milliseconds+
this._days*864e5+
(this._months%12)*2592e6+
toInt(this._months/12)*31536e6);}
function makeAs(alias){return function(){return this.as(alias);};}
var asMilliseconds=makeAs('ms');var asSeconds=makeAs('s');var asMinutes=makeAs('m');var asHours=makeAs('h');var asDays=makeAs('d');var asWeeks=makeAs('w');var asMonths=makeAs('M');var asQuarters=makeAs('Q');var asYears=makeAs('y');function clone$1(){return createDuration(this);}
function get$2(units){units=normalizeUnits(units);return this.isValid()?this[units+'s']():NaN;}
function makeGetter(name){return function(){return this.isValid()?this._data[name]:NaN;};}
var milliseconds=makeGetter('milliseconds');var seconds=makeGetter('seconds');var minutes=makeGetter('minutes');var hours=makeGetter('hours');var days=makeGetter('days');var months=makeGetter('months');var years=makeGetter('years');function weeks(){return absFloor(this.days()/7);}
var round=Math.round;var thresholds={ss:44,s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture);}
function relativeTime$1(posNegDuration,withoutSuffix,locale){var duration=createDuration(posNegDuration).abs();var seconds=round(duration.as('s'));var minutes=round(duration.as('m'));var hours=round(duration.as('h'));var days=round(duration.as('d'));var months=round(duration.as('M'));var years=round(duration.as('y'));var a=seconds<=thresholds.ss&&['s',seconds]||seconds<thresholds.s&&['ss',seconds]||minutes<=1&&['m']||minutes<thresholds.m&&['mm',minutes]||hours<=1&&['h']||hours<thresholds.h&&['hh',hours]||days<=1&&['d']||days<thresholds.d&&['dd',days]||months<=1&&['M']||months<thresholds.M&&['MM',months]||years<=1&&['y']||['yy',years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a);}
function getSetRelativeTimeRounding(roundingFunction){if(roundingFunction===undefined){return round;}
if(typeof(roundingFunction)==='function'){round=roundingFunction;return true;}
return false;}
function getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false;}
if(limit===undefined){return thresholds[threshold];}
thresholds[threshold]=limit;if(threshold==='s'){thresholds.ss=limit-1;}
return true;}
function humanize(withSuffix){if(!this.isValid()){return this.localeData().invalidDate();}
var locale=this.localeData();var output=relativeTime$1(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output);}
return locale.postformat(output);}
var abs$1=Math.abs;function sign(x){return((x>0)-(x<0))||+x;}
function toISOString$1(){if(!this.isValid()){return this.localeData().invalidDate();}
var seconds=abs$1(this._milliseconds)/1000;var days=abs$1(this._days);var months=abs$1(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds?seconds.toFixed(3).replace(/\.?0+$/,''):'';var total=this.asSeconds();if(!total){return'P0D';}
var totalSign=total<0?'-':'';var ymSign=sign(this._months)!==sign(total)?'-':'';var daysSign=sign(this._days)!==sign(total)?'-':'';var hmsSign=sign(this._milliseconds)!==sign(total)?'-':'';return totalSign+'P'+
(Y?ymSign+Y+'Y':'')+
(M?ymSign+M+'M':'')+
(D?daysSign+D+'D':'')+
((h||m||s)?'T':'')+
(h?hmsSign+h+'H':'')+
(m?hmsSign+m+'M':'')+
(s?hmsSign+s+'S':'');}
var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asQuarters=asQuarters;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',toISOString$1);proto$2.lang=lang;addFormatToken('X',0,0,'unix');addFormatToken('x',0,0,'valueOf');addRegexToken('x',matchSigned);addRegexToken('X',matchTimestamp);addParseToken('X',function(input,array,config){config._d=new Date(parseFloat(input,10)*1000);});addParseToken('x',function(input,array,config){config._d=new Date(toInt(input));});hooks.version='2.24.0';setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:'YYYY-MM-DDTHH:mm',DATETIME_LOCAL_SECONDS:'YYYY-MM-DDTHH:mm:ss',DATETIME_LOCAL_MS:'YYYY-MM-DDTHH:mm:ss.SSS',DATE:'YYYY-MM-DD',TIME:'HH:mm',TIME_SECONDS:'HH:mm:ss',TIME_MS:'HH:mm:ss.SSS',WEEK:'GGGG-[W]WW',MONTH:'YYYY-MM'};return hooks;})));});var FORMATS={datetime:'MMM D, YYYY, h:mm:ss a',millisecond:'h:mm:ss.SSS a',second:'h:mm:ss a',minute:'h:mm a',hour:'hA',day:'MMM D',week:'ll',month:'MMM YYYY',quarter:'[Q]Q - YYYY',year:'YYYY'};core_adapters._date.override(typeof moment==='function'?{_id:'moment',formats:function(){return FORMATS;},parse:function(value,format){if(typeof value==='string'&&typeof format==='string'){value=moment(value,format);}else if(!(value instanceof moment)){value=moment(value);}
return value.isValid()?value.valueOf():null;},format:function(time,format){return moment(time).format(format);},add:function(time,amount,unit){return moment(time).add(amount,unit).valueOf();},diff:function(max,min,unit){return moment.duration(moment(max).diff(moment(min))).as(unit);},startOf:function(time,unit,weekday){time=moment(time);if(unit==='isoWeek'){return time.isoWeekday(weekday).valueOf();}
return time.startOf(unit).valueOf();},endOf:function(time,unit){return moment(time).endOf(unit).valueOf();},_create:function(time){return moment(time);},}:{});core_defaults._set('global',{plugins:{filler:{propagate:true}}});var mappers={dataset:function(source){var index=source.fill;var chart=source.chart;var meta=chart.getDatasetMeta(index);var visible=meta&&chart.isDatasetVisible(index);var points=(visible&&meta.dataset._children)||[];var length=points.length||0;return!length?null:function(point,i){return(i<length&&points[i]._view)||null;};},boundary:function(source){var boundary=source.boundary;var x=boundary?boundary.x:null;var y=boundary?boundary.y:null;return function(point){return{x:x===null?point.x:x,y:y===null?point.y:y,};};}};function decodeFill(el,index,count){var model=el._model||{};var fill=model.fill;var target;if(fill===undefined){fill=!!model.backgroundColor;}
if(fill===false||fill===null){return false;}
if(fill===true){return'origin';}
target=parseFloat(fill,10);if(isFinite(target)&&Math.floor(target)===target){if(fill[0]==='-'||fill[0]==='+'){target=index+target;}
if(target===index||target<0||target>=count){return false;}
return target;}
switch(fill){case'bottom':return'start';case'top':return'end';case'zero':return'origin';case'origin':case'start':case'end':return fill;default:return false;}}
function computeBoundary(source){var model=source.el._model||{};var scale=source.el._scale||{};var fill=source.fill;var target=null;var horizontal;if(isFinite(fill)){return null;}
if(fill==='start'){target=model.scaleBottom===undefined?scale.bottom:model.scaleBottom;}else if(fill==='end'){target=model.scaleTop===undefined?scale.top:model.scaleTop;}else if(model.scaleZero!==undefined){target=model.scaleZero;}else if(scale.getBasePosition){target=scale.getBasePosition();}else if(scale.getBasePixel){target=scale.getBasePixel();}
if(target!==undefined&&target!==null){if(target.x!==undefined&&target.y!==undefined){return target;}
if(helpers$1.isFinite(target)){horizontal=scale.isHorizontal();return{x:horizontal?target:null,y:horizontal?null:target};}}
return null;}
function resolveTarget(sources,index,propagate){var source=sources[index];var fill=source.fill;var visited=[index];var target;if(!propagate){return fill;}
while(fill!==false&&visited.indexOf(fill)===-1){if(!isFinite(fill)){return fill;}
target=sources[fill];if(!target){return false;}
if(target.visible){return fill;}
visited.push(fill);fill=target.fill;}
return false;}
function createMapper(source){var fill=source.fill;var type='dataset';if(fill===false){return null;}
if(!isFinite(fill)){type='boundary';}
return mappers[type](source);}
function isDrawable(point){return point&&!point.skip;}
function drawArea(ctx,curve0,curve1,len0,len1){var i;if(!len0||!len1){return;}
ctx.moveTo(curve0[0].x,curve0[0].y);for(i=1;i<len0;++i){helpers$1.canvas.lineTo(ctx,curve0[i-1],curve0[i]);}
ctx.lineTo(curve1[len1-1].x,curve1[len1-1].y);for(i=len1-1;i>0;--i){helpers$1.canvas.lineTo(ctx,curve1[i],curve1[i-1],true);}}
function doFill(ctx,points,mapper,view,color,loop){var count=points.length;var span=view.spanGaps;var curve0=[];var curve1=[];var len0=0;var len1=0;var i,ilen,index,p0,p1,d0,d1;ctx.beginPath();for(i=0,ilen=(count+!!loop);i<ilen;++i){index=i%count;p0=points[index]._view;p1=mapper(p0,index,view);d0=isDrawable(p0);d1=isDrawable(p1);if(d0&&d1){len0=curve0.push(p0);len1=curve1.push(p1);}else if(len0&&len1){if(!span){drawArea(ctx,curve0,curve1,len0,len1);len0=len1=0;curve0=[];curve1=[];}else{if(d0){curve0.push(p0);}
if(d1){curve1.push(p1);}}}}
drawArea(ctx,curve0,curve1,len0,len1);ctx.closePath();ctx.fillStyle=color;ctx.fill();}
var plugin_filler={id:'filler',afterDatasetsUpdate:function(chart,options){var count=(chart.data.datasets||[]).length;var propagate=options.propagate;var sources=[];var meta,i,el,source;for(i=0;i<count;++i){meta=chart.getDatasetMeta(i);el=meta.dataset;source=null;if(el&&el._model&&el instanceof elements.Line){source={visible:chart.isDatasetVisible(i),fill:decodeFill(el,i,count),chart:chart,el:el};}
meta.$filler=source;sources.push(source);}
for(i=0;i<count;++i){source=sources[i];if(!source){continue;}
source.fill=resolveTarget(sources,i,propagate);source.boundary=computeBoundary(source);source.mapper=createMapper(source);}},beforeDatasetDraw:function(chart,args){var meta=args.meta.$filler;if(!meta){return;}
var ctx=chart.ctx;var el=meta.el;var view=el._view;var points=el._children||[];var mapper=meta.mapper;var color=view.backgroundColor||core_defaults.global.defaultColor;if(mapper&&color&&points.length){helpers$1.canvas.clipArea(ctx,chart.chartArea);doFill(ctx,points,mapper,view,color,el._loop);helpers$1.canvas.unclipArea(ctx);}}};var noop$1=helpers$1.noop;var valueOrDefault$d=helpers$1.valueOrDefault;core_defaults._set('global',{legend:{display:true,position:'top',fullWidth:true,reverse:false,weight:1000,onClick:function(e,legendItem){var index=legendItem.datasetIndex;var ci=this.chart;var meta=ci.getDatasetMeta(index);meta.hidden=meta.hidden===null?!ci.data.datasets[index].hidden:null;ci.update();},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(chart){var data=chart.data;return helpers$1.isArray(data.datasets)?data.datasets.map(function(dataset,i){return{text:dataset.label,fillStyle:(!helpers$1.isArray(dataset.backgroundColor)?dataset.backgroundColor:dataset.backgroundColor[0]),hidden:!chart.isDatasetVisible(i),lineCap:dataset.borderCapStyle,lineDash:dataset.borderDash,lineDashOffset:dataset.borderDashOffset,lineJoin:dataset.borderJoinStyle,lineWidth:dataset.borderWidth,strokeStyle:dataset.borderColor,pointStyle:dataset.pointStyle,datasetIndex:i};},this):[];}}},legendCallback:function(chart){var text=[];text.push('<ul class="'+chart.id+'-legend">');for(var i=0;i<chart.data.datasets.length;i++){text.push('<li><span style="background-color:'+chart.data.datasets[i].backgroundColor+'"></span>');if(chart.data.datasets[i].label){text.push(chart.data.datasets[i].label);}
text.push('</li>');}
text.push('</ul>');return text.join('');}});function getBoxWidth(labelOpts,fontSize){return labelOpts.usePointStyle&&labelOpts.boxWidth>fontSize?fontSize:labelOpts.boxWidth;}
var Legend=core_element.extend({initialize:function(config){helpers$1.extend(this,config);this.legendHitBoxes=[];this._hoveredItem=null;this.doughnutMode=false;},beforeUpdate:noop$1,update:function(maxWidth,maxHeight,margins){var me=this;me.beforeUpdate();me.maxWidth=maxWidth;me.maxHeight=maxHeight;me.margins=margins;me.beforeSetDimensions();me.setDimensions();me.afterSetDimensions();me.beforeBuildLabels();me.buildLabels();me.afterBuildLabels();me.beforeFit();me.fit();me.afterFit();me.afterUpdate();return me.minSize;},afterUpdate:noop$1,beforeSetDimensions:noop$1,setDimensions:function(){var me=this;if(me.isHorizontal()){me.width=me.maxWidth;me.left=0;me.right=me.width;}else{me.height=me.maxHeight;me.top=0;me.bottom=me.height;}
me.paddingLeft=0;me.paddingTop=0;me.paddingRight=0;me.paddingBottom=0;me.minSize={width:0,height:0};},afterSetDimensions:noop$1,beforeBuildLabels:noop$1,buildLabels:function(){var me=this;var labelOpts=me.options.labels||{};var legendItems=helpers$1.callback(labelOpts.generateLabels,[me.chart],me)||[];if(labelOpts.filter){legendItems=legendItems.filter(function(item){return labelOpts.filter(item,me.chart.data);});}
if(me.options.reverse){legendItems.reverse();}
me.legendItems=legendItems;},afterBuildLabels:noop$1,beforeFit:noop$1,fit:function(){var me=this;var opts=me.options;var labelOpts=opts.labels;var display=opts.display;var ctx=me.ctx;var labelFont=helpers$1.options._parseFont(labelOpts);var fontSize=labelFont.size;var hitboxes=me.legendHitBoxes=[];var minSize=me.minSize;var isHorizontal=me.isHorizontal();if(isHorizontal){minSize.width=me.maxWidth;minSize.height=display?10:0;}else{minSize.width=display?10:0;minSize.height=me.maxHeight;}
if(display){ctx.font=labelFont.string;if(isHorizontal){var lineWidths=me.lineWidths=[0];var totalHeight=0;ctx.textAlign='left';ctx.textBaseline='top';helpers$1.each(me.legendItems,function(legendItem,i){var boxWidth=getBoxWidth(labelOpts,fontSize);var width=boxWidth+(fontSize/2)+ctx.measureText(legendItem.text).width;if(i===0||lineWidths[lineWidths.length-1]+width+labelOpts.padding>minSize.width){totalHeight+=fontSize+labelOpts.padding;lineWidths[lineWidths.length-(i>0?0:1)]=labelOpts.padding;}
hitboxes[i]={left:0,top:0,width:width,height:fontSize};lineWidths[lineWidths.length-1]+=width+labelOpts.padding;});minSize.height+=totalHeight;}else{var vPadding=labelOpts.padding;var columnWidths=me.columnWidths=[];var totalWidth=labelOpts.padding;var currentColWidth=0;var currentColHeight=0;var itemHeight=fontSize+vPadding;helpers$1.each(me.legendItems,function(legendItem,i){var boxWidth=getBoxWidth(labelOpts,fontSize);var itemWidth=boxWidth+(fontSize/2)+ctx.measureText(legendItem.text).width;if(i>0&&currentColHeight+itemHeight>minSize.height-vPadding){totalWidth+=currentColWidth+labelOpts.padding;columnWidths.push(currentColWidth);currentColWidth=0;currentColHeight=0;}
currentColWidth=Math.max(currentColWidth,itemWidth);currentColHeight+=itemHeight;hitboxes[i]={left:0,top:0,width:itemWidth,height:fontSize};});totalWidth+=currentColWidth;columnWidths.push(currentColWidth);minSize.width+=totalWidth;}}
me.width=minSize.width;me.height=minSize.height;},afterFit:noop$1,isHorizontal:function(){return this.options.position==='top'||this.options.position==='bottom';},draw:function(){var me=this;var opts=me.options;var labelOpts=opts.labels;var globalDefaults=core_defaults.global;var defaultColor=globalDefaults.defaultColor;var lineDefault=globalDefaults.elements.line;var legendWidth=me.width;var lineWidths=me.lineWidths;if(opts.display){var ctx=me.ctx;var fontColor=valueOrDefault$d(labelOpts.fontColor,globalDefaults.defaultFontColor);var labelFont=helpers$1.options._parseFont(labelOpts);var fontSize=labelFont.size;var cursor;ctx.textAlign='left';ctx.textBaseline='middle';ctx.lineWidth=0.5;ctx.strokeStyle=fontColor;ctx.fillStyle=fontColor;ctx.font=labelFont.string;var boxWidth=getBoxWidth(labelOpts,fontSize);var hitboxes=me.legendHitBoxes;var drawLegendBox=function(x,y,legendItem){if(isNaN(boxWidth)||boxWidth<=0){return;}
ctx.save();var lineWidth=valueOrDefault$d(legendItem.lineWidth,lineDefault.borderWidth);ctx.fillStyle=valueOrDefault$d(legendItem.fillStyle,defaultColor);ctx.lineCap=valueOrDefault$d(legendItem.lineCap,lineDefault.borderCapStyle);ctx.lineDashOffset=valueOrDefault$d(legendItem.lineDashOffset,lineDefault.borderDashOffset);ctx.lineJoin=valueOrDefault$d(legendItem.lineJoin,lineDefault.borderJoinStyle);ctx.lineWidth=lineWidth;ctx.strokeStyle=valueOrDefault$d(legendItem.strokeStyle,defaultColor);if(ctx.setLineDash){ctx.setLineDash(valueOrDefault$d(legendItem.lineDash,lineDefault.borderDash));}
if(opts.labels&&opts.labels.usePointStyle){var radius=boxWidth*Math.SQRT2/2;var centerX=x+boxWidth/2;var centerY=y+fontSize/2;helpers$1.canvas.drawPoint(ctx,legendItem.pointStyle,radius,centerX,centerY);}else{if(lineWidth!==0){ctx.strokeRect(x,y,boxWidth,fontSize);}
ctx.fillRect(x,y,boxWidth,fontSize);}
ctx.restore();};var fillText=function(x,y,legendItem,textWidth){var halfFontSize=fontSize/2;var xLeft=boxWidth+halfFontSize+x;var yMiddle=y+halfFontSize;ctx.fillText(legendItem.text,xLeft,yMiddle);if(legendItem.hidden){ctx.beginPath();ctx.lineWidth=2;ctx.moveTo(xLeft,yMiddle);ctx.lineTo(xLeft+textWidth,yMiddle);ctx.stroke();}};var isHorizontal=me.isHorizontal();if(isHorizontal){cursor={x:me.left+((legendWidth-lineWidths[0])/2)+labelOpts.padding,y:me.top+labelOpts.padding,line:0};}else{cursor={x:me.left+labelOpts.padding,y:me.top+labelOpts.padding,line:0};}
var itemHeight=fontSize+labelOpts.padding;helpers$1.each(me.legendItems,function(legendItem,i){var textWidth=ctx.measureText(legendItem.text).width;var width=boxWidth+(fontSize/2)+textWidth;var x=cursor.x;var y=cursor.y;if(isHorizontal){if(i>0&&x+width+labelOpts.padding>me.left+me.minSize.width){y=cursor.y+=itemHeight;cursor.line++;x=cursor.x=me.left+((legendWidth-lineWidths[cursor.line])/2)+labelOpts.padding;}}else if(i>0&&y+itemHeight>me.top+me.minSize.height){x=cursor.x=x+me.columnWidths[cursor.line]+labelOpts.padding;y=cursor.y=me.top+labelOpts.padding;cursor.line++;}
drawLegendBox(x,y,legendItem);hitboxes[i].left=x;hitboxes[i].top=y;fillText(x,y,legendItem,textWidth);if(isHorizontal){cursor.x+=width+labelOpts.padding;}else{cursor.y+=itemHeight;}});}},_getLegendItemAt:function(x,y){var me=this;var i,hitBox,lh;if(x>=me.left&&x<=me.right&&y>=me.top&&y<=me.bottom){lh=me.legendHitBoxes;for(i=0;i<lh.length;++i){hitBox=lh[i];if(x>=hitBox.left&&x<=hitBox.left+hitBox.width&&y>=hitBox.top&&y<=hitBox.top+hitBox.height){return me.legendItems[i];}}}
return null;},handleEvent:function(e){var me=this;var opts=me.options;var type=e.type==='mouseup'?'click':e.type;var hoveredItem;if(type==='mousemove'){if(!opts.onHover&&!opts.onLeave){return;}}else if(type==='click'){if(!opts.onClick){return;}}else{return;}
hoveredItem=me._getLegendItemAt(e.x,e.y);if(type==='click'){if(hoveredItem&&opts.onClick){opts.onClick.call(me,e.native,hoveredItem);}}else{if(opts.onLeave&&hoveredItem!==me._hoveredItem){if(me._hoveredItem){opts.onLeave.call(me,e.native,me._hoveredItem);}
me._hoveredItem=hoveredItem;}
if(opts.onHover&&hoveredItem){opts.onHover.call(me,e.native,hoveredItem);}}}});function createNewLegendAndAttach(chart,legendOpts){var legend=new Legend({ctx:chart.ctx,options:legendOpts,chart:chart});core_layouts.configure(chart,legend,legendOpts);core_layouts.addBox(chart,legend);chart.legend=legend;}
var plugin_legend={id:'legend',_element:Legend,beforeInit:function(chart){var legendOpts=chart.options.legend;if(legendOpts){createNewLegendAndAttach(chart,legendOpts);}},beforeUpdate:function(chart){var legendOpts=chart.options.legend;var legend=chart.legend;if(legendOpts){helpers$1.mergeIf(legendOpts,core_defaults.global.legend);if(legend){core_layouts.configure(chart,legend,legendOpts);legend.options=legendOpts;}else{createNewLegendAndAttach(chart,legendOpts);}}else if(legend){core_layouts.removeBox(chart,legend);delete chart.legend;}},afterEvent:function(chart,e){var legend=chart.legend;if(legend){legend.handleEvent(e);}}};var noop$2=helpers$1.noop;core_defaults._set('global',{title:{display:false,fontStyle:'bold',fullWidth:true,padding:10,position:'top',text:'',weight:2000}});var Title=core_element.extend({initialize:function(config){var me=this;helpers$1.extend(me,config);me.legendHitBoxes=[];},beforeUpdate:noop$2,update:function(maxWidth,maxHeight,margins){var me=this;me.beforeUpdate();me.maxWidth=maxWidth;me.maxHeight=maxHeight;me.margins=margins;me.beforeSetDimensions();me.setDimensions();me.afterSetDimensions();me.beforeBuildLabels();me.buildLabels();me.afterBuildLabels();me.beforeFit();me.fit();me.afterFit();me.afterUpdate();return me.minSize;},afterUpdate:noop$2,beforeSetDimensions:noop$2,setDimensions:function(){var me=this;if(me.isHorizontal()){me.width=me.maxWidth;me.left=0;me.right=me.width;}else{me.height=me.maxHeight;me.top=0;me.bottom=me.height;}
me.paddingLeft=0;me.paddingTop=0;me.paddingRight=0;me.paddingBottom=0;me.minSize={width:0,height:0};},afterSetDimensions:noop$2,beforeBuildLabels:noop$2,buildLabels:noop$2,afterBuildLabels:noop$2,beforeFit:noop$2,fit:function(){var me=this;var opts=me.options;var display=opts.display;var minSize=me.minSize;var lineCount=helpers$1.isArray(opts.text)?opts.text.length:1;var fontOpts=helpers$1.options._parseFont(opts);var textSize=display?(lineCount*fontOpts.lineHeight)+(opts.padding*2):0;if(me.isHorizontal()){minSize.width=me.maxWidth;minSize.height=textSize;}else{minSize.width=textSize;minSize.height=me.maxHeight;}
me.width=minSize.width;me.height=minSize.height;},afterFit:noop$2,isHorizontal:function(){var pos=this.options.position;return pos==='top'||pos==='bottom';},draw:function(){var me=this;var ctx=me.ctx;var opts=me.options;if(opts.display){var fontOpts=helpers$1.options._parseFont(opts);var lineHeight=fontOpts.lineHeight;var offset=lineHeight/2+opts.padding;var rotation=0;var top=me.top;var left=me.left;var bottom=me.bottom;var right=me.right;var maxWidth,titleX,titleY;ctx.fillStyle=helpers$1.valueOrDefault(opts.fontColor,core_defaults.global.defaultFontColor);ctx.font=fontOpts.string;if(me.isHorizontal()){titleX=left+((right-left)/2);titleY=top+offset;maxWidth=right-left;}else{titleX=opts.position==='left'?left+offset:right-offset;titleY=top+((bottom-top)/2);maxWidth=bottom-top;rotation=Math.PI*(opts.position==='left'?-0.5:0.5);}
ctx.save();ctx.translate(titleX,titleY);ctx.rotate(rotation);ctx.textAlign='center';ctx.textBaseline='middle';var text=opts.text;if(helpers$1.isArray(text)){var y=0;for(var i=0;i<text.length;++i){ctx.fillText(text[i],0,y,maxWidth);y+=lineHeight;}}else{ctx.fillText(text,0,0,maxWidth);}
ctx.restore();}}});function createNewTitleBlockAndAttach(chart,titleOpts){var title=new Title({ctx:chart.ctx,options:titleOpts,chart:chart});core_layouts.configure(chart,title,titleOpts);core_layouts.addBox(chart,title);chart.titleBlock=title;}
var plugin_title={id:'title',_element:Title,beforeInit:function(chart){var titleOpts=chart.options.title;if(titleOpts){createNewTitleBlockAndAttach(chart,titleOpts);}},beforeUpdate:function(chart){var titleOpts=chart.options.title;var titleBlock=chart.titleBlock;if(titleOpts){helpers$1.mergeIf(titleOpts,core_defaults.global.title);if(titleBlock){core_layouts.configure(chart,titleBlock,titleOpts);titleBlock.options=titleOpts;}else{createNewTitleBlockAndAttach(chart,titleOpts);}}else if(titleBlock){core_layouts.removeBox(chart,titleBlock);delete chart.titleBlock;}}};var plugins={};var filler=plugin_filler;var legend=plugin_legend;var title=plugin_title;plugins.filler=filler;plugins.legend=legend;plugins.title=title;core_controller.helpers=helpers$1;core_helpers(core_controller);core_controller._adapters=core_adapters;core_controller.Animation=core_animation;core_controller.animationService=core_animations;core_controller.controllers=controllers;core_controller.DatasetController=core_datasetController;core_controller.defaults=core_defaults;core_controller.Element=core_element;core_controller.elements=elements;core_controller.Interaction=core_interaction;core_controller.layouts=core_layouts;core_controller.platform=platform;core_controller.plugins=core_plugins;core_controller.Scale=core_scale;core_controller.scaleService=core_scaleService;core_controller.Ticks=core_ticks;core_controller.Tooltip=core_tooltip;core_controller.helpers.each(scales,function(scale,type){core_controller.scaleService.registerScaleType(type,scale,scale._defaults);});for(var k in plugins){if(plugins.hasOwnProperty(k)){core_controller.plugins.register(plugins[k]);}}
core_controller.platform.initialize();var src=core_controller;if(typeof window!=='undefined'){window.Chart=core_controller;}
core_controller.Chart=core_controller;core_controller.Legend=plugins.legend._element;core_controller.Title=plugins.title._element;core_controller.pluginService=core_controller.plugins;core_controller.PluginBase=core_controller.Element.extend({});core_controller.canvasHelpers=core_controller.helpers.canvas;core_controller.layoutService=core_controller.layouts;core_controller.LinearScaleBase=scale_linearbase;core_controller.helpers.each(['Bar','Bubble','Doughnut','Line','PolarArea','Radar','Scatter'],function(klass){core_controller[klass]=function(ctx,cfg){return new core_controller(ctx,core_controller.helpers.merge(cfg||{},{type:klass.charAt(0).toLowerCase()+klass.slice(1)}));};});return src;})));;(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):global.moment=factory()}(this,(function(){'use strict';var hookCallback;function hooks(){return hookCallback.apply(null,arguments);}
function setHookCallback(callback){hookCallback=callback;}
function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==='[object Array]';}
function isObject(input){return input!=null&&Object.prototype.toString.call(input)==='[object Object]';}
function isObjectEmpty(obj){if(Object.getOwnPropertyNames){return(Object.getOwnPropertyNames(obj).length===0);}else{var k;for(k in obj){if(obj.hasOwnProperty(k)){return false;}}
return true;}}
function isUndefined(input){return input===void 0;}
function isNumber(input){return typeof input==='number'||Object.prototype.toString.call(input)==='[object Number]';}
function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==='[object Date]';}
function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i));}
return res;}
function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b);}
function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i];}}
if(hasOwnProp(b,'toString')){a.toString=b.toString;}
if(hasOwnProp(b,'valueOf')){a.valueOf=b.valueOf;}
return a;}
function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc();}
function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false};}
function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags();}
return m._pf;}
var some;if(Array.prototype.some){some=Array.prototype.some;}else{some=function(fun){var t=Object(this);var len=t.length>>>0;for(var i=0;i<len;i++){if(i in t&&fun.call(this,t[i],i,t)){return true;}}
return false;};}
function isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);var parsedParts=some.call(flags.parsedDateParts,function(i){return i!=null;});var isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.weekdayMismatch&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||(flags.meridiem&&parsedParts));if(m._strict){isNowValid=isNowValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined;}
if(Object.isFrozen==null||!Object.isFrozen(m)){m._isValid=isNowValid;}
else{return isNowValid;}}
return m._isValid;}
function createInvalid(flags){var m=createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags);}
else{getParsingFlags(m).userInvalidated=true;}
return m;}
var momentProperties=hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject;}
if(!isUndefined(from._i)){to._i=from._i;}
if(!isUndefined(from._f)){to._f=from._f;}
if(!isUndefined(from._l)){to._l=from._l;}
if(!isUndefined(from._strict)){to._strict=from._strict;}
if(!isUndefined(from._tzm)){to._tzm=from._tzm;}
if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC;}
if(!isUndefined(from._offset)){to._offset=from._offset;}
if(!isUndefined(from._pf)){to._pf=getParsingFlags(from);}
if(!isUndefined(from._locale)){to._locale=from._locale;}
if(momentProperties.length>0){for(i=0;i<momentProperties.length;i++){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val;}}}
return to;}
var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN);}
if(updateInProgress===false){updateInProgress=true;hooks.updateOffset(this);updateInProgress=false;}}
function isMoment(obj){return obj instanceof Moment||(obj!=null&&obj._isAMomentObject!=null);}
function absFloor(number){if(number<0){return Math.ceil(number)||0;}else{return Math.floor(number);}}
function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber);}
return value;}
function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if((dontConvert&&array1[i]!==array2[i])||(!dontConvert&&toInt(array1[i])!==toInt(array2[i]))){diffs++;}}
return diffs+lengthDiff;}
function warn(msg){if(hooks.suppressDeprecationWarnings===false&&(typeof console!=='undefined')&&console.warn){console.warn('Deprecation warning: '+msg);}}
function deprecate(msg,fn){var firstTime=true;return extend(function(){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(null,msg);}
if(firstTime){var args=[];var arg;for(var i=0;i<arguments.length;i++){arg='';if(typeof arguments[i]==='object'){arg+='\n['+i+'] ';for(var key in arguments[0]){arg+=key+': '+arguments[0][key]+', ';}
arg=arg.slice(0,-2);}else{arg=arguments[i];}
args.push(arg);}
warn(msg+'\nArguments: '+Array.prototype.slice.call(args).join('')+'\n'+(new Error()).stack);firstTime=false;}
return fn.apply(this,arguments);},fn);}
var deprecations={};function deprecateSimple(name,msg){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(name,msg);}
if(!deprecations[name]){warn(msg);deprecations[name]=true;}}
hooks.suppressDeprecationWarnings=false;hooks.deprecationHandler=null;function isFunction(input){return input instanceof Function||Object.prototype.toString.call(input)==='[object Function]';}
function set(config){var prop,i;for(i in config){prop=config[i];if(isFunction(prop)){this[i]=prop;}else{this['_'+i]=prop;}}
this._config=config;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+
'|'+(/\d{1,2}/).source);}
function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop]);}else if(childConfig[prop]!=null){res[prop]=childConfig[prop];}else{delete res[prop];}}}
for(prop in parentConfig){if(hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])){res[prop]=extend({},res[prop]);}}
return res;}
function Locale(config){if(config!=null){this.set(config);}}
var keys;if(Object.keys){keys=Object.keys;}else{keys=function(obj){var i,res=[];for(i in obj){if(hasOwnProp(obj,i)){res.push(i);}}
return res;};}
var defaultCalendar={sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'};function calendar(key,mom,now){var output=this._calendar[key]||this._calendar['sameElse'];return isFunction(output)?output.call(mom,now):output;}
var defaultLongDateFormat={LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format;}
this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1);});return this._longDateFormat[key];}
var defaultInvalidDate='Invalid date';function invalidDate(){return this._invalidDate;}
var defaultOrdinal='%d';var defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace('%d',number);}
var defaultRelativeTime={future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return(isFunction(output))?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number);}
function pastFuture(diff,output){var format=this._relativeTime[diff>0?'future':'past'];return isFunction(format)?format(output):format.replace(/%s/i,output);}
var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+'s']=aliases[shorthand]=unit;}
function normalizeUnits(units){return typeof units==='string'?aliases[units]||aliases[units.toLowerCase()]:undefined;}
function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop];}}}
return normalizedInput;}
var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority;}
function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj){units.push({unit:u,priority:priorities[u]});}
units.sort(function(a,b){return a.priority-b.priority;});return units;}
function zeroFill(number,targetLength,forceSign){var absNumber=''+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?(forceSign?'+':''):'-')+
Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber;}
var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==='string'){func=function(){return this[callback]();};}
if(token){formatTokenFunctions[token]=func;}
if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2]);};}
if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token);};}}
function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,'');}
return input.replace(/\\/g,'');}
function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]];}else{array[i]=removeFormattingTokens(array[i]);}}
return function(mom){var output='',i;for(i=0;i<length;i++){output+=isFunction(array[i])?array[i].call(mom,format):array[i];}
return output;};}
function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate();}
format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m);}
function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input;}
localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1;}
return format;}
var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match3to4=/\d\d\d\d?/;var match5to6=/\d\d\d\d\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return(isStrict&&strictRegex)?strictRegex:regex;};}
function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token));}
return regexes[token](config._strict,config._locale);}
function unescapeFormat(s){return regexEscape(s.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4;}));}
function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');}
var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==='string'){token=[token];}
if(isNumber(callback)){func=function(input,array){array[callback]=toInt(input);};}
for(i=0;i<token.length;i++){tokens[token[i]]=func;}}
function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token);});}
function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token);}}
var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;var WEEK=7;var WEEKDAY=8;addFormatToken('Y',0,0,function(){var y=this.year();return y<=9999?''+y:'+'+y;});addFormatToken(0,['YY',2],0,function(){return this.year()%100;});addFormatToken(0,['YYYY',4],0,'year');addFormatToken(0,['YYYYY',5],0,'year');addFormatToken(0,['YYYYYY',6,true],0,'year');addUnitAlias('year','y');addUnitPriority('year',1);addRegexToken('Y',matchSigned);addRegexToken('YY',match1to2,match2);addRegexToken('YYYY',match1to4,match4);addRegexToken('YYYYY',match1to6,match6);addRegexToken('YYYYYY',match1to6,match6);addParseToken(['YYYYY','YYYYYY'],YEAR);addParseToken('YYYY',function(input,array){array[YEAR]=input.length===2?hooks.parseTwoDigitYear(input):toInt(input);});addParseToken('YY',function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input);});addParseToken('Y',function(input,array){array[YEAR]=parseInt(input,10);});function daysInYear(year){return isLeapYear(year)?366:365;}
function isLeapYear(year){return(year%4===0&&year%100!==0)||year%400===0;}
hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};var getSetYear=makeGetSet('FullYear',true);function getIsLeapYear(){return isLeapYear(this.year());}
function makeGetSet(unit,keepTime){return function(value){if(value!=null){set$1(this,unit,value);hooks.updateOffset(this,keepTime);return this;}else{return get(this,unit);}};}
function get(mom,unit){return mom.isValid()?mom._d['get'+(mom._isUTC?'UTC':'')+unit]():NaN;}
function set$1(mom,unit,value){if(mom.isValid()&&!isNaN(value)){if(unit==='FullYear'&&isLeapYear(mom.year())&&mom.month()===1&&mom.date()===29){mom._d['set'+(mom._isUTC?'UTC':'')+unit](value,mom.month(),daysInMonth(value,mom.month()));}
else{mom._d['set'+(mom._isUTC?'UTC':'')+unit](value);}}}
function stringGet(units){units=normalizeUnits(units);if(isFunction(this[units])){return this[units]();}
return this;}
function stringSet(units,value){if(typeof units==='object'){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units);for(var i=0;i<prioritized.length;i++){this[prioritized[i].unit](units[prioritized[i].unit]);}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value);}}
return this;}
function mod(n,x){return((n%x)+x)%x;}
var indexOf;if(Array.prototype.indexOf){indexOf=Array.prototype.indexOf;}else{indexOf=function(o){var i;for(i=0;i<this.length;++i){if(this[i]===o){return i;}}
return-1;};}
function daysInMonth(year,month){if(isNaN(year)||isNaN(month)){return NaN;}
var modMonth=mod(month,12);year+=(month-modMonth)/12;return modMonth===1?(isLeapYear(year)?29:28):(31-modMonth%7%2);}
addFormatToken('M',['MM',2],'Mo',function(){return this.month()+1;});addFormatToken('MMM',0,0,function(format){return this.localeData().monthsShort(this,format);});addFormatToken('MMMM',0,0,function(format){return this.localeData().months(this,format);});addUnitAlias('month','M');addUnitPriority('month',8);addRegexToken('M',match1to2);addRegexToken('MM',match1to2,match2);addRegexToken('MMM',function(isStrict,locale){return locale.monthsShortRegex(isStrict);});addRegexToken('MMMM',function(isStrict,locale){return locale.monthsRegex(isStrict);});addParseToken(['M','MM'],function(input,array){array[MONTH]=toInt(input)-1;});addParseToken(['MMM','MMMM'],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month;}else{getParsingFlags(config).invalidMonth=input;}});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var defaultLocaleMonths='January_February_March_April_May_June_July_August_September_October_November_December'.split('_');function localeMonths(m,format){if(!m){return isArray(this._months)?this._months:this._months['standalone'];}
return isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?'format':'standalone'][m.month()];}
var defaultLocaleMonthsShort='Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');function localeMonthsShort(m,format){if(!m){return isArray(this._monthsShort)?this._monthsShort:this._monthsShort['standalone'];}
return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?'format':'standalone'][m.month()];}
function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){mom=createUTC([2000,i]);this._shortMonthsParse[i]=this.monthsShort(mom,'').toLocaleLowerCase();this._longMonthsParse[i]=this.months(mom,'').toLocaleLowerCase();}}
if(strict){if(format==='MMM'){ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null;}}else{if(format==='MMM'){ii=indexOf.call(this._shortMonthsParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._longMonthsParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null;}}}
function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact){return handleStrictParse.call(this,monthName,format,strict);}
if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}
for(i=0;i<12;i++){mom=createUTC([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp('^'+this.months(mom,'').replace('.','')+'$','i');this._shortMonthsParse[i]=new RegExp('^'+this.monthsShort(mom,'').replace('.','')+'$','i');}
if(!strict&&!this._monthsParse[i]){regex='^'+this.months(mom,'')+'|^'+this.monthsShort(mom,'');this._monthsParse[i]=new RegExp(regex.replace('.',''),'i');}
if(strict&&format==='MMMM'&&this._longMonthsParse[i].test(monthName)){return i;}else if(strict&&format==='MMM'&&this._shortMonthsParse[i].test(monthName)){return i;}else if(!strict&&this._monthsParse[i].test(monthName)){return i;}}}
function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom;}
if(typeof value==='string'){if(/^\d+$/.test(value)){value=toInt(value);}else{value=mom.localeData().monthsParse(value);if(!isNumber(value)){return mom;}}}
dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d['set'+(mom._isUTC?'UTC':'')+'Month'](value,dayOfMonth);return mom;}
function getSetMonth(value){if(value!=null){setMonth(this,value);hooks.updateOffset(this,true);return this;}else{return get(this,'Month');}}
function getDaysInMonth(){return daysInMonth(this.year(),this.month());}
var defaultMonthsShortRegex=matchWord;function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,'_monthsRegex')){computeMonthsParse.call(this);}
if(isStrict){return this._monthsShortStrictRegex;}else{return this._monthsShortRegex;}}else{if(!hasOwnProp(this,'_monthsShortRegex')){this._monthsShortRegex=defaultMonthsShortRegex;}
return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex;}}
var defaultMonthsRegex=matchWord;function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,'_monthsRegex')){computeMonthsParse.call(this);}
if(isStrict){return this._monthsStrictRegex;}else{return this._monthsRegex;}}else{if(!hasOwnProp(this,'_monthsRegex')){this._monthsRegex=defaultMonthsRegex;}
return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex;}}
function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length;}
var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=createUTC([2000,i]);shortPieces.push(this.monthsShort(mom,''));longPieces.push(this.months(mom,''));mixedPieces.push(this.months(mom,''));mixedPieces.push(this.monthsShort(mom,''));}
shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);}
for(i=0;i<24;i++){mixedPieces[i]=regexEscape(mixedPieces[i]);}
this._monthsRegex=new RegExp('^('+mixedPieces.join('|')+')','i');this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp('^('+longPieces.join('|')+')','i');this._monthsShortStrictRegex=new RegExp('^('+shortPieces.join('|')+')','i');}
function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<100&&y>=0&&isFinite(date.getFullYear())){date.setFullYear(y);}
return date;}
function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<100&&y>=0&&isFinite(date.getUTCFullYear())){date.setUTCFullYear(y);}
return date;}
function firstWeekOffset(year,dow,doy){var
fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1;}
function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear;}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year);}else{resYear=year;resDayOfYear=dayOfYear;}
return{year:resYear,dayOfYear:resDayOfYear};}
function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy);}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1;}else{resYear=mom.year();resWeek=week;}
return{week:resWeek,year:resYear};}
function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7;}
addFormatToken('w',['ww',2],'wo','week');addFormatToken('W',['WW',2],'Wo','isoWeek');addUnitAlias('week','w');addUnitAlias('isoWeek','W');addUnitPriority('week',5);addUnitPriority('isoWeek',5);addRegexToken('w',match1to2);addRegexToken('ww',match1to2,match2);addRegexToken('W',match1to2);addRegexToken('WW',match1to2,match2);addWeekParseToken(['w','ww','W','WW'],function(input,week,config,token){week[token.substr(0,1)]=toInt(input);});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week;}
var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow;}
function localeFirstDayOfYear(){return this._week.doy;}
function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,'d');}
function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,'d');}
addFormatToken('d',0,'do','day');addFormatToken('dd',0,0,function(format){return this.localeData().weekdaysMin(this,format);});addFormatToken('ddd',0,0,function(format){return this.localeData().weekdaysShort(this,format);});addFormatToken('dddd',0,0,function(format){return this.localeData().weekdays(this,format);});addFormatToken('e',0,0,'weekday');addFormatToken('E',0,0,'isoWeekday');addUnitAlias('day','d');addUnitAlias('weekday','e');addUnitAlias('isoWeekday','E');addUnitPriority('day',11);addUnitPriority('weekday',11);addUnitPriority('isoWeekday',11);addRegexToken('d',match1to2);addRegexToken('e',match1to2);addRegexToken('E',match1to2);addRegexToken('dd',function(isStrict,locale){return locale.weekdaysMinRegex(isStrict);});addRegexToken('ddd',function(isStrict,locale){return locale.weekdaysShortRegex(isStrict);});addRegexToken('dddd',function(isStrict,locale){return locale.weekdaysRegex(isStrict);});addWeekParseToken(['dd','ddd','dddd'],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday;}else{getParsingFlags(config).invalidWeekday=input;}});addWeekParseToken(['d','e','E'],function(input,week,config,token){week[token]=toInt(input);});function parseWeekday(input,locale){if(typeof input!=='string'){return input;}
if(!isNaN(input)){return parseInt(input,10);}
input=locale.weekdaysParse(input);if(typeof input==='number'){return input;}
return null;}
function parseIsoWeekday(input,locale){if(typeof input==='string'){return locale.weekdaysParse(input)%7||7;}
return isNaN(input)?null:input;}
var defaultLocaleWeekdays='Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');function localeWeekdays(m,format){if(!m){return isArray(this._weekdays)?this._weekdays:this._weekdays['standalone'];}
return isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?'format':'standalone'][m.day()];}
var defaultLocaleWeekdaysShort='Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');function localeWeekdaysShort(m){return(m)?this._weekdaysShort[m.day()]:this._weekdaysShort;}
var defaultLocaleWeekdaysMin='Su_Mo_Tu_We_Th_Fr_Sa'.split('_');function localeWeekdaysMin(m){return(m)?this._weekdaysMin[m.day()]:this._weekdaysMin;}
function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){mom=createUTC([2000,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(mom,'').toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(mom,'').toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(mom,'').toLocaleLowerCase();}}
if(strict){if(format==='dddd'){ii=indexOf.call(this._weekdaysParse,llc);return ii!==-1?ii:null;}else if(format==='ddd'){ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}}else{if(format==='dddd'){ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}else if(format==='ddd'){ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._minWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null;}}}
function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact){return handleStrictParse$1.call(this,weekdayName,format,strict);}
if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[];}
for(i=0;i<7;i++){mom=createUTC([2000,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp('^'+this.weekdays(mom,'').replace('.','\.?')+'$','i');this._shortWeekdaysParse[i]=new RegExp('^'+this.weekdaysShort(mom,'').replace('.','\.?')+'$','i');this._minWeekdaysParse[i]=new RegExp('^'+this.weekdaysMin(mom,'').replace('.','\.?')+'$','i');}
if(!this._weekdaysParse[i]){regex='^'+this.weekdays(mom,'')+'|^'+this.weekdaysShort(mom,'')+'|^'+this.weekdaysMin(mom,'');this._weekdaysParse[i]=new RegExp(regex.replace('.',''),'i');}
if(strict&&format==='dddd'&&this._fullWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==='ddd'&&this._shortWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==='dd'&&this._minWeekdaysParse[i].test(weekdayName)){return i;}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i;}}}
function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,'d');}else{return day;}}
function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,'d');}
function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7);}else{return this.day()||7;}}
var defaultWeekdaysRegex=matchWord;function weekdaysRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysStrictRegex;}else{return this._weekdaysRegex;}}else{if(!hasOwnProp(this,'_weekdaysRegex')){this._weekdaysRegex=defaultWeekdaysRegex;}
return this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex;}}
var defaultWeekdaysShortRegex=matchWord;function weekdaysShortRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysShortStrictRegex;}else{return this._weekdaysShortRegex;}}else{if(!hasOwnProp(this,'_weekdaysShortRegex')){this._weekdaysShortRegex=defaultWeekdaysShortRegex;}
return this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;}}
var defaultWeekdaysMinRegex=matchWord;function weekdaysMinRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysMinStrictRegex;}else{return this._weekdaysMinRegex;}}else{if(!hasOwnProp(this,'_weekdaysMinRegex')){this._weekdaysMinRegex=defaultWeekdaysMinRegex;}
return this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;}}
function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length;}
var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++){mom=createUTC([2000,1]).day(i);minp=this.weekdaysMin(mom,'');shortp=this.weekdaysShort(mom,'');longp=this.weekdays(mom,'');minPieces.push(minp);shortPieces.push(shortp);longPieces.push(longp);mixedPieces.push(minp);mixedPieces.push(shortp);mixedPieces.push(longp);}
minPieces.sort(cmpLenRev);shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<7;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);mixedPieces[i]=regexEscape(mixedPieces[i]);}
this._weekdaysRegex=new RegExp('^('+mixedPieces.join('|')+')','i');this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp('^('+longPieces.join('|')+')','i');this._weekdaysShortStrictRegex=new RegExp('^('+shortPieces.join('|')+')','i');this._weekdaysMinStrictRegex=new RegExp('^('+minPieces.join('|')+')','i');}
function hFormat(){return this.hours()%12||12;}
function kFormat(){return this.hours()||24;}
addFormatToken('H',['HH',2],0,'hour');addFormatToken('h',['hh',2],0,hFormat);addFormatToken('k',['kk',2],0,kFormat);addFormatToken('hmm',0,0,function(){return''+hFormat.apply(this)+zeroFill(this.minutes(),2);});addFormatToken('hmmss',0,0,function(){return''+hFormat.apply(this)+zeroFill(this.minutes(),2)+
zeroFill(this.seconds(),2);});addFormatToken('Hmm',0,0,function(){return''+this.hours()+zeroFill(this.minutes(),2);});addFormatToken('Hmmss',0,0,function(){return''+this.hours()+zeroFill(this.minutes(),2)+
zeroFill(this.seconds(),2);});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase);});}
meridiem('a',true);meridiem('A',false);addUnitAlias('hour','h');addUnitPriority('hour',13);function matchMeridiem(isStrict,locale){return locale._meridiemParse;}
addRegexToken('a',matchMeridiem);addRegexToken('A',matchMeridiem);addRegexToken('H',match1to2);addRegexToken('h',match1to2);addRegexToken('k',match1to2);addRegexToken('HH',match1to2,match2);addRegexToken('hh',match1to2,match2);addRegexToken('kk',match1to2,match2);addRegexToken('hmm',match3to4);addRegexToken('hmmss',match5to6);addRegexToken('Hmm',match3to4);addRegexToken('Hmmss',match5to6);addParseToken(['H','HH'],HOUR);addParseToken(['k','kk'],function(input,array,config){var kInput=toInt(input);array[HOUR]=kInput===24?0:kInput;});addParseToken(['a','A'],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input;});addParseToken(['h','hh'],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true;});addParseToken('hmm',function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true;});addParseToken('hmmss',function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true;});addParseToken('Hmm',function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));});addParseToken('Hmmss',function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));});function localeIsPM(input){return((input+'').toLowerCase().charAt(0)==='p');}
var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?'pm':'PM';}else{return isLower?'am':'AM';}}
var getSetHour=makeGetSet('Hours',true);var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse};var locales={};var localeFamilies={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace('_','-'):key;}
function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split('-');j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split('-'):null;while(j>0){locale=loadLocale(split.slice(0,j).join('-'));if(locale){return locale;}
if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break;}
j--;}
i++;}
return globalLocale;}
function loadLocale(name){var oldLocale=null;if(!locales[name]&&(typeof module!=='undefined')&&module&&module.exports){try{oldLocale=globalLocale._abbr;var aliasedRequire=require;aliasedRequire('./locale/'+name);getSetGlobalLocale(oldLocale);}catch(e){}}
return locales[name];}
function getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=getLocale(key);}
else{data=defineLocale(key,values);}
if(data){globalLocale=data;}
else{if((typeof console!=='undefined')&&console.warn){console.warn('Locale '+key+' not found. Did you forget to load it?');}}}
return globalLocale._abbr;}
function defineLocale(name,config){if(config!==null){var locale,parentConfig=baseConfig;config.abbr=name;if(locales[name]!=null){deprecateSimple('defineLocaleOverride','use moment.updateLocale(localeName, config) to change '+
'an existing locale. moment.defineLocale(localeName, '+
'config) should only be used for creating a new locale '+
'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');parentConfig=locales[name]._config;}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){parentConfig=locales[config.parentLocale]._config;}else{locale=loadLocale(config.parentLocale);if(locale!=null){parentConfig=locale._config;}else{if(!localeFamilies[config.parentLocale]){localeFamilies[config.parentLocale]=[];}
localeFamilies[config.parentLocale].push({name:name,config:config});return null;}}}
locales[name]=new Locale(mergeConfigs(parentConfig,config));if(localeFamilies[name]){localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config);});}
getSetGlobalLocale(name);return locales[name];}else{delete locales[name];return null;}}
function updateLocale(name,config){if(config!=null){var locale,tmpLocale,parentConfig=baseConfig;tmpLocale=loadLocale(name);if(tmpLocale!=null){parentConfig=tmpLocale._config;}
config=mergeConfigs(parentConfig,config);locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale;getSetGlobalLocale(name);}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale;}else if(locales[name]!=null){delete locales[name];}}}
return locales[name];}
function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr;}
if(!key){return globalLocale;}
if(!isArray(key)){locale=loadLocale(key);if(locale){return locale;}
key=[key];}
return chooseLocale(key);}
function listLocales(){return keys(locales);}
function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||(a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0))?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE;}
if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK;}
if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY;}
getParsingFlags(m).overflow=overflow;}
return m;}
function defaults(a,b,c){if(a!=null){return a;}
if(b!=null){return b;}
return c;}
function currentDateArray(config){var nowValue=new Date(hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()];}
return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()];}
function configFromArray(config){var i,date,input=[],currentDate,expectedWeekday,yearToUse;if(config._d){return;}
currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config);}
if(config._dayOfYear!=null){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)||config._dayOfYear===0){getParsingFlags(config)._overflowDayOfYear=true;}
date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate();}
for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i];}
for(;i<7;i++){config._a[i]=input[i]=(config._a[i]==null)?(i===2?1:0):config._a[i];}
if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0;}
config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);expectedWeekday=config._useUTC?config._d.getUTCDay():config._d.getDay();if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);}
if(config._nextDay){config._a[HOUR]=24;}
if(config._w&&typeof config._w.d!=='undefined'&&config._w.d!==expectedWeekday){getParsingFlags(config).weekdayMismatch=true;}}
function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true;}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;var curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[YEAR],curWeek.year);week=defaults(w.w,curWeek.week);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true;}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true;}}else{weekday=dow;}}
if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true;}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true;}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear;}}
var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var tzRegex=/Z|[+-]\d\d(?::?\d\d)?/;var isoDates=[['YYYYYY-MM-DD',/[+-]\d{6}-\d\d-\d\d/],['YYYY-MM-DD',/\d{4}-\d\d-\d\d/],['GGGG-[W]WW-E',/\d{4}-W\d\d-\d/],['GGGG-[W]WW',/\d{4}-W\d\d/,false],['YYYY-DDD',/\d{4}-\d{3}/],['YYYY-MM',/\d{4}-\d\d/,false],['YYYYYYMMDD',/[+-]\d{10}/],['YYYYMMDD',/\d{8}/],['GGGG[W]WWE',/\d{4}W\d{3}/],['GGGG[W]WW',/\d{4}W\d{2}/,false],['YYYYDDD',/\d{7}/]];var isoTimes=[['HH:mm:ss.SSSS',/\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss,SSSS',/\d\d:\d\d:\d\d,\d+/],['HH:mm:ss',/\d\d:\d\d:\d\d/],['HH:mm',/\d\d:\d\d/],['HHmmss.SSSS',/\d\d\d\d\d\d\.\d+/],['HHmmss,SSSS',/\d\d\d\d\d\d,\d+/],['HHmmss',/\d\d\d\d\d\d/],['HHmm',/\d\d\d\d/],['HH',/\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break;}}
if(dateFormat==null){config._isValid=false;return;}
if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||' ')+isoTimes[i][0];break;}}
if(timeFormat==null){config._isValid=false;return;}}
if(!allowTime&&timeFormat!=null){config._isValid=false;return;}
if(match[4]){if(tzRegex.exec(match[4])){tzFormat='Z';}else{config._isValid=false;return;}}
config._f=dateFormat+(timeFormat||'')+(tzFormat||'');configFromStringAndFormat(config);}else{config._isValid=false;}}
var rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function extractFromRFC2822Strings(yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){var result=[untruncateYear(yearStr),defaultLocaleMonthsShort.indexOf(monthStr),parseInt(dayStr,10),parseInt(hourStr,10),parseInt(minuteStr,10)];if(secondStr){result.push(parseInt(secondStr,10));}
return result;}
function untruncateYear(yearStr){var year=parseInt(yearStr,10);if(year<=49){return 2000+year;}else if(year<=999){return 1900+year;}
return year;}
function preprocessRFC2822(s){return s.replace(/\([^)]*\)|[\n\t]/g,' ').replace(/(\s\s+)/g,' ').trim();}
function checkWeekday(weekdayStr,parsedInput,config){if(weekdayStr){var weekdayProvided=defaultLocaleWeekdaysShort.indexOf(weekdayStr),weekdayActual=new Date(parsedInput[0],parsedInput[1],parsedInput[2]).getDay();if(weekdayProvided!==weekdayActual){getParsingFlags(config).weekdayMismatch=true;config._isValid=false;return false;}}
return true;}
var obsOffsets={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function calculateOffset(obsOffset,militaryOffset,numOffset){if(obsOffset){return obsOffsets[obsOffset];}else if(militaryOffset){return 0;}else{var hm=parseInt(numOffset,10);var m=hm%100,h=(hm-m)/100;return h*60+m;}}
function configFromRFC2822(config){var match=rfc2822.exec(preprocessRFC2822(config._i));if(match){var parsedArray=extractFromRFC2822Strings(match[4],match[3],match[2],match[5],match[6],match[7]);if(!checkWeekday(match[1],parsedArray,config)){return;}
config._a=parsedArray;config._tzm=calculateOffset(match[8],match[9],match[10]);config._d=createUTCDate.apply(null,config._a);config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);getParsingFlags(config).rfc2822=true;}else{config._isValid=false;}}
function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return;}
configFromISO(config);if(config._isValid===false){delete config._isValid;}else{return;}
configFromRFC2822(config);if(config._isValid===false){delete config._isValid;}else{return;}
hooks.createFromInputFallback(config);}
hooks.createFromInputFallback=deprecate('value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), '+
'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are '+
'discouraged and will be removed in an upcoming major release. Please refer to '+
'http://momentjs.com/guides/#/warnings/js-date/ for more info.',function(config){config._d=new Date(config._i+(config._useUTC?' UTC':''));});hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601){configFromISO(config);return;}
if(config._f===hooks.RFC_2822){configFromRFC2822(config);return;}
config._a=[];getParsingFlags(config).empty=true;var string=''+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped);}
string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length;}
if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false;}
else{getParsingFlags(config).unusedTokens.push(token);}
addTimeToArrayFromToken(token,parsedInput,config);}
else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token);}}
getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string);}
if(config._a[HOUR]<=12&&getParsingFlags(config).bigHour===true&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined;}
getParsingFlags(config).parsedDateParts=config._a.slice(0);getParsingFlags(config).meridiem=config._meridiem;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config);}
function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour;}
if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem);}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12;}
if(!isPm&&hour===12){hour=0;}
return hour;}else{return hour;}}
function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return;}
for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC;}
tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!isValid(tempConfig)){continue;}
currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig;}}
extend(config,bestMoment||tempConfig);}
function configFromObject(config){if(config._d){return;}
var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10);});configFromArray(config);}
function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,'d');res._nextDay=undefined;}
return res;}
function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||getLocale(config._l);if(input===null||(format===undefined&&input==='')){return createInvalid({nullInput:true});}
if(typeof input==='string'){config._i=input=config._locale.preparse(input);}
if(isMoment(input)){return new Moment(checkOverflow(input));}else if(isDate(input)){config._d=input;}else if(isArray(format)){configFromStringAndArray(config);}else if(format){configFromStringAndFormat(config);}else{configFromInput(config);}
if(!isValid(config)){config._d=null;}
return config;}
function configFromInput(config){var input=config._i;if(isUndefined(input)){config._d=new Date(hooks.now());}else if(isDate(input)){config._d=new Date(input.valueOf());}else if(typeof input==='string'){configFromString(config);}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10);});configFromArray(config);}else if(isObject(input)){configFromObject(config);}else if(isNumber(input)){config._d=new Date(input);}else{hooks.createFromInputFallback(config);}}
function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(locale===true||locale===false){strict=locale;locale=undefined;}
if((isObject(input)&&isObjectEmpty(input))||(isArray(input)&&input.length===0)){input=undefined;}
c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c);}
function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false);}
var prototypeMin=deprecate('moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other;}else{return createInvalid();}});var prototypeMax=deprecate('moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other;}else{return createInvalid();}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0];}
if(!moments.length){return createLocal();}
res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i];}}
return res;}
function min(){var args=[].slice.call(arguments,0);return pickBy('isBefore',args);}
function max(){var args=[].slice.call(arguments,0);return pickBy('isAfter',args);}
var now=function(){return Date.now?Date.now():+(new Date());};var ordering=['year','quarter','month','week','day','hour','minute','second','millisecond'];function isDurationValid(m){for(var key in m){if(!(indexOf.call(ordering,key)!==-1&&(m[key]==null||!isNaN(m[key])))){return false;}}
var unitHasDecimal=false;for(var i=0;i<ordering.length;++i){if(m[ordering[i]]){if(unitHasDecimal){return false;}
if(parseFloat(m[ordering[i]])!==toInt(m[ordering[i]])){unitHasDecimal=true;}}}
return true;}
function isValid$1(){return this._isValid;}
function createInvalid$1(){return createDuration(NaN);}
function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._isValid=isDurationValid(normalizedInput);this._milliseconds=+milliseconds+
seconds*1e3+
minutes*6e4+
hours*1000*60*60;this._days=+days+
weeks*7;this._months=+months+
quarters*3+
years*12;this._data={};this._locale=getLocale();this._bubble();}
function isDuration(obj){return obj instanceof Duration;}
function absRound(number){if(number<0){return Math.round(-1*number)*-1;}else{return Math.round(number);}}
function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign='+';if(offset<0){offset=-offset;sign='-';}
return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~(offset)%60,2);});}
offset('Z',':');offset('ZZ','');addRegexToken('Z',matchShortOffset);addRegexToken('ZZ',matchShortOffset);addParseToken(['Z','ZZ'],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input);});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||'').match(matcher);if(matches===null){return null;}
var chunk=matches[matches.length-1]||[];var parts=(chunk+'').match(chunkOffset)||['-',0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return minutes===0?0:parts[0]==='+'?minutes:-minutes;}
function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf();res._d.setTime(res._d.valueOf()+diff);hooks.updateOffset(res,false);return res;}else{return createLocal(input).local();}}
function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15;}
hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime,keepMinutes){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN;}
if(input!=null){if(typeof input==='string'){input=offsetFromString(matchShortOffset,input);if(input===null){return this;}}else if(Math.abs(input)<16&&!keepMinutes){input=input*60;}
if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this);}
this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,'m');}
if(offset!==input){if(!keepLocalTime||this._changeInProgress){addSubtract(this,createDuration(input-offset,'m'),1,false);}else if(!this._changeInProgress){this._changeInProgress=true;hooks.updateOffset(this,true);this._changeInProgress=null;}}
return this;}else{return this._isUTC?offset:getDateOffset(this);}}
function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=='string'){input=-input;}
this.utcOffset(input,keepLocalTime);return this;}else{return-this.utcOffset();}}
function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime);}
function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),'m');}}
return this;}
function setOffsetToParsedOffset(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true);}else if(typeof this._i==='string'){var tZone=offsetFromString(matchOffset,this._i);if(tZone!=null){this.utcOffset(tZone);}
else{this.utcOffset(0,true);}}
return this;}
function hasAlignedHourOffset(input){if(!this.isValid()){return false;}
input=input?createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0;}
function isDaylightSavingTime(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());}
function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted;}
var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0;}else{this._isDSTShifted=false;}
return this._isDSTShifted;}
function isLocal(){return this.isValid()?!this._isUTC:false;}
function isUtcOffset(){return this.isValid()?this._isUTC:false;}
function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false;}
var aspNetRegex=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months};}else if(isNumber(input)){duration={};if(key){duration[key]=input;}else{duration.milliseconds=input;}}else if(!!(match=aspNetRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(match[MILLISECOND]*1000))*sign};}else if(!!(match=isoRegex.exec(input))){sign=(match[1]==='-')?-1:(match[1]==='+')?1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)};}else if(duration==null){duration={};}else if(typeof duration==='object'&&('from'in duration||'to'in duration)){diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months;}
ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,'_locale')){ret._locale=input._locale;}
return ret;}
createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(',','.'));return(isNaN(res)?0:res)*sign;}
function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+
(other.year()-base.year())*12;if(base.clone().add(res.months,'M').isAfter(other)){--res.months;}
res.milliseconds=+other-+(base.clone().add(res.months,'M'));return res;}
function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0};}
other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other);}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}
return res;}
function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,'moment().'+name+'(period, number) is deprecated. Please use moment().'+name+'(number, period). '+
'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');tmp=val;val=period;period=tmp;}
val=typeof val==='string'?+val:val;dur=createDuration(val,period);addSubtract(this,dur,direction);return this;};}
function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return;}
updateOffset=updateOffset==null?true:updateOffset;if(months){setMonth(mom,get(mom,'Month')+months*isAdding);}
if(days){set$1(mom,'Date',get(mom,'Date')+days*isAdding);}
if(milliseconds){mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding);}
if(updateOffset){hooks.updateOffset(mom,days||months);}}
var add=createAdder(1,'add');var subtract=createAdder(-1,'subtract');function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,'days',true);return diff<-6?'sameElse':diff<-1?'lastWeek':diff<0?'lastDay':diff<1?'sameDay':diff<2?'nextDay':diff<7?'nextWeek':'sameElse';}
function calendar$1(time,formats){var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf('day'),format=hooks.calendarFormat(this,sod)||'sameElse';var output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)));}
function clone(){return new Moment(this);}
function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(!isUndefined(units)?units:'millisecond');if(units==='millisecond'){return this.valueOf()>localInput.valueOf();}else{return localInput.valueOf()<this.clone().startOf(units).valueOf();}}
function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(!isUndefined(units)?units:'millisecond');if(units==='millisecond'){return this.valueOf()<localInput.valueOf();}else{return this.clone().endOf(units).valueOf()<localInput.valueOf();}}
function isBetween(from,to,units,inclusivity){inclusivity=inclusivity||'()';return(inclusivity[0]==='('?this.isAfter(from,units):!this.isBefore(from,units))&&(inclusivity[1]===')'?this.isBefore(to,units):!this.isAfter(to,units));}
function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(units||'millisecond');if(units==='millisecond'){return this.valueOf()===localInput.valueOf();}else{inputMs=localInput.valueOf();return this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf();}}
function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units);}
function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units);}
function diff(input,units,asFloat){var that,zoneDelta,output;if(!this.isValid()){return NaN;}
that=cloneWithOffset(input,this);if(!that.isValid()){return NaN;}
zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);switch(units){case'year':output=monthDiff(this,that)/12;break;case'month':output=monthDiff(this,that);break;case'quarter':output=monthDiff(this,that)/3;break;case'second':output=(this-that)/1e3;break;case'minute':output=(this-that)/6e4;break;case'hour':output=(this-that)/36e5;break;case'day':output=(this-that-zoneDelta)/864e5;break;case'week':output=(this-that-zoneDelta)/6048e5;break;default:output=this-that;}
return asFloat?output:absFloor(output);}
function monthDiff(a,b){var wholeMonthDiff=((b.year()-a.year())*12)+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,'months'),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,'months');adjust=(b-anchor)/(anchor-anchor2);}else{anchor2=a.clone().add(wholeMonthDiff+1,'months');adjust=(b-anchor)/(anchor2-anchor);}
return-(wholeMonthDiff+adjust)||0;}
hooks.defaultFormat='YYYY-MM-DDTHH:mm:ssZ';hooks.defaultFormatUtc='YYYY-MM-DDTHH:mm:ss[Z]';function toString(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');}
function toISOString(keepOffset){if(!this.isValid()){return null;}
var utc=keepOffset!==true;var m=utc?this.clone().utc():this;if(m.year()<0||m.year()>9999){return formatMoment(m,utc?'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]':'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ');}
if(isFunction(Date.prototype.toISOString)){if(utc){return this.toDate().toISOString();}else{return new Date(this.valueOf()+this.utcOffset()*60*1000).toISOString().replace('Z',formatMoment(m,'Z'));}}
return formatMoment(m,utc?'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]':'YYYY-MM-DD[T]HH:mm:ss.SSSZ');}
function inspect(){if(!this.isValid()){return'moment.invalid(/* '+this._i+' */)';}
var func='moment';var zone='';if(!this.isLocal()){func=this.utcOffset()===0?'moment.utc':'moment.parseZone';zone='Z';}
var prefix='['+func+'("]';var year=(0<=this.year()&&this.year()<=9999)?'YYYY':'YYYYYY';var datetime='-MM-DD[T]HH:mm:ss.SSS';var suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix);}
function format(inputString){if(!inputString){inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat;}
var output=formatMoment(this,inputString);return this.localeData().postformat(output);}
function from(time,withoutSuffix){if(this.isValid()&&((isMoment(time)&&time.isValid())||createLocal(time).isValid())){return createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}
function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix);}
function to(time,withoutSuffix){if(this.isValid()&&((isMoment(time)&&time.isValid())||createLocal(time).isValid())){return createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}
function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix);}
function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr;}else{newLocaleData=getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData;}
return this;}}
var lang=deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(key){if(key===undefined){return this.localeData();}else{return this.locale(key);}});function localeData(){return this._locale;}
function startOf(units){units=normalizeUnits(units);switch(units){case'year':this.month(0);case'quarter':case'month':this.date(1);case'week':case'isoWeek':case'day':case'date':this.hours(0);case'hour':this.minutes(0);case'minute':this.seconds(0);case'second':this.milliseconds(0);}
if(units==='week'){this.weekday(0);}
if(units==='isoWeek'){this.isoWeekday(1);}
if(units==='quarter'){this.month(Math.floor(this.month()/3)*3);}
return this;}
function endOf(units){units=normalizeUnits(units);if(units===undefined||units==='millisecond'){return this;}
if(units==='date'){units='day';}
return this.startOf(units).add(1,(units==='isoWeek'?'week':units)).subtract(1,'ms');}
function valueOf(){return this._d.valueOf()-((this._offset||0)*60000);}
function unix(){return Math.floor(this.valueOf()/1000);}
function toDate(){return new Date(this.valueOf());}
function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()];}
function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()};}
function toJSON(){return this.isValid()?this.toISOString():null;}
function isValid$2(){return isValid(this);}
function parsingFlags(){return extend({},getParsingFlags(this));}
function invalidAt(){return getParsingFlags(this).overflow;}
function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict};}
addFormatToken(0,['gg',2],0,function(){return this.weekYear()%100;});addFormatToken(0,['GG',2],0,function(){return this.isoWeekYear()%100;});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter);}
addWeekYearFormatToken('gggg','weekYear');addWeekYearFormatToken('ggggg','weekYear');addWeekYearFormatToken('GGGG','isoWeekYear');addWeekYearFormatToken('GGGGG','isoWeekYear');addUnitAlias('weekYear','gg');addUnitAlias('isoWeekYear','GG');addUnitPriority('weekYear',1);addUnitPriority('isoWeekYear',1);addRegexToken('G',matchSigned);addRegexToken('g',matchSigned);addRegexToken('GG',match1to2,match2);addRegexToken('gg',match1to2,match2);addRegexToken('GGGG',match1to4,match4);addRegexToken('gggg',match1to4,match4);addRegexToken('GGGGG',match1to6,match6);addRegexToken('ggggg',match1to6,match6);addWeekParseToken(['gggg','ggggg','GGGG','GGGGG'],function(input,week,config,token){week[token.substr(0,2)]=toInt(input);});addWeekParseToken(['gg','GG'],function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input);});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy);}
function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4);}
function getISOWeeksInYear(){return weeksInYear(this.year(),1,4);}
function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy);}
function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year;}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget;}
return setWeekAll.call(this,input,week,weekday,dow,doy);}}
function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this;}
addFormatToken('Q',0,'Qo','quarter');addUnitAlias('quarter','Q');addUnitPriority('quarter',7);addRegexToken('Q',match1);addParseToken('Q',function(input,array){array[MONTH]=(toInt(input)-1)*3;});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);}
addFormatToken('D',['DD',2],'Do','date');addUnitAlias('date','D');addUnitPriority('date',9);addRegexToken('D',match1to2);addRegexToken('DD',match1to2,match2);addRegexToken('Do',function(isStrict,locale){return isStrict?(locale._dayOfMonthOrdinalParse||locale._ordinalParse):locale._dayOfMonthOrdinalParseLenient;});addParseToken(['D','DD'],DATE);addParseToken('Do',function(input,array){array[DATE]=toInt(input.match(match1to2)[0]);});var getSetDayOfMonth=makeGetSet('Date',true);addFormatToken('DDD',['DDDD',3],'DDDo','dayOfYear');addUnitAlias('dayOfYear','DDD');addUnitPriority('dayOfYear',4);addRegexToken('DDD',match1to3);addRegexToken('DDDD',match3);addParseToken(['DDD','DDDD'],function(input,array,config){config._dayOfYear=toInt(input);});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return input==null?dayOfYear:this.add((input-dayOfYear),'d');}
addFormatToken('m',['mm',2],0,'minute');addUnitAlias('minute','m');addUnitPriority('minute',14);addRegexToken('m',match1to2);addRegexToken('mm',match1to2,match2);addParseToken(['m','mm'],MINUTE);var getSetMinute=makeGetSet('Minutes',false);addFormatToken('s',['ss',2],0,'second');addUnitAlias('second','s');addUnitPriority('second',15);addRegexToken('s',match1to2);addRegexToken('ss',match1to2,match2);addParseToken(['s','ss'],SECOND);var getSetSecond=makeGetSet('Seconds',false);addFormatToken('S',0,0,function(){return~~(this.millisecond()/100);});addFormatToken(0,['SS',2],0,function(){return~~(this.millisecond()/10);});addFormatToken(0,['SSS',3],0,'millisecond');addFormatToken(0,['SSSS',4],0,function(){return this.millisecond()*10;});addFormatToken(0,['SSSSS',5],0,function(){return this.millisecond()*100;});addFormatToken(0,['SSSSSS',6],0,function(){return this.millisecond()*1000;});addFormatToken(0,['SSSSSSS',7],0,function(){return this.millisecond()*10000;});addFormatToken(0,['SSSSSSSS',8],0,function(){return this.millisecond()*100000;});addFormatToken(0,['SSSSSSSSS',9],0,function(){return this.millisecond()*1000000;});addUnitAlias('millisecond','ms');addUnitPriority('millisecond',16);addRegexToken('S',match1to3,match1);addRegexToken('SS',match1to3,match2);addRegexToken('SSS',match1to3,match3);var token;for(token='SSSS';token.length<=9;token+='S'){addRegexToken(token,matchUnsigned);}
function parseMs(input,array){array[MILLISECOND]=toInt(('0.'+input)*1000);}
for(token='S';token.length<=9;token+='S'){addParseToken(token,parseMs);}
var getSetMillisecond=makeGetSet('Milliseconds',false);addFormatToken('z',0,0,'zoneAbbr');addFormatToken('zz',0,0,'zoneName');function getZoneAbbr(){return this._isUTC?'UTC':'';}
function getZoneName(){return this._isUTC?'Coordinated Universal Time':'';}
var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate('dates accessor is deprecated. Use date instead.',getSetDayOfMonth);proto.months=deprecate('months accessor is deprecated. Use month instead',getSetMonth);proto.years=deprecate('years accessor is deprecated. Use year instead',getSetYear);proto.zone=deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',getSetZone);proto.isDSTShifted=deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',isDaylightSavingTimeShifted);function createUnix(input){return createLocal(input*1000);}
function createInZone(){return createLocal.apply(null,arguments).parseZone();}
function preParsePostFormat(string){return string;}
var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(format,index,field,setter){var locale=getLocale();var utc=createUTC().set(setter,index);return locale[field](utc,format);}
function listMonthsImpl(format,index,field){if(isNumber(format)){index=format;format=undefined;}
format=format||'';if(index!=null){return get$1(format,index,field,'month');}
var i;var out=[];for(i=0;i<12;i++){out[i]=get$1(format,i,field,'month');}
return out;}
function listWeekdaysImpl(localeSorted,format,index,field){if(typeof localeSorted==='boolean'){if(isNumber(format)){index=format;format=undefined;}
format=format||'';}else{format=localeSorted;index=format;localeSorted=false;if(isNumber(format)){index=format;format=undefined;}
format=format||'';}
var locale=getLocale(),shift=localeSorted?locale._week.dow:0;if(index!=null){return get$1(format,(index+shift)%7,field,'day');}
var i;var out=[];for(i=0;i<7;i++){out[i]=get$1(format,(i+shift)%7,field,'day');}
return out;}
function listMonths(format,index){return listMonthsImpl(format,index,'months');}
function listMonthsShort(format,index){return listMonthsImpl(format,index,'monthsShort');}
function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdays');}
function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdaysShort');}
function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdaysMin');}
getSetGlobalLocale('en',{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=(toInt(number%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';return number+output;}});hooks.lang=deprecate('moment.lang is deprecated. Use moment.locale instead.',getSetGlobalLocale);hooks.langData=deprecate('moment.langData is deprecated. Use moment.localeData instead.',getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this;}
function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble();}
function add$1(input,value){return addSubtract$1(this,input,value,1);}
function subtract$1(input,value){return addSubtract$1(this,input,value,-1);}
function absCeil(number){if(number<0){return Math.floor(number);}else{return Math.ceil(number);}}
function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!((milliseconds>=0&&days>=0&&months>=0)||(milliseconds<=0&&days<=0&&months<=0))){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0;}
data.milliseconds=milliseconds%1000;seconds=absFloor(milliseconds/1000);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this;}
function daysToMonths(days){return days*4800/146097;}
function monthsToDays(months){return months*146097/4800;}
function as(units){if(!this.isValid()){return NaN;}
var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==='month'||units==='year'){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);return units==='month'?months:months/12;}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case'week':return days/7+milliseconds/6048e5;case'day':return days+milliseconds/864e5;case'hour':return days*24+milliseconds/36e5;case'minute':return days*1440+milliseconds/6e4;case'second':return days*86400+milliseconds/1000;case'millisecond':return Math.floor(days*864e5)+milliseconds;default:throw new Error('Unknown unit '+units);}}}
function valueOf$1(){if(!this.isValid()){return NaN;}
return(this._milliseconds+
this._days*864e5+
(this._months%12)*2592e6+
toInt(this._months/12)*31536e6);}
function makeAs(alias){return function(){return this.as(alias);};}
var asMilliseconds=makeAs('ms');var asSeconds=makeAs('s');var asMinutes=makeAs('m');var asHours=makeAs('h');var asDays=makeAs('d');var asWeeks=makeAs('w');var asMonths=makeAs('M');var asYears=makeAs('y');function clone$1(){return createDuration(this);}
function get$2(units){units=normalizeUnits(units);return this.isValid()?this[units+'s']():NaN;}
function makeGetter(name){return function(){return this.isValid()?this._data[name]:NaN;};}
var milliseconds=makeGetter('milliseconds');var seconds=makeGetter('seconds');var minutes=makeGetter('minutes');var hours=makeGetter('hours');var days=makeGetter('days');var months=makeGetter('months');var years=makeGetter('years');function weeks(){return absFloor(this.days()/7);}
var round=Math.round;var thresholds={ss:44,s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture);}
function relativeTime$1(posNegDuration,withoutSuffix,locale){var duration=createDuration(posNegDuration).abs();var seconds=round(duration.as('s'));var minutes=round(duration.as('m'));var hours=round(duration.as('h'));var days=round(duration.as('d'));var months=round(duration.as('M'));var years=round(duration.as('y'));var a=seconds<=thresholds.ss&&['s',seconds]||seconds<thresholds.s&&['ss',seconds]||minutes<=1&&['m']||minutes<thresholds.m&&['mm',minutes]||hours<=1&&['h']||hours<thresholds.h&&['hh',hours]||days<=1&&['d']||days<thresholds.d&&['dd',days]||months<=1&&['M']||months<thresholds.M&&['MM',months]||years<=1&&['y']||['yy',years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a);}
function getSetRelativeTimeRounding(roundingFunction){if(roundingFunction===undefined){return round;}
if(typeof(roundingFunction)==='function'){round=roundingFunction;return true;}
return false;}
function getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false;}
if(limit===undefined){return thresholds[threshold];}
thresholds[threshold]=limit;if(threshold==='s'){thresholds.ss=limit-1;}
return true;}
function humanize(withSuffix){if(!this.isValid()){return this.localeData().invalidDate();}
var locale=this.localeData();var output=relativeTime$1(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output);}
return locale.postformat(output);}
var abs$1=Math.abs;function sign(x){return((x>0)-(x<0))||+x;}
function toISOString$1(){if(!this.isValid()){return this.localeData().invalidDate();}
var seconds=abs$1(this._milliseconds)/1000;var days=abs$1(this._days);var months=abs$1(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds?seconds.toFixed(3).replace(/\.?0+$/,''):'';var total=this.asSeconds();if(!total){return'P0D';}
var totalSign=total<0?'-':'';var ymSign=sign(this._months)!==sign(total)?'-':'';var daysSign=sign(this._days)!==sign(total)?'-':'';var hmsSign=sign(this._milliseconds)!==sign(total)?'-':'';return totalSign+'P'+
(Y?ymSign+Y+'Y':'')+
(M?ymSign+M+'M':'')+
(D?daysSign+D+'D':'')+
((h||m||s)?'T':'')+
(h?hmsSign+h+'H':'')+
(m?hmsSign+m+'M':'')+
(s?hmsSign+s+'S':'');}
var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',toISOString$1);proto$2.lang=lang;addFormatToken('X',0,0,'unix');addFormatToken('x',0,0,'valueOf');addRegexToken('x',matchSigned);addRegexToken('X',matchTimestamp);addParseToken('X',function(input,array,config){config._d=new Date(parseFloat(input,10)*1000);});addParseToken('x',function(input,array,config){config._d=new Date(toInt(input));});hooks.version='2.21.0';setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:'YYYY-MM-DDTHH:mm',DATETIME_LOCAL_SECONDS:'YYYY-MM-DDTHH:mm:ss',DATETIME_LOCAL_MS:'YYYY-MM-DDTHH:mm:ss.SSS',DATE:'YYYY-MM-DD',TIME:'HH:mm',TIME_SECONDS:'HH:mm:ss',TIME_MS:'HH:mm:ss.SSS',WEEK:'YYYY-[W]WW',MONTH:'YYYY-MM'};return hooks;})));(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.jsyaml=f()}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){'use strict';var loader=require('./js-yaml/loader');var dumper=require('./js-yaml/dumper');function deprecated(name){return function(){throw new Error('Function '+name+' is deprecated and cannot be used.');};}
module.exports.Type=require('./js-yaml/type');module.exports.Schema=require('./js-yaml/schema');module.exports.FAILSAFE_SCHEMA=require('./js-yaml/schema/failsafe');module.exports.JSON_SCHEMA=require('./js-yaml/schema/json');module.exports.CORE_SCHEMA=require('./js-yaml/schema/core');module.exports.DEFAULT_SAFE_SCHEMA=require('./js-yaml/schema/default_safe');module.exports.DEFAULT_FULL_SCHEMA=require('./js-yaml/schema/default_full');module.exports.load=loader.load;module.exports.loadAll=loader.loadAll;module.exports.safeLoad=loader.safeLoad;module.exports.safeLoadAll=loader.safeLoadAll;module.exports.dump=dumper.dump;module.exports.safeDump=dumper.safeDump;module.exports.YAMLException=require('./js-yaml/exception');module.exports.MINIMAL_SCHEMA=require('./js-yaml/schema/failsafe');module.exports.SAFE_SCHEMA=require('./js-yaml/schema/default_safe');module.exports.DEFAULT_SCHEMA=require('./js-yaml/schema/default_full');module.exports.scan=deprecated('scan');module.exports.parse=deprecated('parse');module.exports.compose=deprecated('compose');module.exports.addConstructor=deprecated('addConstructor');},{"./js-yaml/dumper":3,"./js-yaml/exception":4,"./js-yaml/loader":5,"./js-yaml/schema":7,"./js-yaml/schema/core":8,"./js-yaml/schema/default_full":9,"./js-yaml/schema/default_safe":10,"./js-yaml/schema/failsafe":11,"./js-yaml/schema/json":12,"./js-yaml/type":13}],2:[function(require,module,exports){'use strict';function isNothing(subject){return(typeof subject==='undefined')||(subject===null);}
function isObject(subject){return(typeof subject==='object')&&(subject!==null);}
function toArray(sequence){if(Array.isArray(sequence))return sequence;else if(isNothing(sequence))return[];return[sequence];}
function extend(target,source){var index,length,key,sourceKeys;if(source){sourceKeys=Object.keys(source);for(index=0,length=sourceKeys.length;index<length;index+=1){key=sourceKeys[index];target[key]=source[key];}}
return target;}
function repeat(string,count){var result='',cycle;for(cycle=0;cycle<count;cycle+=1){result+=string;}
return result;}
function isNegativeZero(number){return(number===0)&&(Number.NEGATIVE_INFINITY===1/number);}
module.exports.isNothing=isNothing;module.exports.isObject=isObject;module.exports.toArray=toArray;module.exports.repeat=repeat;module.exports.isNegativeZero=isNegativeZero;module.exports.extend=extend;},{}],3:[function(require,module,exports){'use strict';var common=require('./common');var YAMLException=require('./exception');var DEFAULT_FULL_SCHEMA=require('./schema/default_full');var DEFAULT_SAFE_SCHEMA=require('./schema/default_safe');var _toString=Object.prototype.toString;var _hasOwnProperty=Object.prototype.hasOwnProperty;var CHAR_TAB=0x09;var CHAR_LINE_FEED=0x0A;var CHAR_SPACE=0x20;var CHAR_EXCLAMATION=0x21;var CHAR_DOUBLE_QUOTE=0x22;var CHAR_SHARP=0x23;var CHAR_PERCENT=0x25;var CHAR_AMPERSAND=0x26;var CHAR_SINGLE_QUOTE=0x27;var CHAR_ASTERISK=0x2A;var CHAR_COMMA=0x2C;var CHAR_MINUS=0x2D;var CHAR_COLON=0x3A;var CHAR_GREATER_THAN=0x3E;var CHAR_QUESTION=0x3F;var CHAR_COMMERCIAL_AT=0x40;var CHAR_LEFT_SQUARE_BRACKET=0x5B;var CHAR_RIGHT_SQUARE_BRACKET=0x5D;var CHAR_GRAVE_ACCENT=0x60;var CHAR_LEFT_CURLY_BRACKET=0x7B;var CHAR_VERTICAL_LINE=0x7C;var CHAR_RIGHT_CURLY_BRACKET=0x7D;var ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0x00]='\\0';ESCAPE_SEQUENCES[0x07]='\\a';ESCAPE_SEQUENCES[0x08]='\\b';ESCAPE_SEQUENCES[0x09]='\\t';ESCAPE_SEQUENCES[0x0A]='\\n';ESCAPE_SEQUENCES[0x0B]='\\v';ESCAPE_SEQUENCES[0x0C]='\\f';ESCAPE_SEQUENCES[0x0D]='\\r';ESCAPE_SEQUENCES[0x1B]='\\e';ESCAPE_SEQUENCES[0x22]='\\"';ESCAPE_SEQUENCES[0x5C]='\\\\';ESCAPE_SEQUENCES[0x85]='\\N';ESCAPE_SEQUENCES[0xA0]='\\_';ESCAPE_SEQUENCES[0x2028]='\\L';ESCAPE_SEQUENCES[0x2029]='\\P';var DEPRECATED_BOOLEANS_SYNTAX=['y','Y','yes','Yes','YES','on','On','ON','n','N','no','No','NO','off','Off','OFF'];function compileStyleMap(schema,map){var result,keys,index,length,tag,style,type;if(map===null)return{};result={};keys=Object.keys(map);for(index=0,length=keys.length;index<length;index+=1){tag=keys[index];style=String(map[tag]);if(tag.slice(0,2)==='!!'){tag='tag:yaml.org,2002:'+tag.slice(2);}
type=schema.compiledTypeMap[tag];if(type&&_hasOwnProperty.call(type.styleAliases,style)){style=type.styleAliases[style];}
result[tag]=style;}
return result;}
function encodeHex(character){var string,handle,length;string=character.toString(16).toUpperCase();if(character<=0xFF){handle='x';length=2;}else if(character<=0xFFFF){handle='u';length=4;}else if(character<=0xFFFFFFFF){handle='U';length=8;}else{throw new YAMLException('code point within a string may not be greater than 0xFFFFFFFF');}
return'\\'+handle+common.repeat('0',length-string.length)+string;}
function State(options){this.schema=options['schema']||DEFAULT_FULL_SCHEMA;this.indent=Math.max(1,(options['indent']||2));this.skipInvalid=options['skipInvalid']||false;this.flowLevel=(common.isNothing(options['flowLevel'])?-1:options['flowLevel']);this.styleMap=compileStyleMap(this.schema,options['styles']||null);this.sortKeys=options['sortKeys']||false;this.lineWidth=options['lineWidth']||80;this.noRefs=options['noRefs']||false;this.noCompatMode=options['noCompatMode']||false;this.implicitTypes=this.schema.compiledImplicit;this.explicitTypes=this.schema.compiledExplicit;this.tag=null;this.result='';this.duplicates=[];this.usedDuplicates=null;}
function indentString(string,spaces){var ind=common.repeat(' ',spaces),position=0,next=-1,result='',line,length=string.length;while(position<length){next=string.indexOf('\n',position);if(next===-1){line=string.slice(position);position=length;}else{line=string.slice(position,next+1);position=next+1;}
if(line.length&&line!=='\n')result+=ind;result+=line;}
return result;}
function generateNextLine(state,level){return'\n'+common.repeat(' ',state.indent*level);}
function testImplicitResolving(state,str){var index,length,type;for(index=0,length=state.implicitTypes.length;index<length;index+=1){type=state.implicitTypes[index];if(type.resolve(str)){return true;}}
return false;}
function isWhitespace(c){return c===CHAR_SPACE||c===CHAR_TAB;}
function isPrintable(c){return(0x00020<=c&&c<=0x00007E)||((0x000A1<=c&&c<=0x00D7FF)&&c!==0x2028&&c!==0x2029)||((0x0E000<=c&&c<=0x00FFFD)&&c!==0xFEFF )||(0x10000<=c&&c<=0x10FFFF);}
function isPlainSafe(c){return isPrintable(c)&&c!==0xFEFF
&&c!==CHAR_COMMA&&c!==CHAR_LEFT_SQUARE_BRACKET&&c!==CHAR_RIGHT_SQUARE_BRACKET&&c!==CHAR_LEFT_CURLY_BRACKET&&c!==CHAR_RIGHT_CURLY_BRACKET
&&c!==CHAR_COLON&&c!==CHAR_SHARP;}
function isPlainSafeFirst(c){return isPrintable(c)&&c!==0xFEFF&&!isWhitespace(c)
&&c!==CHAR_MINUS&&c!==CHAR_QUESTION&&c!==CHAR_COLON&&c!==CHAR_COMMA&&c!==CHAR_LEFT_SQUARE_BRACKET&&c!==CHAR_RIGHT_SQUARE_BRACKET&&c!==CHAR_LEFT_CURLY_BRACKET&&c!==CHAR_RIGHT_CURLY_BRACKET
&&c!==CHAR_SHARP&&c!==CHAR_AMPERSAND&&c!==CHAR_ASTERISK&&c!==CHAR_EXCLAMATION&&c!==CHAR_VERTICAL_LINE&&c!==CHAR_GREATER_THAN&&c!==CHAR_SINGLE_QUOTE&&c!==CHAR_DOUBLE_QUOTE
&&c!==CHAR_PERCENT&&c!==CHAR_COMMERCIAL_AT&&c!==CHAR_GRAVE_ACCENT;}
var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(string,singleLineOnly,indentPerLevel,lineWidth,testAmbiguousType){var i;var char;var hasLineBreak=false;var hasFoldableLine=false;var shouldTrackWidth=lineWidth!==-1;var previousLineBreak=-1;var plain=isPlainSafeFirst(string.charCodeAt(0))&&!isWhitespace(string.charCodeAt(string.length-1));if(singleLineOnly){for(i=0;i<string.length;i++){char=string.charCodeAt(i);if(!isPrintable(char)){return STYLE_DOUBLE;}
plain=plain&&isPlainSafe(char);}}else{for(i=0;i<string.length;i++){char=string.charCodeAt(i);if(char===CHAR_LINE_FEED){hasLineBreak=true;if(shouldTrackWidth){hasFoldableLine=hasFoldableLine||(i-previousLineBreak-1>lineWidth&&string[previousLineBreak+1]!==' ');previousLineBreak=i;}}else if(!isPrintable(char)){return STYLE_DOUBLE;}
plain=plain&&isPlainSafe(char);}
hasFoldableLine=hasFoldableLine||(shouldTrackWidth&&(i-previousLineBreak-1>lineWidth&&string[previousLineBreak+1]!==' '));}
if(!hasLineBreak&&!hasFoldableLine){return plain&&!testAmbiguousType(string)?STYLE_PLAIN:STYLE_SINGLE;}
if(string[0]===' '&&indentPerLevel>9){return STYLE_DOUBLE;}
return hasFoldableLine?STYLE_FOLDED:STYLE_LITERAL;}
function writeScalar(state,string,level,iskey){state.dump=(function(){if(string.length===0){return"''";}
if(!state.noCompatMode&&DEPRECATED_BOOLEANS_SYNTAX.indexOf(string)!==-1){return"'"+string+"'";}
var indent=state.indent*Math.max(1,level);var lineWidth=state.lineWidth===-1?-1:Math.max(Math.min(state.lineWidth,40),state.lineWidth-indent);var singleLineOnly=iskey
||(state.flowLevel>-1&&level>=state.flowLevel);function testAmbiguity(string){return testImplicitResolving(state,string);}
switch(chooseScalarStyle(string,singleLineOnly,state.indent,lineWidth,testAmbiguity)){case STYLE_PLAIN:return string;case STYLE_SINGLE:return"'"+string.replace(/'/g,"''")+"'";case STYLE_LITERAL:return'|'+blockHeader(string,state.indent)
+dropEndingNewline(indentString(string,indent));case STYLE_FOLDED:return'>'+blockHeader(string,state.indent)
+dropEndingNewline(indentString(foldString(string,lineWidth),indent));case STYLE_DOUBLE:return'"'+escapeString(string,lineWidth)+'"';default:throw new YAMLException('impossible error: invalid scalar style');}}());}
function blockHeader(string,indentPerLevel){var indentIndicator=(string[0]===' ')?String(indentPerLevel):'';var clip=string[string.length-1]==='\n';var keep=clip&&(string[string.length-2]==='\n'||string==='\n');var chomp=keep?'+':(clip?'':'-');return indentIndicator+chomp+'\n';}
function dropEndingNewline(string){return string[string.length-1]==='\n'?string.slice(0,-1):string;}
function foldString(string,width){var lineRe=/(\n+)([^\n]*)/g;var result=(function(){var nextLF=string.indexOf('\n');nextLF=nextLF!==-1?nextLF:string.length;lineRe.lastIndex=nextLF;return foldLine(string.slice(0,nextLF),width);}());var prevMoreIndented=string[0]==='\n'||string[0]===' ';var moreIndented;var match;while((match=lineRe.exec(string))){var prefix=match[1],line=match[2];moreIndented=(line[0]===' ');result+=prefix
+(!prevMoreIndented&&!moreIndented&&line!==''?'\n':'')
+foldLine(line,width);prevMoreIndented=moreIndented;}
return result;}
function foldLine(line,width){if(line===''||line[0]===' ')return line;var breakRe=/ [^ ]/g;var match;var start=0,end,curr=0,next=0;var result='';while((match=breakRe.exec(line))){next=match.index;if(next-start>width){end=(curr>start)?curr:next;result+='\n'+line.slice(start,end);start=end+1;}
curr=next;}
result+='\n';if(line.length-start>width&&curr>start){result+=line.slice(start,curr)+'\n'+line.slice(curr+1);}else{result+=line.slice(start);}
return result.slice(1);}
function escapeString(string){var result='';var char;var escapeSeq;for(var i=0;i<string.length;i++){char=string.charCodeAt(i);escapeSeq=ESCAPE_SEQUENCES[char];result+=!escapeSeq&&isPrintable(char)?string[i]:escapeSeq||encodeHex(char);}
return result;}
function writeFlowSequence(state,level,object){var _result='',_tag=state.tag,index,length;for(index=0,length=object.length;index<length;index+=1){if(writeNode(state,level,object[index],false,false)){if(index!==0)_result+=', ';_result+=state.dump;}}
state.tag=_tag;state.dump='['+_result+']';}
function writeBlockSequence(state,level,object,compact){var _result='',_tag=state.tag,index,length;for(index=0,length=object.length;index<length;index+=1){if(writeNode(state,level+1,object[index],true,true)){if(!compact||index!==0){_result+=generateNextLine(state,level);}
_result+='- '+state.dump;}}
state.tag=_tag;state.dump=_result||'[]';}
function writeFlowMapping(state,level,object){var _result='',_tag=state.tag,objectKeyList=Object.keys(object),index,length,objectKey,objectValue,pairBuffer;for(index=0,length=objectKeyList.length;index<length;index+=1){pairBuffer='';if(index!==0)pairBuffer+=', ';objectKey=objectKeyList[index];objectValue=object[objectKey];if(!writeNode(state,level,objectKey,false,false)){continue;}
if(state.dump.length>1024)pairBuffer+='? ';pairBuffer+=state.dump+': ';if(!writeNode(state,level,objectValue,false,false)){continue;}
pairBuffer+=state.dump;_result+=pairBuffer;}
state.tag=_tag;state.dump='{'+_result+'}';}
function writeBlockMapping(state,level,object,compact){var _result='',_tag=state.tag,objectKeyList=Object.keys(object),index,length,objectKey,objectValue,explicitPair,pairBuffer;if(state.sortKeys===true){objectKeyList.sort();}else if(typeof state.sortKeys==='function'){objectKeyList.sort(state.sortKeys);}else if(state.sortKeys){throw new YAMLException('sortKeys must be a boolean or a function');}
for(index=0,length=objectKeyList.length;index<length;index+=1){pairBuffer='';if(!compact||index!==0){pairBuffer+=generateNextLine(state,level);}
objectKey=objectKeyList[index];objectValue=object[objectKey];if(!writeNode(state,level+1,objectKey,true,true,true)){continue;}
explicitPair=(state.tag!==null&&state.tag!=='?')||(state.dump&&state.dump.length>1024);if(explicitPair){if(state.dump&&CHAR_LINE_FEED===state.dump.charCodeAt(0)){pairBuffer+='?';}else{pairBuffer+='? ';}}
pairBuffer+=state.dump;if(explicitPair){pairBuffer+=generateNextLine(state,level);}
if(!writeNode(state,level+1,objectValue,true,explicitPair)){continue;}
if(state.dump&&CHAR_LINE_FEED===state.dump.charCodeAt(0)){pairBuffer+=':';}else{pairBuffer+=': ';}
pairBuffer+=state.dump;_result+=pairBuffer;}
state.tag=_tag;state.dump=_result||'{}';}
function detectType(state,object,explicit){var _result,typeList,index,length,type,style;typeList=explicit?state.explicitTypes:state.implicitTypes;for(index=0,length=typeList.length;index<length;index+=1){type=typeList[index];if((type.instanceOf||type.predicate)&&(!type.instanceOf||((typeof object==='object')&&(object instanceof type.instanceOf)))&&(!type.predicate||type.predicate(object))){state.tag=explicit?type.tag:'?';if(type.represent){style=state.styleMap[type.tag]||type.defaultStyle;if(_toString.call(type.represent)==='[object Function]'){_result=type.represent(object,style);}else if(_hasOwnProperty.call(type.represent,style)){_result=type.represent[style](object,style);}else{throw new YAMLException('!<'+type.tag+'> tag resolver accepts not "'+style+'" style');}
state.dump=_result;}
return true;}}
return false;}
function writeNode(state,level,object,block,compact,iskey){state.tag=null;state.dump=object;if(!detectType(state,object,false)){detectType(state,object,true);}
var type=_toString.call(state.dump);if(block){block=(state.flowLevel<0||state.flowLevel>level);}
var objectOrArray=type==='[object Object]'||type==='[object Array]',duplicateIndex,duplicate;if(objectOrArray){duplicateIndex=state.duplicates.indexOf(object);duplicate=duplicateIndex!==-1;}
if((state.tag!==null&&state.tag!=='?')||duplicate||(state.indent!==2&&level>0)){compact=false;}
if(duplicate&&state.usedDuplicates[duplicateIndex]){state.dump='*ref_'+duplicateIndex;}else{if(objectOrArray&&duplicate&&!state.usedDuplicates[duplicateIndex]){state.usedDuplicates[duplicateIndex]=true;}
if(type==='[object Object]'){if(block&&(Object.keys(state.dump).length!==0)){writeBlockMapping(state,level,state.dump,compact);if(duplicate){state.dump='&ref_'+duplicateIndex+state.dump;}}else{writeFlowMapping(state,level,state.dump);if(duplicate){state.dump='&ref_'+duplicateIndex+' '+state.dump;}}}else if(type==='[object Array]'){if(block&&(state.dump.length!==0)){writeBlockSequence(state,level,state.dump,compact);if(duplicate){state.dump='&ref_'+duplicateIndex+state.dump;}}else{writeFlowSequence(state,level,state.dump);if(duplicate){state.dump='&ref_'+duplicateIndex+' '+state.dump;}}}else if(type==='[object String]'){if(state.tag!=='?'){writeScalar(state,state.dump,level,iskey);}}else{if(state.skipInvalid)return false;throw new YAMLException('unacceptable kind of an object to dump '+type);}
if(state.tag!==null&&state.tag!=='?'){state.dump='!<'+state.tag+'> '+state.dump;}}
return true;}
function getDuplicateReferences(object,state){var objects=[],duplicatesIndexes=[],index,length;inspectNode(object,objects,duplicatesIndexes);for(index=0,length=duplicatesIndexes.length;index<length;index+=1){state.duplicates.push(objects[duplicatesIndexes[index]]);}
state.usedDuplicates=new Array(length);}
function inspectNode(object,objects,duplicatesIndexes){var objectKeyList,index,length;if(object!==null&&typeof object==='object'){index=objects.indexOf(object);if(index!==-1){if(duplicatesIndexes.indexOf(index)===-1){duplicatesIndexes.push(index);}}else{objects.push(object);if(Array.isArray(object)){for(index=0,length=object.length;index<length;index+=1){inspectNode(object[index],objects,duplicatesIndexes);}}else{objectKeyList=Object.keys(object);for(index=0,length=objectKeyList.length;index<length;index+=1){inspectNode(object[objectKeyList[index]],objects,duplicatesIndexes);}}}}}
function dump(input,options){options=options||{};var state=new State(options);if(!state.noRefs)getDuplicateReferences(input,state);if(writeNode(state,0,input,true,true))return state.dump+'\n';return'';}
function safeDump(input,options){return dump(input,common.extend({schema:DEFAULT_SAFE_SCHEMA},options));}
module.exports.dump=dump;module.exports.safeDump=safeDump;},{"./common":2,"./exception":4,"./schema/default_full":9,"./schema/default_safe":10}],4:[function(require,module,exports){'use strict';function YAMLException(reason,mark){Error.call(this);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}else{this.stack=(new Error()).stack||'';}
this.name='YAMLException';this.reason=reason;this.mark=mark;this.message=(this.reason||'(unknown reason)')+(this.mark?' '+this.mark.toString():'');}
YAMLException.prototype=Object.create(Error.prototype);YAMLException.prototype.constructor=YAMLException;YAMLException.prototype.toString=function toString(compact){var result=this.name+': ';result+=this.reason||'(unknown reason)';if(!compact&&this.mark){result+=' '+this.mark.toString();}
return result;};module.exports=YAMLException;},{}],5:[function(require,module,exports){'use strict';var common=require('./common');var YAMLException=require('./exception');var Mark=require('./mark');var DEFAULT_SAFE_SCHEMA=require('./schema/default_safe');var DEFAULT_FULL_SCHEMA=require('./schema/default_full');var _hasOwnProperty=Object.prototype.hasOwnProperty;var CONTEXT_FLOW_IN=1;var CONTEXT_FLOW_OUT=2;var CONTEXT_BLOCK_IN=3;var CONTEXT_BLOCK_OUT=4;var CHOMPING_CLIP=1;var CHOMPING_STRIP=2;var CHOMPING_KEEP=3;var PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;var PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/;var PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/;var PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i;var PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function is_EOL(c){return(c===0x0A )||(c===0x0D );}
function is_WHITE_SPACE(c){return(c===0x09 )||(c===0x20 );}
function is_WS_OR_EOL(c){return(c===0x09 )||(c===0x20 )||(c===0x0A )||(c===0x0D );}
function is_FLOW_INDICATOR(c){return c===0x2C ||c===0x5B ||c===0x5D ||c===0x7B ||c===0x7D ;}
function fromHexCode(c){var lc;if((0x30 <=c)&&(c<=0x39 )){return c-0x30;}
lc=c|0x20;if((0x61 <=lc)&&(lc<=0x66 )){return lc-0x61+10;}
return-1;}
function escapedHexLen(c){if(c===0x78 ){return 2;}
if(c===0x75 ){return 4;}
if(c===0x55 ){return 8;}
return 0;}
function fromDecimalCode(c){if((0x30 <=c)&&(c<=0x39 )){return c-0x30;}
return-1;}
function simpleEscapeSequence(c){return(c===0x30 )?'\x00':(c===0x61 )?'\x07':(c===0x62 )?'\x08':(c===0x74 )?'\x09':(c===0x09 )?'\x09':(c===0x6E )?'\x0A':(c===0x76 )?'\x0B':(c===0x66 )?'\x0C':(c===0x72 )?'\x0D':(c===0x65 )?'\x1B':(c===0x20 )?' ':(c===0x22 )?'\x22':(c===0x2F )?'/':(c===0x5C )?'\x5C':(c===0x4E )?'\x85':(c===0x5F )?'\xA0':(c===0x4C )?'\u2028':(c===0x50 )?'\u2029':'';}
function charFromCodepoint(c){if(c<=0xFFFF){return String.fromCharCode(c);}
return String.fromCharCode(((c-0x010000)>>10)+0xD800,((c-0x010000)&0x03FF)+0xDC00);}
var simpleEscapeCheck=new Array(256);var simpleEscapeMap=new Array(256);for(var i=0;i<256;i++){simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0;simpleEscapeMap[i]=simpleEscapeSequence(i);}
function State(input,options){this.input=input;this.filename=options['filename']||null;this.schema=options['schema']||DEFAULT_FULL_SCHEMA;this.onWarning=options['onWarning']||null;this.legacy=options['legacy']||false;this.json=options['json']||false;this.listener=options['listener']||null;this.implicitTypes=this.schema.compiledImplicit;this.typeMap=this.schema.compiledTypeMap;this.length=input.length;this.position=0;this.line=0;this.lineStart=0;this.lineIndent=0;this.documents=[];}
function generateError(state,message){return new YAMLException(message,new Mark(state.filename,state.input,state.position,state.line,(state.position-state.lineStart)));}
function throwError(state,message){throw generateError(state,message);}
function throwWarning(state,message){if(state.onWarning){state.onWarning.call(null,generateError(state,message));}}
var directiveHandlers={YAML:function handleYamlDirective(state,name,args){var match,major,minor;if(state.version!==null){throwError(state,'duplication of %YAML directive');}
if(args.length!==1){throwError(state,'YAML directive accepts exactly one argument');}
match=/^([0-9]+)\.([0-9]+)$/.exec(args[0]);if(match===null){throwError(state,'ill-formed argument of the YAML directive');}
major=parseInt(match[1],10);minor=parseInt(match[2],10);if(major!==1){throwError(state,'unacceptable YAML version of the document');}
state.version=args[0];state.checkLineBreaks=(minor<2);if(minor!==1&&minor!==2){throwWarning(state,'unsupported YAML version of the document');}},TAG:function handleTagDirective(state,name,args){var handle,prefix;if(args.length!==2){throwError(state,'TAG directive accepts exactly two arguments');}
handle=args[0];prefix=args[1];if(!PATTERN_TAG_HANDLE.test(handle)){throwError(state,'ill-formed tag handle (first argument) of the TAG directive');}
if(_hasOwnProperty.call(state.tagMap,handle)){throwError(state,'there is a previously declared suffix for "'+handle+'" tag handle');}
if(!PATTERN_TAG_URI.test(prefix)){throwError(state,'ill-formed tag prefix (second argument) of the TAG directive');}
state.tagMap[handle]=prefix;}};function captureSegment(state,start,end,checkJson){var _position,_length,_character,_result;if(start<end){_result=state.input.slice(start,end);if(checkJson){for(_position=0,_length=_result.length;_position<_length;_position+=1){_character=_result.charCodeAt(_position);if(!(_character===0x09||(0x20<=_character&&_character<=0x10FFFF))){throwError(state,'expected valid JSON character');}}}else if(PATTERN_NON_PRINTABLE.test(_result)){throwError(state,'the stream contains non-printable characters');}
state.result+=_result;}}
function mergeMappings(state,destination,source,overridableKeys){var sourceKeys,key,index,quantity;if(!common.isObject(source)){throwError(state,'cannot merge mappings; the provided source object is unacceptable');}
sourceKeys=Object.keys(source);for(index=0,quantity=sourceKeys.length;index<quantity;index+=1){key=sourceKeys[index];if(!_hasOwnProperty.call(destination,key)){destination[key]=source[key];overridableKeys[key]=true;}}}
function storeMappingPair(state,_result,overridableKeys,keyTag,keyNode,valueNode){var index,quantity;keyNode=String(keyNode);if(_result===null){_result={};}
if(keyTag==='tag:yaml.org,2002:merge'){if(Array.isArray(valueNode)){for(index=0,quantity=valueNode.length;index<quantity;index+=1){mergeMappings(state,_result,valueNode[index],overridableKeys);}}else{mergeMappings(state,_result,valueNode,overridableKeys);}}else{if(!state.json&&!_hasOwnProperty.call(overridableKeys,keyNode)&&_hasOwnProperty.call(_result,keyNode)){throwError(state,'duplicated mapping key');}
_result[keyNode]=valueNode;delete overridableKeys[keyNode];}
return _result;}
function readLineBreak(state){var ch;ch=state.input.charCodeAt(state.position);if(ch===0x0A ){state.position++;}else if(ch===0x0D ){state.position++;if(state.input.charCodeAt(state.position)===0x0A ){state.position++;}}else{throwError(state,'a line break is expected');}
state.line+=1;state.lineStart=state.position;}
function skipSeparationSpace(state,allowComments,checkIndent){var lineBreaks=0,ch=state.input.charCodeAt(state.position);while(ch!==0){while(is_WHITE_SPACE(ch)){ch=state.input.charCodeAt(++state.position);}
if(allowComments&&ch===0x23 ){do{ch=state.input.charCodeAt(++state.position);}while(ch!==0x0A &&ch!==0x0D &&ch!==0);}
if(is_EOL(ch)){readLineBreak(state);ch=state.input.charCodeAt(state.position);lineBreaks++;state.lineIndent=0;while(ch===0x20 ){state.lineIndent++;ch=state.input.charCodeAt(++state.position);}}else{break;}}
if(checkIndent!==-1&&lineBreaks!==0&&state.lineIndent<checkIndent){throwWarning(state,'deficient indentation');}
return lineBreaks;}
function testDocumentSeparator(state){var _position=state.position,ch;ch=state.input.charCodeAt(_position);if((ch===0x2D ||ch===0x2E )&&ch===state.input.charCodeAt(_position+1)&&ch===state.input.charCodeAt(_position+2)){_position+=3;ch=state.input.charCodeAt(_position);if(ch===0||is_WS_OR_EOL(ch)){return true;}}
return false;}
function writeFoldedLines(state,count){if(count===1){state.result+=' ';}else if(count>1){state.result+=common.repeat('\n',count-1);}}
function readPlainScalar(state,nodeIndent,withinFlowCollection){var preceding,following,captureStart,captureEnd,hasPendingContent,_line,_lineStart,_lineIndent,_kind=state.kind,_result=state.result,ch;ch=state.input.charCodeAt(state.position);if(is_WS_OR_EOL(ch)||is_FLOW_INDICATOR(ch)||ch===0x23 ||ch===0x26 ||ch===0x2A ||ch===0x21 ||ch===0x7C ||ch===0x3E ||ch===0x27 ||ch===0x22 ||ch===0x25 ||ch===0x40 ||ch===0x60 ){return false;}
if(ch===0x3F ||ch===0x2D ){following=state.input.charCodeAt(state.position+1);if(is_WS_OR_EOL(following)||withinFlowCollection&&is_FLOW_INDICATOR(following)){return false;}}
state.kind='scalar';state.result='';captureStart=captureEnd=state.position;hasPendingContent=false;while(ch!==0){if(ch===0x3A ){following=state.input.charCodeAt(state.position+1);if(is_WS_OR_EOL(following)||withinFlowCollection&&is_FLOW_INDICATOR(following)){break;}}else if(ch===0x23 ){preceding=state.input.charCodeAt(state.position-1);if(is_WS_OR_EOL(preceding)){break;}}else if((state.position===state.lineStart&&testDocumentSeparator(state))||withinFlowCollection&&is_FLOW_INDICATOR(ch)){break;}else if(is_EOL(ch)){_line=state.line;_lineStart=state.lineStart;_lineIndent=state.lineIndent;skipSeparationSpace(state,false,-1);if(state.lineIndent>=nodeIndent){hasPendingContent=true;ch=state.input.charCodeAt(state.position);continue;}else{state.position=captureEnd;state.line=_line;state.lineStart=_lineStart;state.lineIndent=_lineIndent;break;}}
if(hasPendingContent){captureSegment(state,captureStart,captureEnd,false);writeFoldedLines(state,state.line-_line);captureStart=captureEnd=state.position;hasPendingContent=false;}
if(!is_WHITE_SPACE(ch)){captureEnd=state.position+1;}
ch=state.input.charCodeAt(++state.position);}
captureSegment(state,captureStart,captureEnd,false);if(state.result){return true;}
state.kind=_kind;state.result=_result;return false;}
function readSingleQuotedScalar(state,nodeIndent){var ch,captureStart,captureEnd;ch=state.input.charCodeAt(state.position);if(ch!==0x27 ){return false;}
state.kind='scalar';state.result='';state.position++;captureStart=captureEnd=state.position;while((ch=state.input.charCodeAt(state.position))!==0){if(ch===0x27 ){captureSegment(state,captureStart,state.position,true);ch=state.input.charCodeAt(++state.position);if(ch===0x27 ){captureStart=captureEnd=state.position;state.position++;}else{return true;}}else if(is_EOL(ch)){captureSegment(state,captureStart,captureEnd,true);writeFoldedLines(state,skipSeparationSpace(state,false,nodeIndent));captureStart=captureEnd=state.position;}else if(state.position===state.lineStart&&testDocumentSeparator(state)){throwError(state,'unexpected end of the document within a single quoted scalar');}else{state.position++;captureEnd=state.position;}}
throwError(state,'unexpected end of the stream within a single quoted scalar');}
function readDoubleQuotedScalar(state,nodeIndent){var captureStart,captureEnd,hexLength,hexResult,tmp,ch;ch=state.input.charCodeAt(state.position);if(ch!==0x22 ){return false;}
state.kind='scalar';state.result='';state.position++;captureStart=captureEnd=state.position;while((ch=state.input.charCodeAt(state.position))!==0){if(ch===0x22 ){captureSegment(state,captureStart,state.position,true);state.position++;return true;}else if(ch===0x5C ){captureSegment(state,captureStart,state.position,true);ch=state.input.charCodeAt(++state.position);if(is_EOL(ch)){skipSeparationSpace(state,false,nodeIndent);}else if(ch<256&&simpleEscapeCheck[ch]){state.result+=simpleEscapeMap[ch];state.position++;}else if((tmp=escapedHexLen(ch))>0){hexLength=tmp;hexResult=0;for(;hexLength>0;hexLength--){ch=state.input.charCodeAt(++state.position);if((tmp=fromHexCode(ch))>=0){hexResult=(hexResult<<4)+tmp;}else{throwError(state,'expected hexadecimal character');}}
state.result+=charFromCodepoint(hexResult);state.position++;}else{throwError(state,'unknown escape sequence');}
captureStart=captureEnd=state.position;}else if(is_EOL(ch)){captureSegment(state,captureStart,captureEnd,true);writeFoldedLines(state,skipSeparationSpace(state,false,nodeIndent));captureStart=captureEnd=state.position;}else if(state.position===state.lineStart&&testDocumentSeparator(state)){throwError(state,'unexpected end of the document within a double quoted scalar');}else{state.position++;captureEnd=state.position;}}
throwError(state,'unexpected end of the stream within a double quoted scalar');}
function readFlowCollection(state,nodeIndent){var readNext=true,_line,_tag=state.tag,_result,_anchor=state.anchor,following,terminator,isPair,isExplicitPair,isMapping,overridableKeys={},keyNode,keyTag,valueNode,ch;ch=state.input.charCodeAt(state.position);if(ch===0x5B ){terminator=0x5D;isMapping=false;_result=[];}else if(ch===0x7B ){terminator=0x7D;isMapping=true;_result={};}else{return false;}
if(state.anchor!==null){state.anchorMap[state.anchor]=_result;}
ch=state.input.charCodeAt(++state.position);while(ch!==0){skipSeparationSpace(state,true,nodeIndent);ch=state.input.charCodeAt(state.position);if(ch===terminator){state.position++;state.tag=_tag;state.anchor=_anchor;state.kind=isMapping?'mapping':'sequence';state.result=_result;return true;}else if(!readNext){throwError(state,'missed comma between flow collection entries');}
keyTag=keyNode=valueNode=null;isPair=isExplicitPair=false;if(ch===0x3F ){following=state.input.charCodeAt(state.position+1);if(is_WS_OR_EOL(following)){isPair=isExplicitPair=true;state.position++;skipSeparationSpace(state,true,nodeIndent);}}
_line=state.line;composeNode(state,nodeIndent,CONTEXT_FLOW_IN,false,true);keyTag=state.tag;keyNode=state.result;skipSeparationSpace(state,true,nodeIndent);ch=state.input.charCodeAt(state.position);if((isExplicitPair||state.line===_line)&&ch===0x3A ){isPair=true;ch=state.input.charCodeAt(++state.position);skipSeparationSpace(state,true,nodeIndent);composeNode(state,nodeIndent,CONTEXT_FLOW_IN,false,true);valueNode=state.result;}
if(isMapping){storeMappingPair(state,_result,overridableKeys,keyTag,keyNode,valueNode);}else if(isPair){_result.push(storeMappingPair(state,null,overridableKeys,keyTag,keyNode,valueNode));}else{_result.push(keyNode);}
skipSeparationSpace(state,true,nodeIndent);ch=state.input.charCodeAt(state.position);if(ch===0x2C ){readNext=true;ch=state.input.charCodeAt(++state.position);}else{readNext=false;}}
throwError(state,'unexpected end of the stream within a flow collection');}
function readBlockScalar(state,nodeIndent){var captureStart,folding,chomping=CHOMPING_CLIP,didReadContent=false,detectedIndent=false,textIndent=nodeIndent,emptyLines=0,atMoreIndented=false,tmp,ch;ch=state.input.charCodeAt(state.position);if(ch===0x7C ){folding=false;}else if(ch===0x3E ){folding=true;}else{return false;}
state.kind='scalar';state.result='';while(ch!==0){ch=state.input.charCodeAt(++state.position);if(ch===0x2B ||ch===0x2D ){if(CHOMPING_CLIP===chomping){chomping=(ch===0x2B )?CHOMPING_KEEP:CHOMPING_STRIP;}else{throwError(state,'repeat of a chomping mode identifier');}}else if((tmp=fromDecimalCode(ch))>=0){if(tmp===0){throwError(state,'bad explicit indentation width of a block scalar; it cannot be less than one');}else if(!detectedIndent){textIndent=nodeIndent+tmp-1;detectedIndent=true;}else{throwError(state,'repeat of an indentation width identifier');}}else{break;}}
if(is_WHITE_SPACE(ch)){do{ch=state.input.charCodeAt(++state.position);}
while(is_WHITE_SPACE(ch));if(ch===0x23 ){do{ch=state.input.charCodeAt(++state.position);}
while(!is_EOL(ch)&&(ch!==0));}}
while(ch!==0){readLineBreak(state);state.lineIndent=0;ch=state.input.charCodeAt(state.position);while((!detectedIndent||state.lineIndent<textIndent)&&(ch===0x20 )){state.lineIndent++;ch=state.input.charCodeAt(++state.position);}
if(!detectedIndent&&state.lineIndent>textIndent){textIndent=state.lineIndent;}
if(is_EOL(ch)){emptyLines++;continue;}
if(state.lineIndent<textIndent){if(chomping===CHOMPING_KEEP){state.result+=common.repeat('\n',didReadContent?1+emptyLines:emptyLines);}else if(chomping===CHOMPING_CLIP){if(didReadContent){state.result+='\n';}}
break;}
if(folding){if(is_WHITE_SPACE(ch)){atMoreIndented=true;state.result+=common.repeat('\n',didReadContent?1+emptyLines:emptyLines);}else if(atMoreIndented){atMoreIndented=false;state.result+=common.repeat('\n',emptyLines+1);}else if(emptyLines===0){if(didReadContent){state.result+=' ';}
}else{state.result+=common.repeat('\n',emptyLines);}
}else{state.result+=common.repeat('\n',didReadContent?1+emptyLines:emptyLines);}
didReadContent=true;detectedIndent=true;emptyLines=0;captureStart=state.position;while(!is_EOL(ch)&&(ch!==0)){ch=state.input.charCodeAt(++state.position);}
captureSegment(state,captureStart,state.position,false);}
return true;}
function readBlockSequence(state,nodeIndent){var _line,_tag=state.tag,_anchor=state.anchor,_result=[],following,detected=false,ch;if(state.anchor!==null){state.anchorMap[state.anchor]=_result;}
ch=state.input.charCodeAt(state.position);while(ch!==0){if(ch!==0x2D ){break;}
following=state.input.charCodeAt(state.position+1);if(!is_WS_OR_EOL(following)){break;}
detected=true;state.position++;if(skipSeparationSpace(state,true,-1)){if(state.lineIndent<=nodeIndent){_result.push(null);ch=state.input.charCodeAt(state.position);continue;}}
_line=state.line;composeNode(state,nodeIndent,CONTEXT_BLOCK_IN,false,true);_result.push(state.result);skipSeparationSpace(state,true,-1);ch=state.input.charCodeAt(state.position);if((state.line===_line||state.lineIndent>nodeIndent)&&(ch!==0)){throwError(state,'bad indentation of a sequence entry');}else if(state.lineIndent<nodeIndent){break;}}
if(detected){state.tag=_tag;state.anchor=_anchor;state.kind='sequence';state.result=_result;return true;}
return false;}
function readBlockMapping(state,nodeIndent,flowIndent){var following,allowCompact,_line,_tag=state.tag,_anchor=state.anchor,_result={},overridableKeys={},keyTag=null,keyNode=null,valueNode=null,atExplicitKey=false,detected=false,ch;if(state.anchor!==null){state.anchorMap[state.anchor]=_result;}
ch=state.input.charCodeAt(state.position);while(ch!==0){following=state.input.charCodeAt(state.position+1);_line=state.line;if((ch===0x3F ||ch===0x3A )&&is_WS_OR_EOL(following)){if(ch===0x3F ){if(atExplicitKey){storeMappingPair(state,_result,overridableKeys,keyTag,keyNode,null);keyTag=keyNode=valueNode=null;}
detected=true;atExplicitKey=true;allowCompact=true;}else if(atExplicitKey){atExplicitKey=false;allowCompact=true;}else{throwError(state,'incomplete explicit mapping pair; a key node is missed');}
state.position+=1;ch=following;}else if(composeNode(state,flowIndent,CONTEXT_FLOW_OUT,false,true)){if(state.line===_line){ch=state.input.charCodeAt(state.position);while(is_WHITE_SPACE(ch)){ch=state.input.charCodeAt(++state.position);}
if(ch===0x3A ){ch=state.input.charCodeAt(++state.position);if(!is_WS_OR_EOL(ch)){throwError(state,'a whitespace character is expected after the key-value separator within a block mapping');}
if(atExplicitKey){storeMappingPair(state,_result,overridableKeys,keyTag,keyNode,null);keyTag=keyNode=valueNode=null;}
detected=true;atExplicitKey=false;allowCompact=false;keyTag=state.tag;keyNode=state.result;}else if(detected){throwError(state,'can not read an implicit mapping pair; a colon is missed');}else{state.tag=_tag;state.anchor=_anchor;return true;}}else if(detected){throwError(state,'can not read a block mapping entry; a multiline key may not be an implicit key');}else{state.tag=_tag;state.anchor=_anchor;return true;}}else{break;}
if(state.line===_line||state.lineIndent>nodeIndent){if(composeNode(state,nodeIndent,CONTEXT_BLOCK_OUT,true,allowCompact)){if(atExplicitKey){keyNode=state.result;}else{valueNode=state.result;}}
if(!atExplicitKey){storeMappingPair(state,_result,overridableKeys,keyTag,keyNode,valueNode);keyTag=keyNode=valueNode=null;}
skipSeparationSpace(state,true,-1);ch=state.input.charCodeAt(state.position);}
if(state.lineIndent>nodeIndent&&(ch!==0)){throwError(state,'bad indentation of a mapping entry');}else if(state.lineIndent<nodeIndent){break;}}
if(atExplicitKey){storeMappingPair(state,_result,overridableKeys,keyTag,keyNode,null);}
if(detected){state.tag=_tag;state.anchor=_anchor;state.kind='mapping';state.result=_result;}
return detected;}
function readTagProperty(state){var _position,isVerbatim=false,isNamed=false,tagHandle,tagName,ch;ch=state.input.charCodeAt(state.position);if(ch!==0x21 )return false;if(state.tag!==null){throwError(state,'duplication of a tag property');}
ch=state.input.charCodeAt(++state.position);if(ch===0x3C ){isVerbatim=true;ch=state.input.charCodeAt(++state.position);}else if(ch===0x21 ){isNamed=true;tagHandle='!!';ch=state.input.charCodeAt(++state.position);}else{tagHandle='!';}
_position=state.position;if(isVerbatim){do{ch=state.input.charCodeAt(++state.position);}
while(ch!==0&&ch!==0x3E );if(state.position<state.length){tagName=state.input.slice(_position,state.position);ch=state.input.charCodeAt(++state.position);}else{throwError(state,'unexpected end of the stream within a verbatim tag');}}else{while(ch!==0&&!is_WS_OR_EOL(ch)){if(ch===0x21 ){if(!isNamed){tagHandle=state.input.slice(_position-1,state.position+1);if(!PATTERN_TAG_HANDLE.test(tagHandle)){throwError(state,'named tag handle cannot contain such characters');}
isNamed=true;_position=state.position+1;}else{throwError(state,'tag suffix cannot contain exclamation marks');}}
ch=state.input.charCodeAt(++state.position);}
tagName=state.input.slice(_position,state.position);if(PATTERN_FLOW_INDICATORS.test(tagName)){throwError(state,'tag suffix cannot contain flow indicator characters');}}
if(tagName&&!PATTERN_TAG_URI.test(tagName)){throwError(state,'tag name cannot contain such characters: '+tagName);}
if(isVerbatim){state.tag=tagName;}else if(_hasOwnProperty.call(state.tagMap,tagHandle)){state.tag=state.tagMap[tagHandle]+tagName;}else if(tagHandle==='!'){state.tag='!'+tagName;}else if(tagHandle==='!!'){state.tag='tag:yaml.org,2002:'+tagName;}else{throwError(state,'undeclared tag handle "'+tagHandle+'"');}
return true;}
function readAnchorProperty(state){var _position,ch;ch=state.input.charCodeAt(state.position);if(ch!==0x26 )return false;if(state.anchor!==null){throwError(state,'duplication of an anchor property');}
ch=state.input.charCodeAt(++state.position);_position=state.position;while(ch!==0&&!is_WS_OR_EOL(ch)&&!is_FLOW_INDICATOR(ch)){ch=state.input.charCodeAt(++state.position);}
if(state.position===_position){throwError(state,'name of an anchor node must contain at least one character');}
state.anchor=state.input.slice(_position,state.position);return true;}
function readAlias(state){var _position,alias,ch;ch=state.input.charCodeAt(state.position);if(ch!==0x2A )return false;ch=state.input.charCodeAt(++state.position);_position=state.position;while(ch!==0&&!is_WS_OR_EOL(ch)&&!is_FLOW_INDICATOR(ch)){ch=state.input.charCodeAt(++state.position);}
if(state.position===_position){throwError(state,'name of an alias node must contain at least one character');}
alias=state.input.slice(_position,state.position);if(!state.anchorMap.hasOwnProperty(alias)){throwError(state,'unidentified alias "'+alias+'"');}
state.result=state.anchorMap[alias];skipSeparationSpace(state,true,-1);return true;}
function composeNode(state,parentIndent,nodeContext,allowToSeek,allowCompact){var allowBlockStyles,allowBlockScalars,allowBlockCollections,indentStatus=1,atNewLine=false,hasContent=false,typeIndex,typeQuantity,type,flowIndent,blockIndent;if(state.listener!==null){state.listener('open',state);}
state.tag=null;state.anchor=null;state.kind=null;state.result=null;allowBlockStyles=allowBlockScalars=allowBlockCollections=CONTEXT_BLOCK_OUT===nodeContext||CONTEXT_BLOCK_IN===nodeContext;if(allowToSeek){if(skipSeparationSpace(state,true,-1)){atNewLine=true;if(state.lineIndent>parentIndent){indentStatus=1;}else if(state.lineIndent===parentIndent){indentStatus=0;}else if(state.lineIndent<parentIndent){indentStatus=-1;}}}
if(indentStatus===1){while(readTagProperty(state)||readAnchorProperty(state)){if(skipSeparationSpace(state,true,-1)){atNewLine=true;allowBlockCollections=allowBlockStyles;if(state.lineIndent>parentIndent){indentStatus=1;}else if(state.lineIndent===parentIndent){indentStatus=0;}else if(state.lineIndent<parentIndent){indentStatus=-1;}}else{allowBlockCollections=false;}}}
if(allowBlockCollections){allowBlockCollections=atNewLine||allowCompact;}
if(indentStatus===1||CONTEXT_BLOCK_OUT===nodeContext){if(CONTEXT_FLOW_IN===nodeContext||CONTEXT_FLOW_OUT===nodeContext){flowIndent=parentIndent;}else{flowIndent=parentIndent+1;}
blockIndent=state.position-state.lineStart;if(indentStatus===1){if(allowBlockCollections&&(readBlockSequence(state,blockIndent)||readBlockMapping(state,blockIndent,flowIndent))||readFlowCollection(state,flowIndent)){hasContent=true;}else{if((allowBlockScalars&&readBlockScalar(state,flowIndent))||readSingleQuotedScalar(state,flowIndent)||readDoubleQuotedScalar(state,flowIndent)){hasContent=true;}else if(readAlias(state)){hasContent=true;if(state.tag!==null||state.anchor!==null){throwError(state,'alias node should not have any properties');}}else if(readPlainScalar(state,flowIndent,CONTEXT_FLOW_IN===nodeContext)){hasContent=true;if(state.tag===null){state.tag='?';}}
if(state.anchor!==null){state.anchorMap[state.anchor]=state.result;}}}else if(indentStatus===0){hasContent=allowBlockCollections&&readBlockSequence(state,blockIndent);}}
if(state.tag!==null&&state.tag!=='!'){if(state.tag==='?'){for(typeIndex=0,typeQuantity=state.implicitTypes.length;typeIndex<typeQuantity;typeIndex+=1){type=state.implicitTypes[typeIndex];if(type.resolve(state.result)){state.result=type.construct(state.result);state.tag=type.tag;if(state.anchor!==null){state.anchorMap[state.anchor]=state.result;}
break;}}}else if(_hasOwnProperty.call(state.typeMap,state.tag)){type=state.typeMap[state.tag];if(state.result!==null&&type.kind!==state.kind){throwError(state,'unacceptable node kind for !<'+state.tag+'> tag; it should be "'+type.kind+'", not "'+state.kind+'"');}
if(!type.resolve(state.result)){throwError(state,'cannot resolve a node with !<'+state.tag+'> explicit tag');}else{state.result=type.construct(state.result);if(state.anchor!==null){state.anchorMap[state.anchor]=state.result;}}}else{throwError(state,'unknown tag !<'+state.tag+'>');}}
if(state.listener!==null){state.listener('close',state);}
return state.tag!==null||state.anchor!==null||hasContent;}
function readDocument(state){var documentStart=state.position,_position,directiveName,directiveArgs,hasDirectives=false,ch;state.version=null;state.checkLineBreaks=state.legacy;state.tagMap={};state.anchorMap={};while((ch=state.input.charCodeAt(state.position))!==0){skipSeparationSpace(state,true,-1);ch=state.input.charCodeAt(state.position);if(state.lineIndent>0||ch!==0x25 ){break;}
hasDirectives=true;ch=state.input.charCodeAt(++state.position);_position=state.position;while(ch!==0&&!is_WS_OR_EOL(ch)){ch=state.input.charCodeAt(++state.position);}
directiveName=state.input.slice(_position,state.position);directiveArgs=[];if(directiveName.length<1){throwError(state,'directive name must not be less than one character in length');}
while(ch!==0){while(is_WHITE_SPACE(ch)){ch=state.input.charCodeAt(++state.position);}
if(ch===0x23 ){do{ch=state.input.charCodeAt(++state.position);}
while(ch!==0&&!is_EOL(ch));break;}
if(is_EOL(ch))break;_position=state.position;while(ch!==0&&!is_WS_OR_EOL(ch)){ch=state.input.charCodeAt(++state.position);}
directiveArgs.push(state.input.slice(_position,state.position));}
if(ch!==0)readLineBreak(state);if(_hasOwnProperty.call(directiveHandlers,directiveName)){directiveHandlers[directiveName](state,directiveName,directiveArgs);}else{throwWarning(state,'unknown document directive "'+directiveName+'"');}}
skipSeparationSpace(state,true,-1);if(state.lineIndent===0&&state.input.charCodeAt(state.position)===0x2D &&state.input.charCodeAt(state.position+1)===0x2D &&state.input.charCodeAt(state.position+2)===0x2D ){state.position+=3;skipSeparationSpace(state,true,-1);}else if(hasDirectives){throwError(state,'directives end mark is expected');}
composeNode(state,state.lineIndent-1,CONTEXT_BLOCK_OUT,false,true);skipSeparationSpace(state,true,-1);if(state.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart,state.position))){throwWarning(state,'non-ASCII line breaks are interpreted as content');}
state.documents.push(state.result);if(state.position===state.lineStart&&testDocumentSeparator(state)){if(state.input.charCodeAt(state.position)===0x2E ){state.position+=3;skipSeparationSpace(state,true,-1);}
return;}
if(state.position<(state.length-1)){throwError(state,'end of the stream or a document separator is expected');}else{return;}}
function loadDocuments(input,options){input=String(input);options=options||{};if(input.length!==0){if(input.charCodeAt(input.length-1)!==0x0A &&input.charCodeAt(input.length-1)!==0x0D ){input+='\n';}
if(input.charCodeAt(0)===0xFEFF){input=input.slice(1);}}
var state=new State(input,options);state.input+='\0';while(state.input.charCodeAt(state.position)===0x20 ){state.lineIndent+=1;state.position+=1;}
while(state.position<(state.length-1)){readDocument(state);}
return state.documents;}
function loadAll(input,iterator,options){var documents=loadDocuments(input,options),index,length;for(index=0,length=documents.length;index<length;index+=1){iterator(documents[index]);}}
function load(input,options){var documents=loadDocuments(input,options);if(documents.length===0){return undefined;}else if(documents.length===1){return documents[0];}
throw new YAMLException('expected a single document in the stream, but found more');}
function safeLoadAll(input,output,options){loadAll(input,output,common.extend({schema:DEFAULT_SAFE_SCHEMA},options));}
function safeLoad(input,options){return load(input,common.extend({schema:DEFAULT_SAFE_SCHEMA},options));}
module.exports.loadAll=loadAll;module.exports.load=load;module.exports.safeLoadAll=safeLoadAll;module.exports.safeLoad=safeLoad;},{"./common":2,"./exception":4,"./mark":6,"./schema/default_full":9,"./schema/default_safe":10}],6:[function(require,module,exports){'use strict';var common=require('./common');function Mark(name,buffer,position,line,column){this.name=name;this.buffer=buffer;this.position=position;this.line=line;this.column=column;}
Mark.prototype.getSnippet=function getSnippet(indent,maxLength){var head,start,tail,end,snippet;if(!this.buffer)return null;indent=indent||4;maxLength=maxLength||75;head='';start=this.position;while(start>0&&'\x00\r\n\x85\u2028\u2029'.indexOf(this.buffer.charAt(start-1))===-1){start-=1;if(this.position-start>(maxLength/2-1)){head=' ... ';start+=5;break;}}
tail='';end=this.position;while(end<this.buffer.length&&'\x00\r\n\x85\u2028\u2029'.indexOf(this.buffer.charAt(end))===-1){end+=1;if(end-this.position>(maxLength/2-1)){tail=' ... ';end-=5;break;}}
snippet=this.buffer.slice(start,end);return common.repeat(' ',indent)+head+snippet+tail+'\n'+
common.repeat(' ',indent+this.position-start+head.length)+'^';};Mark.prototype.toString=function toString(compact){var snippet,where='';if(this.name){where+='in "'+this.name+'" ';}
where+='at line '+(this.line+1)+', column '+(this.column+1);if(!compact){snippet=this.getSnippet();if(snippet){where+=':\n'+snippet;}}
return where;};module.exports=Mark;},{"./common":2}],7:[function(require,module,exports){'use strict';var common=require('./common');var YAMLException=require('./exception');var Type=require('./type');function compileList(schema,name,result){var exclude=[];schema.include.forEach(function(includedSchema){result=compileList(includedSchema,name,result);});schema[name].forEach(function(currentType){result.forEach(function(previousType,previousIndex){if(previousType.tag===currentType.tag){exclude.push(previousIndex);}});result.push(currentType);});return result.filter(function(type,index){return exclude.indexOf(index)===-1;});}
function compileMap(){var result={},index,length;function collectType(type){result[type.tag]=type;}
for(index=0,length=arguments.length;index<length;index+=1){arguments[index].forEach(collectType);}
return result;}
function Schema(definition){this.include=definition.include||[];this.implicit=definition.implicit||[];this.explicit=definition.explicit||[];this.implicit.forEach(function(type){if(type.loadKind&&type.loadKind!=='scalar'){throw new YAMLException('There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.');}});this.compiledImplicit=compileList(this,'implicit',[]);this.compiledExplicit=compileList(this,'explicit',[]);this.compiledTypeMap=compileMap(this.compiledImplicit,this.compiledExplicit);}
Schema.DEFAULT=null;Schema.create=function createSchema(){var schemas,types;switch(arguments.length){case 1:schemas=Schema.DEFAULT;types=arguments[0];break;case 2:schemas=arguments[0];types=arguments[1];break;default:throw new YAMLException('Wrong number of arguments for Schema.create function');}
schemas=common.toArray(schemas);types=common.toArray(types);if(!schemas.every(function(schema){return schema instanceof Schema;})){throw new YAMLException('Specified list of super schemas (or a single Schema object) contains a non-Schema object.');}
if(!types.every(function(type){return type instanceof Type;})){throw new YAMLException('Specified list of YAML types (or a single Type object) contains a non-Type object.');}
return new Schema({include:schemas,explicit:types});};module.exports=Schema;},{"./common":2,"./exception":4,"./type":13}],8:[function(require,module,exports){'use strict';var Schema=require('../schema');module.exports=new Schema({include:[require('./json')]});},{"../schema":7,"./json":12}],9:[function(require,module,exports){'use strict';var Schema=require('../schema');module.exports=Schema.DEFAULT=new Schema({include:[require('./default_safe')],explicit:[require('../type/js/undefined'),require('../type/js/regexp'),require('../type/js/function')]});},{"../schema":7,"../type/js/function":18,"../type/js/regexp":19,"../type/js/undefined":20,"./default_safe":10}],10:[function(require,module,exports){'use strict';var Schema=require('../schema');module.exports=new Schema({include:[require('./core')],implicit:[require('../type/timestamp'),require('../type/merge')],explicit:[require('../type/binary'),require('../type/omap'),require('../type/pairs'),require('../type/set')]});},{"../schema":7,"../type/binary":14,"../type/merge":22,"../type/omap":24,"../type/pairs":25,"../type/set":27,"../type/timestamp":29,"./core":8}],11:[function(require,module,exports){'use strict';var Schema=require('../schema');module.exports=new Schema({explicit:[require('../type/str'),require('../type/seq'),require('../type/map')]});},{"../schema":7,"../type/map":21,"../type/seq":26,"../type/str":28}],12:[function(require,module,exports){'use strict';var Schema=require('../schema');module.exports=new Schema({include:[require('./failsafe')],implicit:[require('../type/null'),require('../type/bool'),require('../type/int'),require('../type/float')]});},{"../schema":7,"../type/bool":15,"../type/float":16,"../type/int":17,"../type/null":23,"./failsafe":11}],13:[function(require,module,exports){'use strict';var YAMLException=require('./exception');var TYPE_CONSTRUCTOR_OPTIONS=['kind','resolve','construct','instanceOf','predicate','represent','defaultStyle','styleAliases'];var YAML_NODE_KINDS=['scalar','sequence','mapping'];function compileStyleAliases(map){var result={};if(map!==null){Object.keys(map).forEach(function(style){map[style].forEach(function(alias){result[String(alias)]=style;});});}
return result;}
function Type(tag,options){options=options||{};Object.keys(options).forEach(function(name){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(name)===-1){throw new YAMLException('Unknown option "'+name+'" is met in definition of "'+tag+'" YAML type.');}});this.tag=tag;this.kind=options['kind']||null;this.resolve=options['resolve']||function(){return true;};this.construct=options['construct']||function(data){return data;};this.instanceOf=options['instanceOf']||null;this.predicate=options['predicate']||null;this.represent=options['represent']||null;this.defaultStyle=options['defaultStyle']||null;this.styleAliases=compileStyleAliases(options['styleAliases']||null);if(YAML_NODE_KINDS.indexOf(this.kind)===-1){throw new YAMLException('Unknown kind "'+this.kind+'" is specified for "'+tag+'" YAML type.');}}
module.exports=Type;},{"./exception":4}],14:[function(require,module,exports){'use strict';var NodeBuffer;try{var _require=require;NodeBuffer=_require('buffer').Buffer;}catch(__){}
var Type=require('../type');var BASE64_MAP='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r';function resolveYamlBinary(data){if(data===null)return false;var code,idx,bitlen=0,max=data.length,map=BASE64_MAP;for(idx=0;idx<max;idx++){code=map.indexOf(data.charAt(idx));if(code>64)continue;if(code<0)return false;bitlen+=6;}
return(bitlen%8)===0;}
function constructYamlBinary(data){var idx,tailbits,input=data.replace(/[\r\n=]/g,''),max=input.length,map=BASE64_MAP,bits=0,result=[];for(idx=0;idx<max;idx++){if((idx%4===0)&&idx){result.push((bits>>16)&0xFF);result.push((bits>>8)&0xFF);result.push(bits&0xFF);}
bits=(bits<<6)|map.indexOf(input.charAt(idx));}
tailbits=(max%4)*6;if(tailbits===0){result.push((bits>>16)&0xFF);result.push((bits>>8)&0xFF);result.push(bits&0xFF);}else if(tailbits===18){result.push((bits>>10)&0xFF);result.push((bits>>2)&0xFF);}else if(tailbits===12){result.push((bits>>4)&0xFF);}
if(NodeBuffer)return new NodeBuffer(result);return result;}
function representYamlBinary(object ){var result='',bits=0,idx,tail,max=object.length,map=BASE64_MAP;for(idx=0;idx<max;idx++){if((idx%3===0)&&idx){result+=map[(bits>>18)&0x3F];result+=map[(bits>>12)&0x3F];result+=map[(bits>>6)&0x3F];result+=map[bits&0x3F];}
bits=(bits<<8)+object[idx];}
tail=max%3;if(tail===0){result+=map[(bits>>18)&0x3F];result+=map[(bits>>12)&0x3F];result+=map[(bits>>6)&0x3F];result+=map[bits&0x3F];}else if(tail===2){result+=map[(bits>>10)&0x3F];result+=map[(bits>>4)&0x3F];result+=map[(bits<<2)&0x3F];result+=map[64];}else if(tail===1){result+=map[(bits>>2)&0x3F];result+=map[(bits<<4)&0x3F];result+=map[64];result+=map[64];}
return result;}
function isBinary(object){return NodeBuffer&&NodeBuffer.isBuffer(object);}
module.exports=new Type('tag:yaml.org,2002:binary',{kind:'scalar',resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary});},{"../type":13}],15:[function(require,module,exports){'use strict';var Type=require('../type');function resolveYamlBoolean(data){if(data===null)return false;var max=data.length;return(max===4&&(data==='true'||data==='True'||data==='TRUE'))||(max===5&&(data==='false'||data==='False'||data==='FALSE'));}
function constructYamlBoolean(data){return data==='true'||data==='True'||data==='TRUE';}
function isBoolean(object){return Object.prototype.toString.call(object)==='[object Boolean]';}
module.exports=new Type('tag:yaml.org,2002:bool',{kind:'scalar',resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:function(object){return object?'true':'false';},uppercase:function(object){return object?'TRUE':'FALSE';},camelcase:function(object){return object?'True':'False';}},defaultStyle:'lowercase'});},{"../type":13}],16:[function(require,module,exports){'use strict';var common=require('../common');var Type=require('../type');var YAML_FLOAT_PATTERN=new RegExp('^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?'+
'|\\.[0-9_]+(?:[eE][-+][0-9]+)?'+
'|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*'+
'|[-+]?\\.(?:inf|Inf|INF)'+
'|\\.(?:nan|NaN|NAN))$');function resolveYamlFloat(data){if(data===null)return false;if(!YAML_FLOAT_PATTERN.test(data))return false;return true;}
function constructYamlFloat(data){var value,sign,base,digits;value=data.replace(/_/g,'').toLowerCase();sign=value[0]==='-'?-1:1;digits=[];if('+-'.indexOf(value[0])>=0){value=value.slice(1);}
if(value==='.inf'){return(sign===1)?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;}else if(value==='.nan'){return NaN;}else if(value.indexOf(':')>=0){value.split(':').forEach(function(v){digits.unshift(parseFloat(v,10));});value=0.0;base=1;digits.forEach(function(d){value+=d*base;base*=60;});return sign*value;}
return sign*parseFloat(value,10);}
var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(object,style){var res;if(isNaN(object)){switch(style){case'lowercase':return'.nan';case'uppercase':return'.NAN';case'camelcase':return'.NaN';}}else if(Number.POSITIVE_INFINITY===object){switch(style){case'lowercase':return'.inf';case'uppercase':return'.INF';case'camelcase':return'.Inf';}}else if(Number.NEGATIVE_INFINITY===object){switch(style){case'lowercase':return'-.inf';case'uppercase':return'-.INF';case'camelcase':return'-.Inf';}}else if(common.isNegativeZero(object)){return'-0.0';}
res=object.toString(10);return SCIENTIFIC_WITHOUT_DOT.test(res)?res.replace('e','.e'):res;}
function isFloat(object){return(Object.prototype.toString.call(object)==='[object Number]')&&(object%1!==0||common.isNegativeZero(object));}
module.exports=new Type('tag:yaml.org,2002:float',{kind:'scalar',resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:'lowercase'});},{"../common":2,"../type":13}],17:[function(require,module,exports){'use strict';var common=require('../common');var Type=require('../type');function isHexCode(c){return((0x30 <=c)&&(c<=0x39 ))||((0x41 <=c)&&(c<=0x46 ))||((0x61 <=c)&&(c<=0x66 ));}
function isOctCode(c){return((0x30 <=c)&&(c<=0x37 ));}
function isDecCode(c){return((0x30 <=c)&&(c<=0x39 ));}
function resolveYamlInteger(data){if(data===null)return false;var max=data.length,index=0,hasDigits=false,ch;if(!max)return false;ch=data[index];if(ch==='-'||ch==='+'){ch=data[++index];}
if(ch==='0'){if(index+1===max)return true;ch=data[++index];if(ch==='b'){index++;for(;index<max;index++){ch=data[index];if(ch==='_')continue;if(ch!=='0'&&ch!=='1')return false;hasDigits=true;}
return hasDigits;}
if(ch==='x'){index++;for(;index<max;index++){ch=data[index];if(ch==='_')continue;if(!isHexCode(data.charCodeAt(index)))return false;hasDigits=true;}
return hasDigits;}
for(;index<max;index++){ch=data[index];if(ch==='_')continue;if(!isOctCode(data.charCodeAt(index)))return false;hasDigits=true;}
return hasDigits;}
for(;index<max;index++){ch=data[index];if(ch==='_')continue;if(ch===':')break;if(!isDecCode(data.charCodeAt(index))){return false;}
hasDigits=true;}
if(!hasDigits)return false;if(ch!==':')return true;return /^(:[0-5]?[0-9])+$/.test(data.slice(index));}
function constructYamlInteger(data){var value=data,sign=1,ch,base,digits=[];if(value.indexOf('_')!==-1){value=value.replace(/_/g,'');}
ch=value[0];if(ch==='-'||ch==='+'){if(ch==='-')sign=-1;value=value.slice(1);ch=value[0];}
if(value==='0')return 0;if(ch==='0'){if(value[1]==='b')return sign*parseInt(value.slice(2),2);if(value[1]==='x')return sign*parseInt(value,16);return sign*parseInt(value,8);}
if(value.indexOf(':')!==-1){value.split(':').forEach(function(v){digits.unshift(parseInt(v,10));});value=0;base=1;digits.forEach(function(d){value+=(d*base);base*=60;});return sign*value;}
return sign*parseInt(value,10);}
function isInteger(object){return(Object.prototype.toString.call(object))==='[object Number]'&&(object%1===0&&!common.isNegativeZero(object));}
module.exports=new Type('tag:yaml.org,2002:int',{kind:'scalar',resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(object){return'0b'+object.toString(2);},octal:function(object){return'0'+object.toString(8);},decimal:function(object){return object.toString(10);},hexadecimal:function(object){return'0x'+object.toString(16).toUpperCase();}},defaultStyle:'decimal',styleAliases:{binary:[2,'bin'],octal:[8,'oct'],decimal:[10,'dec'],hexadecimal:[16,'hex']}});},{"../common":2,"../type":13}],18:[function(require,module,exports){'use strict';var esprima;try{var _require=require;esprima=_require('esprima');}catch(_){if(typeof window!=='undefined')esprima=window.esprima;}
var Type=require('../../type');function resolveJavascriptFunction(data){if(data===null)return false;try{var source='('+data+')',ast=esprima.parse(source,{range:true});if(ast.type!=='Program'||ast.body.length!==1||ast.body[0].type!=='ExpressionStatement'||ast.body[0].expression.type!=='FunctionExpression'){return false;}
return true;}catch(err){return false;}}
function constructJavascriptFunction(data){var source='('+data+')',ast=esprima.parse(source,{range:true}),params=[],body;if(ast.type!=='Program'||ast.body.length!==1||ast.body[0].type!=='ExpressionStatement'||ast.body[0].expression.type!=='FunctionExpression'){throw new Error('Failed to resolve function');}
ast.body[0].expression.params.forEach(function(param){params.push(param.name);});body=ast.body[0].expression.body.range;return new Function(params,source.slice(body[0]+1,body[1]-1));}
function representJavascriptFunction(object ){return object.toString();}
function isFunction(object){return Object.prototype.toString.call(object)==='[object Function]';}
module.exports=new Type('tag:yaml.org,2002:js/function',{kind:'scalar',resolve:resolveJavascriptFunction,construct:constructJavascriptFunction,predicate:isFunction,represent:representJavascriptFunction});},{"../../type":13}],19:[function(require,module,exports){'use strict';var Type=require('../../type');function resolveJavascriptRegExp(data){if(data===null)return false;if(data.length===0)return false;var regexp=data,tail=/\/([gim]*)$/.exec(data),modifiers='';if(regexp[0]==='/'){if(tail)modifiers=tail[1];if(modifiers.length>3)return false;if(regexp[regexp.length-modifiers.length-1]!=='/')return false;}
return true;}
function constructJavascriptRegExp(data){var regexp=data,tail=/\/([gim]*)$/.exec(data),modifiers='';if(regexp[0]==='/'){if(tail)modifiers=tail[1];regexp=regexp.slice(1,regexp.length-modifiers.length-1);}
return new RegExp(regexp,modifiers);}
function representJavascriptRegExp(object ){var result='/'+object.source+'/';if(object.global)result+='g';if(object.multiline)result+='m';if(object.ignoreCase)result+='i';return result;}
function isRegExp(object){return Object.prototype.toString.call(object)==='[object RegExp]';}
module.exports=new Type('tag:yaml.org,2002:js/regexp',{kind:'scalar',resolve:resolveJavascriptRegExp,construct:constructJavascriptRegExp,predicate:isRegExp,represent:representJavascriptRegExp});},{"../../type":13}],20:[function(require,module,exports){'use strict';var Type=require('../../type');function resolveJavascriptUndefined(){return true;}
function constructJavascriptUndefined(){return undefined;}
function representJavascriptUndefined(){return'';}
function isUndefined(object){return typeof object==='undefined';}
module.exports=new Type('tag:yaml.org,2002:js/undefined',{kind:'scalar',resolve:resolveJavascriptUndefined,construct:constructJavascriptUndefined,predicate:isUndefined,represent:representJavascriptUndefined});},{"../../type":13}],21:[function(require,module,exports){'use strict';var Type=require('../type');module.exports=new Type('tag:yaml.org,2002:map',{kind:'mapping',construct:function(data){return data!==null?data:{};}});},{"../type":13}],22:[function(require,module,exports){'use strict';var Type=require('../type');function resolveYamlMerge(data){return data==='<<'||data===null;}
module.exports=new Type('tag:yaml.org,2002:merge',{kind:'scalar',resolve:resolveYamlMerge});},{"../type":13}],23:[function(require,module,exports){'use strict';var Type=require('../type');function resolveYamlNull(data){if(data===null)return true;var max=data.length;return(max===1&&data==='~')||(max===4&&(data==='null'||data==='Null'||data==='NULL'));}
function constructYamlNull(){return null;}
function isNull(object){return object===null;}
module.exports=new Type('tag:yaml.org,2002:null',{kind:'scalar',resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:function(){return'~';},lowercase:function(){return'null';},uppercase:function(){return'NULL';},camelcase:function(){return'Null';}},defaultStyle:'lowercase'});},{"../type":13}],24:[function(require,module,exports){'use strict';var Type=require('../type');var _hasOwnProperty=Object.prototype.hasOwnProperty;var _toString=Object.prototype.toString;function resolveYamlOmap(data){if(data===null)return true;var objectKeys=[],index,length,pair,pairKey,pairHasKey,object=data;for(index=0,length=object.length;index<length;index+=1){pair=object[index];pairHasKey=false;if(_toString.call(pair)!=='[object Object]')return false;for(pairKey in pair){if(_hasOwnProperty.call(pair,pairKey)){if(!pairHasKey)pairHasKey=true;else return false;}}
if(!pairHasKey)return false;if(objectKeys.indexOf(pairKey)===-1)objectKeys.push(pairKey);else return false;}
return true;}
function constructYamlOmap(data){return data!==null?data:[];}
module.exports=new Type('tag:yaml.org,2002:omap',{kind:'sequence',resolve:resolveYamlOmap,construct:constructYamlOmap});},{"../type":13}],25:[function(require,module,exports){'use strict';var Type=require('../type');var _toString=Object.prototype.toString;function resolveYamlPairs(data){if(data===null)return true;var index,length,pair,keys,result,object=data;result=new Array(object.length);for(index=0,length=object.length;index<length;index+=1){pair=object[index];if(_toString.call(pair)!=='[object Object]')return false;keys=Object.keys(pair);if(keys.length!==1)return false;result[index]=[keys[0],pair[keys[0]]];}
return true;}
function constructYamlPairs(data){if(data===null)return[];var index,length,pair,keys,result,object=data;result=new Array(object.length);for(index=0,length=object.length;index<length;index+=1){pair=object[index];keys=Object.keys(pair);result[index]=[keys[0],pair[keys[0]]];}
return result;}
module.exports=new Type('tag:yaml.org,2002:pairs',{kind:'sequence',resolve:resolveYamlPairs,construct:constructYamlPairs});},{"../type":13}],26:[function(require,module,exports){'use strict';var Type=require('../type');module.exports=new Type('tag:yaml.org,2002:seq',{kind:'sequence',construct:function(data){return data!==null?data:[];}});},{"../type":13}],27:[function(require,module,exports){'use strict';var Type=require('../type');var _hasOwnProperty=Object.prototype.hasOwnProperty;function resolveYamlSet(data){if(data===null)return true;var key,object=data;for(key in object){if(_hasOwnProperty.call(object,key)){if(object[key]!==null)return false;}}
return true;}
function constructYamlSet(data){return data!==null?data:{};}
module.exports=new Type('tag:yaml.org,2002:set',{kind:'mapping',resolve:resolveYamlSet,construct:constructYamlSet});},{"../type":13}],28:[function(require,module,exports){'use strict';var Type=require('../type');module.exports=new Type('tag:yaml.org,2002:str',{kind:'scalar',construct:function(data){return data!==null?data:'';}});},{"../type":13}],29:[function(require,module,exports){'use strict';var Type=require('../type');var YAML_DATE_REGEXP=new RegExp('^([0-9][0-9][0-9][0-9])'+
'-([0-9][0-9])'+
'-([0-9][0-9])$');var YAML_TIMESTAMP_REGEXP=new RegExp('^([0-9][0-9][0-9][0-9])'+
'-([0-9][0-9]?)'+
'-([0-9][0-9]?)'+
'(?:[Tt]|[ \\t]+)'+
'([0-9][0-9]?)'+
':([0-9][0-9])'+
':([0-9][0-9])'+
'(?:\\.([0-9]*))?'+
'(?:[ \\t]*(Z|([-+])([0-9][0-9]?)'+
'(?::([0-9][0-9]))?))?$');function resolveYamlTimestamp(data){if(data===null)return false;if(YAML_DATE_REGEXP.exec(data)!==null)return true;if(YAML_TIMESTAMP_REGEXP.exec(data)!==null)return true;return false;}
function constructYamlTimestamp(data){var match,year,month,day,hour,minute,second,fraction=0,delta=null,tz_hour,tz_minute,date;match=YAML_DATE_REGEXP.exec(data);if(match===null)match=YAML_TIMESTAMP_REGEXP.exec(data);if(match===null)throw new Error('Date resolve error');year=+(match[1]);month=+(match[2])-1;day=+(match[3]);if(!match[4]){return new Date(Date.UTC(year,month,day));}
hour=+(match[4]);minute=+(match[5]);second=+(match[6]);if(match[7]){fraction=match[7].slice(0,3);while(fraction.length<3){fraction+='0';}
fraction=+fraction;}
if(match[9]){tz_hour=+(match[10]);tz_minute=+(match[11]||0);delta=(tz_hour*60+tz_minute)*60000;if(match[9]==='-')delta=-delta;}
date=new Date(Date.UTC(year,month,day,hour,minute,second,fraction));if(delta)date.setTime(date.getTime()-delta);return date;}
function representYamlTimestamp(object ){return object.toISOString();}
module.exports=new Type('tag:yaml.org,2002:timestamp',{kind:'scalar',resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});},{"../type":13}],"/":[function(require,module,exports){'use strict';var yaml=require('./lib/js-yaml.js');module.exports=yaml;},{"./lib/js-yaml.js":1}]},{},[])("/")});jQuery(document).ready(function(){jQuery('table.datatable').each(function(){jQuery(this).datatable();});});(function($,window,document,undefined){"use strict";var pluginName='datatable';var pluginVersion='1.2.0';window.datatable_unique_id=0;var defaults={debug:false};var commands={getRank:getRank,updateChart:updateChart};var Plugin=function(element,options,name){this.init(element,options,name);};Plugin.prototype={defaults:{debug:false,rank_mode:'normal',tag_mode:'column',show_chart:false,show_toolbar:true,show_table_selector:false,chart_modes:'bar',chart_default_mode:'bar',table_default_mode:'show',list_separator:',',css:{active:'active'},animation:{duration:100,show_speed:100,hide_speed:100},time:{valid_formats:['YYYY-MM-DD HH:mm','YYYY-MM-DD HH:mm:ss','YYYY-MM-DD HH:mm:ss.SSS','YYYY-MM-DD','YYYY-MM','YYYY/MM/DD','MM-DD-YYYY','MM.DD.YYYY','DD-MM','HH:mm','HH:mm:ss','HH:mm:ss.SSS'],display_formats:{'second':'hh:mm:ss','minute':'hh:mm','hour':'hh','day':'YYYY-MM-DD','week':'ll','month':'MMM YYYY','quarter':'[Q]Q - YYYY','year':'YYYY'}},table:{id_field:'id',row_highlighting:false,page_list:'[5,10,20,50,all]',pagination:true,show_header:true,show_columns:true,show_pagination_switch:true,striped:true,column_hover:false},chart:{position:'top'},colors:{valid:['active','success','info','warning','danger'],default:{border:{normal:'rgba(233, 144, 2, 0.5)',hover:'rgba(233, 144, 2, 1)'},bg:{normal:'rgba(233, 144, 2, 0.2)',hover:'rgba(233, 144, 2, 0.4)'}},active: {border:{normal:'rgba(160, 160, 160, 0.5)',hover:'rgba(160, 160, 160, 1)'},bg:{normal:'rgba(160, 160, 160, 0.4)',hover:'rgba(160, 160, 160, 0.6)'}},success:{border:{normal:'rgba(92, 184, 92, 0.5)',hover:'rgba(92, 184, 92, 1)'},bg:{normal:'rgba(92, 184, 92, 0.4)',hover:'rgba(92, 184, 92, 0.6)'}},info:{border:{normal:'rgba(112, 187, 225, 0.5)',hover:'rgba(112, 187, 225, 1)'},bg:{normal:'rgba(112, 187, 225, 0.4)',hover:'rgba(112, 187, 225, 0.6)'}},warning:{border:{normal:'rgba(240, 173, 78, 0.5)',hover:'rgba(240, 173, 78, 1)'},bg:{normal:'rgba(240, 173, 78, 0.4)',hover:'rgba(240, 173, 78, 0.6)'}},danger:{border:{normal:'rgba(217, 83, 79, 0.5)',hover:'rgba(217, 83, 79, 1)'},bg:{normal:'rgba(217, 83, 79, 0.4)',hover:'rgba(217, 83, 79, 0.6)'}},background:'rgba(251, 85, 85, 0.8)',schemes:{default:['#1f77b4','#17becf','#ff7f0e','#ffbb78','#2ca02c','#98df8a','#d62728','#ff9896','#9467bd','#c5b0d5','#8c564b','#c49c94','#e377c2','#f7b6d2','#7f7f7f','#c7c7c7','#bcbd22','#dbdb8d','#9edae5','#aec7e8'],Antique:['#855C75','#D9AF6B','#AF6458','#736F4C','#526A83','#625377','#68855C','#9C9C5E','#A06177','#8C785D','#467378','#7C7C7C'],Bold:['#7F3C8D','#11A579','#3969AC','#F2B701','#E73F74','#80BA5A','#E68310','#008695','#CF1C90','#f97b72','#4b4b8f','#A5AA99'],Pastel:['#66C5CC','#F6CF71','#F89C74','#DCB0F2','#87C55F','#9EB9F3','#FE88B1','#C9DB74','#8BE0A4','#B497E7','#D3B484','#B3B3B3'],Prism:['#5F4690','#1D6996','#38A6A5','#0F8554','#73AF48','#EDAD08','#E17C05','#CC503E','#94346E','#6F4070','#994E95','#666666'],Safe:['#88CCEE','#CC6677','#DDCC77','#117733','#332288','#AA4499','#44AA99','#999933','#882255','#661100','#6699CC','#888888'],Vivid:['#E58606','#5D69B1','#52BCA3','#99C945','#CC61B0','#24796C','#DAA51B','#2F8AC4','#764E9F','#ED645A','#CC3A8E','#A5AA99'],ArmyRose:['#798234','#a3ad62','#d0d3a2','#fdfbe4','#f0c6c3','#df91a3','#d46780'],Fall:['#3d5941','#778868','#b5b991','#f6edbd','#edbb8a','#de8a5a','#ca562c'],Geyser:['#008080','#70a494','#b4c8a8','#f6edbd','#edbb8a','#de8a5a','#ca562c'],Temps:['#009392','#39b185','#9ccb86','#e9e29c','#eeb479','#e88471','#cf597e'],TealRose:['#009392','#72aaa1','#b1c7b3','#f1eac8','#e5b9ad','#d98994','#d0587e'],Tropic:['#009B9E','#42B7B9','#A7D3D4','#F1F1F1','#E4C1D9','#D691C1','#C75DAB'],Earth:['#A16928','#bd925a','#d6bd8d','#edeac2','#b5c8b8','#79a7ac','#2887a1'],Burg:['#ffc6c4','#f4a3a8','#e38191','#cc607d','#ad466c','#8b3058','#672044'],BurgYI:['#fbe6c5','#f5ba98','#ee8a82','#dc7176','#c8586c','#9c3f5d','#70284a'],RedOR:['#f6d2a9','#f5b78e','#f19c7c','#ea8171','#dd686c','#ca5268','#b13f64'],OrYel:['#ecda9a','#efc47e','#f3ad6a','#f7945d','#f97b57','#f66356','#ee4d5a'],Peach:['#fde0c5','#facba6','#f8b58b','#f59e72','#f2855d','#ef6a4c','#eb4a40'],PinkYI:['#fef6b5','#ffdd9a','#ffc285','#ffa679','#fa8a76','#f16d7a','#e15383'],Mint:['#e4f1e1','#b4d9cc','#89c0b6','#63a6a0','#448c8a','#287274','#0d585f'],BluGrn:['#c4e6c3','#96d2a4','#6dbc90','#4da284','#36877a','#266b6e','#1d4f60'],DarkMint:['#d2fbd4','#a5dbc2','#7bbcb0','#559c9e','#3a7c89','#235d72','#123f5a'],Emrld:['#d3f2a3','#97e196','#6cc08b','#4c9b82','#217a79','#105965','#074050'],BluYI:['#f7feae','#b7e6a5','#7ccba2','#46aea0','#089099','#00718b','#045275'],Teal:['#d1eeea','#a8dbd9','#85c4c9','#68abb8','#4f90a6','#3b738f','#2a5674'],TealGrn:['#b0f2bc','#89e8ac','#67dba5','#4cc8a3','#38b2a3','#2c98a0','#257d98'],Purp:['#f3e0f7','#e4c7f1','#d1afe8','#b998dd','#9f82ce','#826dba','#63589f'],PurpOr:['#f9ddda','#f2b9c4','#e597b9','#ce78b3','#ad5fad','#834ba0','#573b88'],Sunset:['#f3e79b','#fac484','#f8a07e','#eb7f86','#ce6693','#a059a0','#5c53a5'],Magenta:['#f3cbd3','#eaa9bd','#dd88ac','#ca699d','#b14d8e','#91357d','#6c2167'],SunsetDark:['#fcde9c','#faa476','#f0746e','#e34f6f','#dc3977','#b9257a','#7c1d6f'],BrwnYI:['#ede5cf','#e0c2a2','#d39c83','#c1766f','#a65461','#813753','#541f3f'],},datasets:['#66C5CC','#F6CF71','#F89C74','#DCB0F2','#87C55F','#9EB9F3','#FE88B1','#C9DB74','#8BE0A4','#B497E7','#D3B484','#B3B3B3']},bar:{height:240,item_width:null,fields:null,xaxis:{display:true,field:null,sorted:false,timeunit:null,timestepsize:null,gridlines:true,showlabels:false},yaxis:{display:true,beginatzero:false,label:null,scale:null,gridlines:true},horizontal_highlights:{enabled:true,data:null,opacity:0.1,strokeStyle:'rgba(112, 187, 225 ,1.0)',lineWidth:2,label: {fillStyle:'#000',fontSize:'12px',font:'Arial',opacity:0.2,position:'bottom-right'}},horizontal_line:{enabled:false,strokeStyle:'rgba(112, 187, 225 ,0.5)',lineWidth:2},horizontal_indicator_line:{enabled:true,strokeStyle:'rgba(160,160,160,0.5)',fillStyle:'rgba(160,160,160,0.2)',lineWidth:4},vertical_indicator_line:{enabled:false,strokeStyle:'rgba(160,160,160,0.5)',lineWidth:4},error_bar:{enabled:true,lineWidth:2.0,tipWidth:null,strokeStyle:null},colors:{valid:['active','success','info','warning','danger'],default:{border:{normal:'rgba(233, 144, 2, 0.5)',hover:'rgba(233, 144, 2, 1)'},bg:{normal:'rgba(233, 144, 2, 0.2)',hover:'rgba(233, 144, 2, 0.4)'}},active: {border:{normal:'rgba(160, 160, 160, 0.5)',hover:'rgba(160, 160, 160, 1)'},bg:{normal:'rgba(160, 160, 160, 0.4)',hover:'rgba(160, 160, 160, 0.6)'}},success:{border:{normal:'rgba(92, 184, 92, 0.5)',hover:'rgba(92, 184, 92, 1)'},bg:{normal:'rgba(92, 184, 92, 0.4)',hover:'rgba(92, 184, 92, 0.6)'}},info:{border:{normal:'rgba(112, 187, 225, 0.5)',hover:'rgba(112, 187, 225, 1)'},bg:{normal:'rgba(112, 187, 225, 0.4)',hover:'rgba(112, 187, 225, 0.6)'}},warning:{border:{normal:'rgba(240, 173, 78, 0.5)',hover:'rgba(240, 173, 78, 1)'},bg:{normal:'rgba(240, 173, 78, 0.4)',hover:'rgba(240, 173, 78, 0.6)'}},danger:{border:{normal:'rgba(217, 83, 79, 0.5)',hover:'rgba(217, 83, 79, 1)'},bg:{normal:'rgba(217, 83, 79, 0.4)',hover:'rgba(217, 83, 79, 0.6)'}},background:'rgba(251, 85, 85, 0.8)',datasets:['#66C5CC','#F6CF71','#F89C74','#DCB0F2','#87C55F','#9EB9F3','#FE88B1','#C9DB74','#8BE0A4','#B497E7','#D3B484','#B3B3B3']},tooltips:{titleFontSize:16,bodyFontSize:12,bodyFontFamily:'monospace',position:'average'},legend:{enabled:false,position:'top'}},line:{height:240,xaxis:{display:true,field:null,sorted:false,timeunit:null,timestepsize:null,gridlines:true},yaxis:{beginatzero:false,label:null,scale:null,gridlines:true},fill:false,fields:null,point:{enabled:true,borderWidth:1,radius:{normal:4,hover:4}},line:{enabled:true,tension:0},vertical_segments:{enabled:true,data:null,opacity:0.1,label: {fillStyle:'#000',fontSize:'12px',font:'Arial',opacity:0.2,position:'top'}},horizontal_highlights:{enabled:true,data:null,opacity:0.1,strokeStyle:'rgba(112, 187, 225 ,1.0)',lineWidth:2,label: {fillStyle:'#000',fontSize:'12px',font:'Arial',opacity:0.2,position:'bottom-right'}},horizontal_line:{enabled:false,strokeStyle:'rgba(112, 187, 225 ,1.0)',lineWidth:2},vertical_indicator_line:{enabled:true,strokeStyle:'rgba(160,160,160,0.5)',lineWidth:2},horizontal_indicator_line:{enabled:true,strokeStyle:'rgba(160,160,160,0.5)',fillStyle:'rgba(160,160,160,0.2)',lineWidth:2},error_bar:{enabled:false,lineWidth:1,tipWidth:0.2,strokeStyle:'rgba(0,0,0,0.8)'},interval:{enabled:true,lineWidth:0.4},colors:{valid:['active','success','info','warning','danger'],default:{border:{normal:'rgba(233, 144, 2, 0.5)',hover:'rgba(233, 144, 2, 1.0)'},bg:{normal:'rgba(233, 144, 2, 0.5)',hover:'rgba(233, 144, 2, 1.0)'}},active: {border:{normal:'rgba(160, 160, 160, 0.6)',hover:'rgba(160, 160, 160 1.0)'},bg:{normal:'rgba(160, 160, 160, 0.5)',hover:'rgba(160, 160, 160 1.0)'}},success:{border:{normal:'rgba(92, 184, 92, 0.6)',hover:'rgba(92, 184, 92, 1.0)'},bg:{normal:'rgba(92, 184, 92, 0.5)',hover:'rgba(92, 184, 92, 1.0)'}},info:{border:{normal:'rgba(112, 187, 225, 0.6)',hover:'rgba(112, 187, 225, 1)'},bg:{normal:'rgba(112, 187, 225, 0.5)',hover:'rgba(112, 187, 225, 1.0)'}},warning:{border:{normal:'rgba(240, 173, 78, 0.6)',hover:'rgba(240, 173, 78, 1.0)'},bg:{normal:'rgba(240, 173, 78, 0.5)',hover:'rgba(240, 173, 78, 1.0)'}},danger:{border:{normal:'rgba(217, 83, 79, 0.6)',hover:'rgba(217, 83, 79, 1)'},bg:{normal:'rgba(217, 83, 79, 0.5)',hover:'rgba(217, 83, 79, 1.0)'}},background:'rgba(251, 85, 85, 0.8)',datasets:['#1f77b4','#aec7e8','#ff7f0e','#ffbb78','#2ca02c','#98df8a','#d62728','#ff9896','#9467bd','#c5b0d5','#8c564b','#c49c94','#e377c2','#f7b6d2','#7f7f7f','#c7c7c7','#bcbd22','#dbdb8d','#17becf','#9edae5']},tooltips:{titleFontSize:16,bodyFontSize:12,bodyFontFamily:'monospace',position:'top'},legend:{enabled:true,position:'bottom'}},scatter:{height:200,point:{borderWidth:2,radius:{normal:5,hover:10}},vertical_indicator_line:{enabled:false,strokeStyle:'rgba(0,0,0,0.2)',lineWidth:4},horizontal_indicator_line:{enabled:false,strokeStyle:'rgba(0,0,0,0.2)',fillStyle:'rgba(0,0,0,0.1)',lineWidth:4},error_bar:{enabled:true,lineWidth:1,tipWidth:8,strokeStyle:'rgba(0,0,0,0.05)',fillStyle:'rgba(0,0,0,0.02)',bounding_box:true},colors:{valid:['active','success','info','warning','danger'],default:{border:{normal:'rgba(233,144,2, 0.5)',hover:'rgba(233,144,2, 1)'},bg:{normal:'rgba(233,144,2,0.5)',hover:'rgba(233,144,2,0.8)'}},active: {border:{normal:'rgba(160, 160, 160, 0.5)',hover:'rgba(160, 160, 160 1)'},bg:{normal:'rgba(160, 160, 160, 0.5)',hover:'rgba(160, 160, 160 0.8)'}},success:{border:{normal:'rgba(92, 184, 92, 0.5)',hover:'rgba(92, 184, 92, 1)'},bg:{normal:'rgba(92, 184, 92, 0.5)',hover:'rgba(92, 184, 92, 0.8)'}},info:{border:{normal:'rgba(112, 187, 225, 0.5)',hover:'rgba(112, 187, 225, 1)'},bg:{normal:'rgba(112, 187, 225, 0.5)',hover:'rgba(112, 187, 225, 0.8)'}},warning:{border:{normal:'rgba(240, 173, 78, 0.5)',hover:'rgba(240, 173, 78, 1)'},bg:{normal:'rgba(240, 173, 78, 0.5)',hover:'rgba(240, 173, 78, 0.8)'}},danger:{border:{normal:'rgba(217, 83, 79, 0.5)',hover:'rgba(217, 83, 79, 1)'},bg:{normal:'rgba(217, 83, 79, 0.5)',hover:'rgba(217, 83, 79, 0.8)'}},background:'rgba(251, 85, 85, 0.8)'},tooltips:{titleFontSize:18,bodyFontSize:14},x:null,y:null},comparison:{height:200,sets:null,active_set:null,a_row:null,b_row:null,row_id_field:'name',a_color:'#43ac6a',b_color:'#f04124',error_bar:{enabled:true,lineWidth:2.0,tipWidth:8,strokeStyle:'rgba(0,0,0,0.2)'},colors:{background:'rgba(251, 85, 85, 0.8)'},tooltips:{titleFontSize:18,bodyFontSize:14}},element:{chart_mode_selector:'chart_mode_selector',table_mode_selector:'table_mode_selector',loader:'#loader',bar:{div:'#bar_div',canvas:'#bar_canvas'},line:{div:'#line_div',canvas:'#line_canvas'},scatter:{div:'#scatter_div',canvas:'scatter_canvas',selector_x_menu:'#scatter_selector_x_menu',selector_y_menu:'#scatter_selector_y_menu'},comparison:{div:'#comparison_div',canvas:'#comparison_canvas',selector_set_button:'#comparison_selector_set_button',selector_set_menu:'#comparison_selector_set_menu',selector_a_button:'#comparison_selector_a_button',selector_a_menu:'#comparison_selector_a_menu',selector_b_button:'#comparison_selector_b_button',selector_b_menu:'#comparison_selector_b_menu'},},icon:{table:'<span class="glyphicon glyphicon-list-alt"></span>',bar:'<span class="glyphicon glyphicon-stats"></span>',line:'<span class="glyphicon glyphicon-random"></span>',scatter:'<span class="glyphicon glyphicon-th-large"></span>',comparison:'<span class="glyphicon glyphicon-align-left"></span>',off:'<span class="glyphicon glyphicon-off"></span>',caret:'<span class="caret"></span>',chartable:'<span class="glyphicon glyphicon-stats text-muted"></span>',url:'<span class="glyphicon glyphicon-new-window" aria-hidden="true"></span>',ref:'<span class="glyphicon glyphicon-file" aria-hidden="true"></span>',anchor:'<span class="glyphicon glyphicon-expand" aria-hidden="true"></span>'},label:{table:'',bar:'Bar',line:'Line',scatter:'Scatter',comparison:'Comparison',off:'Off',select_x_axis:'Select data field for X-axis',select_y_axis:'Select data field for Y-axis',select_set:'Select set',select_a_row:'Select row A',select_b_row:'Select row B',toggle_table:'Toggle table',hide_visualization:'Hide visualization'},button_css:{table:'btn btn-default',bar:'btn btn-info selector-button',line:'btn btn-info selector-button',scatter:'btn btn-info selector-button',comparison:'btn btn-info selector-button',off:'btn btn-default selector-button',custom:'btn btn-default selector-button',},tags: {css:['label label-tag label-tag1','label label-tag label-tag2','label label-tag label-tag3','label label-tag label-tag4','label label-tag label-tag5','label label-tag label-tag6','label label-tag label-tag7','label label-tag label-tag8','label label-tag label-tag9','label label-tag label-tag10','label label-tag label-tag11','label label-tag label-tag12','label label-tag label-tag13','label label-tag label-tag14','label label-tag label-tag15','label label-tag label-primary','label label-tag label-success','label label-tag label-info','label label-tag label-warning','label label-tag label-danger','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-tag-default','label label-tag label-default','label label-tag label-default','label label-tag label-default','label label-tag label-default','label label-tag label-tag-default']},custom_chart:{},inline_chart:{height:35,max_width:200,colors:{default:'#cdcdcd',on:'#008000',off:'#ff514f',positive:'#008000',negative:'#ff514f',equal:'#cdcdcd'},value_indicator:{html:{css:'small glyphicon glyphicon-stop'},svg:{type:'rect',size:10},data:{binarizationThreshold:0.0},color:{default:'#cdcdcd',on:'#008000',off:'#ff514f',positive:'rgba(0, 128, 0, 0.5)',negative:'rgba(255, 0, 0, 0.5)',equal:'rgba(0, 0, 0, 0.5)'}},bar_horizontal:{colors:["#5cb85c","#5bc0de","#f0ad4e","#d9534f"]},bar_horizontal_average:{colors:{background:'transparent',center:'#000000',positive:'#5cb85c',negative:'#d9534f'}},bar_vertical:{item_width:null,hline:{enabled:false,values:null,colors:['rgba(0, 0, 0, 0.6)'],width:0.5},colors:{default:'rgba(220, 220, 220, 1.0)',background:'transparent',center:'#000000',positive:'#5cb85c',negative:'#d9534f'},data:{borderWidth:1,borderColor:'rgba(160, 160, 160, 1.0)'},options:{responsive:false,maintainAspectRatio:false,legend:{display:false},tooltips:{enabled:true,mode:'nearest',position:'line_centered_top',displayColors:false,cornerRadius:0,caretSize:0,caretPadding:0,yPadding:1,xPadding:1,titleFontSize:0,titleSpacing:0,titleMarginBottom:0,bodyFontSize:11,bodySpacing:0,footerSpacing:0,footerMarginTop:0,intersect:false},animation:{duration:0,animateScale:true},scales:{y_axes_maximize:true,y_axes_begin_at_zero:true,yAxes:[{display:false,type:'linear',ticks:{}}],xAxes:[{display:false,barPercentage:1.00}]}}},bar_vertical_tristate:{item_width:8,colors:{positive:'rgba(0, 128, 0, 0.5)',negative:'rgba(255, 0, 0, 0.5)',equal:'rgba(0, 0, 0, 0.5)'},data:{borderWidth:0,binarizeValues:true,binarizationThreshold:0.0},options:{responsive:false,maintainAspectRatio:false,legend:{display:false},tooltips:{enabled:false,mode:'nearest',position:'line_centered_top',displayColors:false,cornerRadius:0,caretSize:0,caretPadding:0,yPadding:1,xPadding:1,titleFontSize:0,titleSpacing:0,titleMarginBottom:0,bodyFontSize:11,bodySpacing:0,footerSpacing:0,footerMarginTop:0,intersect:false},animation:{duration:0,animateScale:true},scales:{y_axes_maximize:true,y_axes_begin_at_zero:true,yAxes:[{display:false,type:'linear',ticks:{}}],xAxes:[{display:false,barPercentage:1.00}]}}},line:{item_width:6,hline:{enabled:false,values:null,colors:['rgba(0, 0, 0, 0.6)'],width:0.5},data:{borderWidth:1,borderColor:'rgba(160, 160, 160, 1.0)',pointRadius:1,pointBorderWidth:0,pointBackgroundColor:'#000',backgroundColor:'rgba(220, 220, 220, 1.0)',lineTension:0,showLine:true},options:{responsive:false,maintainAspectRatio:false,legend:{display:false},tooltips:{enabled:true,mode:'nearest',intersect:false,position:'line_centered_top',cornerRadius:0,caretSize:0,caretPadding:0,yPadding:1,xPadding:1,titleFontSize:0,titleSpacing:0,titleMarginBottom:0,titleFontColor:'#FFF',bodyFontColor:'#FFF',footerFontColor:'#FFF',backgroundColor:'rgba(0,0,0,0.3)',bodyFontSize:11,bodySpacing:0,footerSpacing:0,footerMarginTop:0,displayColors:false},animation:{duration:0,animateScale:false},responsiveAnimationDuration:0,scales:{y_axes_maximize:true,y_axes_begin_at_zero:true,yAxes:[{display:false,type:'linear',ticks:{}}],xAxes:[{display:false,ticks:{}}]}}},line_steps:{item_width:6,hline:{enabled:false,values:null,colors:['rgba(0, 0, 0, 0.6)'],width:0.5},data:{borderWidth:1,borderColor:'rgba(160, 160, 160, 1.0)',pointRadius:0,pointBorderWidth:0,pointBackgroundColor:'#000',backgroundColor:'rgba(220, 220, 220, 1.0)',steppedLine:true,lineTension:0,showLine:true},options:{responsive:false,maintainAspectRatio:false,legend:{display:false},tooltips:{enabled:true,mode:'nearest',position:'line_centered_top',displayColors:false,cornerRadius:0,caretSize:0,caretPadding:0,yPadding:1,xPadding:1,titleFontSize:0,titleSpacing:0,titleMarginBottom:0,bodyFontSize:11,bodySpacing:0,footerSpacing:0,footerMarginTop:0,intersect:false},animation:{duration:0,animateScale:true},scales:{y_axes_maximize:true,y_axes_begin_at_zero:true,x_axes_show_last:true,x_axes_offset_last:1.0,yAxes:[{display:false,type:'linear',ticks:{}}],xAxes:[{display:false,ticks:{}}]}}}},value_type:{boolean:{color:{on:'#000000',off:'#e2e2e2',},circle:{svg:{type:'circle',size:12},html:{on:{css:'glyphicon glyphicon-ok-sign'},off:{css:'glyphicon glyphicon-remove-circle'},},},rect:{svg:{type:'rect',size:12},html:{on:{css:'glyphicon glyphicon-check'},off:{css:'glyphicon glyphicon-unchecked'},},}},},custom_chart_json:null},init:function(element,options,name){var self=this;this.name=name;this.element=element;this.$element=$(element);$(element).addClass(this.name);this.uniqueId=window.datatable_unique_id;window.datatable_unique_id+=1;this.defaults.colors.datasets=this.defaults.colors.schemes['default'];this.initOptions(options);this.rank_init=true;this.comparison_init=true;this.table_rank=[];this.chart_update=false;this.chart_init=true;this.bar_chart=null;this.scatter_chart=null;this.comparison_chart=null;this.line_chart=null;this.line_chart_data=null;this.chart_mode=this.options.chart_default_mode;this.table_mode=this.options.table_default_mode;this.hline_value=[];this.hline_index=[];this.hline_color=[];this.field_meta=[];this.log(this.name+'::init');this.createHelperFunctions();if(typeof $(this.element).data('id-field')!=='undefined'){$(this.element).data('unique-id',$(this.element).data('id-field'));}
var th_rank_element=$(this.element).find('thead tr th[data-rank="true"]');if(th_rank_element){if(this.options.rank_mode.startsWith('grouped')){$(th_rank_element).attr('data-formatter','runningFormatterGrouped'+this.uniqueId);window['runningFormatterGrouped'+this.uniqueId]=function(value,row,index){return $(self.element).datatable('getRank',index);}}else if(this.options.rank_mode=='normal'){$(th_rank_element).attr('data-formatter','runningFormatter');}}
$(this.element).find('thead tr th[data-sortable="true"]').each(function(){window['valueSorter'+self.uniqueId]=function(a,b){return self.valueSorter(a,b,'asc');};$(this).attr('data-sorter','valueSorter'+self.uniqueId);});$(this.element).find('thead tr th[data-reversed="true"]').each(function(){window['valueSorterReverse'+self.uniqueId]=function(a,b){return self.valueSorter(a,b,'desc');};$(this).attr('data-sorter','valueSorterReverse'+self.uniqueId);});$(this.element).find('thead tr th[data-chartable="true"]').each(function(){$(this).append(' '+self.options.icon.chartable);});this.initValueFormatters();this.extendChartjsLibrary();if(this.options.show_chart){this.addToolbar();}
$(element).on('post-init.datatable',function(e,data){self.initBootstrapTable();});$(element).on('post-body.bs.table',function(e,data){self.chart_mode=$('#'+self.options.element.chart_mode_selector+' .active').first().data('mode');self.updateVisualizationVisibility(self.chart_mode);$('#'+self.options.element.table_mode_selector).each(function(){if($(this).hasClass('active')){self.table_mode='show';}else{self.table_mode='hide';}
self.updateTableVisibility(self.table_mode);return false;});if(self.options.rank_mode.startsWith('grouped')){if(self.rank_init){setTimeout(function(){self.updateRank();self.rank_init=false;},100);}}
if(self.options.chart_modes.indexOf('comparison')>-1){if(self.comparison_init){setTimeout(function(){self.initComparison();},100);}}
if(self.chart_update||self.chart_init){if(self.chart_init){setTimeout(function(){self.updateChart();self.chart_init=false;},100);}else{self.updateChart();}
self.chart_update=false;}
$(element).find('[data-toggle="tooltip"]').tooltip({html:true});$(element).find('.datatable-inline-bar-vertical').each(function(){var dataset_labels=[];if(typeof $(this).data('dataset-labels')!=='undefined'){dataset_labels=$(this).data('dataset-labels').split(',');}
var dataset_colors=[];if(typeof $(this).data('dataset-colors')!=='undefined'){dataset_colors=$(this).data('dataset-colors').split(',');}
var mode='normal';if(typeof $(this).data('mode')!=='undefined'){mode=$(this).data('mode');}
var inline_width=null;if(typeof $(this).data('width')!=='undefined'){inline_width=$(this).data('width');}
var item_width=null;if(typeof $(this).data('item-width')!=='undefined'){item_width=$(this).data('item-width');}
var value_max=-Infinity;if(typeof $(this).data('value-max')!=='undefined'){value_max=$(this).data('value-max');}
var value_min=Infinity;if(typeof $(this).data('value-min')!=='undefined'){value_min=$(this).data('value-min');}
var value_color=null;if(typeof $(this).data('value-color')!=='undefined'){value_color=$(this).data('value-color');}
var data=self.parseDataList($(this).data('value'));var width=self.options.inline_chart.max_width;if(inline_width){width=inline_width;}
if(item_width){width=data.length*(item_width+0);self.options.inline_chart.bar_vertical.options.scales.xAxes[0].barThickness='flex';}else if(self.options.inline_chart.bar_vertical.item_width){width=data.length*(self.options.inline_chart.bar_vertical.item_width+3);self.options.inline_chart.bar_vertical.options.scales.xAxes[0].barThickness=self.options.inline_chart.bar_vertical.item_width;}
if(!inline_width){if(width>self.options.inline_chart.max_width){width=self.options.inline_chart.max_width;self.options.inline_chart.bar_vertical.options.scales.xAxes[0].barThickness=(self.options.inline_chart.max_width-3)/data.length}}
$(this).attr("width",width);$(this).attr("height",self.options.inline_chart.height);var values=[];var labels=[];var bg_colors=[];var min_y_value=value_min;var max_y_value=value_max;for(var i=0;i<data.length;i++){var current_value=parseFloat(data[i]['y_value']);values.push(current_value);var current_color=null;if(mode=='average'&&value_color){if(current_value>=0){current_color=self.options.inline_chart.bar_horizontal_average.colors.positive;}else{current_color=self.options.inline_chart.bar_horizontal_average.colors.negative;}}else{if(data[i]['color']){current_color=data[i]['color'];}else if(i<dataset_colors.length&&dataset_colors[i]){current_color=dataset_colors[i];}else{current_color=self.options.inline_chart.bar_vertical.colors.default;}}
bg_colors.push(current_color);var current_label=null;if(data[i]['label']){current_label=data[i]['label'];}else if(i<dataset_labels.length&&dataset_labels[i]){current_label=dataset_labels[i];}else{current_label=i;}
labels.push(current_label);if(data[i]['y_value']>max_y_value){max_y_value=data[i]['y_value'];}
if(data[i]['y_value']<min_y_value){min_y_value=data[i]['y_value'];}}
var hline=jQuery.extend(true,{},self.options.inline_chart.bar_vertical.hline,{enabled:false,values:[]});var options=self.options.inline_chart.bar_vertical.options;if(self.options.inline_chart.bar_vertical.options.scales.y_axes_maximize){if(max_y_value>0&&min_y_value<0){hline.enabled=true;hline.values.push(0);options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=max_y_value;}
if(self.options.inline_chart.bar_vertical.options.scales.y_axes_begin_at_zero){if(max_y_value>0&&min_y_value>0){options.scales.yAxes[0].ticks.min=0;options.scales.yAxes[0].ticks.max=max_y_value;}else if(max_y_value<0&&min_y_value<0){options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=0;}}else{options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=max_y_value;}}
var inlineChart=new Chart(this,{type:'barWithLine',data:{labels:labels,datasets:[jQuery.extend(true,{},self.options.inline_chart.bar_vertical.data,{data:values,backgroundColor:bg_colors})],hline:hline},options:options});});$(element).find('.datatable-inline-bar-vertical-tristate').each(function(){var data=self.parseDataList($(this).data('value'));var width=self.options.inline_chart.max_width;if(self.options.inline_chart.bar_vertical_tristate.item_width){width=data.length*(self.options.inline_chart.bar_vertical_tristate.item_width+3);self.options.inline_chart.bar_vertical_tristate.options.scales.xAxes[0].barThickness=self.options.inline_chart.bar_vertical_tristate.item_width}
if(width>self.options.inline_chart.max_width){width=self.options.inline_chart.max_width;self.options.inline_chart.bar_vertical_tristate.options.scales.xAxes[0].barThickness=(self.options.inline_chart.max_width-3)/data.length}
$(this).attr("width",width);$(this).attr("height",self.options.inline_chart.height);var values=[];var values_=[];var labels=[];var bg_colors=[];var min_y_value=Infinity;var max_y_value=-Infinity;for(var i=0;i<data.length;i++){var value=parseFloat(data[i]['y_value']);if(self.options.inline_chart.bar_vertical_tristate.data.binarizeValues){var value_=null;var label=null;if(value>self.options.inline_chart.bar_vertical_tristate.data.binarizationThreshold){value=1;label='positive';}else if(value<self.options.inline_chart.bar_vertical_tristate.data.binarizationThreshold){value=-1;label='negative';}else{value=0.5;value_=-0.5;label='equal';}
values.push(value);values_.push(value_);labels.push(label);if(value==0.5){bg_colors.push(self.options.inline_chart.bar_vertical_tristate.colors.equal);}else if(value>0){bg_colors.push(self.options.inline_chart.bar_vertical_tristate.colors.positive);}else if(value<0){bg_colors.push(self.options.inline_chart.bar_vertical_tristate.colors.negative);}}else{values.push(value);if(value==0){bg_colors.push(self.options.inline_chart.bar_vertical_tristate.colors.equal);}else if(value>0){bg_colors.push(self.options.inline_chart.bar_vertical_tristate.colors.positive);}else if(value<0){bg_colors.push(self.options.inline_chart.bar_vertical_tristate.colors.negative);}
labels.push(i);}
if(value>max_y_value){max_y_value=value;}
if(value<min_y_value){min_y_value=value;}}
if(self.options.inline_chart.bar_vertical_tristate.data.binarizeValues){min_y_value=-1;max_y_value=1;}
var options=self.options.inline_chart.bar_vertical_tristate.options;if(self.options.inline_chart.bar_vertical_tristate.options.scales.y_axes_maximize){if(max_y_value>0&&min_y_value<0){options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=max_y_value;}
if(self.options.inline_chart.bar_vertical_tristate.options.scales.y_axes_begin_at_zero){if(max_y_value>0&&min_y_value>0){options.scales.yAxes[0].ticks.min=0;options.scales.yAxes[0].ticks.max=max_y_value;}else if(max_y_value<0&&min_y_value<0){options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=0;}}else{options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=max_y_value;}}
var datasets=[];if(values_.length){datasets=[jQuery.extend(true,{},self.options.inline_chart.bar_vertical_tristate.data,{data:values,backgroundColor:bg_colors}),jQuery.extend(true,{},self.options.inline_chart.bar_vertical_tristate.data,{data:values_,backgroundColor:bg_colors})];options.scales.yAxes[0].stacked=true;options.scales.xAxes[0].stacked=true;}else{datasets=[jQuery.extend(true,{},self.options.inline_chart.bar_vertical_tristate.data,{data:values,backgroundColor:bg_colors})]}
var inlineChart=new Chart(this,{type:'bar',data:{labels:labels,datasets:datasets},options:options});});$(element).find('.datatable-inline-line').each(function(){$(this).attr("height",self.options.inline_chart.height);var data=self.parseDataList($(this).data('value'));var char_data=[];var labels=[];var point_format=true;var min_x_value=Infinity;var max_x_value=-Infinity;var min_y_value=Infinity;var max_y_value=-Infinity;for(var i=0;i<data.length;i++){if(data[i]['x_value']===null){point_format=false;}else{if(data[i]['x_value']<min_x_value){min_x_value=data[i]['x_value'];}
if(data[i]['x_value']>max_x_value){max_x_value=data[i]['x_value'];}}
if(data[i]['y_value']>max_y_value){max_y_value=data[i]['y_value'];}
if(data[i]['y_value']<min_y_value){min_y_value=data[i]['y_value'];}}
var hline=jQuery.extend(true,{},self.options.inline_chart.line.hline,{enabled:false,values:[]});var options=self.options.inline_chart.line.options;if(self.options.inline_chart.line.options.scales.y_axes_maximize){if(max_y_value>0&&min_y_value<0){hline.enabled=true;hline.values.push(0);options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=max_y_value;}
if(self.options.inline_chart.line.options.scales.y_axes_begin_at_zero){if(max_y_value>0&&min_y_value>0){options.scales.yAxes[0].ticks.min=0;options.scales.yAxes[0].ticks.max=max_y_value;}else if(max_y_value<0&&min_y_value<0){options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=0;}}else{options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=max_y_value;}}
options.scales.xAxes[0].ticks.min=min_x_value;options.scales.xAxes[0].ticks.max=max_x_value;if(point_format){data.sort(function(a,b){return parseFloat(a.x_value)-parseFloat(b.x_value);});for(var i=0;i<data.length;i++){char_data.push({x:data[i]['x_value'],y:data[i]['y_value']});labels.push(data[i]['x_value']);}
var width=Math.abs(max_x_value-min_x_value)*(self.options.inline_chart.line.item_width+1);if(width>self.options.inline_chart.max_width){width=self.options.inline_chart.max_width;}
$(this).attr("width",width);var inlineChart=new Chart(this,{type:'scatterWithLine',data:{datasets:[jQuery.extend(true,{},self.options.inline_chart.line.data,{data:char_data})],hline:hline},options:options});}else{var width=data.length*(self.options.inline_chart.line.item_width+1);if(width>self.options.inline_chart.max_width){width=self.options.inline_chart.max_width;}
$(this).attr("width",width);for(var i=0;i<data.length;i++){var value=parseFloat(data[i]['y_value']);char_data.push(value);labels.push(i);}
var inlineChart=new Chart(this,{type:'lineWithLine',data:{labels:labels,datasets:[jQuery.extend(true,{},self.options.inline_chart.line.data,{data:char_data})],hline:hline},options:options});}});$(element).find('.datatable-inline-line-steps').each(function(){$(this).attr("height",self.options.inline_chart.height);var data=self.parseDataList($(this).data('value'));var char_data=[];var labels=[];var point_format=true;var min_x_value=Infinity;var max_x_value=-Infinity;var min_y_value=Infinity;var max_y_value=-Infinity;for(var i=0;i<data.length;i++){if(data[i]['x_value']===null){point_format=false;}else{if(data[i]['x_value']<min_x_value){min_x_value=data[i]['x_value'];}
if(data[i]['x_value']>max_x_value){max_x_value=data[i]['x_value'];}}
if(data[i]['y_value']>max_y_value){max_y_value=data[i]['y_value'];}
if(data[i]['y_value']<min_y_value){min_y_value=data[i]['y_value'];}}
var hline=jQuery.extend(true,{},self.options.inline_chart.line_steps.hline,{enabled:false,values:[]});var options=self.options.inline_chart.line_steps.options;if(self.options.inline_chart.line_steps.options.scales.y_axes_maximize){if(max_y_value>0&&min_y_value<0){hline.enabled=true;hline.values.push(0);options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=max_y_value;}
if(self.options.inline_chart.line_steps.options.scales.y_axes_begin_at_zero){if(max_y_value>0&&min_y_value>0){options.scales.yAxes[0].ticks.min=0;options.scales.yAxes[0].ticks.max=max_y_value;}else if(max_y_value<0&&min_y_value<0){options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=0;}}else{options.scales.yAxes[0].ticks.min=min_y_value;options.scales.yAxes[0].ticks.max=max_y_value;}}
options.scales.xAxes[0].ticks.min=min_x_value;options.scales.xAxes[0].ticks.max=max_x_value;if(point_format){data.sort(function(a,b){return parseFloat(a.x_value)-parseFloat(b.x_value);});for(var i=0;i<data.length;i++){char_data.push({x:data[i]['x_value'],y:data[i]['y_value']});labels.push(data[i]['x_value']);}
if(self.options.inline_chart.line_steps.options.scales.x_axes_show_last){max_x_value=max_x_value+self.options.inline_chart.line_steps.options.scales.x_axes_offset_last;char_data.push({x:max_x_value,y:data[data.length-1]['y_value']});labels.push(data[data.length-1]['x_value']);options.scales.xAxes[0].ticks.min=min_x_value;options.scales.xAxes[0].ticks.max=max_x_value;}
var width=Math.abs(max_x_value-min_x_value)*(self.options.inline_chart.line_steps.item_width+1);if(width>self.options.inline_chart.max_width){width=self.options.inline_chart.max_width;}
$(this).attr("width",width);var inlineChart=new Chart(this,{type:'scatterWithLine',data:{datasets:[jQuery.extend(true,{},self.options.inline_chart.line_steps.data,{data:char_data})],hline:hline},options:options});}else{var width=(data.length+1)*(self.options.inline_chart.line_steps.item_width+1);if(width>self.options.inline_chart.max_width){width=self.options.inline_chart.max_width;}
$(this).attr("width",width);for(var i=0;i<data.length;i++){var value=parseFloat(data[i]['y_value']);char_data.push(value);labels.push(i);}
if(self.options.inline_chart.line_steps.options.scales.x_axes_show_last){char_data.push(value);labels.push(data.length);options.scales.xAxes[0].ticks.min=min_x_value;options.scales.xAxes[0].ticks.max=max_x_value+1;}
var inlineChart=new Chart(this,{type:'lineWithLine',data:{labels:labels,datasets:[jQuery.extend(true,{},self.options.inline_chart.line_steps.data,{data:char_data})],hline:hline},options:options});}});if(self.options.table.column_hover){$(element).find('td').hover(function(){$(this).parents('table').find('tr td').removeClass('hover').removeClass('row-hover');$(this).parents('table').find('tr th').removeClass('hover');$(this).parents('table').find('tr td:nth-child('+($(this).index()+1)+')').addClass('hover');$(this).parents('table').find('tr th:nth-child('+($(this).index()+1)+')').addClass('hover');});}
$(element).find('tr').hover(function(){if(self.bar_chart!==null){self.resetChartTooltip(self.bar_chart,0);var index=$(this).index();var table_options=$(self.element).bootstrapTable('getOptions');if(table_options.pagination){index+=table_options.pageSize*(table_options.pageNumber-1);}
for(var dataset_id=0;dataset_id<self.bar_chart.chart.data.datasets.length;dataset_id++){self.openChartTooltip(self.bar_chart,dataset_id,index);}}
if(self.scatter_chart!==null){self.resetChartTooltip(self.scatter_chart,0);var index=$(this).index();var table_options=$(self.element).bootstrapTable('getOptions');if(table_options.pagination){index+=table_options.pageSize*(table_options.pageNumber-1);}
self.openChartTooltip(self.scatter_chart,0,index);}
if(self.line_chart!==null){self.resetChartTooltip(self.line_chart,0);var index=$(this).index();var unique_id=$(this).data('uniqueid');if(typeof unique_id!=='undefined'){for(var dataset_id=0;dataset_id<self.line_chart_data.datasets.length;dataset_id++){for(var item_id=0;item_id<self.line_chart_data.datasets[dataset_id].data_uniqueid.length;item_id++){if(unique_id==self.line_chart_data.datasets[dataset_id].data_uniqueid[item_id]){self.openChartTooltip(self.line_chart,dataset_id,item_id);}}}}}});$(element).find('tr').mouseleave(function(){if(self.bar_chart!==null){self.resetChartTooltip(self.bar_chart,0);}
if(self.scatter_chart!==null){self.resetChartTooltip(self.scatter_chart,0);}
if(self.line_chart!==null){self.resetChartTooltip(self.line_chart,0);}});});$(element).on('sort.bs.table',function(e,name,order){if(self.options.rank_mode.startsWith('grouped')){setTimeout(function(){self.updateRank();},100);}
self.chart_update=true;});$(element).on('search.bs.table',function(e,name,order){if(self.options.rank_mode.startsWith('grouped')){setTimeout(function(){self.updateRank();},100);}
self.chart_update=true;});this.initFieldMeta();this.options.element.loader='#loader'+this.uniqueId;var $div=$('<div>',{id:'loader'+this.uniqueId,'class':'text-center text-muted'});$div.append('<h1><span class="glyphicon glyphicon-cog glyphicon-spin"></span></h1>');$div.insertAfter(this.$element);this.loadTableData();},initOptions:function(options){var attributes=jQuery.extend(true,{},this.defaults);if(typeof this.$element.data('show-chart')!=='undefined'){attributes.show_chart=this.$element.data('show-chart');}
if(typeof this.$element.data('show-toolbar')!=='undefined'){attributes.show_toolbar=this.$element.data('show-toolbar');}
if(typeof this.$element.data('show-table-selector')!=='undefined'){attributes.show_table_selector=this.$element.data('show-table-selector');}
if(typeof this.$element.data('table-default-mode')!=='undefined'){attributes.table_default_mode=this.$element.data('table-default-mode');}
if(typeof this.$element.data('color-scheme')!=='undefined'){var scheme=this.$element.data('color-scheme');if(this.defaults.colors.schemes.hasOwnProperty(scheme)){attributes.colors.datasets=this.defaults.colors.schemes[scheme];}else if(this.defaults.colors.schemes.hasOwnProperty(scheme+':reversed')){attributes.colors.datasets=this.defaults.colors.schemes[scheme].reverse();}}
if(typeof this.$element.data('row-highlighting')!=='undefined'){attributes.table.row_highlighting=this.$element.data('row-highlighting');}
if(typeof this.$element.data('id-field')!=='undefined'){attributes.table.id_field=this.$element.data('id-field');}
if(typeof this.$element.data('column-hover')!=='undefined'){attributes.table.column_hover=this.$element.data('column-hover');}
if(typeof this.$element.data('chart-modes')!=='undefined'){attributes.chart_modes=this.$element.data('chart-modes');}
if(typeof this.$element.data('chart-default-mode')!=='undefined'){attributes.chart_default_mode=this.$element.data('chart-default-mode');}
if(typeof this.$element.data('chart-custom-json')!=='undefined'){attributes.custom_chart_json=this.$element.data('chart-custom-json');}
if(typeof this.$element.data('rank-mode')!=='undefined'){attributes.rank_mode=this.$element.data('rank-mode');}
if(typeof this.$element.data('tag-mode')!=='undefined'){attributes.tag_mode=this.$element.data('tag-mode');}
if(typeof this.$element.data('chart-position')!=='undefined'){attributes.chart.position=this.$element.data('chart-position');}
if(typeof this.$element.data('inline-chart-height')!=='undefined'){attributes.inline_chart.height=this.$element.data('inline-chart-height');}
if(typeof this.$element.data('inline-chart-max-width')!=='undefined'){attributes.inline_chart.max_width=this.$element.data('inline-chart-max-width');}
if(typeof this.$element.data('inline-bar-vertical-line-width')!=='undefined'){attributes.inline_chart.bar_vertical.data.borderWidth=this.$element.data('inline-bar-vertical-line-width');}
if(typeof this.$element.data('inline-bar-vertical-spacing')!=='undefined'){attributes.inline_chart.bar_vertical.options.scales.xAxes[0].barPercentage=this.$element.data('inline-bar-vertical-spacing');attributes.inline_chart.bar_vertical.options.scales.xAxes[0].categoryPercentage=this.$element.data('inline-bar-vertical-spacing');}
if(typeof this.$element.data('inline-bar-vertical-item-width')!=='undefined'){attributes.inline_chart.bar_vertical.item_width=this.$element.data('inline-bar-vertical-item-width');}
if(typeof this.$element.data('inline-bar-vertical-tristate-line-width')!=='undefined'){attributes.inline_chart.bar_vertical.data.borderWidth=this.$element.data('inline-bar-vertical-tristate-line-width');}
if(typeof this.$element.data('inline-bar-vertical-tristate-spacing')!=='undefined'){attributes.inline_chart.bar_vertical.options.scales.xAxes[0].barPercentage=this.$element.data('inline-bar-vertical-tristate-spacing');attributes.inline_chart.bar_vertical.options.scales.xAxes[0].categoryPercentage=this.$element.data('inline-bar-vertical-tristate-spacing');}
if(typeof this.$element.data('inline-bar-vertical-tristate-item-width')!=='undefined'){attributes.inline_chart.bar_vertical_tristate.item_width=this.$element.data('inline-bar-vertical-tristate-item-width');}
if(typeof this.$element.data('inline-indicator-size')!=='undefined'){attributes.inline_chart.value_indicator.svg.size=this.$element.data('inline-indicator-size');}
if(typeof this.$element.data('inline-indicator-type')!=='undefined'){attributes.inline_chart.value_indicator.svg.type=this.$element.data('inline-indicator-type');}
attributes.bar=jQuery.extend(true,{},attributes.bar,this.getBarChartParameters(this.$element));attributes.line=jQuery.extend(true,{},attributes.line,this.getLineChartParameters(this.$element));attributes.scatter=jQuery.extend(true,{},attributes.scatter,this.getScatterChartParameters(this.$element));attributes.comparison=jQuery.extend(true,{},attributes.comparison,this.getComparisonChartParameters(this.$element));this.options=jQuery.extend(true,{},attributes,options);if(typeof this.$element.data('page-list')==='undefined'){this.$element.attr('data-page-list',this.options.table.page_list);}
if(typeof this.$element.data('pagination')==='undefined'){this.$element.attr('data-pagination',this.options.table.pagination);}
if(typeof this.$element.data('show-header')==='undefined'){this.$element.attr('data-show-header',this.options.table.show_header);}
if(typeof this.$element.data('show-column')==='undefined'){this.$element.attr('data-show-column',this.options.table.show_column);}
if(typeof this.$element.data('show-pagination-switch')==='undefined'){if(this.options.show_toolbar){this.$element.attr('data-show-pagination-switch',this.options.table.show_pagination_switch);}else{this.$element.attr('data-show-pagination-switch',false);}}
if(typeof this.$element.data('striped')==='undefined'){this.$element.attr('data-striped',this.options.table.striped);}
this.options.chart_modes=this.options.chart_modes.split(',');if(this.options.chart_modes.length==1&&this.options.chart_modes[0]!=this.options.chart_default_mode&&this.options.chart_default_mode!='off'){this.options.chart_default_mode=this.options.chart_modes[0];}
if(!this.options.show_toolbar&&this.options.table_default_mode==='hide'){this.$element.attr('data-height',1);this.$element.attr('data-page-size',1);this.$element.attr('data-pagination',false);this.$element.attr('data-show-pagination-switch',false);}},createHelperFunctions:function(){if(typeof window['isNumericWithInterval']!=='function'){window['isNumericWithInterval']=function(value){var regex=/[+-]?\d+(?:\.\d+)\s+\([+-]?\d+(?:\.\d+)\s+-\s+[+-]?\d+(?:\.\d+)\)/g;var pattern=new RegExp(regex);return pattern.test(value);}}
if(typeof window['isNumericWithError']!=='function'){window['isNumericWithError']=function(value){var pattern_plusminus=new RegExp(/([+-]?([0-9]*[.])?[0-9]+)(\s+)?[±](\s+)?(([0-9]*[.])?[0-9]+)/);return pattern_plusminus.test(value);}}
if(typeof window['numericToFloat']!=='function'){window['numericToFloat']=function(value,precision){if(typeof value==='string'||value instanceof String){value=value.replace('%','');}
var float_value=parseFloat(value);if(!isNaN(float_value)){if(typeof precision!=='undefined'){return float_value.toFixed(precision);}else{return float_value;}}
return value;}}
if(typeof window['parseNumericErrorInterval']!=='function'){window['parseNumericErrorInterval']=function(value,precision){var pattern_interval=new RegExp(/([+-]?([0-9]*[.])?[0-9]+)(\s+)[(]([+-]?([0-9]*[.])?[0-9]+)(\s+)[-](\s+)([+-]?([0-9]*[.])?[0-9]+)[)]/);var matches;if((matches=pattern_interval.exec(value))!==null){return{value:numericToFloat(matches[1],precision),value_min:numericToFloat(matches[4],precision),value_max:numericToFloat(matches[8],precision)}}else{return{value:numericToFloat(value,precision),value_min:null,value_max:null}}}}
if(typeof window['parseNumericErrorPlusminus']!=='function'){window['parseNumericErrorPlusminus']=function(value,precision){var pattern_plusminus=new RegExp(/([+-]?([0-9]*[.])?[0-9]+)(\s+)?[±](\s+)?(([0-9]*[.])?[0-9]+)/);var matches;if((matches=pattern_plusminus.exec(value))!==null){return{value:numericToFloat(matches[1],precision),value_plusminus:numericToFloat(matches[5],precision),value_min:numericToFloat(numericToFloat(matches[1])-numericToFloat(matches[5]),precision),value_max:numericToFloat(numericToFloat(matches[1])+numericToFloat(matches[5]),precision)}}else{return{value:numericToFloat(value,precision),value_plusminus:null,value_min:null,value_max:null}}}}
if(typeof window['runningFormatter']!=='function'){window['runningFormatter']=function(value,row,index){return(index+1);}}
if(typeof window['valueFormatter_numeric']!=='function'){window['valueFormatter_numeric']=function(value,row,index,precision=undefined,muted=undefined,prefix=undefined,postfix,plus=false,zeroReplacement=undefined){if(typeof prefix==='undefined'){prefix=''}
if(typeof postfix==='undefined'){postfix=''}
if(muted){if(postfix){postfix='<span class="text-muted">'+postfix+'</span>';}}
if(jQuery.isNumeric(value)){value=parseFloat(value);if(typeof precision!=='undefined'){value=value.toFixed(precision);}
if(typeof zeroReplacement!=='undefined'&&value==0){if(muted){value='<span class="text-muted">'+zeroReplacement+'</span>';}else{value=zeroReplacement;}}else{if(plus&&value>=0){value='+'+value;}}
return prefix+value+postfix;}else{return value;}}}
if(typeof window['valueFormatter_float1_percentage']!=='function'){window['valueFormatter_float1_percentage']=function(value,row,index){return valueFormatter_numeric(value,row,index,1,false,undefined,' %');};}
if(typeof window['valueFormatter_numeric_exponential']!=='function'){window['valueFormatter_numeric_exponential']=function(value,row,index,precision,muted,prefix,postfix){if(typeof prefix==='undefined'){prefix=''}
if(typeof postfix==='undefined'){postfix=''}
if(jQuery.isNumeric(value)){value=parseFloat(value);if(typeof precision!=='undefined'){value=value.toExponential(precision);}
return prefix+value+postfix;}else{return value;}}}
if(typeof window['valueFormatter_numeric_interval']!=='function'){window['valueFormatter_numeric_interval']=function(value,row,index,precision=undefined,muted=undefined,unit=undefined){var unit_field='';if(typeof unit!=='undefined'){unit_field=' '+unit;}
if(isNumericWithInterval(value)){var item=parseNumericErrorInterval(value,precision);if(typeof muted!=='undefined'&&muted){return item.value+unit_field+' <small class="text-muted">('+item.value_min+' - '+item.value_max+')</small>';}else{return item.value+unit_field+' ('+item.value_min+' - '+item.value_max+')';}}else if(jQuery.isNumeric(value)){return parseFloat(value).toFixed(precision)+unit_field;}else{return value;}}}
if(typeof window['valueFormatter_numeric_plusminus']!=='function'){window['valueFormatter_numeric_plusminus']=function(value,row,index,precision=undefined,muted=undefined,unit=undefined){var unit_field='';if(typeof unit!=='undefined'){unit_field=' '+unit;}
if(isNumericWithError(value)){var item=parseNumericErrorPlusminus(value,precision);if(typeof muted!=='undefined'&&muted){return item.value+unit_field+' <small class="text-muted">±'+item.value_plusminus+'</small>';}else{return item.value+unit_field+' ±'+item.value_plusminus;}}else if(jQuery.isNumeric(value)){return parseFloat(value).toFixed(precision)+unit_field;}else{return value;}}}
if(typeof window['valueFormatter_numeric_percentile']!=='function'){window['valueFormatter_numeric_percentile']=function(value,row,index,muted){var j=value%10;var postfix='<small>th</small>';if(j==1){postfix="<small>st</small>";}
if(j==2){postfix="<small>nd</small>";}
if(j==3){postfix="<small>rd</small>";}
return valueFormatter_numeric(value,row,index,0,muted,undefined,postfix);}}
if(typeof window['valueFormatter_html']!=='function'){window['valueFormatter_html']=function(value,row,index){return value.replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');}}
if(typeof window['valueFormatter_list']!=='function'){window['valueFormatter_list']=function(value,row,index){var items=value.split(',');if(items.length>0){return items.join('<br>');}else{return value;}}}},createNumericValueFormatter:function(value_type,index){var formatter_function_name='valueFormatter_'+value_type.replace(/-/g,'_')+'_'+this.uniqueId+'_'+index;switch(value_type){case'int':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,0);};break;case'float1':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,1);};break;case'float2':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,2);};break;case'float3':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,3);};break;case'float4':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,4);};break;case'int-nonzero':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,0,undefined,undefined,undefined,false,'');};break;case'int-nonzero-dash':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,0,undefined,undefined,undefined,false,'-');};break;case'int-nonzero-dash-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,0,true,undefined,undefined,false,'-');};break;case'float1-nonzero':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,1,undefined,undefined,undefined,false,'');};break;case'float1-nonzero-dash':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,1,true,undefined,undefined,false,'-');};break;case'float1-nonzero-dash-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,1,true,undefined,undefined,false,'-');};break;case'float2-nonzero':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,2,undefined,undefined,undefined,false,'');}
break;case'float2-nonzero-dash':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,2,true,undefined,undefined,false,'-');};break;case'float2-nonzero-dash-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,2,true,undefined,undefined,false,'-');};break;case'float3-nonzero':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,3,undefined,undefined,undefined,false,'');}
break;case'float3-nonzero-dash':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,3,true,undefined,undefined,false,'-');};break;case'float3-nonzero-dash-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,3,undefined,undefined,undefined,false,'-');};break;case'float4-nonzero':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,4,undefined,undefined,undefined,false,'');}
break;case'float4-nonzero-dash':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,4,true,undefined,undefined,false,'-');};break;case'float4-nonzero-dash-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,4,true,undefined,undefined,false,'-');};break;case'int-exp':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_exponential(value,row,index,0);};break;case'float1-exp':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_exponential(value,row,index,1);};break;case'float2-exp':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_exponential(value,row,index,2);};break;case'float3-exp':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_exponential(value,row,index,3);};break;case'float4-exp':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_exponential(value,row,index,4);};break;case'int-plus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,0,false,undefined,undefined,true);};break;case'float1-plus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,1,false,undefined,undefined,true);};break;case'float2-plus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,2,false,undefined,undefined,true);};break;case'float3-plus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,3,false,undefined,undefined,true);};break;case'float4-plus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,4,false,undefined,undefined,true);};break;case'int-interval':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,0,false);};break;case'int-interval-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,0,true);};break;case'float1-interval':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,1,false);};break;case'float1-interval-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,1,true);};break;case'float2-interval':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,2,false);};break;case'float2-interval-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,2,true);};break;case'float3-interval':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,3,false);};break;case'float3-interval-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,3,true);};break;case'float4-interval':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,4,false);};break;case'float4-interval-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,4,true);};break;case'int-plusminus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,0,false);};break;case'int-plusminus-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,0,true);};break;case'float1-plusminus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,1,false);};break;case'float1-plusminus-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,1,true);};break;case'float2-plusminus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,2,false);};break;case'float2-plusminus-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,2,true);};break;case'float3-plusminus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,3,false);};break;case'float3-plusminus-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,3,true);};break;case'float4-plusminus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,4,false);};break;case'float4-plusminus-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,4,true);};break;case'int-error':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,0,false,'±');};break;case'float1-error':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,1,false,'±');};break;case'float2-error':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,2,false,'±');};break;case'float3-error':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,3,false,'±');};break;case'float4-error':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,4,false,'±');};break;case'int-percentage':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,0,false,undefined,' %');};break;case'int-percentage-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,0,true,undefined,' %');};break;case'float1-percentage':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,1,false,undefined,' %');};break;case'float1-percentage-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,1,true,undefined,' %');};break;case'float2-percentage':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,2,false,undefined,' %');};break;case'float2-percentage-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,2,true,undefined,' %');};break;case'float3-percentage':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,3,false,undefined,' %');};break;case'float3-percentage-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,3,true,undefined,' %');};break;case'float4-percentage':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,4,false,undefined,' %');};break;case'float4-percentage-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,4,true,undefined,' %');};break;case'int-percentage-interval':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,0,false,'%');};break;case'int-percentage-interval-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,0,true,'%');};break;case'float1-percentage-interval':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,1,false,'%');};break;case'float1-percentage-interval-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,1,true,'%');};break;case'float2-percentage-interval':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,2,false,'%');};break;case'float2-percentage-interval-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,2,true,'%');};break;case'float3-percentage-interval':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,3,false,'%');};break;case'float3-percentage-interval-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,3,true,'%');};break;case'float4-percentage-interval':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,4,false,'%');};break;case'float4-percentage-interval-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_interval(value,row,index,4,true,'%');};break;case'int-percentage-plusminus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,0,false,'%');};break;case'int-percentage-plusminus-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,0,true,'%');};break;case'float1-percentage-plusminus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,1,false,'%');};break;case'float1-percentage-plusminus-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,1,true,'%');};break;case'float2-percentage-plusminus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,2,false,'%');};break;case'float2-percentage-plusminus-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,2,true,'%');};break;case'float3-percentage-plusminus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,3,false,'%');};break;case'float3-percentage-plusminus-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,3,true,'%');};break;case'float4-percentage-plusminus':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,4,false,'%');};break;case'float4-percentage-plusminus-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_plusminus(value,row,index,4,true,'%');};break;case'int-percentile':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_percentile(value,row,index,false);};break;case'int-percentile-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric_percentile(value,row,index,true);};break;case'int-db':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,0,false,undefined,' dB');};break;case'int-db-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,0,true,undefined,' dB');};break;case'float1-db':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,1,false,undefined,' dB');};break;case'float1-db-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,1,true,undefined,' dB');};break;case'float2-db':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,2,false,undefined,' dB');};break;case'float2-db-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,2,true,undefined,' dB');};break;case'float3-db':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,3,false,undefined,' dB');};break;case'float3-db-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,3,true,undefined,' dB');};break;case'float4-db':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,4,false,undefined,' dB');};break;case'float4-db-muted':window[formatter_function_name]=function(value,row,index){return valueFormatter_numeric(value,row,index,4,true,undefined,' dB');};break;default:break;}
return formatter_function_name;},createInlineValueFormatter:function(value_type,index,header){var self=this;var formatter_function_name='valueFormatter_'+value_type.replace(/-/g,'_')+'_'+this.uniqueId+'_'+index;switch(value_type){case'inline-bar-vertical':window[formatter_function_name]=function(value,row,index){var items=value.split(',');var html='';if(items.length>0){html+='<canvas class="datatable-inline-bar-vertical" data-value="'+value+'"';if(typeof header.data('dataset-labels')!=='undefined'){html+=' data-dataset-labels="'+header.data('dataset-labels')+'" '}
if(typeof header.data('dataset-colors')!=='undefined'){html+=' data-dataset-colors="'+header.data('dataset-colors')+'" '}
html+='></canvas>';}
return html;};break;case'inline-bar-vertical-html':var value_formatter=null;if(typeof header.data('inline-value-type')!=='undefined'){value_formatter=this.createNumericValueFormatter(header.data('inline-value-type'),index);}else{value_formatter=this.createNumericValueFormatter('int-percentile-muted',index);}
window[formatter_function_name]=function(value,row,index){var style_extra='';if(typeof header.data('inline-width')!=='undefined'){style_extra+='width:'+header.data('inline-width')+'px;';}
if(typeof header.data('inline-height')!=='undefined'){style_extra+='height:'+header.data('inline-height')+'px';}
if(style_extra){style_extra=' style="'+style_extra+'"';}
var show_labels=false;if(typeof header.data('inline-show-labels')!=='undefined'){show_labels=header.data('inline-show-labels');}
var dataset_labels=[];if(typeof header.data('dataset-labels')!=='undefined'){dataset_labels=header.data('dataset-labels').split(',')}
var show_tooltips=true;if(typeof header.data('inline-show-tooltips')!=='undefined'){show_tooltips=header.data('inline-show-tooltips');}
var dataset_colors=[];if(typeof header.data('dataset-colors')!=='undefined'){dataset_colors=header.data('dataset-colors').split(',')}
var show_values=false;if(typeof header.data('inline-show-values')!=='undefined'){show_values=header.data('inline-show-values');}
var small_values=false;if(typeof header.data('inline-small-values')!=='undefined'){small_values=header.data('inline-small-values');}
var muted_values=false;if(typeof header.data('inline-muted-values')!=='undefined'){muted_values=header.data('inline-muted-values');}
var value_mode='average';if(typeof header.data('inline-value-mode')!=='undefined'){value_mode=header.data('inline-value-mode');}
var value_average=50;if(typeof header.data('inline-value-average')!=='undefined'){value_average=header.data('inline-value-average');}
var value_min=null;if(typeof header.data('inline-value-min')!=='undefined'){value_min=header.data('inline-value-min');}
var value_max=null;if(typeof header.data('inline-value-max')!=='undefined'){value_max=header.data('inline-value-max');}
var show_limits=false;if(typeof header.data('inline-show-limits')!=='undefined'){show_limits=header.data('inline-show-limits');}
if(value_mode==='global-scale'&&(value_min==null||value_max==null)){var field_name=header.data('field');var field_index=self.field_meta.findIndex(x=>x.field===field_name);var global_min=Infinity;var global_max=-Infinity;$(self.element).find('tbody tr').each(function(){var current_row_data=self.parseDataList($(this).find('td').eq(field_index).text().trim());for(var i=0;i<current_row_data.length;i++){if(current_row_data[i]['y_value']>global_max){global_max=current_row_data[i]['y_value'];}
if(current_row_data[i]['y_value']<global_min){global_min=current_row_data[i]['y_value'];}}});if(value_min==null){value_min=global_min;header.data('inline-value-min',value_min);}
if(value_max==null){value_max=global_max;header.data('inline-value-max',value_max);}}
var bar_type='normal';if(typeof header.data('inline-bar-type')!=='undefined'){if(header.data('inline-bar-type')=='thin'){bar_type='thin';}else if(header.data('inline-bar-type')=='slim'){bar_type='slim';}}
var data=self.parseDataList(value);var html='';html+='<div class="inline-vbar-container" '+style_extra+'>';if(data.length>0){if(value_mode==='scale'&&(value_min==null||value_max==null)){var min=Infinity;var max=-Infinity;for(var i=0;i<data.length;i++){if(data[i]['y_value']>max){max=data[i]['y_value'];}
if(data[i]['y_value']<min){min=data[i]['y_value'];}}
if(value_min==null){value_min=min;}
if(value_max==null){value_max=max;}}
if(value_mode.includes('scale')){for(var i=0;i<data.length;i++){data[i]['y_value_scaled']=(data[i]['y_value']-value_min)/(value_max-value_min)*100.0;}}
for(var i=0;i<data.length;i++){var current_value=data[i]['y_value'];var current_color=null;var value_string=window[value_formatter](current_value);if(bar_type==='thin'){html+='<div class="inline-vbar inline-vertical-thin">';}else if(bar_type==='slim'){html+='<div class="inline-vbar inline-vertical-slim">';}else{html+='<div class="inline-vbar">';}
var current_label=null;if(data[i]['label']){current_label=data[i]['label'];}else if(i<dataset_labels.length&&dataset_labels[i]){current_label=dataset_labels[i];}
if(show_labels){html+='<div class="value-label">';if(current_label){html+='<strong class="small text-muted">'+current_label+'</strong>';}
html+='</div>';}
var tooltip='';if(show_tooltips){tooltip+=' data-toggle="tooltip" data-placement="bottom" title="';if(current_label){tooltip+=current_label+': ';}
tooltip+=self.stripHTML(value_string)+'" ';}
if(bar_type==='thin'){html+='<div class="progress datatable-vertical-bar-thin"'+tooltip+'>'}else if(bar_type==='slim'){html+='<div class="progress datatable-vertical-bar-slim"'+tooltip+'>'}else{html+='<div class="progress datatable-vertical-bar"'+tooltip+'>'}
if(value_mode.includes('scale')){current_value=data[i]['y_value_scaled'];}
if(value_mode==='average'){if(current_value<=value_average){if(current_value>0){html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+current_value+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+'" ></div>';}
html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+(value_average-current_value)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.negative+';border-top: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+(100-value_average)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';border-bottom: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';}else if(current_value>value_average){html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+value_average+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';border-top: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+(current_value-value_average)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.positive+';border-bottom: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';if(100-current_value>0){html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+(100-current_value)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';" ></div>';}}}else if(value_mode==='show-average'){if(data[i]['color']){current_color=data[i]['color'];}else if(i<dataset_colors.length&&dataset_colors[i]){current_color=dataset_colors[i];}else{current_color=self.options.bar.colors.datasets[i%self.options.bar.colors.datasets.length];}
if(current_value<=value_average){if(current_value>0){html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+current_value+'%;background-color:'+current_color+'" ></div>';}
html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+(value_average-current_value)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';border-top: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+(100-value_average)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';border-bottom: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';}else if(current_value>value_average){html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+value_average+'%;background-color:'+current_color+';border-top: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+(current_value-value_average)+'%;background-color:'+current_color+';border-bottom: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';if(100-current_value>0){html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+(100-current_value)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';" ></div>';}}}else{if(data[i]['color']){current_color=data[i]['color'];}else if(i<dataset_colors.length&&dataset_colors[i]){current_color=dataset_colors[i];}else{current_color=self.options.bar.colors.datasets[i%self.options.bar.colors.datasets.length];}
html+='<div class="progress-bar progress-vertical-bar" role="progressbar" style="height: '+(current_value)+'%;background-color:'+current_color+';" ></div>';}
html+='</div>';if(show_values){html+='<div class="value">';if(small_values){if(muted_values){html+='<small class="text-muted">'+value_string+'</small>';}else{html+='<small>'+value_string+'</small>';}}else{if(muted_values){html+='<span class="text-muted">'+value_string+'</span>';}else{html+=value_string;}}
html+='</div>';}
html+='</div>';}
if(show_limits){html+='<div class="inline-vbar">';if(show_labels){html+='<div class="value-label"></div>';}
html+='<div class="value-limits">';html+='<div class="max"><em>'+value_max+'</em></div>';html+='<div class="min"><em>'+value_min+'</em></div>';html+='</div>';if(show_values){html+='<div class="value">&nbsp;</div>';}
html+='</div>';}}
html+='</div>';return html;}
break;case'inline-bar-vertical-average':window[formatter_function_name]=function(value,row,index){var items=value.split(',');for(var i=0;i<items.length;i++){items[i]=items[i]-50;}
var item_width=null;if(typeof header.data('inline-item-width')!=='undefined'){item_width=header.data('inline-item-width');}
var width=null;if(typeof header.data('inline-width')!=='undefined'){width=header.data('inline-width');}
var value_processed=items.join(',');var html='';if(items.length>0){html+='<canvas class="datatable-inline-bar-vertical" data-value="'+value_processed+'"';html+='data-mode="average" ';html+='data-value-max="50" data-value-min="-50" ';html+='data-value-color="true" ';if(width){html+='data-width="'+width+'" ';}
if(item_width){html+='data-item-width="'+item_width+'" ';}
if(typeof header.data('dataset-labels')!=='undefined'){html+=' data-dataset-labels="'+header.data('dataset-labels')+'" '}
if(typeof header.data('dataset-colors')!=='undefined'){html+=' data-dataset-colors="'+header.data('dataset-colors')+'" '}
html+='></canvas>';}
return html;};break;case'inline-bar-vertical-tristate':window[formatter_function_name]=function(value,row,index){var items=value.split(',');var html='';if(items.length>0){html+='<canvas class="datatable-inline-bar-vertical-tristate" data-value="'+value+'"></canvas>';}
return html;}
break;case'inline-bar-horizontal-html':var value_formatter=null;if(typeof header.data('inline-value-type')!=='undefined'){value_formatter=this.createNumericValueFormatter(header.data('inline-value-type'),index);}else{value_formatter=this.createNumericValueFormatter('int-percentile-muted',index);}
window[formatter_function_name]=function(value,row,index){var style_extra='';if(typeof header.data('inline-width')!=='undefined'){style_extra+=' style="width:'+header.data('inline-width')+'px" ';}
var show_labels=false;if(typeof header.data('inline-show-labels')!=='undefined'){show_labels=header.data('inline-show-labels');}
var dataset_labels=[];if(typeof header.data('dataset-labels')!=='undefined'){dataset_labels=header.data('dataset-labels').split(',')}
var show_tooltips=true;if(typeof header.data('inline-show-tooltips')!=='undefined'){show_tooltips=header.data('inline-show-tooltips');}
var dataset_colors=[];if(typeof header.data('dataset-colors')!=='undefined'){dataset_colors=header.data('dataset-colors').split(',')}
var show_values=false;if(typeof header.data('inline-show-values')!=='undefined'){show_values=header.data('inline-show-values');}
var small_values=false;if(typeof header.data('inline-small-values')!=='undefined'){small_values=header.data('inline-small-values');}
var muted_values=false;if(typeof header.data('inline-muted-values')!=='undefined'){muted_values=header.data('inline-muted-values');}
var value_mode='average';if(typeof header.data('inline-value-mode')!=='undefined'){value_mode=header.data('inline-value-mode');}
var value_average=50;if(typeof header.data('inline-value-average')!=='undefined'){value_average=header.data('inline-value-average');}
var value_min=null;if(typeof header.data('inline-value-min')!=='undefined'){value_min=header.data('inline-value-min');}
var value_max=null;if(typeof header.data('inline-value-max')!=='undefined'){value_max=header.data('inline-value-max');}
var show_limits=false;if(typeof header.data('inline-show-limits')!=='undefined'){show_limits=header.data('inline-show-limits');}
if(value_mode==='global-scale'&&(value_min==null||value_max==null)){var field_name=header.data('field');var field_index=self.field_meta.findIndex(x=>x.field===field_name);var global_min=Infinity;var global_max=-Infinity;$(self.element).find('tbody tr').each(function(){var current_row_data=self.parseDataList($(this).find('td').eq(field_index).text().trim());for(var i=0;i<current_row_data.length;i++){if(current_row_data[i]['y_value']>global_max){global_max=current_row_data[i]['y_value'];}
if(current_row_data[i]['y_value']<global_min){global_min=current_row_data[i]['y_value'];}}});if(value_min==null){value_min=global_min;header.data('inline-value-min',value_min);}
if(value_max==null){value_max=global_max;header.data('inline-value-max',value_max);}}
var bar_type='normal';if(typeof header.data('inline-bar-type')!=='undefined'){if(header.data('inline-bar-type')=='thin'){bar_type='thin';}else if(header.data('inline-bar-type')=='slim'){bar_type='slim';}}
var data=self.parseDataList(value);var html='';if(data.length>0){if(value_mode==='scale'&&(value_min==null||value_max==null)){var min=Infinity;var max=-Infinity;for(var i=0;i<data.length;i++){if(data[i]['y_value']>max){max=data[i]['y_value'];}
if(data[i]['y_value']<min){min=data[i]['y_value'];}}
if(value_min==null){value_min=min;}
if(value_max==null){value_max=max;}}
if(value_mode.includes('scale')){for(var i=0;i<data.length;i++){data[i]['y_value_scaled']=(data[i]['y_value']-value_min)/(value_max-value_min)*100.0;}}
for(var i=0;i<data.length;i++){var current_value=data[i]['y_value'];var value_string=window[value_formatter](current_value);var current_label=null;if(data[i]['label']){current_label=data[i]['label'];}else if(i<dataset_labels.length&&dataset_labels[i]){current_label=dataset_labels[i];}
var tooltip='';if(show_tooltips){tooltip+=' data-toggle="tooltip" data-placement="bottom" title="';if(current_label){tooltip+=current_label+': ';}
tooltip+=self.stripHTML(value_string)+'" ';}
if(bar_type=='thin'){html+='<div class="inline-hbar inline-hbar-thin" '+style_extra+tooltip+'>';}else if(bar_type=='slim'){html+='<div class="inline-hbar inline-hbar-slim" '+style_extra+tooltip+'>';}else{html+='<div class="inline-hbar" '+style_extra+tooltip+'>';}
if(show_labels){html+='<div class="value-label">';if(current_label){html+='<strong class="small text-muted">'+current_label+'</strong>';}
html+='</div>';}
if(bar_type=='thin'){html+='<div class="progress datatable-horizontal-bar-thin">'}else if(bar_type=='slim'){html+='<div class="progress datatable-horizontal-bar-slim">'}else{html+='<div class="progress datatable-horizontal-bar">'}
if(value_mode.includes('scale')){current_value=data[i]['y_value_scaled'];}
if(value_mode=='average'){if(current_value<=value_average){if(current_value>0&&current_value<value_average){html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+current_value+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+'" ></div>';html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(value_average-current_value)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.negative+';border-right: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';}else if(current_value==0){html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(value_average)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.negative+';border-right: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';}else if(current_value==value_average){html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(current_value)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';border-right: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';}
html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(100-value_average)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';border-left: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';}else if(current_value>value_average){html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+value_average+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';border-right: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(current_value-value_average)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.positive+';border-left: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';if(100-current_value>0){html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(100-current_value)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';" ></div>';}}}else if(value_mode=='show-average'){var current_color=null;if(data[i]['color']){current_color=data[i]['color'];}else if(i<dataset_colors.length&&dataset_colors[i]){current_color=dataset_colors[i];}else{current_color=self.options.bar.colors.datasets[i%self.options.bar.colors.datasets.length];}
if(current_value<=value_average){if(current_value>0&&current_value<value_average){html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+current_value+'%;background-color:'+current_color+'" ></div>';html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(value_average-current_value)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';border-right: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';}else if(current_value==0){html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(value_average)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';border-right: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';}else if(current_value==value_average){html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(current_value)+'%;background-color:'+current_color+';border-right: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';}
html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(100-value_average)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';border-left: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';}else if(current_value>value_average){html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+value_average+'%;background-color:'+current_color+';border-right: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(current_value-value_average)+'%;background-color:'+current_color+';border-left: 1px solid '+self.options.inline_chart.bar_horizontal_average.colors.center+';" ></div>';if(100-current_value>0){html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(100-current_value)+'%;background-color:'+self.options.inline_chart.bar_horizontal_average.colors.background+';" ></div>';}}}else{var current_color=null;if(data[i]['color']){current_color=data[i]['color'];}else if(i<dataset_colors.length&&dataset_colors[i]){current_color=dataset_colors[i];}else{current_color=self.options.bar.colors.datasets[i%self.options.bar.colors.datasets.length];}
html+='<div class="progress-bar progress-horizontal-bar" role="progressbar" style="width: '+(current_value)+'%;background-color:'+current_color+';" ></div>';}
html+='</div>';if(show_values){html+='<div class="value">';if(small_values){if(muted_values){html+='<small class="text-muted">'+value_string+'</small>';}else{html+='<small>'+value_string+'</small>';}}else{if(muted_values){html+='<span class="text-muted">'+value_string+'</span>';}else{html+=value_string;}}
html+='</div>';}
html+='</div>';}
if(show_limits){html+='<div class="inline-hbar" '+style_extra+'>';if(show_labels){html+='<div class="value-label"></div>';}
html+='<div class="value-limits">';html+='<div class="max"><em>'+value_max+'</em></div>';html+='<div class="min"><em>'+value_min+'</em></div>';html+='</div>';if(show_values){html+='<div class="value">&nbsp;</div>';}
html+='</div>';}}
return html;}
break;case'inline-bar-horizontal-percentage':window[formatter_function_name]=function(value,row,index){var value_formatter='valueFormatter_float1_percentage';var dataset_labels=[];if(typeof header.data('dataset-labels')!=='undefined'){dataset_labels=header.data('dataset-labels').split(',')}
var dataset_colors=[];if(typeof header.data('dataset-colors')!=='undefined'){dataset_colors=header.data('dataset-colors').split(',')}
var data=self.parseDataList(value);var html='';if(data.length>0){var value_sum=0;for(var i=0;i<data.length;i++){value_sum+=data[i]['y_value'];}
html+='<div class="progress datatable-horizontal-bar">';for(var i=0;i<data.length;i++){var percentage=data[i]['y_value'];if(value_sum>100.0&&value_sum<101.0){percentage=percentage/value_sum*100.0;}
var value_string=self.stripHTML(window[value_formatter](percentage));var current_color=null;if(data[i]['color']){current_color=data[i]['color'];}else if(i<dataset_colors.length&&dataset_colors[i]){current_color=dataset_colors[i];}else{current_color=self.options.bar.colors.datasets[i%self.options.bar.colors.datasets.length];}
html+='<div class="progress-bar" role="progressbar" data-percentage="100" aria-valuenow="'+percentage+'" aria-valuemin="0" aria-valuemax="100" style="width: '+percentage+'%;background-color:'+current_color+'" ';var current_label=null;if(data[i]['label']){current_label=data[i]['label'];}else if(i<dataset_labels.length&&dataset_labels[i]){current_label=dataset_labels[i];}
if(current_label){html+='data-toggle="tooltip" data-placement="bottom" title="'+current_label+': <strong>'+value_string+'</strong>" ';}else{html+='data-toggle="tooltip" data-placement="bottom" title="<strong>'+value_string+'</strong>" ';}
html+='>';html+='</div>';}
html+='</div>';}
return html;};break;case'inline-bar-horizontal-thin-percentage':window[formatter_function_name]=function(value,row,index){var value_formatter='valueFormatter_float1_percentage';var dataset_labels=[];if(typeof header.data('dataset-labels')!=='undefined'){dataset_labels=header.data('dataset-labels').split(',')}
var dataset_colors=[];if(typeof header.data('dataset-colors')!=='undefined'){dataset_colors=header.data('dataset-colors').split(',')}
var data=self.parseDataList(value);var html='';if(data.length>0){var value_sum=0;for(var i=0;i<data.length;i++){value_sum+=data[i]['y_value'];}
html+='<div class="progress datatable-horizontal-bar-thin">';for(var i=0;i<data.length;i++){var percentage=data[i]['y_value'];if(value_sum>100.0&&value_sum<101.0){percentage=percentage/value_sum*100.0;}
var value_string=self.stripHTML(window[value_formatter](percentage));var current_color=null;if(data[i]['color']){current_color=data[i]['color'];}else if(i<dataset_colors.length&&dataset_colors[i]){current_color=dataset_colors[i];}else{current_color=self.options.bar.colors.datasets[i%self.options.bar.colors.datasets.length];}
html+='<div class="progress-bar" role="progressbar" data-percentage="100" aria-valuenow="'+percentage+'" aria-valuemin="0" aria-valuemax="100" style="width: '+percentage+'%;background-color:'+current_color+'" ';var current_label=null;if(data[i]['label']){current_label=data[i]['label'];}else if(i<dataset_labels.length&&dataset_labels[i]){current_label=dataset_labels[i];}
if(current_label){html+='data-toggle="tooltip" data-placement="bottom" title="'+current_label+': <strong>'+value_string+'</strong>" ';}else{html+='data-toggle="tooltip" data-placement="bottom" title="<strong>'+value_string+'</strong>" ';}
html+='>';html+='</div>';}
html+='</div>';}
return html;};break;case'inline-line':window[formatter_function_name]=function(value,row,index){var items=value.split(',');var html='';if(items.length>0){html+='<canvas class="datatable-inline-line" data-value="'+value+'"></canvas>';}
return html;}
break;case'inline-line-steps':window[formatter_function_name]=function(value,row,index){var items=value.split(',');var html='';if(items.length>0){html+='<canvas class="datatable-inline-line-steps" data-value="'+value+'"></canvas>';}
return html;}
break;case'inline-pie':window[formatter_function_name]=function(value,row,index){var items=value.split(',');var html='';if(items.length>0){html+='<canvas class="datatable-inline-pie" data-value="'+value+'"></canvas>';}
return html;}
break;case'inline-indicator-value':window[formatter_function_name]=function(value,row,index){var data=self.parseDataList(value);var html='';if(data.length>0){for(var i=0;i<data.length;i++){var fill_color='transparent';if(!!data[i]['color']){fill_color=data[i]['color'];}else{fill_color=self.options.inline_chart.value_indicator.color.default;}
html+=self.svgElement(self.options.inline_chart.value_indicator.svg.type,self.options.inline_chart.value_indicator.svg.size,fill_color,data[i]['label'],false,0);}}
return html;};break;case'inline-indicator-value-html':window[formatter_function_name]=function(value,row,index){var data=self.parseDataList(value);var html='';if(data.length>0){html='<div class="">';for(var i=0;i<data.length;i++){var css_class=self.options.inline_chart.value_indicator.html.css;var fill_color='transparent';if(!!data[i]['color']){fill_color=data[i]['color'];}else{fill_color=self.options.inline_chart.value_indicator.color.default;}
html+='<span class="'+css_class+'" aria-hidden="true" ';if(data[i]['label']){html+='data-toggle="tooltip" data-placement="bottom" title="'+data[i]['label']+'"';}
html+=' style="color:'+fill_color+'"';html+='>';html+='</span>';}
html+='</div>';}
return html;};break;case'inline-indicator-binary':window[formatter_function_name]=function(value,row,index){var data=self.parseDataList(value);var html='';if(data.length>0){for(var i=0;i<data.length;i++){var fill_color=null;if(data[i]['y_value']>self.options.inline_chart.value_indicator.data.binarizationThreshold){fill_color=self.options.inline_chart.value_indicator.color.positive;}else{fill_color=self.options.inline_chart.value_indicator.color.negative;}
html+=self.svgElement(self.options.inline_chart.value_indicator.svg.type,self.options.inline_chart.value_indicator.svg.size,fill_color,data[i]['label'],false,0);}}
return html;};break;case'inline-indicator-binary-html':window[formatter_function_name]=function(value,row,index){var data=self.parseDataList(value);var html='';if(data.length>0){html='<div class="">';for(var i=0;i<data.length;i++){var css_class=self.options.inline_chart.value_indicator.html.css;var fill_color='transparent';if(data[i]['y_value']>self.options.inline_chart.value_indicator.data.binarizationThreshold){fill_color=self.options.inline_chart.value_indicator.color.positive;}else{fill_color=self.options.inline_chart.value_indicator.color.negative;}
html+='<span class="'+css_class+'" aria-hidden="true" ';if(data[i]['label']){html+='data-toggle="tooltip" data-placement="bottom" title="'+data[i]['label']+'"';}
html+=' style="color:'+fill_color+'"';html+='>';html+='</span>';}
html+='</div>';}
return html;};break;case'inline-indicator-tristate':window[formatter_function_name]=function(value,row,index){var data=self.parseDataList(value);var html='';if(data.length>0){for(var i=0;i<data.length;i++){var fill_color='transparent';var offset=0;if(data[i]['y_value']>self.options.inline_chart.value_indicator.data.binarizationThreshold){fill_color=self.options.inline_chart.value_indicator.color.positive;offset=0;}else if(data[i]['y_value']<self.options.inline_chart.value_indicator.data.binarizationThreshold){fill_color=self.options.inline_chart.value_indicator.color.negative;offset=self.options.inline_chart.value_indicator.svg.size;}else{fill_color=self.options.inline_chart.value_indicator.color.equal;offset=self.options.inline_chart.value_indicator.svg.size/2;}
html+=self.svgElement(self.options.inline_chart.value_indicator.svg.type,self.options.inline_chart.value_indicator.svg.size,fill_color,data[i]['label'],true,offset);}}
return html;};break;case'inline-indicator-tristate-html':window[formatter_function_name]=function(value,row,index){var data=self.parseDataList(value);var html='';if(data.length>0){html='<div class="">';for(var i=0;i<data.length;i++){var css_class=self.options.inline_chart.value_indicator.html.css;var fill_color='transparent';var offset=null;if(data[i]['y_value']>self.options.inline_chart.value_indicator.data.binarizationThreshold){fill_color=self.options.inline_chart.value_indicator.color.positive;offset=0;}else if(data[i]['y_value']<self.options.inline_chart.value_indicator.data.binarizationThreshold){fill_color=self.options.inline_chart.value_indicator.color.negative;offset=10;}else{fill_color=self.options.inline_chart.value_indicator.color.equal;offset=5;}
html+='<span class="'+css_class+'" aria-hidden="true" ';if(data[i]['label']){html+='data-toggle="tooltip" data-placement="bottom" title="'+data[i]['label']+'"';}
html+=' style="color:'+fill_color+'; height:30px;top:'+offset+'px;"';html+='>';html+='</span>';}
html+='</div>';}
return html;};break;case'inline-boolean-circle-svg':window[formatter_function_name]=function(value,row,index){var html='';var fill_color='transparent';if(value==1||value=='true'){fill_color=self.options.value_type.boolean.color.on;}else{fill_color=self.options.value_type.boolean.color.off;}
html+=self.svgElement(self.options.value_type.boolean.circle.svg.type,self.options.value_type.boolean.circle.svg.size,fill_color,undefined,false,0);return html;};break;case'inline-boolean-rect-svg':window[formatter_function_name]=function(value,row,index){var html='';var fill_color='transparent';if(value==1||value=='true'){fill_color=self.options.value_type.boolean.color.on;}else{fill_color=self.options.value_type.boolean.color.off;}
html+=self.svgElement(self.options.value_type.boolean.rect.svg.type,self.options.value_type.boolean.rect.svg.size,fill_color,undefined,false,0);return html;};break;case'inline-boolean-circle-html':window[formatter_function_name]=function(value,row,index){var fill_color;var css_class;if(value==1||value=='true'){fill_color=self.options.value_type.boolean.color.on;css_class=self.options.value_type.boolean.circle.html.on.css;}else{fill_color=self.options.value_type.boolean.color.off;css_class=self.options.value_type.boolean.circle.html.off.css;}
return'<span class="'+css_class+'" aria-hidden="true" style="color:'+fill_color+'"></span>';};break;case'inline-boolean-rect-html':window[formatter_function_name]=function(value,row,index){var fill_color;var css_class;if(value==1||value=='true'){fill_color=self.options.value_type.boolean.color.on;css_class=self.options.value_type.boolean.rect.html.on.css;}else{fill_color=self.options.value_type.boolean.color.off;css_class=self.options.value_type.boolean.rect.html.off.css;}
return'<span class="'+css_class+'" aria-hidden="true" style="color:'+fill_color+'"></span>';};break;default:break;}
return formatter_function_name;},initValueFormatters:function(){var self=this;$(this.element).find('thead tr th[data-value-type]').each(function(index){var that=this;var value_type=$(this).data('value-type');if(value_type.includes('percentage')){$(this).attr('data-postfix','%');}
if(value_type.startsWith('int')||value_type.startsWith('float')){$(this).attr('data-formatter',self.createNumericValueFormatter(value_type,index));}else if(value_type.startsWith('inline')){$(this).attr('data-formatter',self.createInlineValueFormatter(value_type,index,$(that)));}else{if(!$(this).attr('data-formatter')){switch(value_type){case'numeric-unit':window['valueFormatter_numeric_unit'+self.uniqueId]=function(value,row,index){if(jQuery.isNumeric(value)){value=parseFloat(value);return self.addNumberPrefix(value);}else{return value;}};$(this).attr('data-formatter','valueFormatter_numeric_unit'+self.uniqueId);break;case'html':$(this).attr('data-formatter','valueFormatter_html');break;case'date':$(this).attr('data-formatter','valueFormatter_date');break;case'list':$(this).attr('data-formatter','valueFormatter_list');break;case'url':window['valueFormatter_url'+self.uniqueId]=function(value,row,index){var links=[];if(value.trim()){var items=value.split(',');if(items.length>0){for(var i=0;i<items.length;i++){var current_link=items[i].trim();var index=current_link.lastIndexOf(';');if(index!=-1){var link=current_link.substring(0,index);var link_title=current_link.substring(index+1);links.push('<a class="datatable-link" href="'+link+'">'+link_title+'</a>');}else{links.push('<a class="datatable-icon" href="'+current_link+'">'+self.options.icon.url+'</a>');}}}}
return links.join('<br>');};$(this).attr('data-formatter','valueFormatter_url'+self.uniqueId);break;case'ref':window['valueFormatter_ref'+self.uniqueId]=function(value,row,index){var links=[];if(value.trim()){var items=value.split(',');if(items.length>0){for(var i=0;i<items.length;i++){var current_link=items[i].trim();var index=current_link.lastIndexOf(';');if(index!=-1){var link=current_link.substring(0,index);var link_title=current_link.substring(index+1);links.push('<a class="datatable-link" href="'+link+'">['+link_title+']</a>');}else{links.push('<a class="datatable-icon" href="'+current_link+'">'+self.options.icon.ref+'</a>');}}}}
return links.join('<br>');};$(this).attr('data-formatter','valueFormatter_ref'+self.uniqueId);break;case'anchor':window['valueFormatter_anchor'+self.uniqueId]=function valueFormatter_anchor(value,row,index){if(value.trim()){return'<a class="datatable-icon" href="javascript:void(0)" onclick="$(\'#collapse-'+value+'\').collapse(\'show\');window.location.hash=\''+value+'\';return false;">'+self.options.icon.anchor+'</a>'}else{return value;}};$(this).attr('data-formatter','valueFormatter_anchor'+self.uniqueId);break;case'str':break;default:window['valueFormatter_hide'+self.uniqueId]=function(value,row,index){return'<div class="text-muted" data-value="'+value+'">Invalid data-value-type</div>';};$(this).attr('data-formatter','valueFormatter_hide'+self.uniqueId);break;}}}});},initBootstrapTable:function(){$(this.element).bootstrapTable();$(this.element).trigger('post-body.bs.table');$(this.options.element.loader).hide();},extendChartjsLibrary:function(){var self=this;var originalBarDraw=Chart.controllers.bar.prototype.draw;Chart.helpers.extend(Chart.controllers.bar.prototype,{draw:function(){originalBarDraw.apply(this,arguments);var chart=this.chart;var scale=this.scale;var ctx=chart.chart.ctx;var xaxis=chart.scales['x-axis-0'];var yaxis=chart.scales['y-axis-0'];if(chart.config.options.hasOwnProperty('horizontal_line')&&chart.config.options.horizontal_line.enabled){var horizontal_line_value=this.getDataset().horizontal_line_value;var horizontal_line_color=this.getDataset().horizontal_line_color;jQuery.each(horizontal_line_value,function(index,value){var y=yaxis.getPixelForValue(value);ctx.save();ctx.beginPath();ctx.strokeStyle=horizontal_line_color[index];var lineWidth=2;if(chart.config.options.horizontal_line.hasOwnProperty('lineWidth')){lineWidth=chart.config.options.horizontal_line.lineWidth;}
ctx.lineWidth=lineWidth;ctx.moveTo(xaxis.left,y);ctx.lineTo(xaxis.right,y);ctx.stroke();ctx.restore();});}}});Chart.defaults.lineWithLine=Chart.helpers.clone(Chart.defaults.line);Chart.controllers.lineWithLine=Chart.controllers.line.extend({draw:function(ease){Chart.controllers.line.prototype.draw.call(this,ease);var chart=this.chart;var scale=this.scale;var ctx=chart.chart.ctx;if(chart.config.data.hasOwnProperty('hline')&&chart.config.data.hline.enabled&&chart.config.data.hline.value!==null){var xaxis=chart.scales['x-axis-0'];var yaxis=chart.scales['y-axis-0'];var values=chart.config.data.hline.values;var colors=chart.config.data.hline.colors;if(values.constructor!==Array){values=[values];}
if(colors.constructor!==Array){colors=[colors];}
jQuery.each(values,function(index,value){var y=yaxis.getPixelForValue(value);ctx.save();ctx.beginPath();if(colors.length>index){ctx.strokeStyle=colors[index];}else{ctx.strokeStyle=colors[0];}
ctx.lineWidth=chart.config.data.hline.width;ctx.moveTo(xaxis.left,y);ctx.lineTo(xaxis.right,y);ctx.stroke();ctx.restore();});}
if(this.chart.tooltip._active&&this.chart.tooltip._active.length){var current_point=this.chart.tooltip._active[0],ctx=this.chart.ctx,x=current_point.tooltipPosition().x,topY=this.chart.scales['y-axis-0'].top,bottomY=this.chart.scales['y-axis-0'].bottom;ctx.save();ctx.beginPath();ctx.moveTo(x,topY);ctx.lineTo(x,bottomY);ctx.lineWidth=1;ctx.strokeStyle='#888';ctx.stroke();ctx.restore();}}});var originalLineDraw=Chart.controllers.line.prototype.draw;Chart.helpers.extend(Chart.controllers.line.prototype,{draw:function(ease){var result=originalLineDraw.apply(this,arguments);var helpers=Chart.helpers;var chart=this.chart;var ctx=chart.chart.ctx;if(chart.config.options.hasOwnProperty('horizontal_line')&&chart.config.options.horizontal_line.enabled){var xaxis=chart.scales['x-axis-0'];var yaxis=chart.scales['y-axis-0'];var horizontal_line_value=this.getDataset().horizontal_line_value;if(horizontal_line_value.constructor!==Array){horizontal_line_value=[horizontal_line_value];}
jQuery.each(horizontal_line_value,function(index,value){var y=yaxis.getPixelForValue(value);ctx.save();ctx.beginPath();var strokeStyle='rgba(0,0,0,0.2)';if(chart.config.options.horizontal_line.hasOwnProperty('strokeStyle')){strokeStyle=chart.config.options.horizontal_line.strokeStyle;}
ctx.strokeStyle=strokeStyle;var lineWidth=2;if(chart.config.options.horizontal_line.hasOwnProperty('lineWidth')){lineWidth=chart.config.options.horizontal_line.lineWidth;}
ctx.lineWidth=lineWidth;ctx.moveTo(xaxis.left,y);ctx.lineTo(xaxis.right,y);ctx.stroke();ctx.restore();});}
if(chart.config.options.hasOwnProperty('horizontal_highlights')&&chart.config.options.horizontal_highlights.enabled){var data=chart.config.options.horizontal_highlights.data;if(data){var xaxis=chart.scales['x-axis-0'];var yaxis=chart.scales['y-axis-0'];var lineWidth=2;if(chart.config.options.horizontal_highlights.hasOwnProperty('lineWidth')){lineWidth=chart.config.options.horizontal_highlights.lineWidth;}
var strokeStyle=chart.config.options.horizontal_highlights.strokeStyle;for(var line_id=0;line_id<data.length;line_id++){var y=yaxis.getPixelForValue(data[line_id].y_value);if(data[line_id].color){if(data[line_id].color.startsWith('#')){strokeStyle=self.hexToRGB(data[line_id].color,chart.config.options.horizontal_highlights.opacity).css;}}
ctx.save();ctx.beginPath();ctx.strokeStyle=strokeStyle;ctx.lineWidth=lineWidth;ctx.moveTo(xaxis.left,y);ctx.lineTo(xaxis.right,y);ctx.stroke();ctx.restore();if(data[line_id].label){ctx.save();ctx.lineWidth=0;if(chart.config.options.horizontal_highlights.label.fillStyle){ctx.fillStyle=self.colorCode(chart.config.options.horizontal_highlights.label.fillStyle,chart.config.options.horizontal_highlights.label.opacity);}else{ctx.fillStyle=self.colorCode('#000',chart.config.options.horizontal_highlights.label.opacity);}
ctx.font=chart.config.options.horizontal_highlights.label.fontSize+' '+chart.config.options.horizontal_highlights.label.font;if(chart.config.options.horizontal_highlights.label.position==='top-left'){ctx.textBaseline='bottom';ctx.textAlign='left';ctx.fillText(data[line_id].label,xaxis.left+3,y);}else if(chart.config.options.horizontal_highlights.label.position==='top-right'){ctx.textBaseline='bottom';ctx.textAlign='right';ctx.fillText(data[line_id].label,xaxis.right-3,y);}else if(chart.config.options.horizontal_highlights.label.position==='bottom-left'){ctx.textBaseline='top';ctx.textAlign='left';ctx.fillText(data[line_id].label,xaxis.left+3,y+3);}else if(chart.config.options.horizontal_highlights.label.position==='bottom-right'){ctx.textBaseline='top';ctx.textAlign='right';ctx.fillText(data[line_id].label,xaxis.right-3,y+3);}
ctx.restore();}}}}
if(chart.config.options.hasOwnProperty('vertical_segments')&&chart.config.options.vertical_segments.enabled){var data=null;if(chart.config.options.vertical_segments.hasOwnProperty('data')){data=chart.config.options.vertical_segments.data;if(data){var ctx=this.chart.ctx;var xaxis=chart.scales['x-axis-0'];var topY=this.chart.scales['y-axis-0'].top;var bottomY=this.chart.scales['y-axis-0'].bottom;for(var segment_id=0;segment_id<data.length;segment_id++){var x_start=xaxis.getPixelForValue(data[segment_id].start_value);var x_stop=xaxis.getPixelForValue(data[segment_id].stop_value);if(data[segment_id].color){ctx.save();ctx.lineWidth=0;ctx.fillStyle=self.colorCode(data[segment_id].color,chart.config.options.vertical_segments.opacity);ctx.beginPath();ctx.fillRect(x_start,topY,(x_stop-x_start),(bottomY-topY));ctx.stroke();ctx.restore();}
if(data[segment_id].label){ctx.save();ctx.lineWidth=0;if(chart.config.options.vertical_segments.label.fillStyle){ctx.fillStyle=self.colorCode(chart.config.options.vertical_segments.label.fillStyle,chart.config.options.vertical_segments.label.opacity);}else{ctx.fillStyle=self.colorCode('#000',chart.config.options.vertical_segments.label.opacity);}
ctx.font=chart.config.options.vertical_segments.label.fontSize+' '+chart.config.options.vertical_segments.label.font;if(chart.config.options.vertical_segments.label.position==='top'){ctx.textBaseline='bottom';ctx.textAlign='left';ctx.translate(x_start,topY);ctx.rotate(Math.PI/2);ctx.fillText(data[segment_id].label,3,-3);}else if(chart.config.options.vertical_segments.label.position==='bottom'){ctx.textBaseline='bottom';ctx.textAlign='right';ctx.translate(x_start,bottomY);ctx.rotate(Math.PI/2);ctx.fillText(data[segment_id].label,-3,-3);}else if(chart.config.options.vertical_segments.label.position==='middle'){ctx.textBaseline='bottom';ctx.textAlign='center';ctx.translate(x_start,topY+(bottomY-topY)/2.0);ctx.rotate(Math.PI/2);ctx.fillText(data[segment_id].label,0,0);}
ctx.restore();}}}}}
if(chart.config.options.hasOwnProperty('vertical_indicator_line')&&chart.config.options.vertical_indicator_line.enabled){if(this.chart.tooltip._active&&this.chart.tooltip._active.length){var ctx=this.chart.ctx;var topY=this.chart.scales['y-axis-0'].top;var bottomY=this.chart.scales['y-axis-0'].bottom;var lineWidth=4;if(chart.config.options.vertical_indicator_line.hasOwnProperty('lineWidth')){lineWidth=chart.config.options.vertical_indicator_line.lineWidth;}
var strokeStyle='rgba(0,0,0,0.2)';if(chart.config.options.vertical_indicator_line.hasOwnProperty('strokeStyle')){strokeStyle=chart.config.options.vertical_indicator_line.strokeStyle;}
ctx.save();ctx.lineWidth=lineWidth;ctx.strokeStyle=strokeStyle;for(var tooltip_id=0;tooltip_id<this.chart.tooltip._active.length;tooltip_id++){var tooltip_x=this.chart.tooltip._active[0].tooltipPosition().x;ctx.beginPath();ctx.moveTo(tooltip_x,topY);ctx.lineTo(tooltip_x,bottomY);ctx.stroke();}
ctx.restore();}}
if(chart.config.options.hasOwnProperty('horizontal_indicator_line')&&chart.config.options.horizontal_indicator_line.enabled){if(this.chart.tooltip._active&&this.chart.tooltip._active.length){var lineWidth=2;if(chart.config.options.horizontal_indicator_line.hasOwnProperty('lineWidth')){lineWidth=chart.config.options.horizontal_indicator_line.lineWidth;}
ctx.save();ctx.lineWidth=lineWidth;var yaxis=chart.scales['y-axis-0'];for(var tooltip_id=0;tooltip_id<this.chart.tooltip._active.length;tooltip_id++){var strokeStyle='rgba(160,160,160,0.5)';var current_point=this.chart.tooltip._active[tooltip_id];if(chart.config.options.horizontal_indicator_line.hasOwnProperty('strokeStyle')&&chart.config.options.horizontal_indicator_line.strokeStyle){strokeStyle=self.colorCode(chart.config.options.horizontal_indicator_line.strokeStyle,0.15);}
ctx.strokeStyle=strokeStyle;var ctx=this.chart.ctx;var x=current_point._model.x;var y=current_point._model.y;var y_max=yaxis.getPixelForValue(this.getDataset().data_max[current_point._index]);var y_min=yaxis.getPixelForValue(this.getDataset().data_min[current_point._index]);var left=this.chart.scales['x-axis-0'].left;var right=this.chart.scales['x-axis-0'].right;if(chart.config.options.hasOwnProperty('error_bar')&&chart.config.options.error_bar.enabled){var fillStyle='rgba(0,0,0,0.1)';if(chart.config.options.horizontal_indicator_line.hasOwnProperty('fillStyle')){fillStyle=chart.config.options.horizontal_indicator_line.fillStyle;}
ctx.fillStyle=fillStyle;ctx.beginPath();ctx.fillRect(left,y_min,right-left,(y_max-y_min));ctx.stroke();}
ctx.beginPath();ctx.moveTo(left,y);ctx.lineTo(right,y);ctx.stroke();}
ctx.restore();}}
if(!this.rendered&&ease!==1){return;}
this.rendered=true;var meta=this.getMeta();var yScale=this.getScaleForId(meta.yAxisID);var data=this.getDataset().data;var data_min=this.getDataset().data_min;var data_max=this.getDataset().data_max;if(chart.config.options.hasOwnProperty('interval')&&chart.config.options.interval.enabled){if(data_min&&data_max){ctx.save();ctx.strokeStyle=this.getDataset().backgroundColor;ctx.fillStyle=this.getDataset().backgroundColor;var lineWidth=0;if(chart.config.options.interval.hasOwnProperty('lineWidth')){lineWidth=chart.config.options.interval.lineWidth;}
ctx.lineWidth=lineWidth;ctx.beginPath();helpers.each(meta.data,function(point,index){point._view.y=(yScale.getPixelForValue(data_max[index]));});helpers.each(meta.data,function(point,index){if(index===0)
ctx.moveTo(point._view.x,point._view.y);else{var previous=helpers.previousItem(meta.data,index);helpers.canvas.lineTo(ctx,previous._view,point._view);}});helpers.each(meta.data,function(point,index){point._view.y=(yScale.getPixelForValue(data_min[index]));});meta.data.reverse();helpers.each(meta.data,function(point,index){if(index===0)
ctx.lineTo(point._view.x,point._view.y);else{var previous=helpers.previousItem(meta.data,index);helpers.canvas.lineTo(ctx,previous._view,point._view);}});meta.data.reverse();helpers.each(meta.data,function(point,index){point._view.y=(yScale.getPixelForValue(data[index]));});ctx.stroke();ctx.closePath();ctx.fill();ctx.restore();}}
if(chart.config.options.hasOwnProperty('error_bar')&&chart.config.options.error_bar.enabled){var xaxis=chart.scales['x-axis-0'];var yaxis=chart.scales['y-axis-0'];var dataset=this.getDataset();if(data_min&&data_max){var x_tipWidth_pixel=1.0;var y_tipWidth_pixel=1.0;jQuery.each(chart.getDatasetMeta(0).data,function(index,item){var y=item._model.y;var x=item._model.x;ctx.save();var strokeStyle='rgba(0,0,0,0.05)';if(chart.config.options.error_bar.hasOwnProperty('strokeStyle')){strokeStyle=chart.config.options.error_bar.strokeStyle;}
ctx.strokeStyle=strokeStyle;var lineWidth=dataset.borderWidth;if(chart.config.options.error_bar.hasOwnProperty('lineWidth')){lineWidth=chart.config.options.error_bar.lineWidth;}
ctx.lineWidth=lineWidth;var y_max=0;var y_min=0;if(typeof data_max[index]==='object'&&typeof data_min[index]==='object'){if(data_max[index]){var x_max=xaxis.getPixelForValue(data_max[index].x);var x_min=xaxis.getPixelForValue(data_min[index].x);x_tipWidth_pixel=10;y_tipWidth_pixel=10;if(chart.config.options.error_bar.hasOwnProperty('tipWidth')){x_tipWidth_pixel=chart.config.options.error_bar.tipWidth;y_tipWidth_pixel=chart.config.options.error_bar.tipWidth;}
ctx.beginPath();ctx.moveTo(x_max,y-x_tipWidth_pixel/2);ctx.lineTo(x_max,y+x_tipWidth_pixel/2);ctx.stroke();ctx.beginPath();ctx.moveTo(x_min,y-x_tipWidth_pixel/2);ctx.lineTo(x_min,y+x_tipWidth_pixel/2);ctx.stroke();ctx.beginPath();ctx.moveTo(x_min,y);ctx.lineTo(x_max,y);ctx.stroke();var fillStyle='rgba(0,0,0,0.1)';if(chart.config.options.error_bar.hasOwnProperty('fillStyle')){fillStyle=chart.config.options.error_bar.fillStyle;}
ctx.fillStyle=fillStyle;y_max=yaxis.getPixelForValue(data_max[index].y);y_min=yaxis.getPixelForValue(data_min[index].y);if(chart.config.options.error_bar.hasOwnProperty('bounding_box')&&chart.config.options.error_bar.bounding_box){ctx.beginPath();ctx.fillRect(x_min,y_min,(x_max-x_min),(y_max-y_min));ctx.stroke();}}}else{if(chart.config.options.error_bar.hasOwnProperty('tipWidth')){x_tipWidth_pixel=chart.config.options.error_bar.tipWidth;y_tipWidth_pixel=(chart.getDatasetMeta(0).data[1]._model.x-chart.getDatasetMeta(0).data[0]._model.x)/2*chart.config.options.error_bar.tipWidth;}
y_max=yaxis.getPixelForValue(data_max[index]);y_min=yaxis.getPixelForValue(data_min[index]);}
ctx.beginPath();ctx.moveTo(x-y_tipWidth_pixel/2,y_max);ctx.lineTo(x+y_tipWidth_pixel/2,y_max);ctx.stroke();ctx.beginPath();ctx.moveTo(x-y_tipWidth_pixel/2,y_min);ctx.lineTo(x+y_tipWidth_pixel/2,y_min);ctx.stroke();ctx.beginPath();ctx.moveTo(x,y_max);ctx.lineTo(x,y_min);ctx.stroke();ctx.restore();});}}
return result;}});Chart.defaults.scatterWithLine=Chart.defaults.scatter;Chart.controllers.scatterWithLine=Chart.controllers.scatter.extend({draw:function(ease){Chart.controllers.line.prototype.draw.call(this,ease);var chart=this.chart;var scale=this.scale;var ctx=chart.chart.ctx;if(chart.config.data.hasOwnProperty('hline')&&chart.config.data.hline.enabled&&chart.config.data.hline.value!==null){var xaxis=chart.scales['x-axis-1'];var yaxis=chart.scales['y-axis-1'];var values=chart.config.data.hline.values;var colors=chart.config.data.hline.colors;if(values.constructor!==Array){values=[values];}
if(colors.constructor!==Array){colors=[colors];}
jQuery.each(values,function(index,value){var y=yaxis.getPixelForValue(value);ctx.save();ctx.beginPath();if(colors.length>index){ctx.strokeStyle=colors[index];}else{ctx.strokeStyle=colors[0];}
ctx.lineWidth=chart.config.data.hline.width;ctx.moveTo(xaxis.left,y);ctx.lineTo(xaxis.right,y);ctx.stroke();ctx.restore();});}
if(this.chart.tooltip._active&&this.chart.tooltip._active.length){var current_point=this.chart.tooltip._active[0],ctx=this.chart.ctx,x=current_point.tooltipPosition().x,topY=this.chart.scales['y-axis-1'].top,bottomY=this.chart.scales['y-axis-1'].bottom;ctx.save();ctx.beginPath();ctx.moveTo(x,topY);ctx.lineTo(x,bottomY);ctx.lineWidth=1;ctx.strokeStyle='#888';ctx.stroke();ctx.restore();}}});Chart.defaults.barWithLine=Chart.defaults.bar;Chart.controllers.barWithLine=Chart.controllers.bar.extend({draw:function(ease){Chart.controllers.bar.prototype.draw.call(this,ease);var chart=this.chart;var scale=this.scale;var ctx=chart.chart.ctx;if(chart.config.data.hasOwnProperty('hline')&&chart.config.data.hline.enabled&&chart.config.data.hline.value!==null){var xaxis=chart.scales['x-axis-0'];var yaxis=chart.scales['y-axis-0'];var values=chart.config.data.hline.values;var colors=chart.config.data.hline.colors;if(values.constructor!==Array){values=[values];}
if(colors.constructor!==Array){colors=[colors];}
jQuery.each(values,function(index,value){var y=yaxis.getPixelForValue(value);ctx.save();ctx.beginPath();if(colors.length>index){ctx.strokeStyle=colors[index];}else{ctx.strokeStyle=colors[0];}
ctx.lineWidth=chart.config.data.hline.width;ctx.moveTo(xaxis.left,y);ctx.lineTo(xaxis.right,y);ctx.stroke();ctx.restore();});}}});Chart.defaults.barError=Chart.defaults.bar;Chart.controllers.barError=Chart.controllers.bar.extend({draw:function(ease){Chart.controllers.bar.prototype.draw.call(this,ease);var chart=this.chart;var scale=this.scale;var ctx=chart.chart.ctx;var helpers=Chart.helpers;var meta=this.getMeta();var dataset=this.getDataset();var yScale=this.getScaleForId(meta.yAxisID);var yScaleZeroPixel=yScale.getPixelForValue(0);var data=this.getMeta().data;var data_min=this.getDataset().data_min;var data_max=this.getDataset().data_max;if(!this.rendered&&ease!==1){return;}
var yaxis=chart.scales['y-axis-0'];var barWidth=null;if(chart.getDatasetMeta(0).data.length){barWidth=chart.getDatasetMeta(0).data[0]._model.width;}
this.rendered=true;if(chart.config.options.hasOwnProperty('horizontal_indicator_line')&&chart.config.options.horizontal_indicator_line.enabled){if(this.chart.tooltip._active&&this.chart.tooltip._active.length){var current_point=this.chart.tooltip._active[0];var ctx=this.chart.ctx;var x=current_point._model.x;var y=current_point._model.y;var y_max=yaxis.getPixelForValue(this.getDataset().data_max[current_point._index]);var y_min=yaxis.getPixelForValue(this.getDataset().data_min[current_point._index]);var left=this.chart.scales['x-axis-0'].left;var right=this.chart.scales['x-axis-0'].right;var lineWidth=2;if(chart.config.options.horizontal_indicator_line.hasOwnProperty('lineWidth')){lineWidth=chart.config.options.horizontal_indicator_line.lineWidth;}
var strokeStyle='rgba(0,0,0,0.8)';if(chart.config.options.horizontal_indicator_line.hasOwnProperty('strokeStyle')){strokeStyle=chart.config.options.horizontal_indicator_line.strokeStyle;}
ctx.save();ctx.lineWidth=lineWidth;ctx.strokeStyle=strokeStyle;if(chart.config.options.hasOwnProperty('error_bar')&&chart.config.options.error_bar.enabled){var fillStyle='rgba(0,0,0,0.1)';if(chart.config.options.horizontal_indicator_line.hasOwnProperty('fillStyle')){fillStyle=chart.config.options.horizontal_indicator_line.fillStyle;}
ctx.fillStyle=fillStyle;ctx.beginPath();ctx.fillRect(left,y_min,right-left,(y_max-y_min));ctx.stroke();}
ctx.beginPath();ctx.moveTo(left,y);ctx.lineTo(right,y);ctx.stroke();ctx.restore();}}
if(chart.config.options.hasOwnProperty('horizontal_highlights')&&chart.config.options.horizontal_highlights.enabled){var data=chart.config.options.horizontal_highlights.data;if(data){var xaxis=chart.scales['x-axis-0'];var yaxis=chart.scales['y-axis-0'];var lineWidth=2;if(chart.config.options.horizontal_highlights.hasOwnProperty('lineWidth')){lineWidth=chart.config.options.horizontal_highlights.lineWidth;}
var strokeStyle=chart.config.options.horizontal_highlights.strokeStyle;for(var line_id=0;line_id<data.length;line_id++){var y=yaxis.getPixelForValue(data[line_id].y_value);if(data[line_id].color){if(data[line_id].color.startsWith('#')){strokeStyle=self.hexToRGB(data[line_id].color,chart.config.options.horizontal_highlights.opacity).css;}}
ctx.save();ctx.beginPath();ctx.strokeStyle=strokeStyle;ctx.lineWidth=lineWidth;ctx.moveTo(xaxis.left,y);ctx.lineTo(xaxis.right,y);ctx.stroke();ctx.restore();if(data[line_id].label){ctx.save();ctx.lineWidth=0;if(chart.config.options.horizontal_highlights.label.fillStyle){ctx.fillStyle=self.colorCode(chart.config.options.horizontal_highlights.label.fillStyle,chart.config.options.horizontal_highlights.label.opacity);}else{ctx.fillStyle=self.colorCode('#000',chart.config.options.horizontal_highlights.label.opacity);}
ctx.font=chart.config.options.horizontal_highlights.label.fontSize+' '+chart.config.options.horizontal_highlights.label.font;if(chart.config.options.horizontal_highlights.label.position==='top-left'){ctx.textBaseline='bottom';ctx.textAlign='left';ctx.fillText(data[line_id].label,xaxis.left+3,y);}else if(chart.config.options.horizontal_highlights.label.position==='top-right'){ctx.textBaseline='bottom';ctx.textAlign='right';ctx.fillText(data[line_id].label,xaxis.right-3,y);}else if(chart.config.options.horizontal_highlights.label.position==='bottom-left'){ctx.textBaseline='top';ctx.textAlign='left';ctx.fillText(data[line_id].label,xaxis.left+3,y+3);}else if(chart.config.options.horizontal_highlights.label.position==='bottom-right'){ctx.textBaseline='top';ctx.textAlign='right';ctx.fillText(data[line_id].label,xaxis.right-3,y+3);}
ctx.restore();}}}}
if(chart.config.options.hasOwnProperty('vertical_indicator_line')&&chart.config.options.vertical_indicator_line.enabled){if(this.chart.tooltip._active&&this.chart.tooltip._active.length){var current_point=this.chart.tooltip._active[0];var ctx=this.chart.ctx;var x=current_point.tooltipPosition().x;var topY=this.chart.scales['y-axis-0'].top;var bottomY=this.chart.scales['y-axis-0'].bottom;var lineWidth=4;if(chart.config.options.vertical_indicator_line.hasOwnProperty('lineWidth')){lineWidth=chart.config.options.vertical_indicator_line.lineWidth;}
var strokeStyle='rgba(0,0,0,0.2)';if(chart.config.options.vertical_indicator_line.hasOwnProperty('strokeStyle')){strokeStyle=chart.config.options.vertical_indicator_line.strokeStyle;}
ctx.save();ctx.beginPath();ctx.moveTo(x,topY);ctx.lineTo(x,bottomY);ctx.lineWidth=lineWidth;ctx.strokeStyle=strokeStyle;ctx.stroke();ctx.restore();}}
if(chart.config.options.hasOwnProperty('error_bar')&&chart.config.options.error_bar.enabled){if(data_min&&data_max){jQuery.each(data,function(index,item){if(item.hasOwnProperty('_model')){var y=item._model.y;var x=item._model.x;var y_max=yaxis.getPixelForValue(data_max[index]);var y_min=yaxis.getPixelForValue(data_min[index]);ctx.save();var strokeStyle=dataset.borderColor[index];if(chart.config.options.error_bar.hasOwnProperty('strokeStyle')){if(chart.config.options.error_bar.strokeStyle!==null){strokeStyle=chart.config.options.error_bar.strokeStyle;}}
ctx.strokeStyle=strokeStyle;var lineWidth=dataset.borderWidth;if(chart.config.options.error_bar.hasOwnProperty('lineWidth')){if(chart.config.options.error_bar.lineWidth!==null){lineWidth=chart.config.options.error_bar.lineWidth;}}
ctx.lineWidth=lineWidth;var tipWidth=barWidth/4*2;if(chart.config.options.error_bar.hasOwnProperty('tipWidth')){if(chart.config.options.error_bar.tipWidth!==null){tipWidth=chart.config.options.error_bar.tipWidth;}}
ctx.beginPath();ctx.moveTo(x-tipWidth/2,y_max);ctx.lineTo(x+tipWidth/2,y_max);ctx.stroke();ctx.beginPath();ctx.moveTo(x-tipWidth/2,y_min);ctx.lineTo(x+tipWidth/2,y_min);ctx.stroke();ctx.beginPath();ctx.moveTo(x,y_max);ctx.lineTo(x,y_min);ctx.stroke();ctx.restore();}});}}}});Chart.Tooltip.positioners.line_centered_top=function(elements,eventPosition){return{x:elements[0]._model.x,y:0};};Chart.Tooltip.positioners.line_centered_bottom=function(elements,eventPosition){return{x:elements[0]._model.x,y:elements[0]._chart.height};};Chart.Tooltip.positioners.inline_centered_bottom=function(elements,eventPosition){return{x:elements[0]._model.x,y:elements[0]._chart.height};};},addToolbar:function(){var self=this;this.options.element.chart_mode_selector+=this.uniqueId;this.options.element.table_mode_selector+=this.uniqueId;var toolbar_html='';toolbar_html+='<div id="datatable_toolbar'+this.uniqueId+'" class="datatable-toolbar" ';if(!this.options.show_toolbar){toolbar_html+=' style="display: none;" ';}
toolbar_html+='>';var active=' ';var pressed='false';if(this.options.table_default_mode==='show'){active=' active ';pressed='true';}
toolbar_html+='<button type="button" title="'+this.options.label.toggle_table+'" class="'+this.options.button_css.table+active+'" id="'+this.options.element.table_mode_selector+'" data-toggle="button" aria-pressed="'+pressed+'" autocomplete="off" ';if(!this.options.show_table_selector){toolbar_html+=' style="display: none;" ';}
toolbar_html+='>';toolbar_html+=this.options.icon.table+' '+this.options.label.table;toolbar_html+='</button>&nbsp;';toolbar_html+='<div class="btn-group" data-toggle="buttons" id="'+this.options.element.chart_mode_selector+'">';var $div=$('<div>',{id:'datatable_visualization'+this.uniqueId,'class':'datatable'});for(var mode_id=0;mode_id<this.options.chart_modes.length;mode_id++) {var current_mode_name=this.options.chart_modes[mode_id];var current_mode_config={};var custom_found=false;var active='';if(this.options.chart_default_mode==current_mode_name){active=' active ';}
if(current_mode_name=='bar'){toolbar_html+='<label class="'+this.options.button_css.bar+active+'" data-mode="bar">';toolbar_html+='<input autocomplete="off" data-mode="bar" name="options" type="radio" value="bar">'+this.options.icon.bar+' '+this.options.label.bar+'</input>';toolbar_html+='</label>';$($div).append(this.createBarHTML());}else if(current_mode_name=='line'){toolbar_html+='<label class="'+this.options.button_css.line+active+'" data-mode="line">';toolbar_html+='<input autocomplete="off" data-mode="line" name="options" type="radio" value="bar">'+this.options.icon.line+' '+this.options.label.line+'</input>';toolbar_html+='</label>';$($div).append(this.createLineHTML());}else if(current_mode_name=='scatter'){toolbar_html+='<label class="'+this.options.button_css.scatter+active+'" data-mode="scatter">';toolbar_html+='<input autocomplete="off" data-mode="scatter" name="options" type="radio" value="scatter">'+this.options.icon.scatter+' '+this.options.label.scatter+'</input>';toolbar_html+='</label>';$($div).append(this.createScatterHTML());}else if(current_mode_name=='comparison'){toolbar_html+='<label class="'+this.options.button_css.comparison+active+'" data-mode="comparison">';toolbar_html+='<input autocomplete="off" data-mode="comparison" name="options" type="radio" value="comparison">'+this.options.icon.comparison+' '+this.options.label.comparison+'</input>';toolbar_html+='</label>';$($div).append(this.createComparisonHTML());}else{for(var custom_mode_id=0;custom_mode_id<this.options.custom_chart_json.length;custom_mode_id++) {if(this.options.custom_chart_json[custom_mode_id]['id']==current_mode_name){current_mode_config=this.options.custom_chart_json[custom_mode_id];if(current_mode_config.hasOwnProperty('type')&&current_mode_config.hasOwnProperty('title')){custom_found=true;}
break;}}
if(custom_found){var type=current_mode_config['type'].split(':')[0];var active='';if(this.options.chart_default_mode==current_mode_name){active=' active ';}
var icon='';if(current_mode_config.hasOwnProperty('icon')){icon=current_mode_config['icon'];}else{icon=this.options.icon[type];}
var button_css='';if(current_mode_config.hasOwnProperty('button_css')){button_css=this.options.button_css.custom+' '+current_mode_config['button_css'];}else{button_css=this.options.button_css[type];}
toolbar_html+='<label class="'+button_css+active+'" data-mode="'+current_mode_name+'">';toolbar_html+='<input autocomplete="off" data-mode="'+current_mode_name+'" name="options" type="radio" value="'+current_mode_name+'">';toolbar_html+=icon+' '+current_mode_config['title']+'</input>';toolbar_html+='</label>';$($div).append(this.createCustomHTML(current_mode_name,current_mode_config));}}}
var active='';if(this.options.chart_default_mode=='off'){active=' active ';}
toolbar_html+='<label class="'+this.options.button_css.off+active+'" data-mode="off" title="'+this.options.label.hide_visualization+'">';toolbar_html+='<input autocomplete="off" checked data-mode="off" name="options" type="radio" value="off">'+this.options.icon.off+' '+this.options.label.off+'</input>';toolbar_html+='</label>';toolbar_html+='</div>';toolbar_html+='</div>';if(this.options.chart.position==='top'){$(toolbar_html).appendTo($div);$div.insertBefore(this.$element);}else if(this.options.chart.position==='bottom'){$div.insertAfter(this.$element);$(toolbar_html).prependTo($div);}
this.$element.attr('data-toolbar','#datatable_toolbar'+this.uniqueId);$('#'+this.options.element.table_mode_selector).on('click',function(){if($(this).hasClass('active')){self.table_mode='hide';}else{self.table_mode='show';}
self.updateTableVisibility(self.table_mode);});$('#'+this.options.element.chart_mode_selector+' label').on('click',function(){self.chart_mode=$(this).data('mode');self.updateVisualizationVisibility(self.chart_mode);});},createBarHTML:function(){var bar_div='<div id="bar_div'+this.uniqueId+'" style="display:none;"><canvas id="bar_chart'+this.uniqueId+'"></canvas></div>';this.options.element.bar.div='#bar_div'+this.uniqueId;this.options.element.bar.canvas='#bar_chart'+this.uniqueId;return bar_div;},createLineHTML:function(){var line_div='<div id="line_div'+this.uniqueId+'" style="display:none;"><canvas id="line_chart'+this.uniqueId+'"></canvas></div>';this.options.element.line.div='#line_div'+this.uniqueId;this.options.element.line.canvas='#line_chart'+this.uniqueId;return line_div;},createScatterHTML:function(){var self=this;var scatter_div='<div id="scatter_div'+this.uniqueId+'" style="display:none;">';scatter_div+='<canvas id="scatter_chart'+this.uniqueId+'"></canvas>';scatter_div+='<div class="btn-group">';scatter_div+='<div class="btn-group">';scatter_div+='<div class="dropdown">';scatter_div+='<button aria-expanded="false" aria-haspopup="true" class="btn btn-default dropdown-toggle" data-toggle="dropdown" id="scatter_selector_x'+this.uniqueId+'" type="button">X '+this.options.icon.caret+'</button>';scatter_div+='<ul aria-labelledby="scatter_selector_x'+this.uniqueId+'" class="dropdown-menu" id="scatter_selector_x_menu'+this.uniqueId+'" role="menu">';scatter_div+='<li class="dropdown-header">'+this.options.label.select_x_axis+'</li>';$(this.element).find('thead tr th[data-chartable="true"]').each(function(){var postfix='';if(typeof $(this).data('postfix')!=='undefined'){postfix=$(this).data('postfix');}
var reversed=false;if(typeof $(this).data('reversed')!=='undefined'){reversed=$(this).data('reversed');}
if(typeof $(this).data('field')!=='undefined'){var field=$(this).data('field');}
var axis_label='';if(typeof $(this).data('axis-label')!=='undefined'){axis_label=$("<div/>").html($(this).data('axis-label')).text();}
var active='';var selected='0';if(field==self.options.scatter.x){active=' class="active" ';selected='1';}
scatter_div+='<li'+active+'><a data-field="'+field+'" data-postfix="'+postfix+'" data-reversed="'+reversed+'" data-axis-label="'+axis_label+'" data-selected="'+selected+'" href="#" onclick="return false;">'+jQuery.trim($(this).text())+'</a></li>'});scatter_div+='</ul>';scatter_div+='</div>';scatter_div+='</div>';scatter_div+='<div class="btn-group">';scatter_div+='<div class="dropdown">';scatter_div+='<button aria-expanded="false" aria-haspopup="true" class="btn btn-default dropdown-toggle" data-toggle="dropdown" id="scatter_selector_y'+this.uniqueId+'" type="button">Y '+this.options.icon.caret+'</button>';scatter_div+='<ul aria-labelledby="scatter_selector_y'+this.uniqueId+'" class="dropdown-menu" id="scatter_selector_y_menu'+this.uniqueId+'" role="menu">';scatter_div+='<li class="dropdown-header">'+this.options.label.select_y_axis+'</li>';$(this.element).find('thead tr th[data-chartable="true"]').each(function(){var postfix='';if(typeof $(this).data('postfix')!=='undefined'){postfix=$(this).data('postfix');}
var reversed=false;if(typeof $(this).data('reversed')!=='undefined'){reversed=$(this).data('reversed');}
if(typeof $(this).data('field')!=='undefined'){var field=$(this).data('field');}
var axis_label='';if(typeof $(this).data('axis-label')!=='undefined'){axis_label=$("<div/>").html($(this).data('axis-label')).text();}
var active='';var selected='0';if(field==self.options.scatter.y){active=' class="active" ';selected='1';}
scatter_div+='<li'+active+'><a data-field="'+field+'" data-postfix="'+postfix+'" data-reversed="'+reversed+'" data-axis-label="'+axis_label+'" data-selected="'+selected+'" href="#" onclick="return false;">'+jQuery.trim($(this).text())+'</a></li>'});scatter_div+='</ul>';scatter_div+='</div>';scatter_div+='</div>';scatter_div+='</div>';scatter_div+='</div>';this.options.element.scatter.div='#scatter_div'+this.uniqueId;this.options.element.scatter.canvas='#scatter_chart'+this.uniqueId;this.options.element.scatter.selector_x_menu='#scatter_selector_x_menu'+this.uniqueId;this.options.element.scatter.selector_y_menu='#scatter_selector_y_menu'+this.uniqueId;$(document).on("click",this.options.element.scatter.selector_x_menu+' li a',function(){$(self.options.element.scatter.selector_x_menu+' li a').each(function(){$(this).data('selected',0);$(this).parent().removeClass('active');});$(this).data('selected',1);$(this).parent().addClass('active');self.updateScatter();});$(document).on("click",this.options.element.scatter.selector_y_menu+' li a',function(){$(self.options.element.scatter.selector_y_menu+' li a').each(function(){$(this).data('selected',0);$(this).parent().removeClass('active');});$(this).data('selected',1);$(this).parent().addClass('active');self.updateScatter();});return scatter_div;},createComparisonHTML:function(){var self=this;var comparison_div='<div id="comparison_div'+this.uniqueId+'" style="display:none;">';comparison_div+='<canvas id="comparison_chart'+this.uniqueId+'"></canvas>';comparison_div+='<div class="btn-group" style="margin-right:10px;">';comparison_div+='<div class="dropdown">';if(this.options.comparison.sets){for(var i=0;i<this.options.comparison.sets.length;i++){var set=this.options.comparison.sets[i];if(set.title==self.options.comparison.active_set){comparison_div+='<button aria-expanded="false" aria-haspopup="true" class="btn btn-default dropdown-toggle selector-button-xlarge" data-toggle="dropdown" id="comparison_selector_set'+this.uniqueId+'" type="button">'+set.title+' '+this.options.icon.caret+'</button>';break;}}}else{comparison_div+='<button aria-expanded="false" aria-haspopup="true" class="btn btn-default dropdown-toggle selector-button-xlarge" data-toggle="dropdown" id="comparison_selector_set'+this.uniqueId+'" type="button">'+this.options.icon.caret+'</button>';}
comparison_div+='<ul aria-labelledby="comparison_selector_set" class="dropdown-menu" id="comparison_selector_set_menu'+this.uniqueId+'" role="menu">';comparison_div+='<li class="dropdown-header">'+this.options.label.select_set+'</li>';if(this.options.comparison.sets){for(var i=0;i<this.options.comparison.sets.length;i++){var set=this.options.comparison.sets[i];var active='';var selected='0';if(set.title==self.options.comparison.active_set){active=' class="active" ';selected='1';}
comparison_div+='<li'+active+'><a data-selected="'+selected+'" data-set="'+set.title+'" href="#" onclick="return false;">'+set.title+'</a></li>';}}
comparison_div+='</ul>';comparison_div+='</div>';comparison_div+='</div>';comparison_div+='<div class="btn-group" role="group">';comparison_div+='<div class="btn-group">';comparison_div+='<div class="dropdown">';comparison_div+='<button class="btn btn-success dropdown-toggle selector-button-large" data-toggle="dropdown" id="comparison_selector_a'+this.uniqueId+'" type="button" aria-expanded="false" aria-haspopup="true">'+this.options.icon.caret+'</button>';comparison_div+='<ul aria-labelledby="comparison_selector_a'+this.uniqueId+'" class="dropdown-menu" id="comparison_selector_a_menu'+this.uniqueId+'" role="menu">';comparison_div+='<li class="dropdown-header">'+this.options.label.select_a_row+'</li>';comparison_div+='</ul>';comparison_div+='</div>';comparison_div+='</div>';comparison_div+='<div class="btn-group">';comparison_div+='<div class="dropdown">';comparison_div+='<button class="btn btn-danger dropdown-toggle selector-button-large" data-toggle="dropdown" id="comparison_selector_b'+this.uniqueId+'" type="button" aria-expanded="false" aria-haspopup="true">'+this.options.icon.caret+'</button>';comparison_div+='<ul aria-labelledby="comparison_selector_b'+this.uniqueId+'" class="dropdown-menu" id="comparison_selector_b_menu'+this.uniqueId+'" role="menu">';comparison_div+='<li class="dropdown-header">'+this.options.label.select_b_row+'</li>';comparison_div+='</ul>';comparison_div+='</div>';comparison_div+='</div>';comparison_div+='</div>';comparison_div+='</div>';this.options.element.comparison.div='#comparison_div'+this.uniqueId;this.options.element.comparison.canvas='#comparison_chart'+this.uniqueId;this.options.element.comparison.selector_set_button='#comparison_selector_set'+this.uniqueId;this.options.element.comparison.selector_set_menu='#comparison_selector_set_menu'+this.uniqueId;this.options.element.comparison.selector_a_button='#comparison_selector_a'+this.uniqueId;this.options.element.comparison.selector_a_menu='#comparison_selector_a_menu'+this.uniqueId;this.options.element.comparison.selector_b_button='#comparison_selector_b'+this.uniqueId;this.options.element.comparison.selector_b_menu='#comparison_selector_b_menu'+this.uniqueId;$(document).on("click",this.options.element.comparison.selector_set_menu+' li a',function(){$(self.options.element.comparison.selector_set_menu+' li a').each(function(){$(this).data('selected',0);$(this).parent().removeClass('active');});$(this).data('selected',1);$(this).parent().addClass('active');$(self.options.element.comparison.selector_set_button).html($(this).text()+' '+self.options.icon.caret);self.updateComparison();});$(document).on("click",this.options.element.comparison.selector_a_menu+' li a',function(){$(self.options.element.comparison.selector_a_menu+' li a').each(function(){$(this).data('selected',0);$(this).parent().removeClass('active');});$(this).data('selected',1);$(this).parent().addClass('active');$(self.options.element.comparison.selector_a_button).html($(this).text()+' '+self.options.icon.caret);self.updateComparison();});$(document).on("click",this.options.element.comparison.selector_b_menu+' li a',function(){$(self.options.element.comparison.selector_b_menu+' li a').each(function(){$(this).data('selected',0);$(this).parent().removeClass('active');});$(this).data('selected',1);$(this).parent().addClass('active');$(self.options.element.comparison.selector_b_button).html($(this).text()+' '+self.options.icon.caret);self.updateComparison();});return comparison_div;},createCustomHTML:function(mode_name,options){var custom_graph_div='<div id="'+mode_name+'_div'+this.uniqueId+'" style="display:none;">';custom_graph_div+='<canvas id="'+mode_name+'_chart'+this.uniqueId+'"></canvas>';custom_graph_div+='</div>';this.options.custom_chart[mode_name]={'name':mode_name,'type':options.type.split(':')[0],'subtype':null,'div':'#'+mode_name+'_div'+this.uniqueId,'canvas':'#'+mode_name+'_chart'+this.uniqueId,'chart':null,'data':null,'options':options,};if(options.type.split(':').length>1){this.options.custom_chart[mode_name]['subtype']=options.type.split(':')[1].split(',');}
return custom_graph_div;},loadTableData:function(){var self=this;if(typeof this.$element.data('json')!=='undefined'){var json_datafile=this.$element.data('json');jQuery.ajax({type:'GET',mimeType:"application/json; charset=utf-8",url:json_datafile,dataType:'json',async:true,success:function(data){var $thead=self.$element.find('thead');var $tbody=$('<tbody></tbody>');jQuery.each(data,function(key,val){var $row=$('<tr></tr>');if(val.hline){$row.attr('data-hline',true);}
if(self.options.table.row_highlighting){if(val.row_css==='active'){$row.addClass('active');}else if(val.row_css==='success'){$row.addClass('success');}else if(val.row_css==='info'){$row.addClass('info');}else if(val.row_css==='warning'){$row.addClass('warning');}else if(val.row_css==='danger'){$row.addClass('danger');}}
jQuery.each(self.field_meta,function(header_key,header_val){$($row).append($('<td></td>').text(val[header_val.field]));});$($tbody).append($row);});$($tbody).insertAfter($thead);self.updateTags();self.$element.trigger('post-init.datatable');},error:function(){console.log('ERROR reading file:'+json_datafile);}});}else if(typeof this.$element.data('yaml')!=='undefined'){var yaml_datafile=this.$element.data('yaml');jQuery.ajax({type:'GET',dataType:'text',mimeType:"application/yaml; charset=utf-8",url:yaml_datafile,async:true,success:function(text){try{var data=jsyaml.safeLoad(text);var $thead=self.$element.find('thead');var $tbody=$('<tbody></tbody>');jQuery.each(data.data,function(key,val){var $row=$('<tr></tr>');if(val.hline){$row.attr('data-hline',true);}
if(self.options.table.row_highlighting){if(val.row_css==='active'){$row.addClass('active');}else if(val.row_css==='success'){$row.addClass('success');}else if(val.row_css==='info'){$row.addClass('info');}else if(val.row_css==='warning'){$row.addClass('warning');}else if(val.row_css==='danger'){$row.addClass('danger');}}
jQuery.each(self.field_meta,function(header_key,header_val){$($row).append($('<td></td>').text(val[header_val.field]));});$($tbody).append($row);});$($tbody).insertAfter($thead);self.updateTags();$(self.element).trigger('post-init.datatable');}catch(e){console.log(e);}},error:function(){console.log('ERROR reading file:'+yaml_datafile);}});}else{self.updateTags();self.$element.trigger('post-init.datatable');}},initFieldMeta:function(){var self=this;this.field_meta=[];$(this.element).find('thead tr th').each(function(){var meta={field:null,rank:null,chartable:null,sortable:null,visible:null,beginatzero:null,align:null,tag:null,filter_control:null,formatter:null,postfix:null};if(typeof $(this).data('field')!=='undefined'){meta.field=$(this).data('field');}
if(typeof $(this).data('rank')!=='undefined'){meta.rank=$(this).data('rank');}
if(typeof $(this).data('chartable')!=='undefined'){meta.chartable=$(this).data('chartable');}
if(typeof $(this).data('sortable')!=='undefined'){meta.sortable=$(this).data('sortable');}
if(typeof $(this).data('visible')!=='undefined'){meta.visible=$(this).data('visible');}
if(typeof $(this).data('beginatzero')!=='undefined'){meta.beginatzero=$(this).data('beginatzero');}
if(typeof $(this).data('axis-label')!=='undefined'){meta.axis_label=$(this).data('axis-label');}
if(typeof $(this).data('axis-scale')!=='undefined'){meta.axis_scale=$(this).data('axis-scale');}
if(typeof $(this).data('align')!=='undefined'){meta.align=$(this).data('align');}
if(typeof $(this).data('tag')!=='undefined'){meta.tag=$(this).data('tag');}
if(typeof $(this).data('filter-control')!=='undefined'){meta.filter_control=$(this).data('filter-control');}
if(typeof $(this).data('formatter')!=='undefined'){meta.formatter=$(this).data('formatter');}
if(typeof $(this).data('postfix')!=='undefined'){meta.postfix=$(this).data('postfix');}
if(meta.field!=null|| meta.rank){self.field_meta.push(meta);}});},getHeaderOptions:function(field){var self=this;var header=$(this.element).find('thead tr th[data-field="'+field+'"]').first();if(header.length){var header_options={field:field,rank:undefined,chartable:false,sortable:undefined,visible:undefined,beginatzero:undefined,align:undefined,tag:undefined,filter_control:undefined,text:header.text().trim(),title:this.cleanFieldValue(header.html()),chart_mode:undefined,value:{formatter:undefined,postfix:'',label:header.text().trim(),pad:''},dataset:{labels:[],colors:[]},axis:{},bar:{sort_order:'asc',item_width:null,xaxis:{},yaxis:{},horizontal_highlights:{label: {}},horizontal_line:{},horizontal_indicator_line:{},vertical_indicator_line:{},error_bar:{},tooltips:{},legend:{}},line:{fields:undefined,xaxis:{},yaxis:{},line:{},point:{},horizontal_highlights:{label:{}},legend:{}},scatter:{},comparison:{}};if(typeof $(header).data('rank')!=='undefined'){header_options.rank=$(header).data('rank');}
if(typeof header.data('chartable')!=='undefined'){header_options.chartable=header.data('chartable');}
if(typeof header.data('sortable')!=='undefined'){header_options.sortable=header.data('sortable');}
if(typeof header.data('visible')!=='undefined'){header_options.visible=header.data('visible');}
if(typeof header.data('beginatzero')!=='undefined'){header_options.beginatzero=header.data('beginatzero');}
if(typeof header.data('align')!=='undefined'){header_options.align=header.data('align');}
if(typeof header.data('tag')!=='undefined'){header_options.tag=header.data('tag');}
if(typeof header.data('group')!=='undefined'){header_options.group=header.data('group');}
if(typeof header.data('filter-control')!=='undefined'){header_options.filter_control=header.data('filter-control');}
if(typeof header.data('chart-mode')!=='undefined'){header_options.chart_mode=header.data('chart-mode');}
if(typeof header.data('axis-scale')!=='undefined'){header_options.axis.scale=header.data('axis-scale');}
if(typeof header.data('axis-label')!=='undefined'){header_options.axis.label=header.data('axis-label');}
if(typeof header.data('dataset-labels')!=='undefined'){header_options.dataset.labels=header.data('dataset-labels').split(',')}
if(typeof header.data('dataset-colors')!=='undefined'){header_options.dataset.colors=header.data('dataset-colors').split(',')}
if(typeof header.data('formatter')!=='undefined'){header_options.value.formatter=header.data('formatter');}
if(typeof header.data('postfix')!=='undefined'){header_options.value.postfix=header.data('postfix');}
if(header_options.axis.label){header_options.value.label=$("<div/>").html(header_options.axis.label).text().trim();}
header_options.bar=jQuery.extend(true,{},header_options.bar,this.getBarChartParameters(header));header_options.line=jQuery.extend(true,{},header_options.line,this.getLineChartParameters(header));if(header_options.value.formatter&&header_options.value.formatter.startsWith('valueFormatter_inline_bar_')){header_options.value.formatter='valueFormatter_float1_percentage';header_options.value.pad=' '.repeat(6);}
return header_options;}else{return{}}},updateTableVisibility:function(mode){if(mode=='show'){$(this.$element[0].closest('.fixed-table-container')).slideDown(this.options.animation.show_speed);}else if(mode=='hide'){$(this.$element[0].closest('.fixed-table-container')).slideUp(this.options.animation.show_speed);}},updateVisualizationVisibility:function(mode){for(var mode_id=0;mode_id<this.options.chart_modes.length;mode_id++) {if(mode!==this.options.chart_modes[mode_id]){if(this.options.chart_modes[mode_id]=='bar'){this.hideBarChart();}else if(this.options.chart_modes[mode_id]=='line'){this.hideLineChart();}else if(this.options.chart_modes[mode_id]=='scatter'){this.hideScatterChart();}else if(this.options.chart_modes[mode_id]=='comparison'){this.hideComparisonChart();}else{this.hideCustomChart(this.options.chart_modes[mode_id]);}}}
for(var mode_id=0;mode_id<this.options.chart_modes.length;mode_id++) {if(mode==this.options.chart_modes[mode_id]){if(this.options.chart_modes[mode_id]=='bar'){this.showBarChart();}else if(this.options.chart_modes[mode_id]=='line'){this.showLineChart();}else if(this.options.chart_modes[mode_id]=='scatter'){this.showScatterChart();}else if(this.options.chart_modes[mode_id]=='comparison'){this.showComparisonChart();}else{this.showCustomChart(this.options.chart_modes[mode_id]);}}}
if(mode=='off'){$('#datatable_visualization'+this.uniqueId).height(0);}},updateChart:function(){if(this.options.show_chart){if(this.chart_mode=='off'){}else if(this.chart_mode=='bar'){this.updateBar();}else if(this.chart_mode=='line'){this.updateLine();}else if(this.chart_mode=='scatter'){this.updateScatter();}else if(this.chart_mode=='comparison'){this.updateComparison();}else{this.updateCustomChart(this.chart_mode);}}},validBar:function(){var table_options=$(this.element).bootstrapTable('getOptions');var header_options=this.getHeaderOptions(table_options.sortName);return $(this.element).bootstrapTable('getData').length>0&&header_options.chartable;},updateBar:function(){var self=this;var table_options=this.$element.bootstrapTable('getOptions');var header_options=this.getHeaderOptions(table_options.sortName);var options=jQuery.extend(true,{},this.options);options.bar=jQuery.extend(true,{},options.bar,header_options.bar);if(this.bar_chart){this.bar_chart.destroy();}
var chart_ctx=document.getElementById(this.options.element.bar.canvas.replace('#',''));chart_ctx.width=$(this.options.element.bar.div).innerWidth();chart_ctx.height=options.bar.height;var table_data=this.$element.bootstrapTable('getData');var value_name=table_options.sortName;var sort_name=table_options.sortName;var id_field=table_options.idField;var header=this.$element.find('thead tr th[data-field=\"'+sort_name+'\"]');if(header_options.bar.sort_field){table_data.sort(function(a,b){return self.valueSorter(a[header_options.bar.sort_field],b[header_options.bar.sort_field],header_options.bar.sort_order);});sort_name=header_options.bar.sort_field;}else if(options.bar.xaxis.field){var xaxis_field=id_field;if(options.bar.xaxis.field){xaxis_field=options.bar.xaxis.field}
if(options.bar.xaxis.sorted){table_data.sort(function(a,b){return self.valueSorter(a[xaxis_field],b[xaxis_field],'asc');});}
sort_name=options.bar.xaxis.field;}
var datasets=[];var labels=[];for(var row_id=0;row_id<table_data.length;row_id++){var label='';if(sort_name!=value_name){label=$("<div/>").html(table_data[row_id][sort_name]).text().trim().replace(/<(?:.|\n)*?>/gm,'').replace('_',' ');}else{label=$("<div/>").html(table_data[row_id][this.options.table.id_field]).text().trim().replace(/<(?:.|\n)*?>/gm,'').replace('_',' ');}
if(labels.indexOf(label)>-1){var num_of_occurances=0;for(var label_id=0;row_id<labels.length;row_id++){if(labels[label_id]===label)
num_of_occurances++;}
label=label+new Array(num_of_occurances+1).join(' ');}
labels.push(label);}
var time_mode=false;if((new Date(labels[0])).getTime()>0){time_mode=true;}
var stacked_chart=false;var stacked_items=1;for(var row_id=0;row_id<table_data.length;row_id++){var values=self.parseDataList(table_data[row_id][value_name]);if(values.length>1){stacked_chart=true;if(values.length>stacked_items){stacked_items=values.length;}}}
if(stacked_chart){if(header_options.dataset.labels.length==0){header_options.dataset.labels=new Array(stacked_items);for(var row_id=0;row_id<table_data.length;row_id++){var values=self.parseDataList(table_data[row_id][value_name]);for(var value_id=0;value_id<values.length;value_id++){if(values[value_id].label){header_options.dataset.labels[value_id]=values[value_id].label;}}}}
for(var dataset_id=0;dataset_id<stacked_items;dataset_id++){var dataset={label:header_options.dataset.labels[dataset_id],data:[],data_min:[],data_max:[],data_string:[],data_uniqueid:[],backgroundColor:[],borderColor:[],borderWidth:2,hoverBackgroundColor:[],hoverBorderColor:[]};var all_value_min=Infinity;var all_value_max=-Infinity;for(var row_id=0;row_id<table_data.length;row_id++){var values=self.parseDataList(table_data[row_id][value_name]);var value_sum=0;for(var ii=0;ii<values.length;ii++){value_sum+=values[ii]['y_value'];}
var item={'value':null,'value_max':null,'value_min':null};if(values.length>dataset_id&&values[dataset_id]['y_value']){var percentage=values[dataset_id]['y_value'];if(value_sum>100.0&&value_sum<101.0){percentage=percentage/value_sum*100.0;}
item.value=percentage;}
dataset.data.push(item.value);if(header_options.value.formatter){var value_string=this.stripHTML(window[header_options.value.formatter](item.value));if(header_options.value.pad){value_string=(value_string+header_options.value.pad).substring(0,header_options.value.pad.length);}
dataset.data_string.push(value_string);}else{dataset.data_string.push(this.injectValuePostfix(item.value,header_options.value.postfix));}
dataset.data_uniqueid.push(table_data[row_id][table_options.idField]);var value_max=item.value_max;var value_min=item.value_min;if(all_value_max<item.value){all_value_max=item.value;}
if(all_value_min>item.value){all_value_min=item.value;}
if(value_min!==null&&value_max!==null){if(value_max<value_min){var value_tmp=value_min;var value_min=value_max;var value_max=value_tmp;}
if(all_value_max<value_max){all_value_max=value_max;}
if(all_value_min>value_min){all_value_min=value_min;}}
dataset.data_min.push(value_min);dataset.data_max.push(value_max);var current_color=null;if(item.color){current_color=item.color;}else if(dataset_id<header_options.dataset.colors&&header_options.dataset.colors[dataset_id]){current_color=header_options.dataset.colors[dataset_id];}else{current_color=options.bar.colors.datasets[dataset_id%options.bar.colors.datasets.length];}
dataset.borderColor.push(current_color);dataset.hoverBorderColor.push(current_color);dataset.hoverBackgroundColor.push(current_color);dataset.backgroundColor.push(current_color);if(item.value>value_max){value_max=item.value;}
if(item.value<value_max){value_min=item.value;}}
datasets.push(dataset);}}else{var dataset={label:sort_name,data:[],data_min:[],data_max:[],data_string:[],data_uniqueid:[],horizontal_line_value:[],horizontal_line_color:[],backgroundColor:[],borderColor:[],borderWidth:2,hoverBackgroundColor:[],hoverBorderColor:[],};var all_value_min=Infinity;var all_value_max=-Infinity;for(var row_id=0;row_id<table_data.length;row_id++){var item=self.parseNumericValue(table_data[row_id][value_name]);dataset.data.push({x:$("<div/>").html(table_data[row_id][sort_name]).text().trim().replace(/<(?:.|\n)*?>/gm,'').replace('_',' '),y:item.value});if(header_options.value.formatter){dataset.data_string.push(this.stripHTML(window[header_options.value.formatter](table_data[row_id][value_name])));}else{dataset.data_string.push(this.injectValuePostfix(table_data[row_id][value_name],header_options.value.postfix));}
dataset.data_uniqueid.push(table_data[row_id][table_options.idField]);var value_max=item.value_max;var value_min=item.value_min;if(all_value_max<item.value){all_value_max=item.value;}
if(all_value_min>item.value){all_value_min=item.value;}
if(value_min!==null&&value_max!==null){if(value_max<value_min){var value_tmp=value_min;value_min=value_max;value_max=value_tmp;}
if(all_value_max<value_max){all_value_max=value_max;}
if(all_value_min>value_min){all_value_min=value_min;}}
dataset.data_min.push(value_min);dataset.data_max.push(value_max);if(table_data[row_id].hasOwnProperty('_data')&&table_data[row_id]['_data'].hasOwnProperty('hline')&&typeof table_data[row_id]['_data']['hline']!=='undefined'&&table_data[row_id]['_data']['hline']){dataset.horizontal_line_value.push(item.value);if(table_data[row_id].hasOwnProperty('_class')&&typeof table_data[row_id]['_class']!=='undefined'){dataset.horizontal_line_color.push(options.bar.colors[table_data[row_id]['_class']].bg.normal);}else{dataset.horizontal_line_color.push(options.bar.colors.default.bg.normal);}}
if(table_data[row_id].hasOwnProperty('_class')&&typeof table_data[row_id]['_class']!=='undefined'){if(options.bar.colors.valid.indexOf(table_data[row_id]['_class'])>-1){dataset.borderColor.push(options.bar.colors[table_data[row_id]['_class']].border.normal);dataset.hoverBorderColor.push(options.bar.colors[table_data[row_id]['_class']].border.hover);dataset.backgroundColor.push(options.bar.colors[table_data[row_id]['_class']].bg.normal);dataset.hoverBackgroundColor.push(options.bar.colors[table_data[row_id]['_class']].bg.hover);}else{dataset.borderColor.push(options.bar.colors.default.border.normal);dataset.hoverBorderColor.push(options.bar.colors.default.border.hover);dataset.backgroundColor.push(options.bar.colors.default.bg.normal);dataset.hoverBackgroundColor.push(options.bar.colors.default.bg.hover);}}else{dataset.borderColor.push(options.bar.colors.default.border.normal);dataset.hoverBorderColor.push(options.bar.colors.default.border.hover);dataset.backgroundColor.push(options.bar.colors.default.bg.normal);dataset.hoverBackgroundColor.push(options.bar.colors.default.bg.hover);}
if(item.value>value_max){value_max=item.value;}
if(item.value<value_max){value_min=item.value;}}
datasets.push(dataset);}
if(header_options.chartable&&datasets.length>0){$(this.options.element.bar.div).show(0);var axis_scale='linear';var axis_scale_type=null;if(header_options.axis.scale){if(header_options.axis.scale.startsWith('log')){axis_scale='logarithmic';axis_scale_type='log';if(header_options.axis.scale==='log_unit'){axis_scale_type='log_unit';}else if(header_options.axis.scale==='log_exp'){axis_scale_type='log_exp';}else if(header_options.axis.scale==='log10'){axis_scale_type='log10';}else if(header_options.axis.scale==='log10_unit'){axis_scale_type='log10_unit';}else if(header_options.axis.scale==='log10_exp'){axis_scale_type='log10_exp';}}}
var chart_data={labels:labels,datasets:datasets};var tooltip_position='average';var padding={left:0,right:0,top:0,bottom:0};var caretSize=5;var caretPadding=2;if(options.bar.tooltips.position==='top'){tooltip_position='line_centered_top';padding={left:0,right:0,top:45,bottom:0};caretSize=0;caretPadding=0;}else if(options.bar.tooltips.position==='bottom'){tooltip_position='line_centered_bottom';padding={left:0,right:0,top:0,bottom:45};caretSize=0;caretPadding=0;}
var barThickness=undefined;if(sort_name!==value_name){if(header_options.bar.item_width){barThickness=header_options.bar.item_width;}else if(this.options.bar.item_width){barThickness=this.options.bar.item_width;}else{barThickness=30;}}
var chart_options={layout:{padding:padding},scales:{xAxes:[{offset:true,display:options.bar.xaxis.display,stacked:stacked_chart,ticks:{autoSkip:false,maxRotation:90},gridLines:{display:options.bar.xaxis.gridlines},barThickness:barThickness}],yAxes:[{display:options.bar.yaxis.display,stacked:stacked_chart,type:axis_scale,ticks:{beginAtZero:header_options.beginatzero,suggestedMax:all_value_max,suggestedMin:all_value_min},scaleLabel:{display:true,labelString:header_options.value.label,fontColor:'black'},gridLines:{display:options.bar.yaxis.gridlines}}]},maintainAspectRatio:true,responsive:true,animation:{duration:options.animation.duration},title:{display:false},legend:{display:stacked_chart?options.bar.legend.enabled:false,position:options.bar.legend.position},vertical_indicator_line:{enabled:stacked_chart?false:options.bar.vertical_indicator_line.enabled,lineWidth:options.bar.vertical_indicator_line.lineWidth,strokeStyle:options.bar.vertical_indicator_line.strokeStyle},horizontal_highlights:{enabled:stacked_chart?false:options.bar.horizontal_highlights.enabled,data:options.bar.horizontal_highlights.data,opacity:options.bar.horizontal_highlights.opacity,lineWidth:options.bar.horizontal_highlights.lineWidth,strokeStyle:options.bar.horizontal_highlights.strokeStyle,label:{fillStyle:options.bar.horizontal_highlights.label.fillStyle,font:options.bar.horizontal_highlights.label.font,fontSize:options.bar.horizontal_highlights.label.fontSize,position:options.bar.horizontal_highlights.label.position,opacity:options.bar.horizontal_highlights.label.opacity}},horizontal_line:{enabled:stacked_chart?false:options.bar.horizontal_line.enabled},horizontal_indicator_line:{enabled:stacked_chart?false:options.bar.horizontal_indicator_line.enabled,lineWidth:options.bar.horizontal_indicator_line.lineWidth,strokeStyle:options.bar.horizontal_indicator_line.strokeStyle,fillStyle:options.bar.horizontal_indicator_line.fillStyle},error_bar:{enabled:stacked_chart?false:options.bar.error_bar.enabled,lineWidth:options.bar.error_bar.lineWidth,tipWidth:options.bar.error_bar.tipWidth,strokeStyle:options.bar.error_bar.strokeStyle},tooltips:{enabled:true,mode:'label',position:tooltip_position,caretSize:caretSize,caretPadding:caretPadding,titleFontSize:options.bar.tooltips.titleFontSize,bodyFontSize:options.bar.tooltips.bodyFontSize,bodyFontFamily:options.bar.tooltips.bodyFontFamily,callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index];}}},chartArea:{backgroundColor:options.bar.colors.background},onHover:function(event,elements){if(event.type=='mouseout'||event.type=='touchend'){$(self.element).find('tr td').removeClass('row-hover');}else if(event.type=='mousemove'){if(elements.length>0){$(self.element).find('tr td').removeClass('row-hover');var value_index=elements[0]._index;var table_options=$(self.element).bootstrapTable('getOptions');var row_index=value_index;if(table_options.pagination){var page_number=Math.floor(value_index/table_options.pageSize)+1;if(page_number==table_options.pageNumber){row_index=value_index%table_options.pageSize;$(self.element).find('tbody tr:nth-child('+(row_index+1)+') td').addClass('row-hover');}}else{$(self.element).find('tbody tr:nth-child('+(row_index+1)+') td').addClass('row-hover');}}}}};if(time_mode){chart_options.scales.xAxes[0].type='time';chart_options.scales.xAxes[0].distribution='linear';chart_options.scales.xAxes[0].time={};chart_options.scales.xAxes[0].time.displayFormats=options.time.display_formats;if(options.bar.xaxis.timeunit){chart_options.scales.xAxes[0].time.unit=options.bar.xaxis.timeunit;}
if(options.bar.xaxis.timestepsize){chart_options.scales.xAxes[0].time.stepSize=options.bar.xaxis.timestepsize;}
chart_options.scales.xAxes[0].ticks={};}
if(stacked_chart){chart_options.tooltips.callbacks.label=function(tooltipItems,data){var dataset_label=data.datasets[tooltipItems.datasetIndex].label;var data_string=data.datasets[tooltipItems.datasetIndex].data_string[tooltipItems.index];return data_string+' ('+dataset_label+')';};}else{chart_options.tooltips.callbacks.label=function(tooltipItems,data){var data_string=data.datasets[tooltipItems.datasetIndex].data_string[tooltipItems.index];return header_options.value.label+': '+data_string;};}
if(axis_scale==='logarithmic'){chart_options.scales.yAxes[0].ticks.callback=function(value,index,values){if(axis_scale_type.startsWith('log10')){if(!(value===1e1||value===1e2||value===1e3||value===1e4||value===1e5||value===1e6||value===1e7||value===1e8||value===1e9||value===1e10)){return'';}}else if(axis_scale_type.startsWith('log')){if(values.length>10){if(index%Math.ceil(values.length/10.0)!==0){return'';}}}
if(axis_scale_type.endsWith('_unit')){return self.addNumberPrefix(value);}else if(axis_scale_type.endsWith('_exp')){return value.toExponential(2);}else{return value;}}}
this.bar_chart=new Chart(chart_ctx,{type:'barError',data:chart_data,options:chart_options});}else{if($(this.options.element.bar.div).is(":visible")){$(this.options.element.bar.div).hide(0);}}},showBarChart:function(){var self=this;if(this.validBar()){if($(this.options.element.bar.div).is(":hidden")){$(this.options.element.bar.div).slideDown(this.options.animation.show_speed,function(){self.updateBar();$('#datatable_visualization'+self.uniqueId).height($(self.options.element.bar.div).height());});}}},hideBarChart:function(){if($(this.options.element.bar.div).is(":visible")){$('#datatable_visualization'+this.uniqueId).height($(this.options.element.bar.div).height());$(this.options.element.bar.div).slideUp(this.options.animation.hide_speed,function(){});}},getBarChartParameters:function(data){var parameters=jQuery.extend(true,{},this.defaults.bar);parameters.height=this.getParameterItem(data,'bar-height');parameters.sort_field=this.getParameterItem(data,'bar-sort-field');parameters.sort_order=this.getParameterItem(data,'bar-sort-order');parameters.horizontal_line.enabled=this.getParameterItem(data,'bar-hline');parameters.xaxis.display=this.getParameterItem(data,'bar-show-xaxis');parameters.xaxis.field=this.getParameterItem(data,'bar-xaxis-field');parameters.xaxis.sorted=this.getParameterItem(data,'bar-xaxis-sorted');parameters.xaxis.timeunit=this.getParameterItem(data,'bar-xaxis-timeunit');parameters.xaxis.timestepsize=this.getParameterItem(data,'bar-xaxis-timestepsize');parameters.xaxis.gridlines=this.getParameterItem(data,'bar-xaxis-gridlines');parameters.yaxis.display=this.getParameterItem(data,'bar-show-yaxis');parameters.yaxis.gridlines=this.getParameterItem(data,'bar-yaxis-gridlines');parameters.horizontal_highlights.data=this.getParameterItem(data,'bar-horizontal-highlights');if(parameters.horizontal_highlights.data){parameters.horizontal_highlights.data=this.parseDataList(parameters.horizontal_highlights.data);if(parameters.horizontal_highlights.data.length==0&&parameters.horizontal_highlights.enabled){parameters.horizontal_highlights.enabled=false;}}
parameters.horizontal_highlights.opacity=this.getParameterItem(data,'bar-horizontal-highlight-opacity');parameters.horizontal_highlights.lineWidth=this.getParameterItem(data,'bar-horizontal-highlight-width');parameters.horizontal_highlights.strokeStyle=this.getParameterItem(data,'bar-horizontal-highlight-stroke');parameters.horizontal_highlights.label.position=this.getParameterItem(data,'bar-horizontal-highlight-label-position');parameters.horizontal_highlights.label.fillStyle=this.getParameterItem(data,'bar-horizontal-highlight-label-fill');parameters.horizontal_highlights.label.fontSize=this.getParameterItem(data,'bar-horizontal-highlight-label-size');parameters.horizontal_highlights.label.opacity=this.getParameterItem(data,'bar-horizontal-highlight-label-opacity');parameters.vertical_indicator_line.enabled=this.getParameterItem(data,'bar-show-vertical-indicator');parameters.vertical_indicator_line.lineWidth=this.getParameterItem(data,'bar-vertical-indicator-width');parameters.vertical_indicator_line.strokeStyle=this.getParameterItem(data,'bar-vertical-indicator-stroke');parameters.horizontal_indicator_line.enabled=this.getParameterItem(data,'bar-show-horizontal-indicator');parameters.horizontal_indicator_line.lineWidth=this.getParameterItem(data,'bar-horizontal-indicator-width');parameters.horizontal_indicator_line.strokeStyle=this.getParameterItem(data,'bar-horizontal-indicator-stroke');parameters.horizontal_indicator_line.fillStyle=this.getParameterItem(data,'bar-horizontal-indicator-fill');parameters.error_bar.enabled=this.getParameterItem(data,'bar-show-error-bar');parameters.error_bar.lineWidth=this.getParameterItem(data,'bar-error-bar-linewidth');parameters.error_bar.tipWidth=this.getParameterItem(data,'bar-error-bar-tipwidth');parameters.error_bar.strokeStyle=this.getParameterItem(data,'bar-error-bar-stroke');parameters.tooltips.position=this.getParameterItem(data,'bar-tooltip-position');parameters.legend.enabled=this.getParameterItem(data,'bar-show-legend');parameters.legend.position=this.getParameterItem(data,'bar-legend-position');parameters.item_width=this.getParameterItem(data,'bar-item-width');return parameters;},validLine:function(){var table_options=$(this.element).bootstrapTable('getOptions');var header_options=this.getHeaderOptions(table_options.sortName);var options=jQuery.extend(true,{},this.options);options.line=jQuery.extend(true,{},options.line,header_options.line);if(!options.line.fields){options.line.fields=[header_options.field];}
if($(this.element).bootstrapTable('getData').length>0){for(var field_id=0;field_id<options.line.fields.length;field_id++){var current_header_options=this.getHeaderOptions(options.line.fields[field_id]);if(current_header_options.chartable){return true;}}}
return false;},updateLine:function(){var self=this;if(this.line_chart){this.line_chart.destroy();}
var table_options=$(this.element).bootstrapTable('getOptions');var table_data=$(this.element).bootstrapTable('getData');var sort_name=table_options.sortName;var header_options=this.getHeaderOptions(sort_name);var options=jQuery.extend(true,{},this.options);options.line=jQuery.extend(true,{},options.line,header_options.line);var chart_ctx=document.getElementById(this.options.element.line.canvas.replace('#',''));chart_ctx.width=$(this.options.element.line.div).innerWidth();chart_ctx.height=options.line.height;var xaxis_field=table_options.idField;if(options.line.xaxis.field){xaxis_field=options.line.xaxis.field}
if(options.line.xaxis.sorted){table_data.sort(function(a,b){return self.valueSorter(a[xaxis_field],b[xaxis_field],'asc');});}
var labels=[];for(var row_id=0;row_id<table_data.length;row_id++){var label=$("<div/>").html(table_data[row_id][xaxis_field]).text().trim().replace(/<(?:.|\n)*?>/gm,'').replace('_',' ');if(labels.indexOf(label)>-1){var num_of_occurances=0;for(var label_id=0;label_id<labels.length;label_id++){if(labels[label_id]===label)
num_of_occurances++;}
label=label+new Array(num_of_occurances+1).join(' ');}
labels.push(label);}
var axis_scale='linear';var axis_scale_type=null;var time_mode=false;if((new Date(labels[0])).getTime()>0){time_mode=true;}
if(!options.line.fields){options.line.fields=[header_options.field];}
var stacked_chart=false;var stacked_items=1;if(options.line.fields.length==1){for(var field_id=0;field_id<options.line.fields.length;field_id++){for(var row_id=0;row_id<table_data.length;row_id++){var values=self.parseDataList(table_data[row_id][options.line.fields[field_id]]);if(values.length>1){stacked_chart=true;if(values.length>stacked_items){stacked_items=values.length;}}}}}
var datasets=[];var all_value_max=-Infinity;var all_value_min=Infinity;var beginAtZero=options.line.yaxis.beginatzero;if(stacked_chart){if(header_options.dataset.labels.length==0){header_options.dataset.labels=new Array(stacked_items);for(var row_id=0;row_id<table_data.length;row_id++){var values=self.parseDataList(table_data[row_id][sort_name]);for(var value_id=0;value_id<values.length;value_id++){if(values[value_id].label){header_options.dataset.labels[value_id]=values[value_id].label;}}}}
var current_header_options=this.getHeaderOptions(options.line.fields[0]);if(current_header_options.chartable){if(!beginAtZero){beginAtZero=current_header_options.beginatzero;}
if(current_header_options.axis.scale){if(current_header_options.axis.scale.startsWith('log')){axis_scale='logarithmic';axis_scale_type='log';if(current_header_options.axis.scale==='log_unit'){axis_scale_type='log_unit';}else if(current_header_options.axis.scale==='log_exp'){axis_scale_type='log_exp';}else if(current_header_options.axis.scale==='log10'){axis_scale_type='log10';}else if(current_header_options.axis.scale==='log10_unit'){axis_scale_type='log10_unit';}else if(current_header_options.axis.scale==='log10_exp'){axis_scale_type='log10_exp';}}}
for(var dataset_id=0;dataset_id<stacked_items;dataset_id++){var dataset={label:header_options.dataset.labels[dataset_id],value_postfix:current_header_options.value.postfix,data:[],data_uniqueid:[],data_min:[],data_max:[],data_string:[],borderWidth:2,borderColor:this.colorCode(options.line.colors.datasets[dataset_id]),lineTension:0,fill:true,backgroundColor:this.colorCode(options.line.colors.datasets[dataset_id],0.6),pointRadius:[],pointHoverRadius:[]};for(var row_id=0;row_id<table_data.length;row_id++){var values=self.parseDataList(table_data[row_id][sort_name]);var value_sum=0;for(var ii=0;ii<values.length;ii++){value_sum+=values[ii]['y_value'];}
var item={'value':null,'value_max':null,'value_min':null};if(values.length>dataset_id&&values[dataset_id]['y_value']){var percentage=values[dataset_id]['y_value'];if(value_sum>100.0&&value_sum<101.0){percentage=percentage/value_sum*100.0;}
item.value=percentage;}
if(current_header_options.value.formatter){var value_string=this.stripHTML(window[current_header_options.value.formatter](item.value));if(current_header_options.value.pad){value_string=(value_string+current_header_options.value.pad).substring(0,current_header_options.value.pad.length);}
dataset.data_string.push(value_string);}else{dataset.data_string.push(this.injectValuePostfix(item.value,current_header_options.value.postfix));}
dataset.data_uniqueid.push(table_data[row_id][table_options.idField]);if(time_mode){var time_label=$("<div/>").html(table_data[row_id][xaxis_field]).text().trim().replace(/<(?:.|\n)*?>/gm,'').replace('_',' ');dataset.data.push({x:time_label,y:item.value});}else{dataset.data.push(item.value);}
if(options.line.point.enabled){dataset.pointRadius.push(options.line.point.radius.normal);dataset.pointHoverRadius.push(options.line.point.radius.hover);}else{dataset.pointRadius.push(0);dataset.pointHoverRadius.push(0);}}
datasets.push(dataset);}}}else{var dataset_id=0;for(var field_id=0;field_id<options.line.fields.length;field_id++){var current_header_options=this.getHeaderOptions(options.line.fields[field_id]);if(current_header_options.chartable){if(!beginAtZero){beginAtZero=current_header_options.beginatzero;}
var valid_dataset=false;if(options.line.fields){if(options.line.fields.includes(current_header_options.field)){valid_dataset=true;}}else{valid_dataset=true;}
if(valid_dataset){if(current_header_options.axis.scale){if(current_header_options.axis.scale.startsWith('log')){axis_scale='logarithmic';axis_scale_type='log';if(current_header_options.axis.scale==='log_unit'){axis_scale_type='log_unit';}else if(current_header_options.axis.scale==='log_exp'){axis_scale_type='log_exp';}else if(current_header_options.axis.scale==='log10'){axis_scale_type='log10';}else if(current_header_options.axis.scale==='log10_unit'){axis_scale_type='log10_unit';}else if(current_header_options.axis.scale==='log10_exp'){axis_scale_type='log10_exp';}}}
var dataset={label:current_header_options.title,value_postfix:current_header_options.value.postfix,data:[],data_uniqueid:[],data_min:[],data_max:[],data_string:[],data_extratitle:[],horizontal_line_value:[],borderWidth:2,borderColor:this.colorCode(options.line.colors.datasets[dataset_id]),lineTension:0,spanGaps:true,fill:options.line.fill,backgroundColor:this.colorCode(options.line.colors.datasets[dataset_id],0.10),pointRadius:[],pointHoverRadius:[],pointBorderColor:[],pointHoverBorderColor:[],pointBackgroundColor:[],pointHoverBackgroundColor:[]};for(var row_id=0;row_id<table_data.length;row_id++){var data_string=null;if(current_header_options.value.formatter){data_string=self.stripHTML(window[current_header_options.value.formatter](table_data[row_id][current_header_options.field]));}else{data_string=self.injectValuePostfix(table_data[row_id][current_header_options.field],current_header_options.value.postfix);}
dataset.data_string.push(data_string);if(options.line.tooltips.extraField){dataset.data_extratitle.push(table_data[row_id][options.line.tooltips.extraField]);}
dataset.data_uniqueid.push(table_data[row_id][table_options.idField]);var item=self.parseNumericValue(table_data[row_id][current_header_options.field]);if(time_mode){var time_label=$("<div/>").html(table_data[row_id][xaxis_field]).text().trim().replace(/<(?:.|\n)*?>/gm,'').replace('_',' ');dataset.data.push({x:time_label,y:item.value});}else{dataset.data.push(item.value);}
var value_max=item.value_max;var value_min=item.value_min;if(value_min!==null&&value_max!==null){if(value_max<value_min){var value_tmp=value_min;value_min=value_max;value_max=value_tmp;}
if(all_value_max<value_max){all_value_max=value_max;}
if(all_value_min>value_min){all_value_min=value_min;}}
dataset.data_min.push(value_min);dataset.data_max.push(value_max);if(table_data[row_id].hasOwnProperty('_data')&&table_data[row_id]['_data'].hasOwnProperty('hline')&&typeof table_data[row_id]['_data']['hline']!=='undefined'&&table_data[row_id]['_data']['hline']){dataset.horizontal_line_value.push(item.value);}
if(table_data[row_id].hasOwnProperty('_class')&&typeof table_data[row_id]['_class']!=='undefined'){if(self.options.line.colors.valid.indexOf(table_data[row_id]['_class'])>-1){dataset.pointBorderColor.push(self.options.line.colors[table_data[row_id]['_class']].border.normal);dataset.pointHoverBorderColor.push(self.options.line.colors[table_data[row_id]['_class']].border.hover);dataset.pointBackgroundColor.push(self.options.line.colors[table_data[row_id]['_class']].bg.normal);dataset.pointHoverBackgroundColor.push(self.options.line.colors[table_data[row_id]['_class']].border.hover);}else{dataset.pointBorderColor.push(self.hexToRGB(options.line.colors.datasets[dataset_id],0.5).css);dataset.pointHoverBorderColor.push(self.hexToRGB(options.line.colors.datasets[dataset_id],0.8).css);dataset.pointBackgroundColor.push(self.hexToRGB(options.line.colors.datasets[dataset_id],0.6).css);dataset.pointHoverBackgroundColor.push(self.hexToRGB(options.line.colors.datasets[dataset_id],1.0).css);}}else{dataset.pointBorderColor.push(self.hexToRGB(options.line.colors.datasets[dataset_id],0.5).css);dataset.pointHoverBorderColor.push(self.hexToRGB(options.line.colors.datasets[dataset_id],0.8).css);dataset.pointBackgroundColor.push(self.hexToRGB(options.line.colors.datasets[dataset_id],0.6).css);dataset.pointHoverBackgroundColor.push(self.hexToRGB(options.line.colors.datasets[dataset_id],1.0).css);}
if(options.line.point.enabled){dataset.pointRadius.push(options.line.point.radius.normal);dataset.pointHoverRadius.push(options.line.point.radius.hover);}else{dataset.pointRadius.push(0);dataset.pointHoverRadius.push(0);}}
datasets.push(dataset);dataset_id++;}}}}
if(datasets.length>0){if(!axis_scale_type){if(options.line.yaxis.scale){if(options.line.yaxis.scale.startsWith('log')){axis_scale='logarithmic';axis_scale_type='log';if(options.line.yaxis.scale==='log_unit'){axis_scale_type='log_unit';}else if(options.line.yaxis.scale==='log_exp'){axis_scale_type='log_exp';}else if(options.line.yaxis.scale==='log10'){axis_scale_type='log10';}else if(options.line.yaxis.scale==='log10_unit'){axis_scale_type='log10_unit';}else if(options.line.yaxis.scale==='log10_exp'){axis_scale_type='log10_exp';}}}}
$(this.options.element.line.div).show(0);var chart_data={labels:labels,datasets:datasets};var show_legend=false;if(datasets.length>1){if(options.line.legend.enabled){show_legend=true;}}
var tooltip_position='average';var padding={left:0,right:0,top:0,bottom:0};if(options.line.tooltips.position==='top'){tooltip_position='line_centered_top';padding={left:0,right:0,top:40+datasets.length*12,bottom:0};}else if(options.line.tooltips.position==='bottom'){tooltip_position='line_centered_bottom';padding={left:0,right:0,top:0,bottom:40+datasets.length*12};}
var chart_options={showLines:options.line.line.enabled,elements:{line:{tension:options.line.line.tension}},layout:{padding:padding},scales:{xAxes:[{display:options.line.xaxis.display,stacked:false,ticks:{maxRotation:90},gridLines:{display:options.line.xaxis.gridlines}}],yAxes:[{stacked:stacked_chart,type:axis_scale,ticks:{beginAtZero:beginAtZero,suggestedMin:all_value_min,suggestedMax:all_value_max},gridLines:{display:options.line.yaxis.gridlines}}]},maintainAspectRatio:true,responsive:true,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,title:{display:false},legend:{display:show_legend,position:options.line.legend.position},horizontal_highlights:options.line.horizontal_highlights,horizontal_line:options.line.horizontal_line,vertical_indicator_line:options.line.vertical_indicator_line,vertical_segments:options.line.vertical_segments,horizontal_indicator_line:options.line.horizontal_indicator_line,interval:options.line.interval,error_bar:options.line.error_bar,tooltips:{enabled:true,mode:'label',position:tooltip_position,intersect:false,caretSize:0,caretPadding:0,titleFontSize:options.line.tooltips.titleFontSize,bodyFontSize:options.line.tooltips.bodyFontSize,bodyFontFamily:options.line.tooltips.bodyFontFamily,callbacks:{title:function(tooltipItems,data){var title=tooltipItems[0].xLabel;var extra_title=data.datasets[tooltipItems[0].datasetIndex].data_extratitle[tooltipItems[0].index];if(extra_title){title+=' '+extra_title;}
return title;},afterBody:function(tooltipItems,data){$(self.element).find('tr td').removeClass('row-hover');var table_options=$(self.element).bootstrapTable('getOptions');for(var i=0;i<tooltipItems.length;i++){var value_index=tooltipItems[i].index;$(self.element).find('tbody td:contains('+table_options.data[value_index][table_options.idField]+')').parent('tr').find('td').addClass('row-hover')}},label:function(tooltipItems,data){var data_string=data.datasets[tooltipItems.datasetIndex].data_string[tooltipItems.index];return data_string+' ('+data.datasets[tooltipItems.datasetIndex].label+')';}}},chartArea:{backgroundColor:options.line.colors.background},onHover:function(event,elements){if(event.type=='mouseout'||event.type=='touchend'){$(self.element).find('tr td').removeClass('row-hover');}else if(event.type=='mousemove'){if(elements.length>0){$(self.element).find('tr td').removeClass('row-hover');var value_index=elements[0]._index;var table_options=$(self.element).bootstrapTable('getOptions');$(self.element).find('tbody td:contains('+table_options.data[value_index][table_options.idField]+')').parent('tr').find('td').addClass('row-hover')}}}};if(time_mode){chart_options.scales.xAxes[0].type='time';chart_options.scales.xAxes[0].distribution='linear';chart_options.scales.xAxes[0].time={};chart_options.scales.xAxes[0].time.displayFormats=options.time.display_formats;if(options.line.xaxis.timeunit){chart_options.scales.xAxes[0].time.unit=options.line.xaxis.timeunit;}
if(options.line.xaxis.timestepsize){chart_options.scales.xAxes[0].time.stepSize=options.line.xaxis.timestepsize;}
chart_options.scales.xAxes[0].ticks={};}
if(options.line.yaxis.label){chart_options.scales.yAxes[0].scaleLabel={display:true,labelString:options.line.yaxis.label,fontColor:'black'}}
if(axis_scale==='logarithmic'){chart_options.scales.yAxes[0].ticks.callback=function(value,index,values){if(axis_scale_type.startsWith('log10')){if(!(value===1e1||value===1e2||value===1e3||value===1e4||value===1e5||value===1e6||value===1e7||value===1e8||value===1e9||value===1e10)){return'';}}else if(axis_scale_type.startsWith('log')){if(values.length>10){if(index%Math.ceil(values.length/10.0)!==0){return'';}}}
if(axis_scale_type.endsWith('_unit')){return self.addNumberPrefix(value);}else if(axis_scale_type.endsWith('_exp')){return value.toExponential(2);}else{return value;}}}
if(stacked_chart){chart_options.interval.enabled=false;chart_options.horizontal_indicator_line.enabled=false;}
this.line_chart=new Chart(chart_ctx,{type:'line',data:chart_data,options:chart_options});this.line_chart_data=chart_data;}else{if($(this.options.element.line.div).is(":visible")){$(this.options.element.line.div).hide(0);}}},showLineChart:function(){var self=this;if(this.validLine()){if($(this.options.element.line.div).is(":hidden")){$(this.options.element.line.div).slideDown(this.options.animation.show_speed,function(){self.updateLine();$('#datatable_visualization'+self.uniqueId).height($(self.options.element.line.div).height());});}}},hideLineChart:function(){if($(this.options.element.line.div).is(":visible")){$('#datatable_visualization'+this.uniqueId).height($(this.options.element.line.div).height());$(this.options.element.line.div).slideUp(this.options.animation.hide_speed,function(){});}},getLineChartParameters:function(data){var parameters=jQuery.extend(true,{},this.defaults.line);var fields=this.getParameterItem(data,'line-fields');if(fields){fields=fields.split(',').map(function(item){return item.trim();});}
var extra_fields=this.getParameterItem(data,'line-extra-fields');if(extra_fields){extra_fields=extra_fields.split(',').map(function(item){return item.trim();});parameters.fields=extra_fields;}else{parameters.fields=fields;}
parameters.fill=this.getParameterItem(data,'line-fill');parameters.xaxis.display=this.getParameterItem(data,'line-show-xaxis');parameters.xaxis.field=this.getParameterItem(data,'line-xaxis-field');parameters.xaxis.sorted=this.getParameterItem(data,'line-xaxis-sorted');parameters.xaxis.timeunit=this.getParameterItem(data,'line-xaxis-timeunit');parameters.xaxis.timestepsize=this.getParameterItem(data,'line-xaxis-timestepsize');parameters.xaxis.gridlines=this.getParameterItem(data,'line-xaxis-gridlines');parameters.yaxis.beginatzero=this.getParameterItem(data,'line-yaxis-beginatzero');parameters.yaxis.label=this.getParameterItem(data,'line-yaxis-label');parameters.yaxis.scale=this.getParameterItem(data,'line-yaxis-scale');parameters.yaxis.gridlines=this.getParameterItem(data,'line-yaxis-gridlines');parameters.height=this.getParameterItem(data,'line-height');parameters.point.enabled=this.getParameterItem(data,'line-show-point');parameters.point.radius.normal=this.getParameterItem(data,'line-point-radius');parameters.point.radius.hover=this.getParameterItem(data,'line-point-radius-hover');parameters.line.enabled=this.getParameterItem(data,'line-show-line');parameters.vertical_indicator_line.enabled=this.getParameterItem(data,'line-show-vertical-indicator');parameters.vertical_indicator_line.lineWidth=this.getParameterItem(data,'line-vertical-indicator-width');parameters.vertical_indicator_line.strokeStyle=this.getParameterItem(data,'line-vertical-indicator-stroke');parameters.horizontal_indicator_line.enabled=this.getParameterItem(data,'line-show-horizontal-indicator');parameters.horizontal_indicator_line.lineWidth=this.getParameterItem(data,'line-horizontal-indicator-width');parameters.horizontal_indicator_line.strokeStyle=this.getParameterItem(data,'line-horizontal-indicator-stroke');parameters.horizontal_indicator_line.fillStyle=this.getParameterItem(data,'line-horizontal-indicator-fill');parameters.horizontal_highlights.enabled=this.getParameterItem(data,'line-show-horizontal-highlights');parameters.horizontal_highlights.data=this.getParameterItem(data,'line-horizontal-highlights');if(parameters.horizontal_highlights.data){parameters.horizontal_highlights.data=this.parseDataList(parameters.horizontal_highlights.data);if(parameters.horizontal_highlights.data.length==0&&parameters.horizontal_highlights.enabled){parameters.horizontal_highlights.enabled=false;}}
parameters.horizontal_highlights.opacity=this.getParameterItem(data,'line-horizontal-highlight-opacity');parameters.horizontal_highlights.lineWidth=this.getParameterItem(data,'line-horizontal-highlight-width');parameters.horizontal_highlights.strokeStyle=this.getParameterItem(data,'line-horizontal-highlight-stroke');parameters.horizontal_highlights.label.position=this.getParameterItem(data,'line-horizontal-highlight-label-position');parameters.horizontal_highlights.label.fillStyle=this.getParameterItem(data,'line-horizontal-highlight-label-fill');parameters.horizontal_highlights.label.fontSize=this.getParameterItem(data,'line-horizontal-highlight-label-size');parameters.horizontal_highlights.label.opacity=this.getParameterItem(data,'line-horizontal-highlight-label-opacity');parameters.vertical_segments.enabled=this.getParameterItem(data,'line-show-vertical-segments');parameters.vertical_segments.data=this.getParameterItem(data,'line-vertical-segments');if(parameters.vertical_segments.data){parameters.vertical_segments.data=this.parseSegmentList(parameters.vertical_segments.data);if(parameters.vertical_segments.data.length==0&&parameters.vertical_segments.enabled){parameters.vertical_segments.enabled=false;}}
parameters.vertical_segments.opacity=this.getParameterItem(data,'line-vertical-segment-opacity');parameters.vertical_segments.label.position=this.getParameterItem(data,'line-vertical-segment-label-position');parameters.vertical_segments.label.fillStyle=this.getParameterItem(data,'line-vertical-segment-label-fill');parameters.vertical_segments.label.fontSize=this.getParameterItem(data,'line-vertical-segment-label-size');parameters.vertical_segments.label.opacity=this.getParameterItem(data,'line-vertical-segment-label-opacity');parameters.error_bar.enabled=this.getParameterItem(data,'line-show-error-bar');parameters.error_bar.lineWidth=this.getParameterItem(data,'line-error-bar-linewidth');parameters.error_bar.tipWidth=this.getParameterItem(data,'line-error-bar-tipwidth');parameters.error_bar.strokeStyle=this.getParameterItem(data,'line-error-bar-stroke');parameters.interval.enabled=this.getParameterItem(data,'line-show-interval');parameters.interval.lineWidth=this.getParameterItem(data,'line-interval-linewidth');parameters.horizontal_line.enabled=this.getParameterItem(data,'line-hline');parameters.tooltips.position=this.getParameterItem(data,'line-tooltip-position');parameters.tooltips.extraField=this.getParameterItem(data,'line-tooltip-extra-field');parameters.legend.enabled=this.getParameterItem(data,'line-show-legend');parameters.legend.position=this.getParameterItem(data,'line-legend-position');return parameters;},updateScatter:function(){var self=this;if(this.scatter_chart){this.scatter_chart.destroy();}
var x_field='';var x_label='';var x_postfix='';var x_scale_reverse=false;var y_field='';var y_label='';var y_postfix='';var y_scale_reverse=false;$(this.options.element.scatter.selector_x_menu+' li a').each(function(){if($(this).data('selected')==1){x_field=$(this).data('field');x_postfix=' '+$(this).data('postfix');x_scale_reverse=$(this).data('reversed');if($(this).data('axis-label')){x_label=$(this).data('axis-label');}else{x_label=$(this).text();}
return false;}});$(this.options.element.scatter.selector_y_menu+' li a').each(function(){if($(this).data('selected')==1){y_field=$(this).data('field');y_postfix=' '+$(this).data('postfix');y_scale_reverse=$(this).data('reversed');if($(this).data('axis-label')){y_label=$(this).data('axis-label');}else{y_label=$(this).text();}
return false;}});var table_options=$(this.element).bootstrapTable('getOptions');var table_data=$(this.element).bootstrapTable('getData');var sort_name=table_options.sortName;var id_field=table_options.idField;var chartable=$(this.element).find('thead tr th[data-field=\"'+sort_name+'\"]').data('chartable');var labels=[];var data=[];var data_uniqueid=[];var data_min=[];var data_max=[];var data_string=[];var x_all_value_max=-Infinity;var x_all_value_min=Infinity;var y_all_value_max=-Infinity;var y_all_value_min=Infinity;var point_border_colors=[];var point_border_hover_colors=[];var point_bg_colors=[];var point_bg_hover_colors=[];var point_radius=[];var point_hover_radius=[];var header_x=$(this.element).find('thead tr th[data-field=\"'+x_field+'\"]');var header_y=$(this.element).find('thead tr th[data-field=\"'+y_field+'\"]');var value_formatter_x=null;var value_formatter_y=null;if(typeof header_x.data('formatter')!=='undefined'){value_formatter_x=header_x.data('formatter');}
if(typeof header_y.data('formatter')!=='undefined'){value_formatter_y=header_y.data('formatter');}
for(var i=0;i<table_data.length;i++){labels.push($("<div/>").html(table_data[i][this.options.table.id_field]).text().replace(/<(?:.|\n)*?>/gm,''));if(table_data[i].hasOwnProperty('_class')&&typeof table_data[i]['_class']!=='undefined'){if(this.options.scatter.colors.valid.indexOf(table_data[i]['_class'])>-1){point_border_colors.push(this.options.scatter.colors[table_data[i]['_class']].border.normal);point_border_hover_colors.push(this.options.scatter.colors[table_data[i]['_class']].border.hover);point_bg_colors.push(this.options.scatter.colors[table_data[i]['_class']].bg.normal);point_bg_hover_colors.push(this.options.scatter.colors[table_data[i]['_class']].border.hover);}else{point_border_colors.push(this.options.scatter.colors.default.border.normal);point_border_hover_colors.push(this.options.scatter.colors.default.border.hover);point_bg_colors.push(this.options.scatter.colors.default.bg.normal);point_bg_hover_colors.push(this.options.scatter.colors.default.bg.hover);}}else{point_border_colors.push(this.options.scatter.colors.default.border.normal);point_border_hover_colors.push(this.options.scatter.colors.default.border.hover);point_bg_colors.push(this.options.scatter.colors.default.bg.normal);point_bg_hover_colors.push(this.options.scatter.colors.default.bg.hover);}
var x_item=self.parseNumericValue(table_data[i][x_field]);var y_item=self.parseNumericValue(table_data[i][y_field]);data.push({x:x_item.value,y:y_item.value});var x_string=null;var y_string=null;if(value_formatter_x){x_string=this.stripHTML(window[value_formatter_x](table_data[i][x_field]));}else{x_string=this.injectValuePostfix(table_data[i][x_field],x_postfix);}
if(value_formatter_y){y_string=this.stripHTML(window[value_formatter_y](table_data[i][y_field]));}else{y_string=this.injectValuePostfix(table_data[i][y_field],y_postfix);}
data_string.push({x:x_string,y:y_string});data_uniqueid.push(table_data[i][table_options.idField]);var x_value_max=x_item.value_max;var x_value_min=x_item.value_min;if(x_all_value_max<x_item.value){x_all_value_max=x_item.value;}
if(x_all_value_min>x_item.value){x_all_value_min=x_item.value;}
if(x_value_min!==null&&x_value_max!==null){if(x_value_max<x_value_min){var x_value_tmp=x_value_min;x_value_min=x_value_max;x_value_max=x_value_tmp;}
if(x_all_value_max<x_value_max){x_all_value_max=x_value_max;}
if(x_all_value_min>x_value_min){x_all_value_min=x_value_min;}}
var y_value_max=y_item.value_max;var y_value_min=y_item.value_min;if(y_all_value_max<y_item.value){y_all_value_max=y_item.value;}
if(y_all_value_min>y_item.value){y_all_value_min=y_item.value;}
if(y_value_min!==null&&y_value_max!==null){if(y_value_max<y_value_min){var y_value_tmp=y_value_min;y_value_min=y_value_max;y_value_max=y_value_tmp;}
if(y_all_value_max<y_value_max){y_all_value_max=y_value_max;}
if(y_all_value_min>y_value_min){y_all_value_min=y_value_min;}}
data_min.push({x:x_value_min,y:y_value_min});data_max.push({x:x_value_max,y:y_value_max});point_radius.push(this.options.scatter.point.radius.normal);point_hover_radius.push(this.options.scatter.point.radius.hover);}
var axis_x_scale='linear';var axis_x_scale_type=null;if(typeof header_x.data('axis-scale')!=='undefined'){if(header_x.data('axis-scale').startsWith('log')){axis_x_scale='logarithmic';axis_x_scale_type='log';if(header_x.data('axis-scale')==='log_unit'){axis_x_scale_type='log_unit';}else if(header_x.data('axis-scale')==='log_exp'){axis_x_scale_type='log_exp';}else if(header_x.data('axis-scale')==='log10'){axis_x_scale_type='log10';}else if(header_x.data('axis-scale')==='log10_unit'){axis_x_scale_type='log10_unit';}else if(header_x.data('axis-scale')==='log10_exp'){axis_x_scale_type='log10_exp';}}}
var axis_y_scale='linear';var axis_y_scale_type=null;if(typeof header_y.data('axis-scale')!=='undefined'){if(header_y.data('axis-scale').startsWith('log')){axis_y_scale='logarithmic';axis_y_scale_type='log';if(header_y.data('axis-scale')==='log_unit'){axis_y_scale_type='log_unit';}else if(header_y.data('axis-scale')==='log_exp'){axis_y_scale_type='log_exp';}else if(header_y.data('axis-scale')==='log10'){axis_y_scale_type='log10';}else if(header_y.data('axis-scale')==='log10_unit'){axis_y_scale_type='log10_unit';}else if(header_y.data('axis-scale')==='log10_exp'){axis_y_scale_type='log10_exp';}}}
var chart_ctx=document.getElementById(this.options.element.scatter.canvas.replace('#',''));chart_ctx.width=$(this.options.element.scatter.div).innerWidth();chart_ctx.height=this.options.scatter.height;var chart_options={maintainAspectRatio:true,responsive:true,animation:{duration:this.options.animation.duration},title:{display:false},legend:{display:false},vertical_indicator_line:{enabled:this.options.scatter.vertical_indicator_line.enabled,lineWidth:this.options.scatter.vertical_indicator_line.lineWidth,strokeStyle:this.options.scatter.vertical_indicator_line.strokeStyle},horizontal_indicator_line:{enabled:this.options.scatter.horizontal_indicator_line.enabled,lineWidth:this.options.scatter.horizontal_indicator_line.lineWidth,fillStyle:this.options.scatter.horizontal_indicator_line.fillStyle,strokeStyle:this.options.scatter.horizontal_indicator_line.strokeStyle},error_bar:{enabled:this.options.scatter.error_bar.enabled,lineWidth:this.options.scatter.error_bar.lineWidth,strokeStyle:this.options.scatter.error_bar.strokeStyle,fillStyle:this.options.scatter.error_bar.fillStyle,tipWidth:this.options.scatter.error_bar.tipWidth,bounding_box:this.options.scatter.error_bar.bounding_box},tooltips:{enabled:true,mode:'label',titleFontSize:this.options.scatter.tooltips.titleFontSize,bodyFontSize:this.options.scatter.tooltips.bodyFontSize,callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index];},label:function(tooltipItems,data){var data_string=data.datasets[tooltipItems.datasetIndex].data_string[tooltipItems.index];var value=data.datasets[0].data[tooltipItems.index];return['x: '+data_string['x']+' ('+x_label+')','y: '+data_string['y']+' ('+y_label+')'];}}},scales:{xAxes:[{position:'bottom',type:axis_x_scale,ticks:{reverse:x_scale_reverse,suggestedMin:x_all_value_min,suggestedMax:x_all_value_max},scaleLabel:{display:true,labelString:x_label,fontColor:'black'}}],yAxes:[{position:'left',type:axis_y_scale,ticks:{reverse:y_scale_reverse,suggestedMin:y_all_value_min,suggestedMax:y_all_value_max},scaleLabel:{display:true,labelString:y_label,fontColor:'black'}}]},showLines:false,chartArea:{backgroundColor:this.options.scatter.colors.background},onHover:function(event,elements){if(event.type==='mouseout'||event.type==='touchend'){$(self.element).find('tr td').removeClass('row-hover');}else if(event.type==='mousemove'){if(elements.length>0){$(self.element).find('tr td').removeClass('row-hover');var value_index=elements[0]._index;var table_options=$(self.element).bootstrapTable('getOptions');var row_index=value_index;if(table_options.pagination){var page_number=Math.floor(value_index/table_options.pageSize)+1;if(page_number===table_options.pageNumber){row_index=value_index%table_options.pageSize;$(self.element).find('tbody tr:nth-child('+(row_index+1)+') td').addClass('row-hover');}}else{$(self.element).find('tbody tr:nth-child('+(row_index+1)+') td').addClass('row-hover');}}}}};if(axis_x_scale==='logarithmic'){chart_options.scales.xAxes[0].ticks.callback=function(value,index,values){if(axis_x_scale_type.startsWith('log10')){if(!(value===1e1||value===1e2||value===1e3||value===1e4||value===1e5||value===1e6||value===1e7||value===1e8||value===1e9||value===1e10)){return'';}}else if(axis_x_scale_type.startsWith('log')){if(values.length>10){if(index%Math.ceil(values.length/10.0)!==0){return'';}}}
if(axis_x_scale_type.endsWith('_unit')){return self.addNumberPrefix(value);}else if(axis_x_scale_type.endsWith('_exp')){return value.toExponential(2);}else{return value;}}}
if(axis_y_scale==='logarithmic'){chart_options.scales.yAxes[0].ticks.callback=function(value,index,values){if(axis_y_scale_type.startsWith('log10')){if(!(value===1e1||value===1e2||value===1e3||value===1e4||value===1e5||value===1e6||value===1e7||value===1e8||value===1e9||value===1e10)){return'';}}else if(axis_y_scale_type.startsWith('log')){if(values.length>10){if(index%Math.ceil(values.length/10.0)!==0){return'';}}}
if(axis_y_scale_type.endsWith('_unit')){return self.addNumberPrefix(value);}else if(axis_y_scale_type.endsWith('_exp')){return value.toExponential(2);}else{return value;}}}
var chart_data={labels:labels,datasets:[{data:data,data_uniqueid:data_uniqueid,data_min:data_min,data_max:data_max,data_string:data_string,borderWidth:this.options.scatter.point.borderWidth,pointBackgroundColor:point_bg_colors,pointBorderWidth:point_border_colors,pointHoverBackgroundColor:point_bg_hover_colors,pointHoverBorderColor:point_border_hover_colors,pointRadius:point_radius,pointHoverRadius:point_hover_radius}]};this.scatter_chart=new Chart(chart_ctx,{type:'line',data:chart_data,options:chart_options});},showScatterChart:function(){var self=this;if($(this.options.element.scatter.div).is(":hidden")){$(this.options.element.scatter.div).show(this.options.animation.show_speed,function(){self.updateScatter();});}},hideScatterChart:function(){if($(this.options.element.scatter.div).is(":visible")){$(this.options.element.scatter.div).hide(this.options.animation.hide_speed,function(){});}},getScatterChartParameters:function(data){var parameters=jQuery.extend(true,{},this.defaults.scatter);parameters.height=this.getParameterItem(data,'scatter-height');parameters.x=this.getParameterItem(data,'scatter-x');parameters.y=this.getParameterItem(data,'scatter-y');parameters.point.normal=this.getParameterItem(data,'scatter-point-radius');parameters.point.hover=this.getParameterItem(data,'scatter-point-radius-hover');parameters.vertical_indicator_line.enabled=this.getParameterItem(data,'scatter-show-vertical-indicator');parameters.vertical_indicator_line.lineWidth=this.getParameterItem(data,'scatter-vertical-indicator-width');parameters.vertical_indicator_line.strokeStyle=this.getParameterItem(data,'scatter-vertical-indicator-stroke');parameters.horizontal_indicator_line.enabled=this.getParameterItem(data,'scatter-show-horizontal-indicator');parameters.horizontal_indicator_line.lineWidth=this.getParameterItem(data,'scatter-horizontal-indicator-width');parameters.horizontal_indicator_line.strokeStyle=this.getParameterItem(data,'scatter-horizontal-indicator-stroke');parameters.horizontal_indicator_line.fillStyle=this.getParameterItem(data,'scatter-horizontal-indicator-fill');parameters.error_bar.enabled=this.$element.data('line-show-error-bar');parameters.error_bar.lineWidth=this.getParameterItem(data,'scatter-error-bar-linewidth');parameters.error_bar.tipWidth=this.getParameterItem(data,'scatter-error-bar-tipwidth');parameters.error_bar.strokeStyle=this.getParameterItem(data,'scatter-error-bar-stroke');parameters.error_bar.bounding_box=this.$element.data('line-show-error-box');parameters.error_bar.fillStyle=this.getParameterItem(data,'scatter-error-box-fill');return parameters;},initComparison:function(){var table_data=$(this.element).bootstrapTable('getData');if(table_data.length>1&&this.comparison_init){for(var i=0;i<table_data.length;i++){var field=table_data[i][this.options.table.id_field].trim();var label=table_data[i][this.options.table.id_field].trim().replace('_',' ');var active='';var selected='0';if(field==this.options.comparison.a_row){active=' class="active" ';selected='1';$(this.options.element.comparison.selector_a_button).html(label+' '+this.options.icon.caret);}
$(this.options.element.comparison.selector_a_menu).append('<li'+active+'><a data-row="'+field+'" data-selected="'+selected+'" href="#" onclick="return false;">'+label+'</a></li>');var active='';var selected='0';if(field==this.options.comparison.b_row){active=' class="active" ';selected='1';$(this.options.element.comparison.selector_b_button).html(label+' '+this.options.icon.caret);}
$(this.options.element.comparison.selector_b_menu).append('<li'+active+'><a data-row="'+field+'" data-selected="'+selected+'" href="#" onclick="return false;">'+label+'</a></li>');}
this.comparison_init=false;}},updateComparison:function(){var self=this;if(this.comparison_chart){this.comparison_chart.destroy();}
var chart_ctx=document.getElementById(this.options.element.comparison.canvas.replace('#',''));chart_ctx.width=$(this.options.element.comparison.div).innerWidth();chart_ctx.height=this.options.comparison.height;var table_options=$(this.element).bootstrapTable('getOptions');var table_data=$(this.element).bootstrapTable('getData');var sort_name=table_options.sortName;var id_field=table_options.idField;var a_row='';var a_label='';var b_row='';var b_label='';var set_id='';var set_label='';$(this.options.element.comparison.selector_a_menu+' li a').each(function(){if($(this).data('selected')==1){a_row=$(this).data('row');a_label=$(this).text();return false;}});$(this.options.element.comparison.selector_b_menu+' li a').each(function(){if($(this).data('selected')==1){b_row=$(this).data('row');b_label=$(this).text();return false;}});$(this.options.element.comparison.selector_set_menu+' li a').each(function(){if($(this).data('selected')==1){set_id=$(this).data('set');set_label=$(this).text();return false;}});var set=jQuery.grep(this.options.comparison.sets,function(e){return e.title==set_label;});set=set[0];var set_fields=[];for(var i=0;i<set.fields.length;i++){var field_name=set.fields[i];var chartable=$(this.element).find('thead tr th[data-field=\"'+field_name+'\"]').data('chartable');var title;if(set.hasOwnProperty('field_titles')&&set.field_titles[i]){title=set.field_titles[i];}else{title=$(this.element).find('thead tr th[data-field=\"'+field_name+'\"]').text().replace(/(\r\n|\n|\r)/gm,"").trim();}
var value_postfix=$(this.element).find('thead tr th[data-field=\"'+field_name+'\"]').data('postfix');set_fields.push({'field':field_name,'title':title,'chartable':chartable,'value_postfix':value_postfix});}
var data_a=jQuery.grep(table_data,function(e){var id=e[self.options.comparison.row_id_field].replace(/(\r\n|\n|\r)/gm,"").trim();return id==a_row;});if(data_a.length==1){data_a=data_a[0];}
var data_b=jQuery.grep(table_data,function(e){var id=e[self.options.comparison.row_id_field].replace(/(\r\n|\n|\r)/gm,"").trim();return id==b_row;});if(data_b.length==1){data_b=data_b[0];}
var labels=[];var all_value_min=Infinity;var all_value_max=-Infinity;var set_a_data=[];var set_a_data_string=[];var set_a_data_min=[];var set_a_data_max=[];var set_b_data=[];var set_b_data_string=[];var set_b_data_min=[];var set_b_data_max=[];for(var field_id=0;field_id<set_fields.length;field_id++){if(set_fields[field_id].chartable){labels.push(set_fields[field_id].title);var item_a=self.parseNumericValue(data_a[set_fields[field_id].field]);var item_b=self.parseNumericValue(data_b[set_fields[field_id].field]);set_a_data.push(item_a.value);set_b_data.push(item_b.value);var value_a_max=item_a.value_max;var value_a_min=item_a.value_min;if(value_a_min!==null&&value_a_max!==null){if(value_a_max<value_a_min){var value_a_tmp=value_a_min;var value_a_min=value_a_max;var value_a_max=value_a_tmp;}
if(all_value_max<item_a.value){all_value_max=item_a.value;}
if(all_value_max<value_a_max){all_value_max=value_a_max;}
if(all_value_min>item_a.value){all_value_min=item_a.value;}
if(all_value_min>value_a_min){all_value_min=value_a_min;}}
set_a_data_min.push(value_a_min);set_a_data_max.push(value_a_max);var value_b_max=item_b.value_max;var value_b_min=item_b.value_min;if(value_b_min!==null&&value_b_max!==null){if(value_b_max<value_b_min){var value_b_tmp=value_b_min;var value_b_min=value_b_max;var value_b_max=value_b_tmp;}
if(all_value_max<item_b.value){all_value_max=item_b.value;}
if(all_value_max<value_b_max){all_value_max=value_b_max;}
if(all_value_min>item_b.value){all_value_min=item_b.value;}
if(all_value_min>value_b_min){all_value_min=value_b_min;}}
set_b_data_min.push(value_b_min);set_b_data_max.push(value_b_max);var header_a=$(this.element).find('thead tr th[data-field=\"'+set_fields[field_id].field+'\"]');var header_b=$(this.element).find('thead tr th[data-field=\"'+set_fields[field_id].field+'\"]');var value_a_postfix='';var value_b_postfix='';if(typeof header_a.data('postfix')!=='undefined'){value_a_postfix=header_a.data('postfix');}
if(typeof header_b.data('postfix')!=='undefined'){value_b_postfix=header_b.data('postfix');}
var value_a_formatter=null;var value_b_formatter=null;if(typeof header_a.data('formatter')!=='undefined'){value_a_formatter=header_a.data('formatter');}
if(typeof header_b.data('formatter')!=='undefined'){value_b_formatter=header_b.data('formatter');}
if(value_a_formatter){set_a_data_string.push(this.stripHTML(window[value_a_formatter](data_a[set_fields[field_id].field])));}else{set_a_data_string.push(this.injectValuePostfix(data_a[set_fields[field_id].field],value_a_postfix));}
if(value_b_formatter){set_b_data_string.push(this.stripHTML(window[value_b_formatter](data_b[set_fields[field_id].field])));}else{set_b_data_string.push(this.injectValuePostfix(data_b[set_fields[field_id].field],value_b_postfix));}}}
var datasets=[{label:a_label,data:set_a_data,data_min:set_a_data_min,data_max:set_a_data_max,data_string:set_a_data_string,backgroundColor:this.options.comparison.a_color,borderWidth:0,borderColor:this.options.comparison.a_color},{label:b_label,data:set_b_data,data_min:set_b_data_min,data_max:set_b_data_max,data_string:set_b_data_string,backgroundColor:this.options.comparison.b_color,borderWidth:0,borderColor:this.options.comparison.b_color}];if(set_a_data.length>0&&set_b_data.length>0){$(this.options.element.comparison.div).show(0);var chart_data={labels:labels,datasets:datasets};var chart_options={maintainAspectRatio:true,responsive:true,animation:{duration:this.options.animation.duration},title:{display:false},legend:{display:false,position:'bottom'},scales:{xAxes:[{display:true,stacked:false,ticks:{autoSkip:false,maxRotation:90}}],yAxes:[{stacked:false,type:'linear',ticks:{beginAtZero:true,suggestedMax:all_value_max,suggestedMin:all_value_min},scaleLabel:{display:true,labelString:set.data_axis_title,fontColor:'black'}}]},error_bar:{enabled:this.options.comparison.error_bar.enabled,lineWidth:this.options.comparison.error_bar.lineWidth,tipWidth:this.options.comparison.error_bar.tipWidth,strokeStyle:this.options.comparison.error_bar.strokeStyle},tooltips:{enabled:true,mode:'label',titleFontSize:this.options.comparison.tooltips.titleFontSize,bodyFontSize:this.options.comparison.tooltips.bodyFontSize,callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index];},label:function(tooltipItems,data){var data_string=data.datasets[tooltipItems.datasetIndex].data_string[tooltipItems.index];if(tooltipItems.datasetIndex==0){return a_label+': '+data_string;}else{return b_label+': '+data_string;}}}},chartArea:{backgroundColor:this.options.comparison.colors.background}};this.comparison_chart=new Chart(chart_ctx,{type:'barError',data:chart_data,options:chart_options});}else{if($(this.options.element.comparison.div).is(":visible")){$(this.options.element.comparison.div).hide(this.options.animation.hide_speed);}}},showComparisonChart:function(){var self=this;if($(this.options.element.comparison.div).is(":hidden")){$(this.options.element.comparison.div).show(this.options.animation.show_speed,function(){self.updateComparison();});}},hideComparisonChart:function(){if($(this.options.element.comparison.div).is(":visible")){$(this.options.element.comparison.div).hide(this.options.animation.hide_speed,function(){});}},getComparisonChartParameters:function(data){var parameters=jQuery.extend(true,{},this.defaults.comparison);parameters.height=this.getParameterItem(data,'comparison-height');parameters.row_id_field=this.getParameterItem(data,'comparison-row-id-field');parameters.sets=this.getParameterItem(data,'comparison-sets-json');parameters.active_set=this.getParameterItem(data,'comparison-active-set');parameters.a_row=this.getParameterItem(data,'comparison-a-row');parameters.b_row=this.getParameterItem(data,'comparison-b-row');parameters.error_bar.enabled=this.getParameterItem(data,'comparison-show-error-bar');parameters.error_bar.lineWidth=this.getParameterItem(data,'comparison-error-bar-linewidth');parameters.error_bar.tipWidth=this.getParameterItem(data,'comparison-error-bar-tipwidth');parameters.error_bar.strokeStyle=this.getParameterItem(data,'comparison-error-bar-stroke');return parameters;},updateCustomChart:function(name){var self=this;var stacked_chart=false;var type=this.options.custom_chart[name].type;if(!['bar','line','scatter'].includes(type)){return;}
var subtype=this.options.custom_chart[name].subtype;if(subtype==null){subtype=[];}
var table_options=$(this.element).bootstrapTable('getOptions');var table_data=$(this.element).bootstrapTable('getData');var header_options=null;var yaxis_field=table_options.sortName;var free_sort_mode=false;if(this.options.custom_chart[name].options.y){yaxis_field=this.options.custom_chart[name].options.y;}else{free_sort_mode=true;}
if(yaxis_field.includes(';')){yaxis_field=yaxis_field.split(';');header_options=this.getHeaderOptions(yaxis_field[0]);header_options[type].fields=yaxis_field;if(subtype.includes('stacked')){stacked_chart=true;}}else{header_options=this.getHeaderOptions(yaxis_field);header_options[type].fields=[yaxis_field];}
var xaxis_field=this.options.custom_chart[name].options.x;if(typeof xaxis_field==='undefined'){if(typeof header_options[type].xaxis.field!=='undefined'){xaxis_field=header_options[type].xaxis.field;}else if(type=='bar'&&typeof table_options.barXaxisField!=='undefined'){xaxis_field=table_options.barXaxisField;}else if(type=='line'&&typeof table_options.lineXaxisField!=='undefined'){xaxis_field=table_options.lineXaxisField;}else{xaxis_field=table_options.idField;}}
if(this.options.custom_chart[name].chart){this.options.custom_chart[name].chart.destroy();}
var options=jQuery.extend(true,{},this.options);options[type]=jQuery.extend(true,{},options[type],header_options[type]);var chart_ctx=document.getElementById(this.options.custom_chart[name].canvas.replace('#',''));chart_ctx.width=$(this.options.custom_chart[name].div).innerWidth();chart_ctx.height=options[type].height;if(['bar','line'].includes(type)&&options[type].xaxis.sorted){table_data.sort(function(a,b){return self.valueSorter(a[xaxis_field],b[xaxis_field],'asc');});}
var labels=[];for(var row_id=0;row_id<table_data.length;row_id++){var label=$("<div/>").html(table_data[row_id][xaxis_field]).text().trim().replace(/<(?:.|\n)*?>/gm,'').replace('_',' ');if(labels.indexOf(label)>-1){var num_of_occurances=0;for(var label_id=0;label_id<labels.length;label_id++){if(labels[label_id]===label)
num_of_occurances++;}
label=label+new Array(num_of_occurances+1).join(' ');}
labels.push(label);}
var time_mode=false;if((new Date(labels[0])).getTime()>0){time_mode=true;}
if(!options[type].fields){options[type].fields=[header_options.field];}
var multiple_values_per_column=false;var field_sub_columns={};for(var field_id=0;field_id<options[type].fields.length;field_id++){if(!field_sub_columns.hasOwnProperty(options[type].fields[field_id])){field_sub_columns[options[type].fields[field_id]]={count:0,labels:[],};}
for(var row_id=0;row_id<table_data.length;row_id++){var values=self.parseDataList(table_data[row_id][options[type].fields[field_id]]);if(values.length>1){if(subtype.includes('stacked')||free_sort_mode){stacked_chart=true;}
multiple_values_per_column=true;if(values.length>field_sub_columns[options[type].fields[field_id]].count){field_sub_columns[options[type].fields[field_id]].count=values.length;var current_field_labels=[];$.each(values,function(index,value){if(value.label===null){current_field_labels.push((index+1));}else{current_field_labels.push(value.label);}});field_sub_columns[options[type].fields[field_id]].labels=current_field_labels;}}else{field_sub_columns[options[type].fields[field_id]].count=1;}}}
var datasets=[];var dataset_id=0;$.each(field_sub_columns,function(field,value){var current_header_options=self.getHeaderOptions(field);for(var id=0;id<value.count;id++){var label='';if(value.labels.length){label=current_header_options.title+' ('+value.labels[id]+')';}else{label=current_header_options.title;}
var current_dataset={label:label,value_postfix:current_header_options.value.postfix,stack:current_header_options.title,data:[],data_uniqueid:[],data_min:[],data_max:[],data_string:[],horizontal_line_value:[],horizontal_line_color:[],borderColor:self.colorCode(options.colors.datasets[dataset_id],0.70),lineTension:0,spanGaps:true,fill:options[type].fill,backgroundColor:self.colorCode(options.colors.datasets[dataset_id],0.70),pointRadius:[],pointHoverRadius:[],pointBorderColor:[],pointHoverBorderColor:[],pointBackgroundColor:[],pointHoverBackgroundColor:[]};if(subtype.includes('stacked')){if(current_header_options.hasOwnProperty('group')&&subtype.includes('grouped')){current_dataset.stack=current_header_options.group;}else{current_dataset.stack='stack_group';}}else if(value.labels.length&&!free_sort_mode){current_dataset.stack=current_header_options.title+' ('+value.labels[id]+')';}
datasets.push(current_dataset);dataset_id++;}});var all_value_max=-Infinity;var all_value_min=Infinity;var beginAtZero=false;var dataset_id=0;$.each(field_sub_columns,function(field,value){var current_header_options=self.getHeaderOptions(field);if(current_header_options.chartable){if(!beginAtZero){beginAtZero=current_header_options.beginatzero;}
if(current_header_options.axis.scale){if(current_header_options.axis.scale.startsWith('log')){axis_y_scale='logarithmic';axis_y_scale_type='log';if(['log_unit','log_exp','log10','log10_unit','log10_exp'].includes(current_header_options.axis.scale)){axis_y_scale_type=current_header_options.axis.scale;}}}
for(var id=0;id<value.count;id++){for(var row_id=0;row_id<table_data.length;row_id++){datasets[dataset_id].data_uniqueid.push(table_data[row_id][table_options.idField]);var values=self.parseDataList(table_data[row_id][field]);var item=self.parseNumericValue(values[id].y_value);if(time_mode){datasets[dataset_id].data.push({x:$("<div/>").html(table_data[row_id][xaxis_field]).text().trim().replace(/<(?:.|\n)*?>/gm,'').replace('_',' '),y:item.value});}else{datasets[dataset_id].data.push(item.value);}
if(current_header_options.value.formatter){var value_string=self.stripHTML(window[current_header_options.value.formatter](item.value));if(current_header_options.value.pad){value_string=(value_string+current_header_options.value.pad).substring(0,current_header_options.value.pad.length);}
datasets[dataset_id].data_string.push(value_string);}else{datasets[dataset_id].data_string.push(self.injectValuePostfix(table_data[row_id][field],current_header_options.value.postfix));}
var value_max=item.value_max;var value_min=item.value_min;if(value_min!==null&&value_max!==null){if(value_max<value_min){var value_tmp=value_min;value_min=value_max;value_max=value_tmp;}
if(all_value_max<value_max){all_value_max=value_max;}
if(all_value_min>value_min){all_value_min=value_min;}}
datasets[dataset_id].data_min.push(value_min);datasets[dataset_id].data_max.push(value_max);if(table_data[row_id].hasOwnProperty('_data')&&table_data[row_id]['_data'].hasOwnProperty('hline')&&typeof table_data[row_id]['_data']['hline']!=='undefined'&&table_data[row_id]['_data']['hline']){datasets[dataset_id].horizontal_line_value.push(item.value);if(table_data[row_id].hasOwnProperty('_class')&&typeof table_data[row_id]['_class']!=='undefined'){datasets[dataset_id].horizontal_line_color.push(options.colors[table_data[row_id]['_class']].bg.normal);}else{datasets[dataset_id].horizontal_line_color.push(options.colors.default.bg.normal);}}
if(table_data[row_id].hasOwnProperty('_class')&&typeof table_data[row_id]['_class']!=='undefined'){if(self.options.colors.valid.indexOf(table_data[row_id]['_class'])>-1){datasets[dataset_id].pointBorderColor.push(self.options.colors[table_data[row_id]['_class']].border.normal);datasets[dataset_id].pointHoverBorderColor.push(self.options.colors[table_data[row_id]['_class']].border.hover);datasets[dataset_id].pointBackgroundColor.push(self.options.colors[table_data[row_id]['_class']].bg.normal);datasets[dataset_id].pointHoverBackgroundColor.push(self.options.colors[table_data[row_id]['_class']].border.hover);}else{datasets[dataset_id].pointBorderColor.push(self.hexToRGB(options.colors.datasets[dataset_id],0.5).css);datasets[dataset_id].pointHoverBorderColor.push(self.hexToRGB(options.colors.datasets[dataset_id],0.8).css);datasets[dataset_id].pointBackgroundColor.push(self.hexToRGB(options.colors.datasets[dataset_id],0.6).css);datasets[dataset_id].pointHoverBackgroundColor.push(self.hexToRGB(options.colors.datasets[dataset_id],1.0).css);}}else{datasets[dataset_id].pointBorderColor.push(self.hexToRGB(options.colors.datasets[dataset_id],0.5).css);datasets[dataset_id].pointHoverBorderColor.push(self.hexToRGB(options.colors.datasets[dataset_id],0.8).css);datasets[dataset_id].pointBackgroundColor.push(self.hexToRGB(options.colors.datasets[dataset_id],0.6).css);datasets[dataset_id].pointHoverBackgroundColor.push(self.hexToRGB(options.colors.datasets[dataset_id],1.0).css);}
if(options[type].point&&options[type].point.enabled){datasets[dataset_id].pointRadius.push(options[type].point.radius.normal);datasets[dataset_id].pointHoverRadius.push(options[type].point.radius.hover);}else{datasets[dataset_id].pointRadius.push(0);datasets[dataset_id].pointHoverRadius.push(0);}}
dataset_id++;}}});if(datasets.length>0){$(this.options.custom_chart[name].div).show(0);var chart_data={labels:labels,datasets:datasets};var show_legend=false;if(datasets.length>1&&options[type].legend.enabled){show_legend=true;}
var tooltip_position_label='average';if(stacked_chart){tooltip_position_label='top';}
var tooltip_position=options[type].tooltips.position;var padding={left:0,right:0,top:0,bottom:0};var caretSize=5;var caretPadding=2;if(tooltip_position_label==='top'){tooltip_position_label='line_centered_top';padding={left:0,right:0,top:40+datasets.length*12,bottom:0};caretSize=0;caretPadding=0;}else if(tooltip_position_label==='bottom'){tooltip_position_label='line_centered_bottom';padding={left:0,right:0,top:0,bottom:40+datasets.length*12};caretSize=0;caretPadding=0;}
var chart_options={showLines:true,elements:{line:{tension:1,}},layout:{padding:padding},maintainAspectRatio:true,responsive:true,animation:{duration:options.animation.duration},hover:{animationDuration:0},responsiveAnimationDuration:0,title:{display:false},horizontal_highlights:options[type].horizontal_highlights,horizontal_line:options[type].horizontal_line,vertical_indicator_line:options[type].vertical_indicator_line,vertical_segments:options[type].vertical_segments,horizontal_indicator_line:options[type].horizontal_indicator_line,interval:options[type].interval,error_bar:options[type].error_bar,tooltips:{enabled:true,mode:'label',position:tooltip_position_label,intersect:false,caretSize:caretSize,caretPadding:caretPadding,titleFontSize:options[type].tooltips.titleFontSize,bodyFontSize:options[type].tooltips.bodyFontSize,bodyFontFamily:options[type].tooltips.bodyFontFamily,},chartArea:{backgroundColor:options.colors.background},onHover:function(event,elements){if(event.type=='mouseout'||event.type=='touchend'){$(self.element).find('tr td').removeClass('row-hover');}else if(event.type=='mousemove'){if(elements.length>0){$(self.element).find('tr td').removeClass('row-hover');var value_index=elements[0]._index;var table_options=$(self.element).bootstrapTable('getOptions');$(self.element).find('tbody td:contains('+table_options.data[value_index][table_options.idField]+')').parent('tr').find('td').addClass('row-hover')}}}};var axis_x_scale='linear';var axis_x_scale_type=null;var axis_y_scale='linear';var axis_y_scale_type=null;if(['bar','line'].includes(type)){if(!axis_y_scale_type){if(options[type].yaxis.scale){if(options[type].yaxis.scale.startsWith('log')){axis_y_scale='logarithmic';axis_y_scale_type='log';if(['log_unit','log_exp','log10','log10_unit','log10_exp'].includes(options[type].yaxis.scale)){axis_y_scale_type=options[type].yaxis.scale;}}}}
chart_options.scales={xAxes:[{display:options[type].xaxis.display,stacked:stacked_chart,ticks:{maxRotation:90},gridLines:{display:options[type].xaxis.gridlines},}],yAxes:[{stacked:stacked_chart,type:axis_y_scale,ticks:{beginAtZero:beginAtZero,suggestedMin:all_value_min,suggestedMax:all_value_max},gridLines:{display:options[type].yaxis.gridlines}}]};chart_options.tooltips.callbacks={afterBody:function(tooltipItems,data){$(self.element).find('tr td').removeClass('row-hover');var table_options=$(self.element).bootstrapTable('getOptions');for(var i=0;i<tooltipItems.length;i++){var value_index=tooltipItems[i].index;$(self.element).find('tbody td:contains('+table_options.data[value_index][table_options.idField]+')').parent('tr').find('td').addClass('row-hover')}},label:function(tooltipItems,data){var data_string=data.datasets[tooltipItems.datasetIndex].data_string[tooltipItems.index];return data_string+' ('+data.datasets[tooltipItems.datasetIndex].label+')';}};chart_options.legend={display:show_legend,position:options[type].legend.position};if(type=='bar'){chart_options.scales.xAxes[0].offset=true;if(datasets.length==1){chart_options.scales.yAxes[0].scaleLabel={display:true,labelString:header_options.value.label,fontColor:'black'};}}}else if(type=='scatter'){var axis_x_scale='linear';var axis_x_scale_type=null;if(typeof header_x.data('axis-scale')!=='undefined'){if(header_x.data('axis-scale').startsWith('log')){axis_x_scale='logarithmic';axis_x_scale_type='log';if(['log_unit','log_exp','log10','log10_unit','log10_exp'].includes(header_x.data('axis-scale'))){axis_x_scale_type=header_x.data('axis-scale');}}}
var axis_y_scale='linear';var axis_y_scale_type=null;if(typeof header_y.data('axis-scale')!=='undefined'){if(header_y.data('axis-scale').startsWith('log')){axis_y_scale='logarithmic';axis_y_scale_type='log';if(['log_unit','log_exp','log10','log10_unit','log10_exp'].includes(header_y.data('axis-scale'))){axis_y_scale_type=header_y.data('axis-scale');}ln}}
chart_options.scales={xAxes:[{position:'bottom',type:axis_x_scale,ticks:{reverse:x_scale_reverse,suggestedMin:x_all_value_min,suggestedMax:x_all_value_max},scaleLabel:{display:true,labelString:x_label,fontColor:'black'}}],yAxes:[{position:'left',type:axis_y_scale,ticks:{reverse:y_scale_reverse,suggestedMin:y_all_value_min,suggestedMax:y_all_value_max},scaleLabel:{display:true,labelString:y_label,fontColor:'black'}}]};chart_options.title={display:false};chart_options.legend={display:false};chart_options.tooltips.callbacks={title:function(tooltipItem,data){return data.labels[tooltipItem[0].index];},label:function(tooltipItems,data){var data_string=data.datasets[tooltipItems.datasetIndex].data_string[tooltipItems.index];var value=data.datasets[0].data[tooltipItems.index];return['x: '+data_string['x']+' ('+x_label+')','y: '+data_string['y']+' ('+y_label+')'];}};}
if(time_mode&&subtype.includes('timeline')){chart_options.scales.xAxes[0].type='time';chart_options.scales.xAxes[0].distribution='linear';chart_options.scales.xAxes[0].time={};chart_options.scales.xAxes[0].time.displayFormats=options.time.display_formats;if(options[type].xaxis.timeunit){chart_options.scales.xAxes[0].time.unit=options[type].xaxis.timeunit;}
if(options[type].xaxis.timestepsize){chart_options.scales.xAxes[0].time.stepSize=options[type].xaxis.timestepsize;}
chart_options.scales.xAxes[0].ticks={};}
if(free_sort_mode){chart_options.scales.yAxes[0].scaleLabel={display:true,labelString:header_options.value.label,fontColor:'black'}}else if(options[type].yaxis.label){chart_options.scales.yAxes[0].scaleLabel={display:true,labelString:options[type].yaxis.label,fontColor:'black'}}
if(stacked_chart){chart_options.tooltips.callbacks.label=function(tooltipItems,data){var dataset_label=data.datasets[tooltipItems.datasetIndex].label;var data_string=data.datasets[tooltipItems.datasetIndex].data_string[tooltipItems.index];return data_string+' ('+dataset_label+')';};}else{chart_options.tooltips.callbacks.label=function(tooltipItems,data){var data_string=data.datasets[tooltipItems.datasetIndex].data_string[tooltipItems.index];return header_options.value.label+': '+data_string;};}
if(axis_y_scale==='logarithmic'){chart_options.scales.yAxes[0].ticks.callback=function(value,index,values){if(axis_y_scale_type.startsWith('log10')){if(!(value===1e1||value===1e2||value===1e3||value===1e4||value===1e5||value===1e6||value===1e7||value===1e8||value===1e9||value===1e10)){return'';}}else if(axis_y_scale_type.startsWith('log')){if(values.length>10){if(index%Math.ceil(values.length/10.0)!==0){return'';}}}
if(axis_y_scale_type.endsWith('_unit')){return self.addNumberPrefix(value);}else if(axis_y_scale_type.endsWith('_exp')){return value.toExponential(2);}else{return value;}}}
if(stacked_chart){chart_options.interval={enabled:false};chart_options.horizontal_indicator_line={enabled:false};}
var chart_type=type;if(type=='bar'){if(subtype.includes('horizontal')){chart_type='horizontalBar';var tmp=chart_options.scales.xAxes;chart_options.scales.xAxes=chart_options.scales.yAxes;chart_options.scales.yAxes=tmp;}else{chart_type='barError';}}
this.options.custom_chart[name].chart=new Chart(chart_ctx,{type:chart_type,data:chart_data,options:chart_options});this.options.custom_chart[name].data=chart_data;}else{if($(this.options.custom_chart[name].div).is(":visible")){$(this.options.custom_chart[name].div).hide(0);}}},showCustomChart:function(name){var self=this;if($(this.options.custom_chart[name].div).is(":hidden")){$(this.options.custom_chart[name].div).slideDown(this.options.animation.show_speed,function(){self.updateCustomChart(name);$('#datatable_visualization'+self.uniqueId).height($(self.options.custom_chart[name].div).height());});}else{self.updateCustomChart(name);$('#datatable_visualization'+this.uniqueId).height($(this.options.custom_chart[name].div).height());}},hideCustomChart:function(name){if($(this.options.custom_chart[name].div).is(":visible")){$('#datatable_visualization'+this.uniqueId).height($(this.options.custom_chart[name].div).height());$(this.options.custom_chart[name].div).slideUp(this.options.animation.hide_speed,function(){});}},updateTags:function(){var self=this;if(this.options.tag_mode=='global'){var map={};var values={};jQuery.each(this.field_meta,function(index,meta){if(meta.tag){$(self.element).find('tbody tr').each(function(){var value=$(this).find('td').eq(index).text().trim();value.split(',').forEach(function(item){if(!(item.trim()in values)){values[item.trim()]=0;}
values[item.trim()]++;});});}});var sortable=[];for(var value_group in values){sortable.push([value_group,values[value_group]]);sortable.sort(function(a,b){return b[1]-a[1]})}
jQuery.each(sortable,function(i,val){map[val[0]]=i;});jQuery.each(this.field_meta,function(index,meta){if(meta.tag){$(self.element).find('tbody tr').each(function(){var value=$(this).find('td').eq(index).text().trim();var html='';value.split(',').forEach(function(item){var tag_css=self.options.tags.css[map[item.trim()]];if(tag_css==undefined){var tag_css=self.options.tags.css[self.options.tags.css.length-1];}
html+='<span class="'+tag_css+'">'+item.trim()+'</span>';});$(this).find('td').eq(index).html(html);})}})}else if(this.options.tag_mode=='column'){var map={};jQuery.each(this.field_meta,function(index,meta){if(meta.tag){var values={};$(self.element).find('tbody tr').each(function(){var value=$(this).find('td').eq(index).text().trim();value.split(',').forEach(function(item){if(!(item.trim()in values)){values[item.trim()]=0;}
values[item.trim()]++;});});var sortable=[];for(var value_group in values){sortable.push([value_group,values[value_group]]);sortable.sort(function(a,b){return b[1]-a[1]})}
jQuery.each(sortable,function(i,val){map[val[0]]=i;});$(self.element).find('tbody tr').each(function(){var value=$(this).find('td').eq(index).text().trim();var html='';value.split(',').forEach(function(item){var tag_css=self.options.tags.css[map[item.trim()]];if(tag_css==undefined){var tag_css=self.options.tags.css[self.options.tags.css.length-1];}
html+='<span class="'+tag_css+'">'+item.trim()+'</span>';});$(this).find('td').eq(index).html(html);})}})}},updateRank:function(){this.table_rank=[];var table_data=$(this.element).bootstrapTable('getData');if(table_data.length>1){var table_options=$(this.element).bootstrapTable('getOptions');var sort_name=table_options.sortName;var rank=0;var prev=table_data[0][sort_name]-1;var rank_unique=1;for(var i=0;i<table_data.length;i++){var value=parseFloat(table_data[i][sort_name]);if(value!=prev){rank++;prev=value;this.table_rank.push(rank);}else{rank_unique=0;if(this.options.rank_mode=='grouped_empty'){this.table_rank.push('');}else if(this.options.rank_mode=='grouped_muted'){this.table_rank.push('<span class=\"text-muted\">'+rank+'</span>')}else{this.table_rank.push(rank);}}}}
$(this.element).bootstrapTable('updateCell',{index:0,field:'rank',value:'-'});},getRank:function(index){return this.table_rank[index];},resetChartTooltip:function(chart_object,dataset_index){if(chart_object.ctx){chart_object.tooltip._active=[];chart_object.tooltip.update(true);chart_object.draw();chart_object.updateHoverStyle(chart_object.getDatasetMeta(dataset_index).data,null,false);chart_object.render();}},openChartTooltip:function(chart_object,dataset_index,point_index){if(chart_object.ctx){if(typeof chart_object.tooltip._active==='undefined'){chart_object.tooltip._active=[];}
var activeElements=chart_object.tooltip._active;var requestedElem=chart_object.getDatasetMeta(dataset_index).data[point_index];for(var i=0;i<activeElements.length;i++){if(requestedElem._index==activeElements[i]._index&&requestedElem._datasetIndex==activeElements[i]._datasetIndex)
return;}
activeElements.push(requestedElem);chart_object.tooltip._active=activeElements;chart_object.tooltip.update(true);chart_object.draw();chart_object.updateHoverStyle([requestedElem],null,true);chart_object.render();}},closeChartTooltip:function(chart_object,dataset_index,point_index){if(chart_object.ctx){var activeElements=chart_object.tooltip._active;if(typeof activeElements==='undefined'||activeElements.length==0){return;}
var requestedElem=chart_object.getDatasetMeta(dataset_index).data[point_index];for(var i=0;i<activeElements.length;i++){if(requestedElem._index==activeElements[i]._index){activeElements.splice(i,1);break;}}
chart_object.tooltip._active=activeElements;chart_object.tooltip.update(true);chart_object.draw();}},log:function(string){if(this.options.debug){console.log(string);}},stripHTML:function(element){return $("<div/>").html(element).text();},svgElement:function(type,size,fill_color,tooltip,use_vertical_offset,vertical_offset){var html='<svg ';var hover_increase=2;if(use_vertical_offset){html+='height="'+(size*2+hover_increase*2)+'" ';}else{html+='height="'+(size+hover_increase*2)+'" ';}
html+='width="'+(size+hover_increase*2)+'" style="padding:0px;" ';if(tooltip){html+='data-toggle="tooltip" data-placement="bottom" title="'+tooltip+'" ';}
html+='>';html+='<';if(type=='circle'){html+='circle ';html+='cx="'+(size/2+hover_increase)+'" ';if(use_vertical_offset){html+='cy="'+(size/2+hover_increase+vertical_offset)+'" ';}else{html+='cy="'+(size/2+hover_increase)+'" ';}
html+='r="'+(size/2)+'" ';html+='onmouseover="evt.target.setAttribute(\'r\', \''+(size/2+hover_increase)+'\');" onmouseout="evt.target.setAttribute(\'r\', \''+(size/2)+'\');" ';}else if(type=='rect'){var rounding=size/6;html+='rect rx="'+rounding+'" ry="'+rounding+'" ';html+='x="'+(hover_increase)+'" ';if(use_vertical_offset){html+='y="'+(hover_increase+vertical_offset)+'" ';html+='onmouseover="evt.target.setAttribute(\'x\', \''+(hover_increase/2)+'\');evt.target.setAttribute(\'y\', \''+(hover_increase/2+vertical_offset)+'\');evt.target.setAttribute(\'width\', \''+(size+hover_increase)+'\');evt.target.setAttribute(\'height\', \''+(size+hover_increase)+'\');" ';html+='onmouseout="evt.target.setAttribute(\'x\', \''+hover_increase+'\');evt.target.setAttribute(\'y\', \''+(hover_increase+vertical_offset)+'\');evt.target.setAttribute(\'width\', \''+size+'\');evt.target.setAttribute(\'height\', \''+size+'\');" ';}else{html+='y="'+(hover_increase)+'" ';html+='onmouseover="evt.target.setAttribute(\'x\', \''+hover_increase/2+'\');evt.target.setAttribute(\'y\', \''+hover_increase/2+'\');evt.target.setAttribute(\'width\', \''+(size+hover_increase)+'\');evt.target.setAttribute(\'height\', \''+(size+hover_increase)+'\');" ';html+='onmouseout="evt.target.setAttribute(\'x\', \''+hover_increase+'\');evt.target.setAttribute(\'y\', \''+hover_increase+'\');evt.target.setAttribute(\'width\', \''+size+'\');evt.target.setAttribute(\'height\', \''+size+'\');" ';}
html+='width="'+(size)+'" ';html+='height="'+(size)+'" ';}
html+='stroke="black" stroke-width="0" fill="'+fill_color+'" ';if(type=='circle'){}
html+='/>';html+='</svg>';return html;},htmlDecode:function(input){if(input){var e=document.createElement('div');e.innerHTML=input;return e.childNodes[0].nodeValue;}else{return input;}},parseDataList:function(list_string){var data=new Array();if(list_string&&(typeof list_string==='string'||list_string instanceof String)){var items=list_string.split(',');if(items.length>0){for(var i=0;i<items.length;i++){var fields=this.htmlDecode(items[i]);if(fields){fields=fields.split(';');}else{fields=[];}
var data_item={'x_value':null,'y_value':null,'label':null,'color':null};if(fields.length>=1){var field_data=fields[0].trim();if(field_data.charAt(0)=='#'||field_data.startsWith('rgb(')||field_data.startsWith('rgba(')){data_item['color']=field_data;}else{var pattern=new RegExp(/[(](.+)[:](.+)[)]/g);var res=pattern.test(field_data);if(res){var value_fields=field_data.substring(1,field_data.length-1).split(':');var numeric_value=parseFloat(value_fields[0]);if(isNaN(numeric_value)){data_item['x_value']=value_fields[0];}else{data_item['x_value']=numeric_value;}
var numeric_value=parseFloat(value_fields[1]);if(isNaN(numeric_value)){data_item['y_value']=value_fields[1];}else{data_item['y_value']=numeric_value;}}else{var numeric_value=parseFloat(field_data);if(isNaN(numeric_value)){data_item['y_value']=field_data;}else{data_item['y_value']=numeric_value;}}}}
if(fields.length>=2){var field_data=fields[1].trim();if(field_data.charAt(0)=='#'||field_data.startsWith('rgb(')||field_data.startsWith('rgba(')){data_item['color']=field_data;}else{data_item['label']=field_data;}}
if(fields.length>=3){var field_data=fields[2].trim();if(!data_item['color']&&(field_data.charAt(0)=='#'||field_data.startsWith('rgb(')||field_data.startsWith('rgba('))){data_item['color']=field_data;}else if(!data_item['label']){data_item['label']=field_data;}}
data.push(data_item);}}}
return data;},parseSegmentList:function(list_string){var data=new Array();if(list_string){var items=list_string.split(',');if(items.length>0){for(var i=0;i<items.length;i++){var fields=this.htmlDecode(items[i]).split(';');var data_item={'start_value':null,'stop_value':null,'label':null,'color':null};if(fields.length>=1){var field_data=fields[0].trim();var date_value=new Date(field_data).getTime()>0;if(date_value){data_item['start_value']=field_data;}else{var numeric_value=parseFloat(field_data);if(isNaN(numeric_value)){data_item['start_value']=field_data;}else{data_item['start_value']=numeric_value;}}}
if(fields.length>=2){var field_data=fields[1].trim();var date_value=new Date(field_data).getTime()>0;if(date_value){data_item['stop_value']=field_data;}else{var numeric_value=parseFloat(field_data);if(isNaN(numeric_value)){data_item['stop_value']=field_data;}else{data_item['stop_value']=numeric_value;}}}
if(fields.length>=3){var field_data=fields[2].trim();if(field_data.charAt(0)=='#'||field_data.startsWith('rgb(')||field_data.startsWith('rgba(')){data_item['color']=field_data;}else{data_item['label']=field_data;}}
if(fields.length>=4){var field_data=fields[3].trim();if(field_data.charAt(0)=='#'||field_data.startsWith('rgb(')||field_data.startsWith('rgba(')){data_item['color']=field_data;}else{data_item['label']=field_data;}}
data.push(data_item);}}}
return data;},parseNumericValue:function(value){var pattern_interval=new RegExp(/([+-]?([0-9]*[.])?[0-9]+)(\s+)[(]([+-]?([0-9]*[.])?[0-9]+)(\s+)[-](\s+)([+-]?([0-9]*[.])?[0-9]+)[)]/);var pattern_plusminus=new RegExp(/([+-]?([0-9]*[.])?[0-9]+)(\s+)?[±](\s+)?(([0-9]*[.])?[0-9]+)/);var matches;if((matches=pattern_interval.exec(value))!==null){return{value:this.convertValue(matches[1]),value_min:this.convertValue(matches[4]),value_max:this.convertValue(matches[8])}}else if((matches=pattern_plusminus.exec(value))!==null){return{value:this.convertValue(matches[1]),value_min:this.convertValue(matches[1])-this.convertValue(matches[5]),value_max:this.convertValue(matches[1])+this.convertValue(matches[5]),}}else{return{value:this.convertValue(value),value_min:null,value_max:null}}},cleanFieldValue:function(value){return $("<div/>").html(value).text().trim().replace(/<(?:.|\n)*?>/gm,'').replace('_',' ');},valueSorter:function(a,b,direction){direction=typeof direction!=='undefined'?direction:'asc';a=this.cleanFieldValue(a);b=this.cleanFieldValue(b);a=this.convertValue(a,-Infinity);b=this.convertValue(b,-Infinity);if(direction==='asc'){if(a<b){return-1;}
if(a>b){return 1;}
return 0;}else{if(a<b){return 1;}
if(a>b){return-1;}
return 0;}},convertValue:function(value,default_value){if(!jQuery.isNumeric(value)||(jQuery.isNumeric(value)&&typeof value==="string")){if(moment(value,this.options.time.valid_formats,true).isValid()&&!jQuery.isNumeric(value)){value=moment(value).unix();}else{if(value){if(value.trim()){var float_value=parseFloat(value.replace('%',''));if(!isNaN(float_value)){value=float_value;}}else{value=default_value;}}else{value=default_value;}}}
return value;},injectValuePostfix:function(value,postfix){var pattern_interval=new RegExp(/([+-]?([0-9]*[.])?[0-9]+)(\s+)[(]([+-]?([0-9]*[.])?[0-9]+)(\s+)[-](\s+)([+-]?([0-9]*[.])?[0-9]+)[)]/);var pattern_plusminus=new RegExp(/([+-]?([0-9]*[.])?[0-9]+)(\s+)?[±](\s+)?(([0-9]*[.])?[0-9]+)/);var matches;if((matches=pattern_interval.exec(value))!==null){return matches[1]+' '+postfix+' ('+matches[4]+' - '+matches[8]+')';}else if((matches=pattern_plusminus.exec(value))!==null){return matches[1]+' '+postfix+' ±'+matches[5];}else{return value+' '+postfix;}},addNumberPrefix:function(value,min){min=min||1e3;if(value>=min){var units=["k","M","B","T"];var order=Math.floor(Math.log(value)/Math.log(1000));return Math.floor(value/Math.pow(1000,order))+units[(order-1)];}
return value.toLocaleString();},getParameterItem:function(element,key){if(element instanceof jQuery&&typeof element.data==='function'){if(typeof element.data(key)!=='undefined'){return element.data(key);}}else if(element instanceof Object&&element.hasOwnProperty(this.camelCase(key))){return element[this.camelCase(key)];}else if(element instanceof Object&&element.hasOwnProperty(key)){return element[key];}},camelCase:function(label){return label.replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/ig,function(all,letter){return(letter+"").toUpperCase();});},colorCode:function(color_code,opacity){if(typeof opacity==='undefined'){opacity=1.0;}
if(color_code.charAt(0)==='#'){return this.hexToRGB(color_code,opacity).css;}else if(color_code.startsWith('rgb(')||color_code.startsWith('rgba(')){return this.hexToRGB(this.RGBToHex(color_code),opacity).css;}},hexToRGB:function(hex,opacity){hex=(hex+'').trim();var rgb=null;var match=hex.match(/^#?(([0-9a-zA-Z]{3}){1,3})$/);if(!match){this.log('Unknown color code HEX['+hex+']');return null;}
rgb={};hex=match[1];if(hex.length==6){rgb.r=parseInt(hex.substring(0,2),16);rgb.g=parseInt(hex.substring(2,4),16);rgb.b=parseInt(hex.substring(4,6),16);}else if(hex.length==3){rgb.r=parseInt(hex.substring(0,1)+hex.substring(0,1),16);rgb.g=parseInt(hex.substring(1,2)+hex.substring(1,2),16);rgb.b=parseInt(hex.substring(2,3)+hex.substring(2,3),16);}
rgb.css='rgb'+(opacity?'a':'')+'(';rgb.css+=rgb.r+','+rgb.g+','+rgb.b;rgb.css+=(opacity?','+opacity:'')+')';return rgb;},RGBToHex:function(rgb){rgb=rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(rgb&&rgb.length===4)?"#"+
("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+
("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+
("0"+parseInt(rgb[3],10).toString(16)).slice(-2):'';},};function getRank(index){if(typeof $(this).data(pluginName)!=='undefined'){return $(this).data(pluginName).getRank(index);}else{return'';}}
function updateChart(){$(this).data(pluginName).updateChart();}
jQuery.fn[pluginName]=function(options){var element=$(this);var name=pluginName;if(options===undefined||typeof options==='object'){return this.map(function(){var $t=$(this);var object=$t.data(name);if(undefined==object){var plugin=new Plugin(element,jQuery.extend(true,{},defaults,options),name);$t.data(name,plugin);}});}else if(typeof options==='string'){var args=Array.prototype.slice.call(arguments);args.splice(0,1);return commands[arguments[0]].apply(element,args);}}}(jQuery,window,document));